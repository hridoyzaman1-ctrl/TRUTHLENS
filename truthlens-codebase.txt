

--- FILE START: .dockerignore ---
node_modules
dist
.git
.gitignore
Dockerfile
logs
*.log

--- FILE END: .dockerignore ---


--- FILE START: .gitignore ---
# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*
pnpm-debug.log*
lerna-debug.log*

node_modules
dist
dist-ssr
*.local

# Editor directories and files
.vscode/*
!.vscode/extensions.json
.idea
.DS_Store
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?

--- FILE END: .gitignore ---


--- FILE START: components.json ---
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/index.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}

--- FILE END: components.json ---


--- FILE START: Dockerfile ---
FROM node:20-slim

# Set working directory
WORKDIR /app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install

# Copy source code
COPY . .

# Build the application
RUN npm run build

# Expose the port the app runs on
EXPOSE 8080

# Start the application
CMD ["npm", "start"]

--- FILE END: Dockerfile ---


--- FILE START: eslint.config.js ---
import js from "@eslint/js";
import globals from "globals";
import reactHooks from "eslint-plugin-react-hooks";
import reactRefresh from "eslint-plugin-react-refresh";
import tseslint from "typescript-eslint";

export default tseslint.config(
  { ignores: ["dist"] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ["**/*.{ts,tsx}"],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      "react-hooks": reactHooks,
      "react-refresh": reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      "react-refresh/only-export-components": ["warn", { allowConstantExport: true }],
      "@typescript-eslint/no-unused-vars": "off",
    },
  },
);

--- FILE END: eslint.config.js ---


--- FILE START: index.html ---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- TODO: Set the document title to the name of your application -->
    <title>Lovable App</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <!-- TODO: Update og:title to match your application name -->
    <meta property="og:title" content="Lovable App" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Lovable" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

--- FILE END: index.html ---


--- FILE START: merge_codebase.cjs ---

const fs = require('fs');
const path = require('path');

const outputFile = 'truthlens-codebase.txt';
const rootDir = '.';

const imageExtensions = ['.png', '.jpg', '.jpeg', '.gif', '.ico', '.svg', '.webp'];
const binaryExtensions = ['.exe', '.dll', '.bin', '.zip', '.node'];
const excludedDirs = ['node_modules', '.git', 'dist', '.gemini', 'coverage'];
const excludedFiles = ['package-lock.json', 'truthlens-export.zip', outputFile, '.DS_Store'];

function isExcluded(filePath) {
    const relativePath = path.relative(rootDir, filePath);
    const parts = relativePath.split(path.sep);

    // Check excluded directories
    for (const part of parts) {
        if (excludedDirs.includes(part)) return true;
    }

    // Check excluded files
    if (excludedFiles.includes(path.basename(filePath))) return true;

    // Check extensions
    const ext = path.extname(filePath).toLowerCase();
    if (imageExtensions.includes(ext) || binaryExtensions.includes(ext)) return true;

    return false;
}

function processDirectory(directory, stream) {
    const items = fs.readdirSync(directory);

    for (const item of items) {
        const fullPath = path.join(directory, item);
        const stat = fs.statSync(fullPath);

        if (stat.isDirectory()) {
            if (!isExcluded(fullPath)) {
                processDirectory(fullPath, stream);
            }
        } else {
            if (!isExcluded(fullPath)) {
                try {
                    const content = fs.readFileSync(fullPath, 'utf8');
                    stream.write(`\n\n--- FILE START: ${path.relative(rootDir, fullPath)} ---\n`);
                    stream.write(content);
                    stream.write(`\n--- FILE END: ${path.relative(rootDir, fullPath)} ---\n`);
                } catch (err) {
                    console.error(`Error reading ${fullPath}:`, err.message);
                }
            }
        }
    }
}

const stream = fs.createWriteStream(outputFile);
console.log('Generating codebase file...');
processDirectory(rootDir, stream);
stream.end();
console.log(`Successfully created ${outputFile}`);

--- FILE END: merge_codebase.cjs ---


--- FILE START: package.json ---
{
  "name": "vite_react_shadcn_ts",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "build:dev": "vite build --mode development",
    "start": "node server.js",
    "lint": "eslint .",
    "preview": "vite preview",
    "test": "vitest run",
    "test:watch": "vitest"
  },
  "dependencies": {
    "@dnd-kit/core": "^6.3.1",
    "@dnd-kit/sortable": "^10.0.0",
    "@dnd-kit/utilities": "^3.2.2",
    "@hookform/resolvers": "^3.10.0",
    "@radix-ui/react-accordion": "^1.2.11",
    "@radix-ui/react-alert-dialog": "^1.1.14",
    "@radix-ui/react-aspect-ratio": "^1.1.7",
    "@radix-ui/react-avatar": "^1.1.10",
    "@radix-ui/react-checkbox": "^1.3.2",
    "@radix-ui/react-collapsible": "^1.1.11",
    "@radix-ui/react-context-menu": "^2.2.15",
    "@radix-ui/react-dialog": "^1.1.14",
    "@radix-ui/react-dropdown-menu": "^2.1.15",
    "@radix-ui/react-hover-card": "^1.1.14",
    "@radix-ui/react-label": "^2.1.7",
    "@radix-ui/react-menubar": "^1.1.15",
    "@radix-ui/react-navigation-menu": "^1.2.13",
    "@radix-ui/react-popover": "^1.1.14",
    "@radix-ui/react-progress": "^1.1.7",
    "@radix-ui/react-radio-group": "^1.3.7",
    "@radix-ui/react-scroll-area": "^1.2.9",
    "@radix-ui/react-select": "^2.2.5",
    "@radix-ui/react-separator": "^1.1.7",
    "@radix-ui/react-slider": "^1.3.5",
    "@radix-ui/react-slot": "^1.2.3",
    "@radix-ui/react-switch": "^1.2.5",
    "@radix-ui/react-tabs": "^1.1.12",
    "@radix-ui/react-toast": "^1.2.14",
    "@radix-ui/react-toggle": "^1.1.9",
    "@radix-ui/react-toggle-group": "^1.1.10",
    "@radix-ui/react-tooltip": "^1.2.7",
    "@table-library/react-table-library": "^4.1.7",
    "@tailwindcss/typography": "^0.5.16",
    "@tanstack/react-query": "^5.83.0",
    "@types/node": "^22.16.5",
    "@types/react": "^18.3.23",
    "@types/react-dom": "^18.3.7",
    "@vitejs/plugin-react-swc": "^3.11.0",
    "autoprefixer": "^10.4.21",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "cmdk": "^1.1.1",
    "date-fns": "^3.6.0",
    "embla-carousel-react": "^8.6.0",
    "express": "^4.22.1",
    "framer-motion": "^12.26.2",
    "input-otp": "^1.4.2",
    "lovable-tagger": "^1.1.13",
    "lucide-react": "^0.462.0",
    "next-themes": "^0.3.0",
    "pg": "^8.17.1",
    "postcss": "^8.5.6",
    "react": "^18.3.1",
    "react-day-picker": "^8.10.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.61.1",
    "react-resizable-panels": "^2.1.9",
    "react-router-dom": "^6.30.1",
    "recharts": "^2.15.4",
    "sonner": "^1.7.4",
    "tailwind-merge": "^2.6.0",
    "tailwindcss": "^3.4.17",
    "tailwindcss-animate": "^1.0.7",
    "typescript": "^5.8.3",
    "vaul": "^0.9.9",
    "vite": "^5.4.19",
    "zod": "^3.25.76"
  },
  "devDependencies": {
    "@eslint/js": "^9.32.0",
    "@testing-library/jest-dom": "^6.6.0",
    "@testing-library/react": "^16.0.0",
    "eslint": "^9.32.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.20",
    "globals": "^15.15.0",
    "jsdom": "^20.0.3",
    "typescript-eslint": "^8.38.0",
    "vitest": "^3.2.4"
  }
}
--- FILE END: package.json ---


--- FILE START: postcss.config.js ---
export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
};

--- FILE END: postcss.config.js ---


--- FILE START: public\robots.txt ---
User-agent: Googlebot
Allow: /

User-agent: Bingbot
Allow: /

User-agent: Twitterbot
Allow: /

User-agent: facebookexternalhit
Allow: /

User-agent: *
Allow: /

--- FILE END: public\robots.txt ---


--- FILE START: README.md ---
# Welcome to your Lovable project

## Project info

**URL**: https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID

## How can I edit this code?

There are several ways of editing your application.

**Use Lovable**

Simply visit the [Lovable Project](https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID) and start prompting.

Changes made via Lovable will be committed automatically to this repo.

**Use your preferred IDE**

If you want to work locally using your own IDE, you can clone this repo and push changes. Pushed changes will also be reflected in Lovable.

The only requirement is having Node.js & npm installed - [install with nvm](https://github.com/nvm-sh/nvm#installing-and-updating)

Follow these steps:

```sh
# Step 1: Clone the repository using the project's Git URL.
git clone <YOUR_GIT_URL>

# Step 2: Navigate to the project directory.
cd <YOUR_PROJECT_NAME>

# Step 3: Install the necessary dependencies.
npm i

# Step 4: Start the development server with auto-reloading and an instant preview.
npm run dev
```

**Edit a file directly in GitHub**

- Navigate to the desired file(s).
- Click the "Edit" button (pencil icon) at the top right of the file view.
- Make your changes and commit the changes.

**Use GitHub Codespaces**

- Navigate to the main page of your repository.
- Click on the "Code" button (green button) near the top right.
- Select the "Codespaces" tab.
- Click on "New codespace" to launch a new Codespace environment.
- Edit files directly within the Codespace and commit and push your changes once you're done.

## What technologies are used for this project?

This project is built with:

- Vite
- TypeScript
- React
- shadcn-ui
- Tailwind CSS

## How can I deploy this project?

Simply open [Lovable](https://lovable.dev/projects/REPLACE_WITH_PROJECT_ID) and click on Share -> Publish.

## Can I connect a custom domain to my Lovable project?

Yes, you can!

To connect a domain, navigate to Project > Settings > Domains and click Connect Domain.

Read more here: [Setting up a custom domain](https://docs.lovable.dev/features/custom-domain#custom-domain)

--- FILE END: README.md ---


--- FILE START: server.js ---
import express from 'express';
import path from 'path';
import { fileURLToPath } from 'url';
import fs from 'fs';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const app = express();
const PORT = process.env.PORT || 8080;

// Health check endpoint (critical for deployment platforms)
app.get('/health', (req, res) => {
    res.status(200).send('OK');
});

// Verify dist folder exists before trying to serve it
const distPath = path.join(__dirname, 'dist');
if (fs.existsSync(distPath)) {
    app.use(express.static(distPath));
} else {
    console.error('WARNING: dist directory not found. Run `npm run build` before starting the server.');
}

// Handle SPA routing
app.get('*', (req, res) => {
    const indexPath = path.join(distPath, 'index.html');
    if (fs.existsSync(indexPath)) {
        res.sendFile(indexPath);
    } else {
        res.status(500).send('Application not built. Please check build logs.');
    }
});

app.listen(PORT, '0.0.0.0', () => {
    console.log(`Server running on port ${PORT}`);
    console.log(`Serving static files from: ${distPath}`);
});

--- FILE END: server.js ---


--- FILE START: src\App.css ---
#root {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  text-align: center;
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

--- FILE END: src\App.css ---


--- FILE START: src\App.tsx ---
import { Toaster } from "@/components/ui/toaster";
import { Toaster as Sonner } from "@/components/ui/sonner";
import { TooltipProvider } from "@/components/ui/tooltip";
import { QueryClient, QueryClientProvider } from "@tanstack/react-query";
import { BrowserRouter, Routes, Route } from "react-router-dom";
import { ThemeProvider } from "@/context/ThemeContext";
import { AdminAuthProvider } from "@/context/AdminAuthContext";
import { ActivityLogProvider } from "@/context/ActivityLogContext";
import ScrollToTop from "@/components/ScrollToTop";
import Index from "./pages/Index";
import NotFound from "./pages/NotFound";
import CategoryPage from "./pages/CategoryPage";
import ArticlePage from "./pages/ArticlePage";
import AboutPage from "./pages/AboutPage";
import ContactPage from "./pages/ContactPage";
import CareersPage from "./pages/CareersPage";
import InternshipPage from "./pages/InternshipPage";
import PrivacyPage from "./pages/PrivacyPage";
import TermsPage from "./pages/TermsPage";
import SearchPage from "./pages/SearchPage";
import AdminLayout from "./pages/admin/AdminLayout";
import AdminLogin from "./pages/admin/AdminLogin";
import AdminDashboard from "./pages/admin/AdminDashboard";
import AdminArticles from "./pages/admin/AdminArticles";
import AdminCategories from "./pages/admin/AdminCategories";
import AdminMedia from "./pages/admin/AdminMedia";
import AdminJobs from "./pages/admin/AdminJobs";
import AdminSettings from "./pages/admin/AdminSettings";
import AdminUsers from "./pages/admin/AdminUsers";
import AdminFeatured from "./pages/admin/AdminFeatured";
import AdminEditorial from "./pages/admin/AdminEditorial";
import AdminSections from "./pages/admin/AdminSections";
import AdminMenu from "./pages/admin/AdminMenu";
import AdminComments from "./pages/admin/AdminComments";
import AdminContactInfo from "./pages/admin/AdminContactInfo";
import AdminActivityLog from "./pages/admin/AdminActivityLog";
import AdminProfile from "./pages/admin/AdminProfile";
import AdminInternships from "./pages/admin/AdminInternships";
import TeamPage from "./pages/TeamPage";
import AdminTeam from "./pages/admin/AdminTeam";

const queryClient = new QueryClient();

const App = () => (
  <QueryClientProvider client={queryClient}>
    <ThemeProvider>
      <AdminAuthProvider>
        <ActivityLogProvider>
          <TooltipProvider>
            <Toaster />
            <Sonner />
            <BrowserRouter>
              <ScrollToTop />
              <Routes>
                <Route path="/" element={<Index />} />
                <Route path="/category/:categoryId" element={<CategoryPage />} />
                <Route path="/article/:slug" element={<ArticlePage />} />
                <Route path="/about" element={<AboutPage />} />
                <Route path="/contact" element={<ContactPage />} />
                <Route path="/careers" element={<CareersPage />} />
                <Route path="/internship" element={<InternshipPage />} />
                <Route path="/team" element={<TeamPage />} />
                <Route path="/privacy" element={<PrivacyPage />} />
                <Route path="/terms" element={<TermsPage />} />
                <Route path="/search" element={<SearchPage />} />
                <Route path="/admin/login" element={<AdminLogin />} />
                <Route path="/admin" element={<AdminLayout />}>
                  <Route index element={<AdminDashboard />} />
                  <Route path="featured" element={<AdminFeatured />} />
                  <Route path="sections" element={<AdminSections />} />
                  <Route path="menu" element={<AdminMenu />} />
                  <Route path="editorial" element={<AdminEditorial />} />
                  <Route path="articles" element={<AdminArticles />} />
                  <Route path="comments" element={<AdminComments />} />
                  <Route path="contact-info" element={<AdminContactInfo />} />
                  <Route path="categories" element={<AdminCategories />} />
                  <Route path="media" element={<AdminMedia />} />
                  <Route path="users" element={<AdminUsers />} />
                  <Route path="team" element={<AdminTeam />} />
                  <Route path="jobs" element={<AdminJobs />} />
                  <Route path="internships" element={<AdminInternships />} />
                  <Route path="settings" element={<AdminSettings />} />
                  <Route path="profile" element={<AdminProfile />} />
                  <Route path="activity" element={<AdminActivityLog />} />
                </Route>
                <Route path="*" element={<NotFound />} />
              </Routes>
            </BrowserRouter>
          </TooltipProvider>
        </ActivityLogProvider>
      </AdminAuthProvider>
    </ThemeProvider>
  </QueryClientProvider>
);

export default App;

--- FILE END: src\App.tsx ---


--- FILE START: src\components\layout\Footer.tsx ---
import { Link } from 'react-router-dom';
import { Facebook, Twitter, Instagram, Youtube, Linkedin, MessageCircle, Send, Mail, Share2, Phone, MapPin } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { socialMediaLinks, siteSettings } from '@/data/mockData';
import { contactInfoData } from '@/data/siteContactData';
import logo from '@/assets/truthlens-logo.png';

export const Footer = () => {
  const visibleSocialLinks = socialMediaLinks.filter(link => link.isVisible && link.url);
  const footerContacts = contactInfoData.filter(c => c.isVisible && c.showInFooter).sort((a, b) => a.order - b.order);

  const getContactIcon = (type: string) => {
    switch (type) {
      case 'email': return <Mail className="mt-0.5 h-4 w-4 flex-shrink-0" />;
      case 'phone': return <Phone className="mt-0.5 h-4 w-4 flex-shrink-0" />;
      case 'address': return <MapPin className="mt-0.5 h-4 w-4 flex-shrink-0" />;
      default: return <Mail className="mt-0.5 h-4 w-4 flex-shrink-0" />;
    }
  };

  const getSocialIcon = (platform: string) => {
    const iconProps = { className: "h-5 w-5" };
    switch (platform) {
      case 'facebook': return <Facebook {...iconProps} />;
      case 'twitter': return <Twitter {...iconProps} />;
      case 'instagram': return <Instagram {...iconProps} />;
      case 'youtube': return <Youtube {...iconProps} />;
      case 'linkedin': return <Linkedin {...iconProps} />;
      case 'tiktok': return <span className="text-base">ðŸ“±</span>;
      case 'whatsapp': return <MessageCircle {...iconProps} />;
      case 'telegram': return <Send {...iconProps} />;
      default: return <Share2 {...iconProps} />;
    }
  };

  const getPlatformName = (platform: string) => {
    const names: Record<string, string> = {
      facebook: 'Facebook',
      twitter: 'X (Twitter)',
      instagram: 'Instagram',
      youtube: 'YouTube',
      linkedin: 'LinkedIn',
      tiktok: 'TikTok',
      whatsapp: 'WhatsApp',
      telegram: 'Telegram',
    };
    return names[platform] || platform;
  };

  return (
    <footer className="border-t border-border bg-card">
      {/* Newsletter Section */}
      <div className="bg-primary py-12">
        <div className="container mx-auto px-4 text-center">
          <h3 className="font-display text-2xl font-bold text-primary-foreground md:text-3xl">
            Stay Informed
          </h3>
          <p className="mt-2 text-primary-foreground/80">
            Subscribe to our newsletter for the latest stories delivered to your inbox.
          </p>
          <form className="mx-auto mt-6 flex max-w-md flex-col gap-3 sm:flex-row">
            <input
              type="email"
              placeholder="Enter your email"
              className="flex-1 rounded-lg border-0 bg-primary-foreground px-4 py-3 text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"
            />
            <Button className="bg-accent text-accent-foreground hover:bg-accent/90">
              Subscribe
            </Button>
          </form>
        </div>
      </div>

      {/* Main Footer */}
      <div className="container mx-auto px-4 py-12">
        <div className="grid gap-8 md:grid-cols-2 lg:grid-cols-4">
          {/* Brand */}
          <div>
            <Link to="/" className="flex items-center">
              <img src={logo} alt={siteSettings.siteName} className="h-10 w-auto object-contain" />
            </Link>
            <p className="mt-4 text-sm text-muted-foreground">
              {siteSettings.tagline} {siteSettings.siteDescription}
            </p>
            {visibleSocialLinks.length > 0 && (
              <div className="mt-6 flex flex-wrap gap-3">
                {visibleSocialLinks.map((link) => (
                  <a 
                    key={link.id}
                    href={link.url} 
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-muted-foreground transition-colors hover:text-primary"
                    title={getPlatformName(link.platform)}
                    aria-label={`Follow us on ${getPlatformName(link.platform)}`}
                  >
                    {getSocialIcon(link.platform)}
                  </a>
                ))}
              </div>
            )}
          </div>

          {/* Categories */}
          <div>
            <h4 className="font-display text-lg font-semibold text-foreground">Categories</h4>
            <ul className="mt-4 space-y-2">
              <li><Link to="/category/national" className="text-sm text-muted-foreground hover:text-foreground">National</Link></li>
              <li><Link to="/category/international" className="text-sm text-muted-foreground hover:text-foreground">International</Link></li>
              <li><Link to="/category/economy" className="text-sm text-muted-foreground hover:text-foreground">Economy</Link></li>
              <li><Link to="/category/sports" className="text-sm text-muted-foreground hover:text-foreground">Sports</Link></li>
              <li><Link to="/category/technology" className="text-sm text-muted-foreground hover:text-foreground">Technology</Link></li>
              <li><Link to="/category/untold-stories" className="text-sm font-medium text-accent hover:text-accent/80">Untold Stories</Link></li>
            </ul>
          </div>

          {/* Company */}
          <div>
            <h4 className="font-display text-lg font-semibold text-foreground">Company</h4>
            <ul className="mt-4 space-y-2">
              <li><Link to="/about" className="text-sm text-muted-foreground hover:text-foreground">About Us</Link></li>
              <li><Link to="/careers" className="text-sm text-muted-foreground hover:text-foreground">Careers</Link></li>
              <li><Link to="/contact" className="text-sm text-muted-foreground hover:text-foreground">Contact Us</Link></li>
              <li><Link to="/privacy" className="text-sm text-muted-foreground hover:text-foreground">Privacy Policy</Link></li>
              <li><Link to="/terms" className="text-sm text-muted-foreground hover:text-foreground">Terms of Use</Link></li>
            </ul>
          </div>

          {/* Contact & Social */}
          <div>
            <h4 className="font-display text-lg font-semibold text-foreground">Connect With Us</h4>
            <ul className="mt-4 space-y-3">
              {footerContacts.length > 0 ? (
                footerContacts.map((contact) => (
                  <li key={contact.id} className="flex items-start gap-2 text-sm text-muted-foreground">
                    {getContactIcon(contact.type)}
                    {contact.type === 'email' ? (
                      <a href={`mailto:${contact.value}`} className="hover:text-foreground transition-colors">
                        {contact.value}
                      </a>
                    ) : contact.type === 'phone' ? (
                      <a href={`tel:${contact.value.replace(/\D/g, '')}`} className="hover:text-foreground transition-colors">
                        {contact.value}
                      </a>
                    ) : (
                      <span className="whitespace-pre-line">{contact.value}</span>
                    )}
                  </li>
                ))
              ) : (
                <li className="flex items-start gap-2 text-sm text-muted-foreground">
                  <Mail className="mt-0.5 h-4 w-4 flex-shrink-0" />
                  <span>{siteSettings.contactEmail}</span>
                </li>
              )}
            </ul>
            
            {/* Social Links as Buttons */}
            {visibleSocialLinks.length > 0 && (
              <div className="mt-4 grid grid-cols-2 gap-2">
                {visibleSocialLinks.slice(0, 4).map((link) => (
                  <a
                    key={link.id}
                    href={link.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center gap-2 px-3 py-2 text-xs font-medium rounded-lg border border-border hover:bg-muted transition-colors"
                  >
                    {getSocialIcon(link.platform)}
                    <span className="truncate">{getPlatformName(link.platform)}</span>
                  </a>
                ))}
              </div>
            )}

            <div className="mt-4">
              <Link to="/contact">
                <Button variant="outline" className="w-full">
                  Get in Touch
                </Button>
              </Link>
            </div>
          </div>
        </div>
      </div>

      {/* Bottom Bar */}
      <div className="border-t border-border">
        <div className="container mx-auto flex flex-col items-center justify-between gap-4 px-4 py-6 sm:flex-row">
          <p className="text-sm text-muted-foreground">
            Â© {new Date().getFullYear()} {siteSettings.siteName}. All rights reserved.
          </p>
          <p className="text-sm text-muted-foreground">
            Built with integrity. Powered by truth.
          </p>
        </div>
      </div>
    </footer>
  );
};

--- FILE END: src\components\layout\Footer.tsx ---


--- FILE START: src\components\layout\Header.tsx ---
import { useState, useEffect } from 'react';
import { Link, useNavigate } from 'react-router-dom';
import { Menu, X, Search, User, ChevronDown, Calendar, Clock } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { ThemeToggle } from '@/components/ThemeToggle';
import { headerMenuItems, categories, articles } from '@/data/mockData';
import { motion, AnimatePresence } from 'framer-motion';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import logo from '@/assets/truthlens-logo.png';

// Live Clock Component
const LiveClock = ({ className = '' }: { className?: string }) => {
  const [time, setTime] = useState(new Date());

  useEffect(() => {
    const timer = setInterval(() => {
      setTime(new Date());
    }, 60000); // Update every minute

    return () => clearInterval(timer);
  }, []);

  return (
    <span className={className}>
      {time.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}
    </span>
  );
};

export const Header = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [isSearchOpen, setIsSearchOpen] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [currentDate, setCurrentDate] = useState(new Date());
  const navigate = useNavigate();

  // Update date at midnight
  useEffect(() => {
    const now = new Date();
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(0, 0, 0, 0);
    const msUntilMidnight = tomorrow.getTime() - now.getTime();

    const timer = setTimeout(() => {
      setCurrentDate(new Date());
    }, msUntilMidnight);

    return () => clearTimeout(timer);
  }, [currentDate]);

  const visibleMenuItems = headerMenuItems
    .filter(item => item.isVisible)
    .sort((a, b) => a.order - b.order);

  // Items explicitly marked for main nav, rest go to "More"
  const mainNavItems = visibleMenuItems.filter(item => item.showInMainNav === true);
  const moreNavItems = visibleMenuItems.filter(item => item.showInMainNav !== true);

  const formattedDate = currentDate.toLocaleDateString('en-US', { 
    weekday: 'long', 
    year: 'numeric', 
    month: 'long', 
    day: 'numeric' 
  });

  return (
    <header className="sticky top-0 z-50 w-full border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      {/* Top Bar - Hidden on mobile for cleaner look */}
      <div className="border-b border-border bg-primary hidden sm:block">
        <div className="container mx-auto flex h-8 items-center justify-between px-4 text-xs text-primary-foreground">
          <span className="font-medium">Authentic Stories. Unbiased Voices.</span>
          <div className="flex items-center gap-3">
            <span className="flex items-center gap-1.5">
              <Calendar className="h-3 w-3" />
              {formattedDate}
            </span>
            <span className="text-primary-foreground/60">|</span>
            <span className="flex items-center gap-1.5">
              <Clock className="h-3 w-3" />
              <LiveClock />
            </span>
          </div>
        </div>
      </div>

      {/* Main Header */}
      <div className="container mx-auto px-4">
        <div className="flex h-16 items-center justify-between">
          {/* Mobile Menu Button */}
          <Button
            variant="ghost"
            size="icon"
            className="lg:hidden"
            onClick={() => setIsMenuOpen(!isMenuOpen)}
          >
            {isMenuOpen ? <X className="h-5 w-5" /> : <Menu className="h-5 w-5" />}
          </Button>

          {/* Logo - Larger sizing with scroll to top */}
          <Link 
            to="/" 
            className="flex items-center"
            onClick={(e) => {
              // If already on homepage, scroll to top
              if (window.location.pathname === '/') {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
              }
            }}
          >
            <img 
              src={logo} 
              alt="TruthLens" 
              className="h-10 w-auto sm:h-12 md:h-14 lg:h-16 object-contain" 
            />
          </Link>

          {/* Desktop Navigation */}
          <nav className="hidden lg:flex lg:items-center lg:gap-1">
            {mainNavItems.map((item) => (
              <Link
                key={item.id}
                to={item.path}
                className={`px-3 py-2 text-sm font-medium transition-colors flex items-center gap-1 ${
                  item.highlight 
                    ? 'font-semibold text-primary hover:text-primary/80' 
                    : 'text-muted-foreground hover:text-foreground'
                }`}
              >
                {item.icon && <span>{item.icon}</span>}
                {item.label}
              </Link>
            ))}
            
            {/* More Dropdown */}
            {moreNavItems.length > 0 && (
              <DropdownMenu>
                <DropdownMenuTrigger asChild>
                  <Button variant="ghost" className="px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground flex items-center gap-1">
                    More
                    <ChevronDown className="h-4 w-4" />
                  </Button>
                </DropdownMenuTrigger>
                <DropdownMenuContent align="end" className="w-48 bg-background border border-border shadow-lg z-50">
                  {moreNavItems.map((item) => (
                    <DropdownMenuItem key={item.id} asChild>
                      <Link
                        to={item.path}
                        className={`w-full flex items-center gap-2 ${
                          item.highlight ? 'font-semibold text-primary' : ''
                        }`}
                      >
                        {item.icon && <span>{item.icon}</span>}
                        {item.label}
                      </Link>
                    </DropdownMenuItem>
                  ))}
                  <DropdownMenuItem asChild>
                    <Link to="/about" className="w-full">About Us</Link>
                  </DropdownMenuItem>
                  <DropdownMenuItem asChild>
                    <Link to="/careers" className="w-full">Careers</Link>
                  </DropdownMenuItem>
                  <DropdownMenuItem asChild>
                    <Link to="/contact" className="w-full">Contact</Link>
                  </DropdownMenuItem>
                </DropdownMenuContent>
              </DropdownMenu>
            )}
          </nav>

          {/* Actions */}
          <div className="flex items-center gap-2">
            <Button
              variant="ghost"
              size="icon"
              onClick={() => setIsSearchOpen(!isSearchOpen)}
              className="h-9 w-9"
            >
              <Search className="h-5 w-5" />
            </Button>
            <ThemeToggle />
            <Link to="/admin">
              <Button variant="ghost" size="icon" className="h-9 w-9">
                <User className="h-5 w-5" />
              </Button>
            </Link>
          </div>
        </div>
      </div>

      {/* Search Bar with Functionality */}
      <AnimatePresence>
        {isSearchOpen && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            className="border-t border-border overflow-hidden"
          >
            <div className="container mx-auto px-4 py-4">
              <form 
                onSubmit={(e) => {
                  e.preventDefault();
                  if (searchQuery.trim()) {
                    // Find matching articles
                    const results = articles.filter(a => 
                      a.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      a.excerpt.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      a.category.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      a.tags.some(t => t.toLowerCase().includes(searchQuery.toLowerCase()))
                    );
                    if (results.length > 0) {
                      navigate(`/article/${results[0].slug}`);
                      setSearchQuery('');
                      setIsSearchOpen(false);
                    }
                  }
                }}
                className="relative"
              >
                <Search className="absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground" />
                <input
                  type="search"
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  placeholder="Search articles, topics, authors..."
                  className="w-full rounded-lg border border-input bg-background py-3 pl-10 pr-4 text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring"
                  autoFocus
                />
              </form>
              
              {/* Search Results Preview */}
              {searchQuery.trim() && (
                <div className="mt-2 max-h-64 overflow-y-auto rounded-lg border border-border bg-card shadow-lg">
                  {articles
                    .filter(a => 
                      a.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      a.excerpt.toLowerCase().includes(searchQuery.toLowerCase()) ||
                      a.category.toLowerCase().includes(searchQuery.toLowerCase())
                    )
                    .slice(0, 5)
                    .map((article) => (
                      <Link
                        key={article.id}
                        to={`/article/${article.slug}`}
                        className="flex items-center gap-3 p-3 hover:bg-muted transition-colors border-b border-border last:border-0"
                        onClick={() => {
                          setSearchQuery('');
                          setIsSearchOpen(false);
                        }}
                      >
                        <img 
                          src={article.featuredImage} 
                          alt={article.title}
                          className="h-12 w-16 object-cover rounded"
                        />
                        <div className="flex-1 min-w-0">
                          <p className="text-sm font-medium text-foreground truncate">{article.title}</p>
                          <p className="text-xs text-muted-foreground capitalize">{article.category.replace('-', ' ')}</p>
                        </div>
                      </Link>
                    ))}
                  
                  {/* View All Results Link */}
                  <Link
                    to={`/search?q=${encodeURIComponent(searchQuery)}`}
                    className="flex items-center justify-center gap-2 p-3 text-sm font-medium text-primary hover:bg-muted transition-colors border-t border-border"
                    onClick={() => {
                      setIsSearchOpen(false);
                    }}
                  >
                    <Search className="h-4 w-4" />
                    View all results for "{searchQuery}"
                  </Link>
                  
                  {articles.filter(a => 
                    a.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
                    a.excerpt.toLowerCase().includes(searchQuery.toLowerCase())
                  ).length === 0 && (
                    <p className="p-4 text-sm text-muted-foreground text-center">No articles found</p>
                  )}
                </div>
              )}
            </div>
          </motion.div>
        )}
      </AnimatePresence>

      {/* Mobile Menu - Shows ALL items with improved styling */}
      <AnimatePresence>
        {isMenuOpen && (
          <motion.div
            initial={{ height: 0, opacity: 0 }}
            animate={{ height: 'auto', opacity: 1 }}
            exit={{ height: 0, opacity: 0 }}
            className="absolute top-full left-0 right-0 lg:hidden overflow-hidden z-50"
          >
            {/* Overlay backdrop */}
            <div className="absolute inset-0 bg-black/20" onClick={() => setIsMenuOpen(false)} />
            
            {/* Menu container with border and shadow */}
            <nav className="relative mx-3 my-2 flex flex-col bg-card border-2 border-border rounded-xl shadow-2xl max-h-[70vh] overflow-y-auto">
              {/* Date & Time Header with Live Clock */}
              <div className="px-4 pt-4 pb-3 border-b border-border bg-muted/30">
                <div className="flex items-center gap-2 text-xs text-muted-foreground">
                  <Calendar className="h-3.5 w-3.5" />
                  <span>{formattedDate}</span>
                </div>
                <div className="flex items-center gap-2 text-xs text-muted-foreground mt-1">
                  <Clock className="h-3.5 w-3.5" />
                  <LiveClock />
                </div>
              </div>
              
              {/* Categories section */}
              <div className="px-4 pt-3 pb-2">
                <div className="text-xs font-semibold text-primary uppercase tracking-wider mb-1">
                  Categories
                </div>
              </div>
              
              <div className="px-2">
                {visibleMenuItems.map((item) => (
                  <Link
                    key={item.id}
                    to={item.path}
                    className={`block mx-2 px-3 py-2.5 text-sm font-medium transition-colors rounded-lg flex items-center gap-2 ${
                      item.highlight 
                        ? 'text-primary font-semibold bg-primary/5 hover:bg-primary/10' 
                        : 'text-foreground hover:bg-muted hover:text-primary'
                    }`}
                    onClick={() => setIsMenuOpen(false)}
                  >
                    {item.icon && <span>{item.icon}</span>}
                    {item.label}
                  </Link>
                ))}
              </div>
              
              {/* Divider */}
              <div className="mx-4 my-2 border-t border-border" />
              
              {/* More section */}
              <div className="px-4 pb-1">
                <div className="text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-1">
                  More
                </div>
              </div>
              
              <div className="px-2 pb-3">
                <Link
                  to="/about"
                  className="block mx-2 px-3 py-2.5 text-sm font-medium text-foreground hover:bg-muted hover:text-primary rounded-lg transition-colors"
                  onClick={() => setIsMenuOpen(false)}
                >
                  About Us
                </Link>
                <Link
                  to="/careers"
                  className="block mx-2 px-3 py-2.5 text-sm font-medium text-foreground hover:bg-muted hover:text-primary rounded-lg transition-colors"
                  onClick={() => setIsMenuOpen(false)}
                >
                  Careers
                </Link>
                <Link
                  to="/contact"
                  className="block mx-2 px-3 py-2.5 text-sm font-medium text-foreground hover:bg-muted hover:text-primary rounded-lg transition-colors"
                  onClick={() => setIsMenuOpen(false)}
                >
                  Contact
                </Link>
              </div>
            </nav>
          </motion.div>
        )}
      </AnimatePresence>
    </header>
  );
};

--- FILE END: src\components\layout\Header.tsx ---


--- FILE START: src\components\layout\Layout.tsx ---
import { ReactNode } from 'react';
import { Header } from './Header';
import { Footer } from './Footer';
import PageTransition from '@/components/PageTransition';

interface LayoutProps {
  children: ReactNode;
}

export const Layout = ({ children }: LayoutProps) => {
  return (
    <div className="flex min-h-screen flex-col">
      <Header />
      <PageTransition>
        <main className="flex-1">{children}</main>
      </PageTransition>
      <Footer />
    </div>
  );
};

--- FILE END: src\components\layout\Layout.tsx ---


--- FILE START: src\components\NavLink.tsx ---
import { NavLink as RouterNavLink, NavLinkProps } from "react-router-dom";
import { forwardRef } from "react";
import { cn } from "@/lib/utils";

interface NavLinkCompatProps extends Omit<NavLinkProps, "className"> {
  className?: string;
  activeClassName?: string;
  pendingClassName?: string;
}

const NavLink = forwardRef<HTMLAnchorElement, NavLinkCompatProps>(
  ({ className, activeClassName, pendingClassName, to, ...props }, ref) => {
    return (
      <RouterNavLink
        ref={ref}
        to={to}
        className={({ isActive, isPending }) =>
          cn(className, isActive && activeClassName, isPending && pendingClassName)
        }
        {...props}
      />
    );
  },
);

NavLink.displayName = "NavLink";

export { NavLink };

--- FILE END: src\components\NavLink.tsx ---


--- FILE START: src\components\news\ArticleCard.tsx ---
import { Link } from 'react-router-dom';
import { Clock, Eye, PlayCircle } from 'lucide-react';
import { Badge } from '@/components/ui/badge';
import { Article } from '@/types/news';
import { formatDistanceToNow } from 'date-fns';
import { getYoutubeThumbnail, FALLBACK_IMAGE } from '@/lib/videoUtils';

interface ArticleCardProps {
  article: Article;
  variant?: 'default' | 'compact' | 'featured' | 'video';
}

export const ArticleCard = ({ article, variant = 'default' }: ArticleCardProps) => {
  const getCategoryColor = (category: string) => {
    const colors: Record<string, string> = {
      national: 'bg-blue-500',
      international: 'bg-purple-500',
      economy: 'bg-amber-500',
      environment: 'bg-emerald-500',
      technology: 'bg-cyan-500',
      culture: 'bg-pink-500',
      editorial: 'bg-slate-500',
      society: 'bg-orange-500',
      'untold-stories': 'bg-red-600',
      sports: 'bg-green-500',
      entertainment: 'bg-fuchsia-500',
    };
    return colors[category] || 'bg-primary';
  };

  const getDisplayImage = () => {
    if (article.featuredImage) return article.featuredImage;
    if (article.videoUrl) {
      const thumb = getYoutubeThumbnail(article.videoUrl);
      if (thumb) return thumb;
    }
    return FALLBACK_IMAGE;
  };

  const displayImage = getDisplayImage();

  if (variant === 'compact') {
    return (
      <Link
        to={`/article/${article.slug}`}
        className="group block overflow-hidden rounded-lg bg-card transition-shadow hover:shadow-md border border-border"
      >
        <div className="aspect-[16/9] overflow-hidden relative">
          <img
            src={displayImage}
            alt={article.title}
            className="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
            loading="lazy"
            onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
          />
          {article.hasVideo && (
            <div className="absolute top-1.5 right-1.5 flex items-center gap-1 bg-black/60 px-1.5 py-0.5 rounded-full">
              <PlayCircle className="h-2.5 w-2.5 text-white" />
              <span className="text-[9px] font-medium text-white">Video</span>
            </div>
          )}
          <Badge className={`absolute bottom-1.5 left-1.5 ${getCategoryColor(article.category)} text-white border-0 text-[9px] px-1.5 py-0`}>
            {article.category.replace('-', ' ')}
          </Badge>
        </div>
        <div className="p-2.5">
          <h4 className="line-clamp-2 text-xs font-semibold text-foreground group-hover:text-primary transition-colors leading-tight">
            {article.title}
          </h4>
          <span className="text-[10px] text-muted-foreground mt-1 block">
            {formatDistanceToNow(article.publishedAt, { addSuffix: true })}
          </span>
        </div>
      </Link>
    );
  }

  if (variant === 'featured') {
    return (
      <Link
        to={`/article/${article.slug}`}
        className="group relative block overflow-hidden rounded-xl"
      >
        <div className="aspect-[4/3] relative">
          <img
            src={displayImage}
            alt={article.title}
            className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
            loading="lazy"
            onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
          />
          {article.hasVideo && (
            <div className="absolute top-2 right-2 flex items-center gap-1 bg-black/60 px-2 py-1 rounded-full">
              <PlayCircle className="h-3 w-3 text-white" />
              <span className="text-[10px] font-medium text-white">Video</span>
            </div>
          )}
        </div>
        <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent" />
        <div className="absolute bottom-0 left-0 right-0 p-4">
          <Badge className={`${getCategoryColor(article.category)} mb-2 text-white border-0`}>
            {article.category.replace('-', ' ')}
          </Badge>
          <h3 className="font-display text-lg font-bold text-white">
            {article.title}
          </h3>
        </div>
      </Link>
    );
  }

  if (variant === 'video') {
    return (
      <Link
        to={`/article/${article.slug}`}
        className="group block overflow-hidden rounded-xl bg-card border border-border transition-shadow hover:shadow-lg h-full"
      >
        <div className="aspect-video overflow-hidden relative flex-shrink-0">
          <img
            src={displayImage}
            alt={article.title}
            className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
            loading="lazy"
            onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
          />
          <div className="absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors">
            <div className="h-12 w-12 md:h-14 md:w-14 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg">
              <PlayCircle className="h-6 w-6 md:h-8 md:w-8 text-primary" />
            </div>
          </div>
          <Badge className={`absolute top-2 left-2 ${getCategoryColor(article.category)} text-white border-0 text-[10px]`}>
            {article.category.replace('-', ' ')}
          </Badge>
        </div>
        <div className="p-3 md:p-4">
          <h3 className="font-display text-sm md:text-base font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors min-h-[2.5rem] md:min-h-[3rem]">
            {article.title}
          </h3>
          <div className="mt-2 flex items-center gap-3 text-xs text-muted-foreground">
            <span className="flex items-center gap-1">
              <Clock className="h-3 w-3 flex-shrink-0" />
              <span className="truncate">{formatDistanceToNow(article.publishedAt, { addSuffix: true })}</span>
            </span>
            <span className="flex items-center gap-1">
              <Eye className="h-3 w-3 flex-shrink-0" />
              {article.views.toLocaleString()}
            </span>
          </div>
        </div>
      </Link>
    );
  }

  return (
    <Link
      to={`/article/${article.slug}`}
      className="group block overflow-hidden rounded-lg bg-card transition-shadow hover:shadow-lg border border-border"
    >
      <div className="aspect-video overflow-hidden relative">
        <img
          src={displayImage}
          alt={article.title}
          className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
          loading="lazy"
          onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
        />
        {article.hasVideo && (
          <div className="absolute top-2 right-2 flex items-center gap-1 bg-black/60 px-2 py-1 rounded-full">
            <PlayCircle className="h-3 w-3 text-white" />
            <span className="text-[10px] font-medium text-white">Video</span>
          </div>
        )}
      </div>
      <div className="p-4">
        <Badge className={`${getCategoryColor(article.category)} mb-2 text-white border-0 text-[10px]`}>
          {article.category.replace('-', ' ')}
        </Badge>
        <h3 className="font-display text-base font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors">
          {article.title}
        </h3>
        <p className="mt-2 text-sm text-muted-foreground line-clamp-2">
          {article.excerpt}
        </p>
        <div className="mt-3 flex items-center gap-3 text-xs text-muted-foreground">
          <span className="flex items-center gap-1">
            <Clock className="h-3 w-3" />
            {formatDistanceToNow(article.publishedAt, { addSuffix: true })}
          </span>
          <span className="flex items-center gap-1">
            <Eye className="h-3 w-3" />
            {article.views.toLocaleString()}
          </span>
        </div>
      </div>
    </Link>
  );
};

--- FILE END: src\components\news\ArticleCard.tsx ---


--- FILE START: src\components\news\BreakingNewsTicker.tsx ---
import { useEffect, useState, useCallback } from 'react';
import { Link } from 'react-router-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { AlertCircle, ChevronLeft, ChevronRight, Pause, Play } from 'lucide-react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { Button } from '@/components/ui/button';
import { getFeaturedSettings } from '@/lib/settingsService';

interface BreakingNewsTickerProps {
  maxHeadlines?: number;
  autoSwipeInterval?: number;
}

export const BreakingNewsTicker = ({
  maxHeadlines = 5,
  autoSwipeInterval: propInterval
}: BreakingNewsTickerProps) => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  const [settings, setSettings] = useState(getFeaturedSettings());

  const fetchData = useCallback(() => {
    setArticlesList(getArticles());
    setSettings(getFeaturedSettings());
  }, []);

  useEffect(() => {
    fetchData();
    window.addEventListener('articlesUpdated', fetchData);
    window.addEventListener('featuredSettingsUpdated', fetchData);
    return () => {
      window.removeEventListener('articlesUpdated', fetchData);
      window.removeEventListener('featuredSettingsUpdated', fetchData);
    };
  }, [fetchData]);

  // Use settings for breaking news IDs
  const breakingNews = settings.breakingNewsIds
    .map(id => articlesList.find(a => a.id === id))
    .filter((a): a is Article => !!a)
    .slice(0, maxHeadlines);

  const autoSwipeInterval = propInterval ?? settings.autoSwipeInterval ?? 5000;

  const [currentIndex, setCurrentIndex] = useState(0);
  const [isAutoPlaying, setIsAutoPlaying] = useState(settings.breakingAutoSwipe ?? true);

  const goToNext = useCallback(() => {
    setCurrentIndex((prev) => (prev + 1) % breakingNews.length);
  }, [breakingNews.length]);

  const goToPrev = useCallback(() => {
    setCurrentIndex((prev) => (prev - 1 + breakingNews.length) % breakingNews.length);
  }, [breakingNews.length]);

  useEffect(() => {
    if (breakingNews.length <= 1 || !isAutoPlaying) return;

    const interval = setInterval(goToNext, autoSwipeInterval);
    return () => clearInterval(interval);
  }, [breakingNews.length, isAutoPlaying, autoSwipeInterval, goToNext]);

  if (breakingNews.length === 0) return null;

  return (
    <div className="bg-accent text-accent-foreground">
      <div className="container mx-auto flex items-center px-4 py-2 gap-2">
        <div className="flex items-center gap-2 bg-accent-foreground/10 px-3 py-1 rounded-full flex-shrink-0">
          <AlertCircle className="h-4 w-4 animate-pulse" />
          <span className="text-xs font-bold uppercase tracking-wider hidden sm:inline">Breaking</span>
        </div>

        {/* Navigation Arrows */}
        {breakingNews.length > 1 && (
          <Button
            variant="ghost"
            size="icon"
            onClick={goToPrev}
            className="h-7 w-7 text-accent-foreground hover:bg-accent-foreground/20 flex-shrink-0"
          >
            <ChevronLeft className="h-4 w-4" />
          </Button>
        )}

        <div className="flex-1 overflow-hidden">
          <AnimatePresence mode="wait">
            <motion.div
              key={currentIndex}
              initial={{ y: 20, opacity: 0 }}
              animate={{ y: 0, opacity: 1 }}
              exit={{ y: -20, opacity: 0 }}
              transition={{ duration: 0.3 }}
            >
              <Link
                to={`/article/${breakingNews[currentIndex].slug}`}
                className="flex items-center gap-2 text-sm font-medium hover:underline"
              >
                <span className="line-clamp-1">{breakingNews[currentIndex].title}</span>
              </Link>
            </motion.div>
          </AnimatePresence>
        </div>

        {/* Navigation Arrows */}
        {breakingNews.length > 1 && (
          <Button
            variant="ghost"
            size="icon"
            onClick={goToNext}
            className="h-7 w-7 text-accent-foreground hover:bg-accent-foreground/20 flex-shrink-0"
          >
            <ChevronRight className="h-4 w-4" />
          </Button>
        )}

        {/* Auto-play toggle */}
        {breakingNews.length > 1 && (
          <Button
            variant="ghost"
            size="icon"
            onClick={() => setIsAutoPlaying(!isAutoPlaying)}
            className="h-7 w-7 text-accent-foreground hover:bg-accent-foreground/20 flex-shrink-0"
            title={isAutoPlaying ? 'Pause auto-swipe' : 'Resume auto-swipe'}
          >
            {isAutoPlaying ? <Pause className="h-3 w-3" /> : <Play className="h-3 w-3" />}
          </Button>
        )}

        {/* Dots indicator */}
        {breakingNews.length > 1 && (
          <div className="flex gap-1 flex-shrink-0">
            {breakingNews.map((_, idx) => (
              <button
                key={idx}
                onClick={() => setCurrentIndex(idx)}
                className={`h-2 w-2 rounded-full transition-colors ${idx === currentIndex ? 'bg-accent-foreground' : 'bg-accent-foreground/40'
                  }`}
              />
            ))}
          </div>
        )}
      </div>
    </div>
  );
};

--- FILE END: src\components\news\BreakingNewsTicker.tsx ---


--- FILE START: src\components\news\CategorySection.tsx ---
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { ChevronRight } from 'lucide-react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from './ArticleCard';
import { Category } from '@/types/news';

interface CategorySectionProps {
  category: Category;
  title: string;
  showMore?: boolean;
}

export const CategorySection = ({ category, title, showMore = true }: CategorySectionProps) => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  useEffect(() => {
    setArticlesList(getArticles());

    // Listen for updates
    const handleUpdate = () => setArticlesList(getArticles());
    window.addEventListener('articlesUpdated', handleUpdate);
    return () => window.removeEventListener('articlesUpdated', handleUpdate);
  }, []);

  const categoryArticles = articlesList.filter(a => a.category === category).slice(0, 4);

  if (categoryArticles.length === 0) return null;

  return (
    <section className="py-4 md:py-6">
      <div className="container mx-auto px-4">
        <div className="mb-4 flex items-center justify-between border-b-2 border-primary pb-2">
          <h2 className="font-display text-lg font-bold text-foreground md:text-xl">
            {title}
          </h2>
          {showMore && (
            <Link
              to={`/category/${category}`}
              className="flex items-center gap-1 text-sm font-medium text-primary hover:text-primary/80 transition-colors"
            >
              View All
              <ChevronRight className="h-4 w-4" />
            </Link>
          )}
        </div>

        <div className="grid gap-3 sm:grid-cols-2 lg:grid-cols-4">
          {categoryArticles.map((article) => (
            <ArticleCard key={article.id} article={article} variant="compact" />
          ))}
        </div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\CategorySection.tsx ---


--- FILE START: src\components\news\CommentSection.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { Button } from '@/components/ui/button';
import { Textarea } from '@/components/ui/textarea';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { MessageSquare, ThumbsUp, Reply, User, Loader2 } from 'lucide-react';
import { formatDistanceToNow } from 'date-fns';
import { toast } from 'sonner';

export interface Comment {
  id: string;
  author: string;
  email?: string;
  content: string;
  articleId: string;
  createdAt: Date;
  likes: number;
  status: 'approved' | 'pending' | 'flagged' | 'spam';
  replies?: Comment[];
}

// Mock comments for demonstration - will be replaced by database
const getMockComments = (articleId: string): Comment[] => [
  {
    id: '1',
    author: 'Rahim Uddin',
    content: 'Very important issue raised here. We need more awareness on this matter.',
    articleId,
    createdAt: new Date('2026-01-16T10:00:00'),
    likes: 12,
    status: 'approved',
    replies: [
      {
        id: '1-1',
        author: 'Fatima Begum',
        content: 'Absolutely agree. The authorities should take note of this immediately.',
        articleId,
        createdAt: new Date('2026-01-16T12:00:00'),
        likes: 5,
        status: 'approved'
      }
    ]
  },
  {
    id: '2',
    author: 'Karim Hasan',
    content: 'Thank you for the detailed report. Identifying the root cause is crucial.',
    articleId,
    createdAt: new Date('2026-01-15T15:00:00'),
    likes: 8,
    status: 'approved'
  }
];

interface CommentSectionProps {
  articleId: string;
}

export const CommentSection = ({ articleId }: CommentSectionProps) => {
  const [comments, setComments] = useState<Comment[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [newComment, setNewComment] = useState({ author: '', email: '', content: '' });
  const [replyingTo, setReplyingTo] = useState<string | null>(null);
  const [replyContent, setReplyContent] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);

  // Load comments from localStorage
  const fetchComments = useCallback(async () => {
    setIsLoading(true);
    try {
      await new Promise(resolve => setTimeout(resolve, 500)); // Simulate network delay

      const stored = localStorage.getItem(`comments_${articleId}`);
      if (stored) {
        setComments(JSON.parse(stored));
      } else {
        // Fallback to mock data ONLY if no local storage exists for this article
        const initialMock = getMockComments(articleId);
        setComments(initialMock);
        // Save initial mock to storage so we can add to it later
        localStorage.setItem(`comments_${articleId}`, JSON.stringify(initialMock));
      }
    } catch (error) {
      console.error('Error fetching comments:', error);
      toast.error('Failed to load comments');
    } finally {
      setIsLoading(false);
    }
  }, [articleId]);

  useEffect(() => {
    fetchComments();
  }, [fetchComments]);

  // Real-time subscription setup - ready for Cloud integration
  useEffect(() => {
    // TODO: Enable real-time updates when connected to Cloud
    // Example with Supabase Realtime:
    // const channel = supabase
    //   .channel('comments-changes')
    //   .on(
    //     'postgres_changes',
    //     {
    //       event: '*', // Listen to all events (INSERT, UPDATE, DELETE)
    //       schema: 'public',
    //       table: 'comments',
    //       filter: `article_id=eq.${articleId}`
    //     },
    //     (payload) => {
    //       console.log('Comment change:', payload);
    //       if (payload.eventType === 'INSERT' && payload.new.status === 'approved') {
    //         setComments(prev => [payload.new as Comment, ...prev]);
    //         toast.info('New comment posted!');
    //       } else if (payload.eventType === 'DELETE') {
    //         setComments(prev => prev.filter(c => c.id !== payload.old.id));
    //       } else if (payload.eventType === 'UPDATE') {
    //         setComments(prev => prev.map(c => 
    //           c.id === payload.new.id ? payload.new as Comment : c
    //         ));
    //       }
    //     }
    //   )
    //   .subscribe();
    //
    // return () => {
    //   supabase.removeChannel(channel);
    // };
  }, [articleId]);

  const handleSubmitComment = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!newComment.author.trim() || !newComment.content.trim()) {
      toast.error('Please fill in all required fields');
      return;
    }

    setIsSubmitting(true);
    try {
      await new Promise(resolve => setTimeout(resolve, 500));

      const comment: Comment = {
        id: Date.now().toString(),
        author: newComment.author,
        email: newComment.email,
        content: newComment.content,
        articleId,
        createdAt: new Date(),
        likes: 0,
        status: 'approved',
        replies: []
      };

      const updatedComments = [comment, ...comments];
      setComments(updatedComments);
      localStorage.setItem(`comments_${articleId}`, JSON.stringify(updatedComments));

      setNewComment({ author: '', email: '', content: '' });
      toast.success('Comment posted successfully!');
    } catch (error) {
      console.error('Error posting comment:', error);
      toast.error('Failed to post comment');
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleSubmitReply = async (parentId: string) => {
    if (!replyContent.trim()) {
      toast.error('Please enter a reply');
      return;
    }

    setIsSubmitting(true);
    try {
      await new Promise(resolve => setTimeout(resolve, 300));

      const reply: Comment = {
        id: `${parentId}-${Date.now()}`,
        author: 'Guest User',
        content: replyContent,
        articleId,
        createdAt: new Date(),
        likes: 0,
        status: 'approved'
      };

      const updatedComments = comments.map(comment => {
        if (comment.id === parentId) {
          return {
            ...comment,
            replies: [...(comment.replies || []), reply]
          };
        }
        return comment;
      });

      setComments(updatedComments);
      localStorage.setItem(`comments_${articleId}`, JSON.stringify(updatedComments));

      setReplyingTo(null);
      setReplyContent('');
      toast.success('Reply posted successfully!');
    } catch (error) {
      console.error('Error posting reply:', error);
      toast.error('Failed to post reply');
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleLike = async (commentId: string, isReply: boolean = false, parentId?: string) => {
    // TODO: Replace with actual database update when connected to Cloud
    // Example with Supabase:
    // const { error } = await supabase.rpc('increment_likes', { comment_id: commentId });
    // if (error) throw error;

    setComments(comments.map(comment => {
      if (isReply && parentId && comment.id === parentId) {
        return {
          ...comment,
          replies: comment.replies?.map(reply =>
            reply.id === commentId ? { ...reply, likes: reply.likes + 1 } : reply
          )
        };
      }
      if (comment.id === commentId) {
        return { ...comment, likes: comment.likes + 1 };
      }
      return comment;
    }));
  };

  const CommentItem = ({ comment, isReply = false, parentId }: { comment: Comment; isReply?: boolean; parentId?: string }) => (
    <div className={`${isReply ? 'ml-8 mt-4' : ''}`}>
      <div className="flex gap-3">
        <div className="h-10 w-10 rounded-full bg-muted flex items-center justify-center flex-shrink-0">
          <User className="h-5 w-5 text-muted-foreground" />
        </div>
        <div className="flex-1">
          <div className="flex items-center gap-2">
            <span className="font-medium text-foreground">{comment.author}</span>
            <span className="text-xs text-muted-foreground">
              {formatDistanceToNow(comment.createdAt, { addSuffix: true })}
            </span>
          </div>
          <p className="mt-1 text-sm text-foreground">{comment.content}</p>
          <div className="mt-2 flex items-center gap-4">
            <button
              onClick={() => handleLike(comment.id, isReply, parentId)}
              className="flex items-center gap-1 text-xs text-muted-foreground hover:text-primary transition-colors"
            >
              <ThumbsUp className="h-4 w-4" />
              {comment.likes > 0 && comment.likes}
            </button>
            {!isReply && (
              <button
                onClick={() => setReplyingTo(replyingTo === comment.id ? null : comment.id)}
                className="flex items-center gap-1 text-xs text-muted-foreground hover:text-primary transition-colors"
              >
                <Reply className="h-4 w-4" />
                Reply
              </button>
            )}
          </div>

          {/* Reply Form */}
          {replyingTo === comment.id && (
            <div className="mt-4 flex gap-2">
              <Textarea
                value={replyContent}
                onChange={(e) => setReplyContent(e.target.value)}
                placeholder="Write a reply..."
                rows={2}
                className="flex-1"
              />
              <div className="flex flex-col gap-1">
                <Button size="sm" onClick={() => handleSubmitReply(comment.id)}>
                  Reply
                </Button>
                <Button size="sm" variant="outline" onClick={() => setReplyingTo(null)}>
                  Cancel
                </Button>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* Replies */}
      {comment.replies && comment.replies.length > 0 && (
        <div className="border-l-2 border-border pl-4 mt-4">
          {comment.replies.map((reply) => (
            <CommentItem key={reply.id} comment={reply} isReply parentId={comment.id} />
          ))}
        </div>
      )}
    </div>
  );

  return (
    <div className="border-t border-border pt-8 mt-8">
      <div className="flex items-center gap-2 mb-6">
        <MessageSquare className="h-5 w-5 text-primary" />
        <h3 className="font-display text-xl font-bold text-foreground">
          Comments ({comments.length})
        </h3>
      </div>

      {/* Comment Form */}
      <form onSubmit={handleSubmitComment} className="mb-8 p-4 rounded-xl bg-muted/50">
        <h4 className="font-medium text-foreground mb-4">Leave a Comment</h4>
        <div className="space-y-4">
          <div className="grid gap-4 sm:grid-cols-2">
            <div>
              <Label htmlFor="author">Name *</Label>
              <Input
                id="author"
                value={newComment.author}
                onChange={(e) => setNewComment({ ...newComment, author: e.target.value })}
                placeholder="Your name"
                required
                disabled={isSubmitting}
              />
            </div>
            <div>
              <Label htmlFor="email">Email (optional)</Label>
              <Input
                id="email"
                type="email"
                value={newComment.email}
                onChange={(e) => setNewComment({ ...newComment, email: e.target.value })}
                placeholder="your@email.com"
                disabled={isSubmitting}
              />
            </div>
          </div>
          <div>
            <Label htmlFor="content">Comment *</Label>
            <Textarea
              id="content"
              value={newComment.content}
              onChange={(e) => setNewComment({ ...newComment, content: e.target.value })}
              placeholder="Share your thoughts..."
              rows={4}
              required
              disabled={isSubmitting}
            />
          </div>
          <Button type="submit" disabled={isSubmitting}>
            {isSubmitting ? (
              <>
                <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                Posting...
              </>
            ) : (
              'Post Comment'
            )}
          </Button>
        </div>
      </form>

      {/* Loading State */}
      {isLoading ? (
        <div className="flex items-center justify-center py-8">
          <Loader2 className="h-6 w-6 animate-spin text-muted-foreground" />
          <span className="ml-2 text-muted-foreground">Loading comments...</span>
        </div>
      ) : (
        <>
          {/* Comments List */}
          <div className="space-y-6">
            {comments.filter(c => c.status === 'approved').map((comment) => (
              <CommentItem key={comment.id} comment={comment} />
            ))}
          </div>

          {comments.filter(c => c.status === 'approved').length === 0 && (
            <p className="text-center text-muted-foreground py-8">
              No comments yet. Be the first to share your thoughts!
            </p>
          )}
        </>
      )}
    </div>
  );
};

--- FILE END: src\components\news\CommentSection.tsx ---


--- FILE START: src\components\news\EditorialSection.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { Link } from 'react-router-dom';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from './ArticleCard';
import { Newspaper, Pen } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { getSectionsSettings } from '@/lib/settingsService';

// Default sections definition for fallback
const defaultSections = [
  { id: 'editorial', name: 'Editorial & Opinion', enabled: true, order: 11, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true, category: 'editorial' }
];

export const EditorialSection = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  const fetchData = useCallback(() => {
    setArticlesList(getArticles());
  }, []);

  useEffect(() => {
    fetchData();
    window.addEventListener('articlesUpdated', fetchData);
    window.addEventListener('sectionsSettingsUpdated', fetchData);
    return () => {
      window.removeEventListener('articlesUpdated', fetchData);
      window.removeEventListener('sectionsSettingsUpdated', fetchData);
    };
  }, [fetchData]);

  // Get editorial section settings
  const sections = getSectionsSettings(defaultSections as any);
  const editorialSection = sections.find(s => s.id === 'editorial');

  // If we have selected articles in settings, use those. Otherwise fallback to category filter.
  let editorialArticles: Article[] = [];
  if (editorialSection && editorialSection.selectedArticleIds.length > 0) {
    editorialArticles = editorialSection.selectedArticleIds
      .map(id => articlesList.find(a => a.id === id))
      .filter((a): a is Article => !!a);
  } else {
    // Fallback: filter by editorial category
    editorialArticles = articlesList.filter(a => a.category === 'editorial').slice(0, 4);
  }

  const mainEditorial = editorialArticles[0];
  const sideEditorials = editorialArticles.slice(1, 4);

  if (editorialArticles.length === 0) return null;

  return (
    <section className="py-8 bg-muted/30">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between mb-6">
          <div className="flex items-center gap-2">
            <Pen className="h-5 w-5 text-primary" />
            <h2 className="font-display text-xl font-bold text-foreground md:text-2xl">
              Editorial & Opinion
            </h2>
          </div>
          <Link to="/category/editorial">
            <Button variant="outline" size="sm">View All</Button>
          </Link>
        </div>

        <div className="grid gap-6 lg:grid-cols-2">
          {/* Main Editorial */}
          {mainEditorial && (
            <Link
              to={`/article/${mainEditorial.slug}`}
              className="group relative block overflow-hidden rounded-xl bg-card border border-border"
            >
              <div className="aspect-[16/10] relative">
                <img
                  src={mainEditorial.featuredImage}
                  alt={mainEditorial.title}
                  className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
                  loading="lazy"
                />
                <div className="absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent" />
              </div>
              <div className="absolute bottom-0 left-0 right-0 p-6">
                <div className="flex items-center gap-3 mb-3">
                  <img
                    src={mainEditorial.author.avatar}
                    alt={mainEditorial.author.name}
                    className="h-10 w-10 rounded-full object-cover border-2 border-white"
                  />
                  <div>
                    <p className="text-sm font-medium text-white">{mainEditorial.author.name}</p>
                    <p className="text-xs text-white/70 capitalize">{mainEditorial.author.role}</p>
                  </div>
                </div>
                <h3 className="font-display text-xl font-bold text-white md:text-2xl">
                  {mainEditorial.title}
                </h3>
                <p className="mt-2 text-sm text-white/80 line-clamp-2">
                  {mainEditorial.excerpt}
                </p>
              </div>
            </Link>
          )}

          {/* Side Editorials */}
          <div className="space-y-4">
            {sideEditorials.map((article) => (
              <Link
                key={article.id}
                to={`/article/${article.slug}`}
                className="group flex gap-4 rounded-lg bg-card p-4 border border-border hover:shadow-md transition-all"
              >
                <div className="flex-shrink-0">
                  <img
                    src={article.author.avatar}
                    alt={article.author.name}
                    className="h-12 w-12 rounded-full object-cover"
                  />
                </div>
                <div className="flex-1 min-w-0">
                  <p className="text-xs text-muted-foreground mb-1">
                    {article.author.name} â€¢ {article.author.role}
                  </p>
                  <h4 className="font-display font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors">
                    {article.title}
                  </h4>
                  <p className="mt-1 text-sm text-muted-foreground line-clamp-1">
                    {article.excerpt}
                  </p>
                </div>
              </Link>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\EditorialSection.tsx ---


--- FILE START: src\components\news\FloatingVideoPlayer.tsx ---
import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { X, Maximize2 } from 'lucide-react';
import { getYoutubeId } from '@/lib/videoUtils';

interface FloatingVideoPlayerProps {
    videoUrl: string;
    title: string;
    isVisible: boolean; // Managed by parent based on scroll
}

export const FloatingVideoPlayer = ({ videoUrl, title, isVisible }: FloatingVideoPlayerProps) => {
    const [isClosed, setIsClosed] = useState(false);
    const [isExpanded, setIsExpanded] = useState(false);

    // If user explicitly closes specific video session, resetting when URL changes
    useEffect(() => {
        setIsClosed(false);
    }, [videoUrl]);

    if (isClosed || !isVisible) return null;

    const youtubeId = getYoutubeId(videoUrl);
    if (!youtubeId) return null;

    const embedUrl = `https://www.youtube.com/embed/${youtubeId}?autoplay=1&mute=0&enablejsapi=1`;

    // Dynamic positioning logic
    const containerClass = isExpanded
        ? "fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4"
        : "fixed bottom-4 right-4 z-40 w-80 md:w-96 shadow-2xl rounded-lg overflow-hidden border border-border bg-background animate-in slide-in-from-bottom-10 fade-in duration-300";

    return (
        <div className={containerClass}>
            <div className={`relative ${isExpanded ? 'w-full max-w-4xl aspect-video' : 'aspect-video'}`}>
                <iframe
                    src={embedUrl}
                    title={title}
                    className="w-full h-full"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowFullScreen
                />

                {/* Controls Overlay */}
                <div className="absolute top-0 right-0 p-2 flex gap-2 opacity-0 hover:opacity-100 transition-opacity bg-gradient-to-l from-black/60 to-transparent">
                    <Button
                        size="icon"
                        variant="ghost"
                        className="h-8 w-8 text-white hover:bg-white/20"
                        onClick={() => setIsExpanded(!isExpanded)}
                    >
                        <Maximize2 className="h-4 w-4" />
                    </Button>
                    <Button
                        size="icon"
                        variant="ghost"
                        className="h-8 w-8 text-white hover:bg-white/20"
                        onClick={() => setIsClosed(true)}
                    >
                        <X className="h-4 w-4" />
                    </Button>
                </div>
            </div>
        </div>
    );
};

--- FILE END: src\components\news\FloatingVideoPlayer.tsx ---


--- FILE START: src\components\news\HeroSection.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { Link } from 'react-router-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { Clock, Eye, ChevronLeft, ChevronRight, Pause, Play, PlayCircle } from 'lucide-react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Skeleton } from '@/components/ui/skeleton';
import { formatDistanceToNow } from 'date-fns';
import { getYoutubeThumbnail, FALLBACK_IMAGE } from '@/lib/videoUtils';

import { getFeaturedSettings } from '@/lib/settingsService';

export const HeroSection = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  const [settings, setSettings] = useState(getFeaturedSettings());
  const [isLoading, setIsLoading] = useState(true);

  const fetchArticles = useCallback(() => {
    setArticlesList(getArticles());
    setSettings(getFeaturedSettings());
  }, []);

  // Load data and listen for updates
  useEffect(() => {
    // Initial fetch
    fetchArticles();
    // Simulate slight loading for skeleton demo (optional, but keeps UI smooth)
    const timer = setTimeout(() => setIsLoading(false), 500);

    window.addEventListener('articlesUpdated', fetchArticles);
    window.addEventListener('featuredSettingsUpdated', fetchArticles);

    return () => {
      window.removeEventListener('articlesUpdated', fetchArticles);
      window.removeEventListener('featuredSettingsUpdated', fetchArticles);
      clearTimeout(timer);
    };
  }, [fetchArticles]);

  // Order articles based on settings.heroFeaturedIds
  const featuredArticles = settings.heroFeaturedIds
    .map(id => articlesList.find(a => a.id === id))
    .filter((a): a is Article => !!a); // Filter out undefined if an article was deleted

  // Fallback if no hero articles selected
  if (featuredArticles.length === 0 && articlesList.length > 0) {
    // Logic for fallback can stay or we just show nothing.
    // The original code fell back to "articlesList.slice(0, 5)".
  }

  // Use settings for auto swipe
  const { heroAutoSwipe = true, autoSwipeInterval = 6000 } = settings;

  const [currentIndex, setCurrentIndex] = useState(0);
  const [isAutoPlaying, setIsAutoPlaying] = useState(heroAutoSwipe);

  const goToNext = useCallback(() => {
    setCurrentIndex((prev) => (prev + 1) % featuredArticles.length);
  }, [featuredArticles.length]);

  const goToPrev = useCallback(() => {
    setCurrentIndex((prev) => (prev - 1 + featuredArticles.length) % featuredArticles.length);
  }, [featuredArticles.length]);

  useEffect(() => {
    if (featuredArticles.length <= 1 || !isAutoPlaying) return;

    const interval = setInterval(goToNext, autoSwipeInterval);
    return () => clearInterval(interval);
  }, [featuredArticles.length, isAutoPlaying, goToNext, autoSwipeInterval]);

  // Define sideArticles: Use settings.heroSideArticleIds or fallback
  const sideArticles = (settings.heroSideArticleIds || [])
    .map(id => articlesList.find(a => a.id === id))
    .filter((a): a is Article => !!a)
    .slice(0, 4);

  // Fallback if no side articles configured
  const displaySideArticles = sideArticles.length > 0
    ? sideArticles
    : articlesList.filter(a => !settings.heroFeaturedIds.includes(a.id)).slice(0, 4);

  const getDisplayImage = (article: Article) => {
    if (article.featuredImage) return article.featuredImage;
    if (article.videoUrl) {
      const thumb = getYoutubeThumbnail(article.videoUrl);
      if (thumb) return thumb;
    }
    return FALLBACK_IMAGE;
  };

  if (featuredArticles.length === 0 && !isLoading) return null;

  // Loading skeleton
  if (isLoading) {
    return (
      <section className="py-6 md:py-8">
        <div className="container mx-auto px-4">
          <div className="grid gap-4 lg:grid-cols-3 lg:gap-6">
            {/* Main Featured Skeleton */}
            <div className="lg:col-span-2">
              <div className="relative overflow-hidden rounded-xl bg-card border border-border">
                <Skeleton className="aspect-[16/10] lg:aspect-[16/9] w-full" />
                <div className="absolute bottom-0 left-0 right-0 p-4 md:p-6 lg:p-8 space-y-3">
                  <Skeleton className="h-5 w-24 bg-white/20" />
                  <Skeleton className="h-8 w-full bg-white/20" />
                  <Skeleton className="h-8 w-3/4 bg-white/20" />
                  <Skeleton className="h-4 w-full bg-white/20 hidden md:block" />
                  <div className="flex items-center gap-4">
                    <Skeleton className="h-10 w-10 rounded-full bg-white/20" />
                    <Skeleton className="h-4 w-32 bg-white/20" />
                  </div>
                </div>
              </div>
            </div>

            {/* Side Articles Skeleton */}
            <div className="flex flex-col gap-3">
              {[1, 2, 3, 4].map((i) => (
                <div key={i} className="flex gap-3 p-3 rounded-lg bg-card border border-border">
                  <Skeleton className="h-20 w-28 rounded-md shrink-0" />
                  <div className="flex-1 space-y-2">
                    <Skeleton className="h-4 w-16" />
                    <Skeleton className="h-4 w-full" />
                    <Skeleton className="h-4 w-3/4" />
                    <Skeleton className="h-3 w-20" />
                  </div>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>
    );
  }

  const currentArticle = featuredArticles[currentIndex];

  const getCategoryColor = (category: string) => {
    const colors: Record<string, string> = {
      national: 'bg-blue-500',
      international: 'bg-purple-500',
      economy: 'bg-amber-500',
      environment: 'bg-emerald-500',
      technology: 'bg-cyan-500',
      culture: 'bg-pink-500',
      editorial: 'bg-slate-500',
      society: 'bg-orange-500',
      'untold-stories': 'bg-red-600',
      sports: 'bg-green-500',
      entertainment: 'bg-fuchsia-500',
    };
    return colors[category] || 'bg-primary';
  };

  return (
    <section className="py-6 md:py-8">
      <div className="container mx-auto px-4">
        <div className="grid gap-4 lg:grid-cols-3 lg:gap-6">
          {/* Main Featured Article with Auto-Swipe */}
          <div className="lg:col-span-2 relative">
            <div className="relative overflow-hidden rounded-xl">
              <AnimatePresence mode="wait">
                <motion.div
                  key={currentIndex}
                  initial={{ opacity: 0, scale: 1.05 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.95 }}
                  transition={{ duration: 0.5 }}
                >
                  <Link to={`/article/${currentArticle.slug}`} className="group relative block">
                    <div className="aspect-[16/10] lg:aspect-[16/9]">
                      <img
                        src={getDisplayImage(currentArticle)}
                        alt={currentArticle.title}
                        className="h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"
                        loading="eager"
                        onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
                      />
                    </div>
                    <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent" />

                    {/* Video indicator */}
                    {currentArticle.hasVideo && (
                      <div className="absolute top-4 right-4 flex items-center gap-2 bg-black/60 px-3 py-1.5 rounded-full">
                        <PlayCircle className="h-4 w-4 text-white" />
                        <span className="text-xs font-medium text-white">Video</span>
                      </div>
                    )}

                    <div className="absolute bottom-0 left-0 right-0 p-4 md:p-6 lg:p-8">
                      <Badge className={`${getCategoryColor(currentArticle.category)} mb-2 md:mb-3 text-white border-0 uppercase tracking-wide text-[10px] md:text-xs`}>
                        {currentArticle.category.replace('-', ' ')}
                      </Badge>
                      <h2 className="font-display text-lg font-bold text-white md:text-2xl lg:text-3xl xl:text-4xl leading-tight line-clamp-2 md:line-clamp-none">
                        {currentArticle.title}
                      </h2>
                      {/* Hide excerpt on mobile */}
                      <p className="mt-2 line-clamp-2 text-sm text-white/80 md:text-base max-w-3xl hidden md:block">
                        {currentArticle.excerpt}
                      </p>
                      {/* Simplified mobile meta, full on desktop */}
                      <div className="mt-2 md:mt-4 flex items-center gap-2 md:gap-4 text-[10px] md:text-xs text-white/70">
                        <span className="flex items-center gap-1">
                          <Clock className="h-3 w-3" />
                          {formatDistanceToNow(currentArticle.publishedAt, { addSuffix: true })}
                        </span>
                        <span className="hidden sm:flex items-center gap-1">
                          <Eye className="h-3 w-3" />
                          {currentArticle.views.toLocaleString()} views
                        </span>
                        <span className="hidden md:inline">By {currentArticle.author.name}</span>
                      </div>
                    </div>
                  </Link>
                </motion.div>
              </AnimatePresence>

              {/* Navigation Controls */}
              {featuredArticles.length > 1 && (
                <>
                  {/* Arrows */}
                  <Button
                    variant="ghost"
                    size="icon"
                    onClick={goToPrev}
                    className="absolute left-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 text-white hover:bg-black/60 backdrop-blur-sm"
                  >
                    <ChevronLeft className="h-5 w-5" />
                  </Button>
                  <Button
                    variant="ghost"
                    size="icon"
                    onClick={goToNext}
                    className="absolute right-2 top-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-black/40 text-white hover:bg-black/60 backdrop-blur-sm"
                  >
                    <ChevronRight className="h-5 w-5" />
                  </Button>

                  {/* Bottom Controls */}
                  <div className="absolute bottom-4 right-4 md:bottom-6 md:right-6 flex items-center gap-2">
                    {/* Dots */}
                    <div className="flex gap-1.5">
                      {featuredArticles.map((_, idx) => (
                        <button
                          key={idx}
                          onClick={() => setCurrentIndex(idx)}
                          className={`h-2 w-2 rounded-full transition-all duration-300 ${idx === currentIndex
                            ? 'bg-white w-6'
                            : 'bg-white/50 hover:bg-white/70'
                            }`}
                        />
                      ))}
                    </div>

                    {/* Play/Pause */}
                    <Button
                      variant="ghost"
                      size="icon"
                      onClick={() => setIsAutoPlaying(!isAutoPlaying)}
                      className="h-8 w-8 rounded-full bg-black/40 text-white hover:bg-black/60 backdrop-blur-sm"
                    >
                      {isAutoPlaying ? <Pause className="h-3 w-3" /> : <Play className="h-3 w-3" />}
                    </Button>
                  </div>

                  {/* Slide Counter */}
                  <div className="absolute top-4 left-4 bg-black/40 backdrop-blur-sm rounded-full px-3 py-1">
                    <span className="text-xs text-white font-medium">
                      {currentIndex + 1} / {featuredArticles.length}
                    </span>
                  </div>
                </>
              )}
            </div>
          </div>

          {/* Side Articles */}
          <div className="flex flex-col gap-3">
            {displaySideArticles.map((article, index) => (
              <motion.div
                key={article.id}
                initial={{ opacity: 0, x: 20 }}
                animate={{ opacity: 1, x: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
              >
                <Link
                  to={`/article/${article.slug}`}
                  className="group flex gap-3 rounded-lg bg-card p-3 transition-all hover:bg-muted hover:shadow-md border border-transparent hover:border-border"
                >
                  <div className="h-20 w-28 flex-shrink-0 overflow-hidden rounded-md md:h-20 md:w-28 relative">
                    <img
                      src={getDisplayImage(article)}
                      alt={article.title}
                      className="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
                      loading="lazy"
                      onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
                    />
                    {article.hasVideo && (
                      <div className="absolute inset-0 flex items-center justify-center bg-black/30">
                        <PlayCircle className="h-6 w-6 text-white" />
                      </div>
                    )}
                  </div>
                  <div className="flex flex-col justify-center flex-1 min-w-0">
                    <Badge variant="outline" className={`mb-1 w-fit text-[10px] ${getCategoryColor(article.category)} text-white border-0`}>
                      {article.category.replace('-', ' ')}
                    </Badge>
                    <h3 className="line-clamp-2 font-display text-sm font-semibold text-foreground md:text-sm group-hover:text-primary transition-colors">
                      {article.title}
                    </h3>
                    <span className="mt-1 text-xs text-muted-foreground">
                      {formatDistanceToNow(article.publishedAt, { addSuffix: true })}
                    </span>
                  </div>
                </Link>
              </motion.div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\HeroSection.tsx ---


--- FILE START: src\components\news\HomepageComments.tsx ---
import { useState, useEffect } from 'react';
import { Link } from 'react-router-dom';
import { MessageCircle, ThumbsUp, Clock, ArrowRight } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { getArticles } from '@/lib/articleService';
import { formatDistanceToNow } from 'date-fns';

// Mock comments data linked to real articles
const recentComments = [
  {
    id: '1',
    articleId: '5',
    articleTitle: 'Why hospital bills scare Dhaka patients more than disease',
    author: 'Rahim Uddin',
    avatar: 'https://ui-avatars.com/api/?name=Rahim+U&background=random',
    content: 'This is the reality for so many middle-class families. The costs are simply unsustainable.',
    likes: 156,
    createdAt: new Date('2026-01-17T11:30:00')
  },
  {
    id: '2',
    articleId: '7',
    articleTitle: 'Toxic waste in our rivers: Stop this threat immediately',
    author: 'Fatima Begum',
    avatar: 'https://ui-avatars.com/api/?name=Fatima+B&background=random',
    content: 'We see the pollution every day. When will the authorities actually enforce the laws?',
    likes: 89,
    createdAt: new Date('2026-01-17T08:45:00')
  },
  {
    id: '3',
    articleId: '9',
    articleTitle: 'Watch / No more silence: Akram urges BCB to show courage',
    author: 'Cricket Fan BD',
    avatar: 'https://ui-avatars.com/api/?name=CF&background=random',
    content: 'Akram Bhai is right. We need strong leadership in BCB now more than ever.',
    likes: 243,
    createdAt: new Date('2026-01-17T12:15:00')
  },
  {
    id: '4',
    articleId: '10',
    articleTitle: 'In Focus / The untold history of why Khaleda Zia entered politics',
    author: 'History Buff',
    avatar: 'https://ui-avatars.com/api/?name=HB&background=random',
    content: 'A fascinating look back. Her journey was far from easy given the political climate of that time.',
    likes: 112,
    createdAt: new Date('2026-01-15T16:20:00')
  }
];

export const HomepageComments = () => {
  const getArticleSlug = (articleId: string) => {
    const articles = getArticles();
    const article = articles.find(a => a.id === articleId);
    return article?.slug || '';
  };

  return (
    <section className="py-8 bg-muted/30">
      <div className="container mx-auto px-4">
        <div className="flex items-center justify-between mb-6">
          <div className="flex items-center gap-2">
            <MessageCircle className="h-5 w-5 text-primary" />
            <h2 className="font-display text-xl font-bold text-foreground md:text-2xl">
              Reader Comments
            </h2>
          </div>
        </div>

        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
          {recentComments.map((comment) => (
            <Link
              key={comment.id}
              to={`/article/${getArticleSlug(comment.articleId)}`}
              className="group block rounded-xl bg-card border border-border p-4 hover:shadow-lg transition-all"
            >
              {/* Article Reference */}
              <p className="text-xs text-primary font-medium line-clamp-1 mb-3">
                Re: {comment.articleTitle}
              </p>

              {/* Comment Content */}
              <p className="text-sm text-foreground line-clamp-3 mb-4">
                "{comment.content}"
              </p>

              {/* Author & Meta */}
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <img
                    src={comment.avatar}
                    alt={comment.author}
                    className="h-6 w-6 rounded-full object-cover"
                  />
                  <span className="text-xs font-medium text-foreground">{comment.author}</span>
                </div>
                <div className="flex items-center gap-3 text-xs text-muted-foreground">
                  <span className="flex items-center gap-1">
                    <ThumbsUp className="h-3 w-3" />
                    {comment.likes}
                  </span>
                  <span className="flex items-center gap-1">
                    <Clock className="h-3 w-3" />
                    {formatDistanceToNow(comment.createdAt, { addSuffix: false })}
                  </span>
                </div>
              </div>
            </Link>
          ))}
        </div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\HomepageComments.tsx ---


--- FILE START: src\components\news\InternshipBanner.tsx ---
import { Link } from 'react-router-dom';
import { GraduationCap, ArrowRight, Sparkles } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { motion } from 'framer-motion';

export const InternshipBanner = () => {
  return (
    <section className="py-8">
      <div className="container mx-auto px-4">
        <motion.div
          initial={{ opacity: 0, y: 20 }}
          whileInView={{ opacity: 1, y: 0 }}
          viewport={{ once: true }}
          transition={{ duration: 0.5 }}
          className="relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary via-primary to-accent"
        >
          {/* Decorative Elements */}
          <div className="absolute inset-0 opacity-10">
            <div className="absolute top-0 left-0 w-40 h-40 bg-white rounded-full -translate-x-1/2 -translate-y-1/2" />
            <div className="absolute bottom-0 right-0 w-60 h-60 bg-white rounded-full translate-x-1/3 translate-y-1/3" />
          </div>

          <div className="relative flex flex-col md:flex-row items-center justify-between gap-6 p-6 md:p-8 lg:p-10">
            <div className="flex items-center gap-4 md:gap-6">
              <div className="hidden sm:flex h-16 w-16 items-center justify-center rounded-full bg-white/20 backdrop-blur-sm">
                <GraduationCap className="h-8 w-8 text-white" />
              </div>
              <div className="text-center md:text-left">
                <div className="flex items-center justify-center md:justify-start gap-2 mb-2">
                  <Sparkles className="h-4 w-4 text-yellow-300" />
                  <span className="text-sm font-medium text-white/90">Now Accepting Applications</span>
                </div>
                <h3 className="font-display text-xl md:text-2xl lg:text-3xl font-bold text-white">
                  Start Your Journalism Career
                </h3>
                <p className="mt-1 text-sm md:text-base text-white/80 max-w-xl">
                  Join our internship program and gain hands-on experience in authentic, fact-based journalism.
                </p>
              </div>
            </div>

            <Link to="/internship">
              <Button 
                size="lg" 
                className="bg-white text-primary hover:bg-white/90 font-semibold shadow-lg"
              >
                Apply for Internship
                <ArrowRight className="ml-2 h-5 w-5" />
              </Button>
            </Link>
          </div>
        </motion.div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\InternshipBanner.tsx ---


--- FILE START: src\components\news\LatestNews.tsx ---
import { useState, useEffect } from 'react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from './ArticleCard';

export const LatestNews = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  const fetchArticles = () => {
    setArticlesList(getArticles());
  };

  useEffect(() => {
    fetchArticles();
    window.addEventListener('articlesUpdated', fetchArticles);
    return () => window.removeEventListener('articlesUpdated', fetchArticles);
  }, []);

  const latestArticles = [...articlesList]
    .sort((a, b) => new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime())
    .slice(0, 6);

  return (
    <section className="py-8 bg-muted/30">
      <div className="container mx-auto px-4">
        <h2 className="mb-6 font-display text-xl font-bold text-foreground md:text-2xl border-b-2 border-primary pb-2">
          Latest News
        </h2>

        <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
          {latestArticles.map((article) => (
            <ArticleCard key={article.id} article={article} />
          ))}
        </div>
      </div>
    </section>
  );
};

--- FILE END: src\components\news\LatestNews.tsx ---


--- FILE START: src\components\news\NewsletterSignup.tsx ---
import { useState } from 'react';
import { Link } from 'react-router-dom';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Mail, CheckCircle, GraduationCap, ArrowRight } from 'lucide-react';
import { toast } from 'sonner';
import { motion, AnimatePresence } from 'framer-motion';

interface NewsletterSignupProps {
  variant?: 'inline' | 'card';
}

export const NewsletterSignup = ({ variant = 'card' }: NewsletterSignupProps) => {
  const [email, setEmail] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [isSubscribed, setIsSubscribed] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!email.trim()) {
      toast.error('Please enter your email address');
      return;
    }

    setIsSubmitting(true);
    
    // TODO: Replace with actual API call when connected to Cloud
    // Example with Supabase:
    // const { error } = await supabase.from('newsletter_subscribers').insert({ email });
    // if (error) throw error;
    await new Promise(resolve => setTimeout(resolve, 1000));
    
    setIsSubscribed(true);
    toast.success('Successfully subscribed to newsletter!');
    setEmail('');
    setIsSubmitting(false);
    
    // Reset after 5 seconds
    setTimeout(() => setIsSubscribed(false), 5000);
  };

  if (variant === 'inline') {
    return (
      <form onSubmit={handleSubmit} className="flex gap-2 max-w-md">
        <Input
          type="email"
          value={email}
          onChange={(e) => setEmail(e.target.value)}
          placeholder="Enter your email"
          className="flex-1"
          disabled={isSubmitting}
        />
        <Button type="submit" disabled={isSubmitting}>
          {isSubmitting ? 'Subscribing...' : 'Subscribe'}
        </Button>
      </form>
    );
  }

  return (
    <div className="rounded-xl bg-gradient-to-br from-primary to-primary/80 p-6 text-primary-foreground">
      {/* Newsletter Section */}
      <div className="flex items-center gap-3 mb-4">
        <div className="h-12 w-12 rounded-full bg-primary-foreground/10 flex items-center justify-center">
          <Mail className="h-6 w-6" />
        </div>
        <div>
          <h3 className="font-display font-bold text-lg">Stay Informed</h3>
          <p className="text-sm text-primary-foreground/80">Subscribe to our newsletter for the latest stories delivered to your inbox</p>
        </div>
      </div>

      <AnimatePresence mode="wait">
        {isSubscribed ? (
          <motion.div
            initial={{ opacity: 0, y: 10 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -10 }}
            className="flex items-center gap-2 text-primary-foreground"
          >
            <CheckCircle className="h-5 w-5" />
            <span className="font-medium">Thanks for subscribing!</span>
          </motion.div>
        ) : (
          <motion.form
            initial={{ opacity: 0, y: 10 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, y: -10 }}
            onSubmit={handleSubmit}
            className="flex flex-col sm:flex-row gap-2"
          >
            <Input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="Enter your email"
              className="flex-1 bg-primary-foreground text-foreground placeholder:text-muted-foreground border-0"
              disabled={isSubmitting}
            />
            <Button 
              type="submit" 
              variant="secondary"
              disabled={isSubmitting}
              className="whitespace-nowrap"
            >
              {isSubmitting ? 'Subscribing...' : 'Subscribe'}
            </Button>
          </motion.form>
        )}
      </AnimatePresence>

      {/* Divider */}
      <div className="my-5 border-t border-primary-foreground/20" />

      {/* Internship CTA Section */}
      <div className="flex flex-col sm:flex-row sm:items-center gap-4">
        <div className="flex items-center gap-3 flex-1">
          <div className="h-10 w-10 rounded-full bg-primary-foreground/10 flex items-center justify-center flex-shrink-0">
            <GraduationCap className="h-5 w-5" />
          </div>
          <div>
            <h4 className="font-semibold text-sm">Start Your Journalism Career</h4>
            <p className="text-xs text-primary-foreground/70">Join our internship program and learn from industry experts</p>
          </div>
        </div>
        <Link to="/internship">
          <Button 
            variant="outline" 
            size="sm"
            className="bg-transparent border-primary-foreground/30 text-primary-foreground hover:bg-primary-foreground/10 hover:text-primary-foreground gap-2 whitespace-nowrap"
          >
            Apply Now
            <ArrowRight className="h-4 w-4" />
          </Button>
        </Link>
      </div>
    </div>
  );
};

--- FILE END: src\components\news\NewsletterSignup.tsx ---


--- FILE START: src\components\news\SearchWithFilters.tsx ---
import { useState, useMemo, useEffect } from 'react';
import { Search, Filter, X, Calendar, User, Tag } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import { categories, authors } from '@/data/mockData';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from './ArticleCard';
import { motion, AnimatePresence } from 'framer-motion';
import { format } from 'date-fns';

interface SearchWithFiltersProps {
  onClose?: () => void;
  isModal?: boolean;
}

export const SearchWithFilters = ({ onClose, isModal = false }: SearchWithFiltersProps) => {
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);
  const [selectedAuthor, setSelectedAuthor] = useState<string | null>(null);
  const [dateRange, setDateRange] = useState<{ from: string; to: string }>({ from: '', to: '' });
  const [showFilters, setShowFilters] = useState(false);
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  useEffect(() => {
    setArticlesList(getArticles());
  }, []);

  const filteredArticles = useMemo(() => {
    return articlesList.filter(article => {
      // Search query filter
      if (searchQuery) {
        const query = searchQuery.toLowerCase();
        const matchesTitle = article.title.toLowerCase().includes(query);
        const matchesExcerpt = article.excerpt.toLowerCase().includes(query);
        const matchesTags = article.tags.some(tag => tag.toLowerCase().includes(query));
        const matchesAuthor = article.author.name.toLowerCase().includes(query);

        if (!matchesTitle && !matchesExcerpt && !matchesTags && !matchesAuthor) {
          return false;
        }
      }

      // Category filter
      if (selectedCategory && article.category !== selectedCategory) {
        return false;
      }

      // Author filter
      if (selectedAuthor && article.author.id !== selectedAuthor) {
        return false;
      }

      // Date range filter
      if (dateRange.from) {
        const fromDate = new Date(dateRange.from);
        if (article.publishedAt < fromDate) {
          return false;
        }
      }
      if (dateRange.to) {
        const toDate = new Date(dateRange.to);
        toDate.setHours(23, 59, 59, 999);
        if (article.publishedAt > toDate) {
          return false;
        }
      }

      return true;
    });
  }, [searchQuery, selectedCategory, selectedAuthor, dateRange]);

  const clearFilters = () => {
    setSearchQuery('');
    setSelectedCategory(null);
    setSelectedAuthor(null);
    setDateRange({ from: '', to: '' });
  };

  const hasActiveFilters = searchQuery || selectedCategory || selectedAuthor || dateRange.from || dateRange.to;

  return (
    <div className={isModal ? 'fixed inset-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80' : ''}>
      {isModal && (
        <div className="absolute top-4 right-4">
          <Button variant="ghost" size="icon" onClick={onClose}>
            <X className="h-5 w-5" />
          </Button>
        </div>
      )}

      <div className={`container mx-auto px-4 ${isModal ? 'py-16' : 'py-8'}`}>
        {/* Search Bar */}
        <div className="max-w-3xl mx-auto">
          <div className="relative">
            <Search className="absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground" />
            <Input
              type="search"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              placeholder="Search articles, topics, authors..."
              className="pl-12 pr-4 h-14 text-lg rounded-xl"
              autoFocus
            />
          </div>

          {/* Filter Toggle */}
          <div className="mt-4 flex items-center justify-between">
            <Button
              variant="outline"
              size="sm"
              onClick={() => setShowFilters(!showFilters)}
              className="gap-2"
            >
              <Filter className="h-4 w-4" />
              Filters
              {hasActiveFilters && (
                <Badge variant="secondary" className="ml-1 h-5 px-1.5">
                  Active
                </Badge>
              )}
            </Button>

            {hasActiveFilters && (
              <Button variant="ghost" size="sm" onClick={clearFilters}>
                Clear all
              </Button>
            )}
          </div>

          {/* Filters Panel */}
          <AnimatePresence>
            {showFilters && (
              <motion.div
                initial={{ height: 0, opacity: 0 }}
                animate={{ height: 'auto', opacity: 1 }}
                exit={{ height: 0, opacity: 0 }}
                className="overflow-hidden"
              >
                <div className="mt-4 p-4 rounded-xl bg-muted/50 border border-border space-y-4">
                  {/* Category Filter */}
                  <div>
                    <label className="flex items-center gap-2 text-sm font-medium text-foreground mb-2">
                      <Tag className="h-4 w-4" />
                      Category
                    </label>
                    <div className="flex flex-wrap gap-2">
                      {categories.map((cat) => (
                        <Badge
                          key={cat.id}
                          variant={selectedCategory === cat.id ? 'default' : 'outline'}
                          className="cursor-pointer"
                          onClick={() => setSelectedCategory(selectedCategory === cat.id ? null : cat.id)}
                        >
                          {cat.name}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  {/* Author Filter */}
                  <div>
                    <label className="flex items-center gap-2 text-sm font-medium text-foreground mb-2">
                      <User className="h-4 w-4" />
                      Author
                    </label>
                    <div className="flex flex-wrap gap-2">
                      {authors.map((author) => (
                        <Badge
                          key={author.id}
                          variant={selectedAuthor === author.id ? 'default' : 'outline'}
                          className="cursor-pointer"
                          onClick={() => setSelectedAuthor(selectedAuthor === author.id ? null : author.id)}
                        >
                          {author.name}
                        </Badge>
                      ))}
                    </div>
                  </div>

                  {/* Date Range */}
                  <div>
                    <label className="flex items-center gap-2 text-sm font-medium text-foreground mb-2">
                      <Calendar className="h-4 w-4" />
                      Date Range
                    </label>
                    <div className="flex flex-wrap gap-2">
                      <Input
                        type="date"
                        value={dateRange.from}
                        onChange={(e) => setDateRange({ ...dateRange, from: e.target.value })}
                        className="w-auto"
                        placeholder="From"
                      />
                      <span className="self-center text-muted-foreground">to</span>
                      <Input
                        type="date"
                        value={dateRange.to}
                        onChange={(e) => setDateRange({ ...dateRange, to: e.target.value })}
                        className="w-auto"
                        placeholder="To"
                      />
                    </div>
                  </div>
                </div>
              </motion.div>
            )}
          </AnimatePresence>
        </div>

        {/* Results */}
        <div className="mt-8">
          <p className="text-sm text-muted-foreground mb-4">
            {filteredArticles.length} {filteredArticles.length === 1 ? 'result' : 'results'} found
          </p>

          {filteredArticles.length > 0 ? (
            <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
              {filteredArticles.map((article) => (
                <ArticleCard key={article.id} article={article} />
              ))}
            </div>
          ) : (
            <div className="text-center py-12">
              <Search className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
              <h3 className="font-display text-lg font-semibold text-foreground">No results found</h3>
              <p className="text-muted-foreground mt-2">
                Try adjusting your search or filters to find what you're looking for.
              </p>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

--- FILE END: src\components\news\SearchWithFilters.tsx ---


--- FILE START: src\components\news\TrendingSidebar.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from './ArticleCard';
import { TrendingUp, Eye } from 'lucide-react';
import { Skeleton } from '@/components/ui/skeleton';
import { getSectionsSettings } from '@/lib/settingsService';

// Default sections definition for fallback
const defaultSections = [
  { id: 'trending', name: 'Trending Now', enabled: true, order: 5, maxArticles: 5, selectedArticleIds: [], showOnHomepage: true }
];

export const TrendingSidebar = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  const [isLoading, setIsLoading] = useState(true);

  const fetchData = useCallback(() => {
    setArticlesList(getArticles());
  }, []);

  // Load data and simulate minimal loading state
  useEffect(() => {
    fetchData();
    window.addEventListener('articlesUpdated', fetchData);
    window.addEventListener('sectionsSettingsUpdated', fetchData);

    const timer = setTimeout(() => setIsLoading(false), 600);
    return () => {
      clearTimeout(timer);
      window.removeEventListener('articlesUpdated', fetchData);
      window.removeEventListener('sectionsSettingsUpdated', fetchData);
    };
  }, [fetchData]);

  // Get trending section settings
  const sections = getSectionsSettings(defaultSections as any);
  const trendingSection = sections.find(s => s.id === 'trending');

  // If we have selected articles in settings, use those. Otherwise fallback to top viewed.
  let trendingArticles: Article[] = [];
  if (trendingSection && trendingSection.selectedArticleIds.length > 0) {
    trendingArticles = trendingSection.selectedArticleIds
      .map(id => articlesList.find(a => a.id === id))
      .filter((a): a is Article => !!a);
  } else {
    // Fallback: sort by views
    trendingArticles = [...articlesList]
      .sort((a, b) => b.views - a.views)
      .slice(0, 5);
  }

  if (isLoading) {
    return (
      <div className="rounded-xl bg-card p-4 border border-border">
        <div className="flex items-center gap-2 mb-4 pb-2 border-b border-border">
          <Skeleton className="h-5 w-5 rounded" />
          <Skeleton className="h-6 w-32" />
        </div>
        <div className="space-y-4">
          {[1, 2, 3, 4, 5].map((i) => (
            <div key={i} className="flex items-start gap-3">
              <Skeleton className="h-6 w-6 rounded-full shrink-0" />
              <div className="flex-1 space-y-2">
                <Skeleton className="h-4 w-full" />
                <Skeleton className="h-4 w-3/4" />
                <Skeleton className="h-3 w-20" />
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  }

  return (
    <div className="rounded-xl bg-card p-4 border border-border">
      <div className="flex items-center gap-2 mb-4 pb-2 border-b border-border">
        <TrendingUp className="h-5 w-5 text-accent" />
        <h3 className="font-display text-lg font-bold text-foreground">Trending Now</h3>
      </div>

      <div className="space-y-1">
        {trendingArticles.map((article, index) => (
          <div key={article.id} className="flex items-start gap-3">
            <span className="flex h-6 w-6 flex-shrink-0 items-center justify-center rounded-full bg-primary text-xs font-bold text-primary-foreground">
              {index + 1}
            </span>
            <ArticleCard article={article} variant="compact" />
          </div>
        ))}
      </div>
    </div>
  );
};

--- FILE END: src\components\news\TrendingSidebar.tsx ---


--- FILE START: src\components\news\VideoPlayerModal.tsx ---
import { Dialog, DialogContent, DialogTitle } from '@/components/ui/dialog';
import { X } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { VisuallyHidden } from '@radix-ui/react-visually-hidden';
import { getYoutubeId } from '@/lib/videoUtils';

interface VideoPlayerModalProps {
  isOpen: boolean;
  onClose: () => void;
  videoUrl: string;
  title: string;
}

export const VideoPlayerModal = ({ isOpen, onClose, videoUrl, title }: VideoPlayerModalProps) => {
  // Convert YouTube URL to embed format using robust utility
  const getEmbedUrl = (url: string) => {
    const id = getYoutubeId(url);
    if (id) {
      return `https://www.youtube.com/embed/${id}?autoplay=1`;
    }
    return url;
  };

  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent className="max-w-4xl w-[95vw] p-0 bg-black border-none overflow-hidden">
        <VisuallyHidden>
          <DialogTitle>{title}</DialogTitle>
        </VisuallyHidden>
        <div className="relative">
          <Button
            variant="ghost"
            size="icon"
            className="absolute top-2 right-2 z-10 bg-black/50 hover:bg-black/70 text-white rounded-full"
            onClick={onClose}
          >
            <X className="h-5 w-5" />
          </Button>
          <div className="aspect-video w-full">
            <iframe
              src={getEmbedUrl(videoUrl)}
              title={title}
              className="w-full h-full"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
              allowFullScreen
            />
          </div>
          <div className="p-4 bg-card">
            <h3 className="font-display font-semibold text-foreground line-clamp-2">
              {title}
            </h3>
          </div>
        </div>
      </DialogContent>
    </Dialog>
  );
};

--- FILE END: src\components\news\VideoPlayerModal.tsx ---


--- FILE START: src\components\news\VideoSection.tsx ---
import { useState, useEffect, useCallback } from 'react';
import { getArticles } from '@/lib/articleService';
import { PlayCircle, Video, Clock, Eye } from 'lucide-react';
import { Badge } from '@/components/ui/badge';
import { Skeleton } from '@/components/ui/skeleton';
import { VideoPlayerModal } from './VideoPlayerModal';
import { formatDistanceToNow } from 'date-fns';
import { Article } from '@/types/news';
import { getSectionsSettings } from '@/lib/settingsService';

const getCategoryColor = (category: string) => {
  const colors: Record<string, string> = {
    national: 'bg-blue-500',
    international: 'bg-purple-500',
    economy: 'bg-amber-500',
    environment: 'bg-emerald-500',
    technology: 'bg-cyan-500',
    culture: 'bg-pink-500',
    editorial: 'bg-slate-500',
    society: 'bg-orange-500',
    'untold-stories': 'bg-red-600',
    sports: 'bg-green-500',
    entertainment: 'bg-fuchsia-500',
  };
  return colors[category] || 'bg-primary';
};

interface VideoCardProps {
  article: Article;
  onPlay: () => void;
}

import { getYoutubeThumbnail, FALLBACK_IMAGE } from '@/lib/videoUtils';

// Default sections definition for fallback
const defaultSections = [
  { id: 'video-stories', name: 'Video Stories', enabled: true, order: 3, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true }
];

const VideoCard = ({ article, onPlay }: VideoCardProps) => {
  const displayImage = article.featuredImage ||
    (article.videoUrl ? getYoutubeThumbnail(article.videoUrl) : null) ||
    FALLBACK_IMAGE;

  return (
    <div
      onClick={onPlay}
      className="group block overflow-hidden rounded-xl bg-card border border-border transition-shadow hover:shadow-lg h-full cursor-pointer"
    >
      <div className="aspect-video overflow-hidden relative flex-shrink-0">
        <img
          src={displayImage}
          alt={article.title}
          className="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
          loading="lazy"
          onError={(e) => { e.currentTarget.src = FALLBACK_IMAGE; }}
        />
        <div className="absolute inset-0 flex items-center justify-center bg-black/30 group-hover:bg-black/40 transition-colors">
          <div className="h-12 w-12 md:h-14 md:w-14 rounded-full bg-white/90 flex items-center justify-center group-hover:scale-110 transition-transform shadow-lg">
            <PlayCircle className="h-6 w-6 md:h-8 md:w-8 text-primary" />
          </div>
        </div>
        <Badge className={`absolute top-2 left-2 ${getCategoryColor(article.category)} text-white border-0 text-[10px]`}>
          {article.category.replace('-', ' ')}
        </Badge>
      </div>
      <div className="p-3 md:p-4">
        <h3 className="font-display text-sm md:text-base font-semibold text-foreground line-clamp-2 group-hover:text-primary transition-colors min-h-[2.5rem] md:min-h-[3rem]">
          {article.title}
        </h3>
        <div className="mt-2 flex items-center gap-3 text-xs text-muted-foreground">
          <span className="flex items-center gap-1">
            <Clock className="h-3 w-3 flex-shrink-0" />
            <span className="truncate">{formatDistanceToNow(article.publishedAt, { addSuffix: true })}</span>
          </span>
          <span className="flex items-center gap-1">
            <Eye className="h-3 w-3 flex-shrink-0" />
            {article.views.toLocaleString()}
          </span>
        </div>
      </div>
    </div>
  );
};

export const VideoSection = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  const [selectedVideo, setSelectedVideo] = useState<Article | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  const fetchData = useCallback(() => {
    setArticlesList(getArticles());
  }, []);

  // Load data and simulate loading
  useEffect(() => {
    fetchData();
    window.addEventListener('articlesUpdated', fetchData);
    window.addEventListener('sectionsSettingsUpdated', fetchData);

    const timer = setTimeout(() => setIsLoading(false), 700);
    return () => {
      clearTimeout(timer);
      window.removeEventListener('articlesUpdated', fetchData);
      window.removeEventListener('sectionsSettingsUpdated', fetchData);
    };
  }, [fetchData]);

  // Get video section settings
  const sections = getSectionsSettings(defaultSections as any);
  const videoSection = sections.find(s => s.id === 'video-stories');

  // If we have selected articles in settings, use those. Otherwise fallback to filter by hasVideo.
  let videoArticles: Article[] = [];
  if (videoSection && videoSection.selectedArticleIds.length > 0) {
    videoArticles = videoSection.selectedArticleIds
      .map(id => articlesList.find(a => a.id === id))
      .filter((a): a is Article => !!a && !!a.videoUrl);
  } else {
    // Fallback: filter by hasVideo
    videoArticles = articlesList.filter(a => (a.hasVideo || !!a.videoUrl) && a.videoUrl).slice(0, 4);
  }

  if (videoArticles.length === 0 && !isLoading) return null;

  if (isLoading) {
    return (
      <section className="py-8 bg-gradient-to-br from-primary/5 to-accent/5 overflow-hidden">
        <div className="container mx-auto px-4">
          <div className="flex items-center gap-2 mb-6">
            <Skeleton className="h-8 w-8 rounded-lg" />
            <Skeleton className="h-7 w-36" />
          </div>
          <div className="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
            {[1, 2, 3, 4].map((i) => (
              <div key={i} className="rounded-xl overflow-hidden bg-card border border-border">
                <div className="relative">
                  <Skeleton className="aspect-video w-full" />
                  <div className="absolute inset-0 flex items-center justify-center">
                    <Skeleton className="h-14 w-14 rounded-full" />
                  </div>
                </div>
                <div className="p-4 space-y-2">
                  <Skeleton className="h-5 w-full" />
                  <Skeleton className="h-5 w-3/4" />
                  <Skeleton className="h-3 w-24" />
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>
    );
  }

  if (videoArticles.length === 0) return null;

  return (
    <>
      <section className="py-8 bg-gradient-to-br from-primary/5 to-accent/5 overflow-hidden">
        <div className="container mx-auto px-4">
          <div className="flex items-center justify-between mb-6">
            <div className="flex items-center gap-2">
              <div className="h-8 w-8 rounded-lg bg-primary flex items-center justify-center">
                <Video className="h-4 w-4 text-primary-foreground" />
              </div>
              <h2 className="font-display text-xl font-bold text-foreground md:text-2xl">
                Video Stories
              </h2>
            </div>
          </div>

          <div className="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4">
            {videoArticles.map((article) => (
              <div key={article.id} className="relative isolate">
                <VideoCard
                  article={article}
                  onPlay={() => setSelectedVideo(article)}
                />
              </div>
            ))}
          </div>
        </div>
      </section>

      {selectedVideo && selectedVideo.videoUrl && (
        <VideoPlayerModal
          isOpen={!!selectedVideo}
          onClose={() => setSelectedVideo(null)}
          videoUrl={selectedVideo.videoUrl}
          title={selectedVideo.title}
        />
      )}
    </>
  );
};

--- FILE END: src\components\news\VideoSection.tsx ---


--- FILE START: src\components\PageTransition.tsx ---
import { motion } from 'framer-motion';
import { ReactNode } from 'react';

interface PageTransitionProps {
  children: ReactNode;
}

const pageVariants = {
  initial: {
    opacity: 0,
    y: 20,
  },
  enter: {
    opacity: 1,
    y: 0,
    transition: {
      duration: 0.4,
      ease: 'easeOut' as const,
    },
  },
  exit: {
    opacity: 0,
    y: -10,
    transition: {
      duration: 0.3,
      ease: 'easeOut' as const,
    },
  },
};

const PageTransition = ({ children }: PageTransitionProps) => {
  return (
    <motion.div
      initial="initial"
      animate="enter"
      exit="exit"
      variants={pageVariants}
    >
      {children}
    </motion.div>
  );
};

export default PageTransition;

--- FILE END: src\components\PageTransition.tsx ---


--- FILE START: src\components\ScrollToTop.tsx ---
import { useEffect } from 'react';
import { useLocation } from 'react-router-dom';

const ScrollToTop = () => {
  const { pathname, hash } = useLocation();

  useEffect(() => {
    // If there's a hash (anchor link), scroll to that element smoothly
    if (hash) {
      const element = document.querySelector(hash);
      if (element) {
        // Small delay to ensure DOM is ready
        setTimeout(() => {
          element.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 100);
      }
    } else {
      // No hash, scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }, [pathname, hash]);

  return null;
};

export default ScrollToTop;

--- FILE END: src\components\ScrollToTop.tsx ---


--- FILE START: src\components\ThemeToggle.tsx ---
import { Moon, Sun } from 'lucide-react';
import { useTheme } from '@/context/ThemeContext';
import { Button } from '@/components/ui/button';
import { motion } from 'framer-motion';

export const ThemeToggle = () => {
  const { theme, toggleTheme } = useTheme();

  return (
    <Button
      variant="ghost"
      size="icon"
      onClick={toggleTheme}
      className="relative h-9 w-9 rounded-full"
      aria-label={`Switch to ${theme === 'light' ? 'dark' : 'light'} mode`}
    >
      <motion.div
        initial={false}
        animate={{
          scale: theme === 'light' ? 1 : 0,
          opacity: theme === 'light' ? 1 : 0,
          rotate: theme === 'light' ? 0 : 180,
        }}
        transition={{ duration: 0.2, ease: 'easeInOut' }}
        className="absolute"
      >
        <Sun className="h-5 w-5 text-amber-500" />
      </motion.div>
      <motion.div
        initial={false}
        animate={{
          scale: theme === 'dark' ? 1 : 0,
          opacity: theme === 'dark' ? 1 : 0,
          rotate: theme === 'dark' ? 0 : -180,
        }}
        transition={{ duration: 0.2, ease: 'easeInOut' }}
        className="absolute"
      >
        <Moon className="h-5 w-5 text-primary" />
      </motion.div>
    </Button>
  );
};

--- FILE END: src\components\ThemeToggle.tsx ---


--- FILE START: src\components\ui\accordion.tsx ---
import * as React from "react";
import * as AccordionPrimitive from "@radix-ui/react-accordion";
import { ChevronDown } from "lucide-react";

import { cn } from "@/lib/utils";

const Accordion = AccordionPrimitive.Root;

const AccordionItem = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>
>(({ className, ...props }, ref) => (
  <AccordionPrimitive.Item ref={ref} className={cn("border-b", className)} {...props} />
));
AccordionItem.displayName = "AccordionItem";

const AccordionTrigger = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Header className="flex">
    <AccordionPrimitive.Trigger
      ref={ref}
      className={cn(
        "flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronDown className="h-4 w-4 shrink-0 transition-transform duration-200" />
    </AccordionPrimitive.Trigger>
  </AccordionPrimitive.Header>
));
AccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName;

const AccordionContent = React.forwardRef<
  React.ElementRef<typeof AccordionPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <AccordionPrimitive.Content
    ref={ref}
    className="overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"
    {...props}
  >
    <div className={cn("pb-4 pt-0", className)}>{children}</div>
  </AccordionPrimitive.Content>
));

AccordionContent.displayName = AccordionPrimitive.Content.displayName;

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent };

--- FILE END: src\components\ui\accordion.tsx ---


--- FILE START: src\components\ui\alert-dialog.tsx ---
import * as React from "react";
import * as AlertDialogPrimitive from "@radix-ui/react-alert-dialog";

import { cn } from "@/lib/utils";
import { buttonVariants } from "@/components/ui/button";

const AlertDialog = AlertDialogPrimitive.Root;

const AlertDialogTrigger = AlertDialogPrimitive.Trigger;

const AlertDialogPortal = AlertDialogPrimitive.Portal;

const AlertDialogOverlay = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
    ref={ref}
  />
));
AlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName;

const AlertDialogContent = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>
>(({ className, ...props }, ref) => (
  <AlertDialogPortal>
    <AlertDialogOverlay />
    <AlertDialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className,
      )}
      {...props}
    />
  </AlertDialogPortal>
));
AlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName;

const AlertDialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-2 text-center sm:text-left", className)} {...props} />
);
AlertDialogHeader.displayName = "AlertDialogHeader";

const AlertDialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
AlertDialogFooter.displayName = "AlertDialogFooter";

const AlertDialogTitle = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Title ref={ref} className={cn("text-lg font-semibold", className)} {...props} />
));
AlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName;

const AlertDialogDescription = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
AlertDialogDescription.displayName = AlertDialogPrimitive.Description.displayName;

const AlertDialogAction = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Action>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Action ref={ref} className={cn(buttonVariants(), className)} {...props} />
));
AlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName;

const AlertDialogCancel = React.forwardRef<
  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,
  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>
>(({ className, ...props }, ref) => (
  <AlertDialogPrimitive.Cancel
    ref={ref}
    className={cn(buttonVariants({ variant: "outline" }), "mt-2 sm:mt-0", className)}
    {...props}
  />
));
AlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName;

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
};

--- FILE END: src\components\ui\alert-dialog.tsx ---


--- FILE START: src\components\ui\alert.tsx ---
import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const alertVariants = cva(
  "relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",
  {
    variants: {
      variant: {
        default: "bg-background text-foreground",
        destructive: "border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

const Alert = React.forwardRef<
  HTMLDivElement,
  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>
>(({ className, variant, ...props }, ref) => (
  <div ref={ref} role="alert" className={cn(alertVariants({ variant }), className)} {...props} />
));
Alert.displayName = "Alert";

const AlertTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h5 ref={ref} className={cn("mb-1 font-medium leading-none tracking-tight", className)} {...props} />
  ),
);
AlertTitle.displayName = "AlertTitle";

const AlertDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("text-sm [&_p]:leading-relaxed", className)} {...props} />
  ),
);
AlertDescription.displayName = "AlertDescription";

export { Alert, AlertTitle, AlertDescription };

--- FILE END: src\components\ui\alert.tsx ---


--- FILE START: src\components\ui\aspect-ratio.tsx ---
import * as AspectRatioPrimitive from "@radix-ui/react-aspect-ratio";

const AspectRatio = AspectRatioPrimitive.Root;

export { AspectRatio };

--- FILE END: src\components\ui\aspect-ratio.tsx ---


--- FILE START: src\components\ui\avatar.tsx ---
import * as React from "react";
import * as AvatarPrimitive from "@radix-ui/react-avatar";

import { cn } from "@/lib/utils";

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full", className)}
    {...props}
  />
));
Avatar.displayName = AvatarPrimitive.Root.displayName;

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image ref={ref} className={cn("aspect-square h-full w-full", className)} {...props} />
));
AvatarImage.displayName = AvatarPrimitive.Image.displayName;

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn("flex h-full w-full items-center justify-center rounded-full bg-muted", className)}
    {...props}
  />
));
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName;

export { Avatar, AvatarImage, AvatarFallback };

--- FILE END: src\components\ui\avatar.tsx ---


--- FILE START: src\components\ui\badge.tsx ---
import * as React from "react";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

export interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;
}

export { Badge, badgeVariants };

--- FILE END: src\components\ui\badge.tsx ---


--- FILE START: src\components\ui\breadcrumb.tsx ---
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { ChevronRight, MoreHorizontal } from "lucide-react";

import { cn } from "@/lib/utils";

const Breadcrumb = React.forwardRef<
  HTMLElement,
  React.ComponentPropsWithoutRef<"nav"> & {
    separator?: React.ReactNode;
  }
>(({ ...props }, ref) => <nav ref={ref} aria-label="breadcrumb" {...props} />);
Breadcrumb.displayName = "Breadcrumb";

const BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<"ol">>(
  ({ className, ...props }, ref) => (
    <ol
      ref={ref}
      className={cn(
        "flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5",
        className,
      )}
      {...props}
    />
  ),
);
BreadcrumbList.displayName = "BreadcrumbList";

const BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<"li">>(
  ({ className, ...props }, ref) => (
    <li ref={ref} className={cn("inline-flex items-center gap-1.5", className)} {...props} />
  ),
);
BreadcrumbItem.displayName = "BreadcrumbItem";

const BreadcrumbLink = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentPropsWithoutRef<"a"> & {
    asChild?: boolean;
  }
>(({ asChild, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a";

  return <Comp ref={ref} className={cn("transition-colors hover:text-foreground", className)} {...props} />;
});
BreadcrumbLink.displayName = "BreadcrumbLink";

const BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<"span">>(
  ({ className, ...props }, ref) => (
    <span
      ref={ref}
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("font-normal text-foreground", className)}
      {...props}
    />
  ),
);
BreadcrumbPage.displayName = "BreadcrumbPage";

const BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<"li">) => (
  <li role="presentation" aria-hidden="true" className={cn("[&>svg]:size-3.5", className)} {...props}>
    {children ?? <ChevronRight />}
  </li>
);
BreadcrumbSeparator.displayName = "BreadcrumbSeparator";

const BreadcrumbEllipsis = ({ className, ...props }: React.ComponentProps<"span">) => (
  <span
    role="presentation"
    aria-hidden="true"
    className={cn("flex h-9 w-9 items-center justify-center", className)}
    {...props}
  >
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More</span>
  </span>
);
BreadcrumbEllipsis.displayName = "BreadcrumbElipssis";

export {
  Breadcrumb,
  BreadcrumbList,
  BreadcrumbItem,
  BreadcrumbLink,
  BreadcrumbPage,
  BreadcrumbSeparator,
  BreadcrumbEllipsis,
};

--- FILE END: src\components\ui\breadcrumb.tsx ---


--- FILE START: src\components\ui\button.tsx ---
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "bg-primary text-primary-foreground hover:bg-primary/90",
        destructive: "bg-destructive text-destructive-foreground hover:bg-destructive/90",
        outline: "border border-input bg-background hover:bg-accent hover:text-accent-foreground",
        secondary: "bg-secondary text-secondary-foreground hover:bg-secondary/80",
        ghost: "hover:bg-accent hover:text-accent-foreground",
        link: "text-primary underline-offset-4 hover:underline",
      },
      size: {
        default: "h-10 px-4 py-2",
        sm: "h-9 rounded-md px-3",
        lg: "h-11 rounded-md px-8",
        icon: "h-10 w-10",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

export interface ButtonProps
  extends React.ButtonHTMLAttributes<HTMLButtonElement>,
    VariantProps<typeof buttonVariants> {
  asChild?: boolean;
}

const Button = React.forwardRef<HTMLButtonElement, ButtonProps>(
  ({ className, variant, size, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";
    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;
  },
);
Button.displayName = "Button";

export { Button, buttonVariants };

--- FILE END: src\components\ui\button.tsx ---


--- FILE START: src\components\ui\calendar.tsx ---
import * as React from "react";
import { ChevronLeft, ChevronRight } from "lucide-react";
import { DayPicker } from "react-day-picker";

import { cn } from "@/lib/utils";
import { buttonVariants } from "@/components/ui/button";

export type CalendarProps = React.ComponentProps<typeof DayPicker>;

function Calendar({ className, classNames, showOutsideDays = true, ...props }: CalendarProps) {
  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn("p-3", className)}
      classNames={{
        months: "flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",
        month: "space-y-4",
        caption: "flex justify-center pt-1 relative items-center",
        caption_label: "text-sm font-medium",
        nav: "space-x-1 flex items-center",
        nav_button: cn(
          buttonVariants({ variant: "outline" }),
          "h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",
        ),
        nav_button_previous: "absolute left-1",
        nav_button_next: "absolute right-1",
        table: "w-full border-collapse space-y-1",
        head_row: "flex",
        head_cell: "text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",
        row: "flex w-full mt-2",
        cell: "h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",
        day: cn(buttonVariants({ variant: "ghost" }), "h-9 w-9 p-0 font-normal aria-selected:opacity-100"),
        day_range_end: "day-range-end",
        day_selected:
          "bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",
        day_today: "bg-accent text-accent-foreground",
        day_outside:
          "day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",
        day_disabled: "text-muted-foreground opacity-50",
        day_range_middle: "aria-selected:bg-accent aria-selected:text-accent-foreground",
        day_hidden: "invisible",
        ...classNames,
      }}
      components={{
        IconLeft: ({ ..._props }) => <ChevronLeft className="h-4 w-4" />,
        IconRight: ({ ..._props }) => <ChevronRight className="h-4 w-4" />,
      }}
      {...props}
    />
  );
}
Calendar.displayName = "Calendar";

export { Calendar };

--- FILE END: src\components\ui\calendar.tsx ---


--- FILE START: src\components\ui\card.tsx ---
import * as React from "react";

import { cn } from "@/lib/utils";

const Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(({ className, ...props }, ref) => (
  <div ref={ref} className={cn("rounded-lg border bg-card text-card-foreground shadow-sm", className)} {...props} />
));
Card.displayName = "Card";

const CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("flex flex-col space-y-1.5 p-6", className)} {...props} />
  ),
);
CardHeader.displayName = "CardHeader";

const CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(
  ({ className, ...props }, ref) => (
    <h3 ref={ref} className={cn("text-2xl font-semibold leading-none tracking-tight", className)} {...props} />
  ),
);
CardTitle.displayName = "CardTitle";

const CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => (
    <p ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
  ),
);
CardDescription.displayName = "CardDescription";

const CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => <div ref={ref} className={cn("p-6 pt-0", className)} {...props} />,
);
CardContent.displayName = "CardContent";

const CardFooter = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div ref={ref} className={cn("flex items-center p-6 pt-0", className)} {...props} />
  ),
);
CardFooter.displayName = "CardFooter";

export { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent };

--- FILE END: src\components\ui\card.tsx ---


--- FILE START: src\components\ui\carousel.tsx ---
import * as React from "react";
import useEmblaCarousel, { type UseEmblaCarouselType } from "embla-carousel-react";
import { ArrowLeft, ArrowRight } from "lucide-react";

import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";

type CarouselApi = UseEmblaCarouselType[1];
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>;
type CarouselOptions = UseCarouselParameters[0];
type CarouselPlugin = UseCarouselParameters[1];

type CarouselProps = {
  opts?: CarouselOptions;
  plugins?: CarouselPlugin;
  orientation?: "horizontal" | "vertical";
  setApi?: (api: CarouselApi) => void;
};

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0];
  api: ReturnType<typeof useEmblaCarousel>[1];
  scrollPrev: () => void;
  scrollNext: () => void;
  canScrollPrev: boolean;
  canScrollNext: boolean;
} & CarouselProps;

const CarouselContext = React.createContext<CarouselContextProps | null>(null);

function useCarousel() {
  const context = React.useContext(CarouselContext);

  if (!context) {
    throw new Error("useCarousel must be used within a <Carousel />");
  }

  return context;
}

const Carousel = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement> & CarouselProps>(
  ({ orientation = "horizontal", opts, setApi, plugins, className, children, ...props }, ref) => {
    const [carouselRef, api] = useEmblaCarousel(
      {
        ...opts,
        axis: orientation === "horizontal" ? "x" : "y",
      },
      plugins,
    );
    const [canScrollPrev, setCanScrollPrev] = React.useState(false);
    const [canScrollNext, setCanScrollNext] = React.useState(false);

    const onSelect = React.useCallback((api: CarouselApi) => {
      if (!api) {
        return;
      }

      setCanScrollPrev(api.canScrollPrev());
      setCanScrollNext(api.canScrollNext());
    }, []);

    const scrollPrev = React.useCallback(() => {
      api?.scrollPrev();
    }, [api]);

    const scrollNext = React.useCallback(() => {
      api?.scrollNext();
    }, [api]);

    const handleKeyDown = React.useCallback(
      (event: React.KeyboardEvent<HTMLDivElement>) => {
        if (event.key === "ArrowLeft") {
          event.preventDefault();
          scrollPrev();
        } else if (event.key === "ArrowRight") {
          event.preventDefault();
          scrollNext();
        }
      },
      [scrollPrev, scrollNext],
    );

    React.useEffect(() => {
      if (!api || !setApi) {
        return;
      }

      setApi(api);
    }, [api, setApi]);

    React.useEffect(() => {
      if (!api) {
        return;
      }

      onSelect(api);
      api.on("reInit", onSelect);
      api.on("select", onSelect);

      return () => {
        api?.off("select", onSelect);
      };
    }, [api, onSelect]);

    return (
      <CarouselContext.Provider
        value={{
          carouselRef,
          api: api,
          opts,
          orientation: orientation || (opts?.axis === "y" ? "vertical" : "horizontal"),
          scrollPrev,
          scrollNext,
          canScrollPrev,
          canScrollNext,
        }}
      >
        <div
          ref={ref}
          onKeyDownCapture={handleKeyDown}
          className={cn("relative", className)}
          role="region"
          aria-roledescription="carousel"
          {...props}
        >
          {children}
        </div>
      </CarouselContext.Provider>
    );
  },
);
Carousel.displayName = "Carousel";

const CarouselContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const { carouselRef, orientation } = useCarousel();

    return (
      <div ref={carouselRef} className="overflow-hidden">
        <div
          ref={ref}
          className={cn("flex", orientation === "horizontal" ? "-ml-4" : "-mt-4 flex-col", className)}
          {...props}
        />
      </div>
    );
  },
);
CarouselContent.displayName = "CarouselContent";

const CarouselItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const { orientation } = useCarousel();

    return (
      <div
        ref={ref}
        role="group"
        aria-roledescription="slide"
        className={cn("min-w-0 shrink-0 grow-0 basis-full", orientation === "horizontal" ? "pl-4" : "pt-4", className)}
        {...props}
      />
    );
  },
);
CarouselItem.displayName = "CarouselItem";

const CarouselPrevious = React.forwardRef<HTMLButtonElement, React.ComponentProps<typeof Button>>(
  ({ className, variant = "outline", size = "icon", ...props }, ref) => {
    const { orientation, scrollPrev, canScrollPrev } = useCarousel();

    return (
      <Button
        ref={ref}
        variant={variant}
        size={size}
        className={cn(
          "absolute h-8 w-8 rounded-full",
          orientation === "horizontal"
            ? "-left-12 top-1/2 -translate-y-1/2"
            : "-top-12 left-1/2 -translate-x-1/2 rotate-90",
          className,
        )}
        disabled={!canScrollPrev}
        onClick={scrollPrev}
        {...props}
      >
        <ArrowLeft className="h-4 w-4" />
        <span className="sr-only">Previous slide</span>
      </Button>
    );
  },
);
CarouselPrevious.displayName = "CarouselPrevious";

const CarouselNext = React.forwardRef<HTMLButtonElement, React.ComponentProps<typeof Button>>(
  ({ className, variant = "outline", size = "icon", ...props }, ref) => {
    const { orientation, scrollNext, canScrollNext } = useCarousel();

    return (
      <Button
        ref={ref}
        variant={variant}
        size={size}
        className={cn(
          "absolute h-8 w-8 rounded-full",
          orientation === "horizontal"
            ? "-right-12 top-1/2 -translate-y-1/2"
            : "-bottom-12 left-1/2 -translate-x-1/2 rotate-90",
          className,
        )}
        disabled={!canScrollNext}
        onClick={scrollNext}
        {...props}
      >
        <ArrowRight className="h-4 w-4" />
        <span className="sr-only">Next slide</span>
      </Button>
    );
  },
);
CarouselNext.displayName = "CarouselNext";

export { type CarouselApi, Carousel, CarouselContent, CarouselItem, CarouselPrevious, CarouselNext };

--- FILE END: src\components\ui\carousel.tsx ---


--- FILE START: src\components\ui\chart.tsx ---
import * as React from "react";
import * as RechartsPrimitive from "recharts";

import { cn } from "@/lib/utils";

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: "", dark: ".dark" } as const;

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode;
    icon?: React.ComponentType;
  } & ({ color?: string; theme?: never } | { color?: never; theme: Record<keyof typeof THEMES, string> });
};

type ChartContextProps = {
  config: ChartConfig;
};

const ChartContext = React.createContext<ChartContextProps | null>(null);

function useChart() {
  const context = React.useContext(ChartContext);

  if (!context) {
    throw new Error("useChart must be used within a <ChartContainer />");
  }

  return context;
}

const ChartContainer = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    config: ChartConfig;
    children: React.ComponentProps<typeof RechartsPrimitive.ResponsiveContainer>["children"];
  }
>(({ id, className, children, config, ...props }, ref) => {
  const uniqueId = React.useId();
  const chartId = `chart-${id || uniqueId.replace(/:/g, "")}`;

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-chart={chartId}
        ref={ref}
        className={cn(
          "flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>{children}</RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  );
});
ChartContainer.displayName = "Chart";

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(([_, config]) => config.theme || config.color);

  if (!colorConfig.length) {
    return null;
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color = itemConfig.theme?.[theme as keyof typeof itemConfig.theme] || itemConfig.color;
    return color ? `  --color-${key}: ${color};` : null;
  })
  .join("\n")}
}
`,
          )
          .join("\n"),
      }}
    />
  );
};

const ChartTooltip = RechartsPrimitive.Tooltip;

const ChartTooltipContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
    React.ComponentProps<"div"> & {
      hideLabel?: boolean;
      hideIndicator?: boolean;
      indicator?: "line" | "dot" | "dashed";
      nameKey?: string;
      labelKey?: string;
    }
>(
  (
    {
      active,
      payload,
      className,
      indicator = "dot",
      hideLabel = false,
      hideIndicator = false,
      label,
      labelFormatter,
      labelClassName,
      formatter,
      color,
      nameKey,
      labelKey,
    },
    ref,
  ) => {
    const { config } = useChart();

    const tooltipLabel = React.useMemo(() => {
      if (hideLabel || !payload?.length) {
        return null;
      }

      const [item] = payload;
      const key = `${labelKey || item.dataKey || item.name || "value"}`;
      const itemConfig = getPayloadConfigFromPayload(config, item, key);
      const value =
        !labelKey && typeof label === "string"
          ? config[label as keyof typeof config]?.label || label
          : itemConfig?.label;

      if (labelFormatter) {
        return <div className={cn("font-medium", labelClassName)}>{labelFormatter(value, payload)}</div>;
      }

      if (!value) {
        return null;
      }

      return <div className={cn("font-medium", labelClassName)}>{value}</div>;
    }, [label, labelFormatter, payload, hideLabel, labelClassName, config, labelKey]);

    if (!active || !payload?.length) {
      return null;
    }

    const nestLabel = payload.length === 1 && indicator !== "dot";

    return (
      <div
        ref={ref}
        className={cn(
          "grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",
          className,
        )}
      >
        {!nestLabel ? tooltipLabel : null}
        <div className="grid gap-1.5">
          {payload.map((item, index) => {
            const key = `${nameKey || item.name || item.dataKey || "value"}`;
            const itemConfig = getPayloadConfigFromPayload(config, item, key);
            const indicatorColor = color || item.payload.fill || item.color;

            return (
              <div
                key={item.dataKey}
                className={cn(
                  "flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",
                  indicator === "dot" && "items-center",
                )}
              >
                {formatter && item?.value !== undefined && item.name ? (
                  formatter(item.value, item.name, item, index, item.payload)
                ) : (
                  <>
                    {itemConfig?.icon ? (
                      <itemConfig.icon />
                    ) : (
                      !hideIndicator && (
                        <div
                          className={cn("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]", {
                            "h-2.5 w-2.5": indicator === "dot",
                            "w-1": indicator === "line",
                            "w-0 border-[1.5px] border-dashed bg-transparent": indicator === "dashed",
                            "my-0.5": nestLabel && indicator === "dashed",
                          })}
                          style={
                            {
                              "--color-bg": indicatorColor,
                              "--color-border": indicatorColor,
                            } as React.CSSProperties
                          }
                        />
                      )
                    )}
                    <div
                      className={cn(
                        "flex flex-1 justify-between leading-none",
                        nestLabel ? "items-end" : "items-center",
                      )}
                    >
                      <div className="grid gap-1.5">
                        {nestLabel ? tooltipLabel : null}
                        <span className="text-muted-foreground">{itemConfig?.label || item.name}</span>
                      </div>
                      {item.value && (
                        <span className="font-mono font-medium tabular-nums text-foreground">
                          {item.value.toLocaleString()}
                        </span>
                      )}
                    </div>
                  </>
                )}
              </div>
            );
          })}
        </div>
      </div>
    );
  },
);
ChartTooltipContent.displayName = "ChartTooltip";

const ChartLegend = RechartsPrimitive.Legend;

const ChartLegendContent = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> &
    Pick<RechartsPrimitive.LegendProps, "payload" | "verticalAlign"> & {
      hideIcon?: boolean;
      nameKey?: string;
    }
>(({ className, hideIcon = false, payload, verticalAlign = "bottom", nameKey }, ref) => {
  const { config } = useChart();

  if (!payload?.length) {
    return null;
  }

  return (
    <div
      ref={ref}
      className={cn("flex items-center justify-center gap-4", verticalAlign === "top" ? "pb-3" : "pt-3", className)}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || "value"}`;
        const itemConfig = getPayloadConfigFromPayload(config, item, key);

        return (
          <div
            key={item.value}
            className={cn("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground")}
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        );
      })}
    </div>
  );
});
ChartLegendContent.displayName = "ChartLegend";

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(config: ChartConfig, payload: unknown, key: string) {
  if (typeof payload !== "object" || payload === null) {
    return undefined;
  }

  const payloadPayload =
    "payload" in payload && typeof payload.payload === "object" && payload.payload !== null
      ? payload.payload
      : undefined;

  let configLabelKey: string = key;

  if (key in payload && typeof payload[key as keyof typeof payload] === "string") {
    configLabelKey = payload[key as keyof typeof payload] as string;
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === "string"
  ) {
    configLabelKey = payloadPayload[key as keyof typeof payloadPayload] as string;
  }

  return configLabelKey in config ? config[configLabelKey] : config[key as keyof typeof config];
}

export { ChartContainer, ChartTooltip, ChartTooltipContent, ChartLegend, ChartLegendContent, ChartStyle };

--- FILE END: src\components\ui\chart.tsx ---


--- FILE START: src\components\ui\checkbox.tsx ---
import * as React from "react";
import * as CheckboxPrimitive from "@radix-ui/react-checkbox";
import { Check } from "lucide-react";

import { cn } from "@/lib/utils";

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
      className,
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator className={cn("flex items-center justify-center text-current")}>
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
));
Checkbox.displayName = CheckboxPrimitive.Root.displayName;

export { Checkbox };

--- FILE END: src\components\ui\checkbox.tsx ---


--- FILE START: src\components\ui\collapsible.tsx ---
import * as CollapsiblePrimitive from "@radix-ui/react-collapsible";

const Collapsible = CollapsiblePrimitive.Root;

const CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger;

const CollapsibleContent = CollapsiblePrimitive.CollapsibleContent;

export { Collapsible, CollapsibleTrigger, CollapsibleContent };

--- FILE END: src\components\ui\collapsible.tsx ---


--- FILE START: src\components\ui\command.tsx ---
import * as React from "react";
import { type DialogProps } from "@radix-ui/react-dialog";
import { Command as CommandPrimitive } from "cmdk";
import { Search } from "lucide-react";

import { cn } from "@/lib/utils";
import { Dialog, DialogContent } from "@/components/ui/dialog";

const Command = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive>
>(({ className, ...props }, ref) => (
  <CommandPrimitive
    ref={ref}
    className={cn(
      "flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",
      className,
    )}
    {...props}
  />
));
Command.displayName = CommandPrimitive.displayName;

interface CommandDialogProps extends DialogProps {}

const CommandDialog = ({ children, ...props }: CommandDialogProps) => {
  return (
    <Dialog {...props}>
      <DialogContent className="overflow-hidden p-0 shadow-lg">
        <Command className="[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  );
};

const CommandInput = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Input>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>
>(({ className, ...props }, ref) => (
  <div className="flex items-center border-b px-3" cmdk-input-wrapper="">
    <Search className="mr-2 h-4 w-4 shrink-0 opacity-50" />
    <CommandPrimitive.Input
      ref={ref}
      className={cn(
        "flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    />
  </div>
));

CommandInput.displayName = CommandPrimitive.Input.displayName;

const CommandList = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.List
    ref={ref}
    className={cn("max-h-[300px] overflow-y-auto overflow-x-hidden", className)}
    {...props}
  />
));

CommandList.displayName = CommandPrimitive.List.displayName;

const CommandEmpty = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Empty>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>
>((props, ref) => <CommandPrimitive.Empty ref={ref} className="py-6 text-center text-sm" {...props} />);

CommandEmpty.displayName = CommandPrimitive.Empty.displayName;

const CommandGroup = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Group>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Group
    ref={ref}
    className={cn(
      "overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",
      className,
    )}
    {...props}
  />
));

CommandGroup.displayName = CommandPrimitive.Group.displayName;

const CommandSeparator = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Separator ref={ref} className={cn("-mx-1 h-px bg-border", className)} {...props} />
));
CommandSeparator.displayName = CommandPrimitive.Separator.displayName;

const CommandItem = React.forwardRef<
  React.ElementRef<typeof CommandPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>
>(({ className, ...props }, ref) => (
  <CommandPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",
      className,
    )}
    {...props}
  />
));

CommandItem.displayName = CommandPrimitive.Item.displayName;

const CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
CommandShortcut.displayName = "CommandShortcut";

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
};

--- FILE END: src\components\ui\command.tsx ---


--- FILE START: src\components\ui\context-menu.tsx ---
import * as React from "react";
import * as ContextMenuPrimitive from "@radix-ui/react-context-menu";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const ContextMenu = ContextMenuPrimitive.Root;

const ContextMenuTrigger = ContextMenuPrimitive.Trigger;

const ContextMenuGroup = ContextMenuPrimitive.Group;

const ContextMenuPortal = ContextMenuPrimitive.Portal;

const ContextMenuSub = ContextMenuPrimitive.Sub;

const ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup;

const ContextMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <ContextMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </ContextMenuPrimitive.SubTrigger>
));
ContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName;

const ContextMenuSubContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
ContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName;

const ContextMenuContent = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Portal>
    <ContextMenuPrimitive.Content
      ref={ref}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </ContextMenuPrimitive.Portal>
));
ContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName;

const ContextMenuItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
ContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName;

const ContextMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <ContextMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.CheckboxItem>
));
ContextMenuCheckboxItem.displayName = ContextMenuPrimitive.CheckboxItem.displayName;

const ContextMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <ContextMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <ContextMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </ContextMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </ContextMenuPrimitive.RadioItem>
));
ContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName;

const ContextMenuLabel = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <ContextMenuPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold text-foreground", inset && "pl-8", className)}
    {...props}
  />
));
ContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName;

const ContextMenuSeparator = React.forwardRef<
  React.ElementRef<typeof ContextMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <ContextMenuPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-border", className)} {...props} />
));
ContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName;

const ContextMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
ContextMenuShortcut.displayName = "ContextMenuShortcut";

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
};

--- FILE END: src\components\ui\context-menu.tsx ---


--- FILE START: src\components\ui\dialog.tsx ---
import * as React from "react";
import * as DialogPrimitive from "@radix-ui/react-dialog";
import { X } from "lucide-react";

import { cn } from "@/lib/utils";

const Dialog = DialogPrimitive.Root;

const DialogTrigger = DialogPrimitive.Trigger;

const DialogPortal = DialogPrimitive.Portal;

const DialogClose = DialogPrimitive.Close;

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
  />
));
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName;

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className,
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
));
DialogContent.displayName = DialogPrimitive.Content.displayName;

const DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-1.5 text-center sm:text-left", className)} {...props} />
);
DialogHeader.displayName = "DialogHeader";

const DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
DialogFooter.displayName = "DialogFooter";

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold leading-none tracking-tight", className)}
    {...props}
  />
));
DialogTitle.displayName = DialogPrimitive.Title.displayName;

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
DialogDescription.displayName = DialogPrimitive.Description.displayName;

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
};

--- FILE END: src\components\ui\dialog.tsx ---


--- FILE START: src\components\ui\drawer.tsx ---
import * as React from "react";
import { Drawer as DrawerPrimitive } from "vaul";

import { cn } from "@/lib/utils";

const Drawer = ({ shouldScaleBackground = true, ...props }: React.ComponentProps<typeof DrawerPrimitive.Root>) => (
  <DrawerPrimitive.Root shouldScaleBackground={shouldScaleBackground} {...props} />
);
Drawer.displayName = "Drawer";

const DrawerTrigger = DrawerPrimitive.Trigger;

const DrawerPortal = DrawerPrimitive.Portal;

const DrawerClose = DrawerPrimitive.Close;

const DrawerOverlay = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Overlay ref={ref} className={cn("fixed inset-0 z-50 bg-black/80", className)} {...props} />
));
DrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName;

const DrawerContent = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DrawerPortal>
    <DrawerOverlay />
    <DrawerPrimitive.Content
      ref={ref}
      className={cn(
        "fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",
        className,
      )}
      {...props}
    >
      <div className="mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted" />
      {children}
    </DrawerPrimitive.Content>
  </DrawerPortal>
));
DrawerContent.displayName = "DrawerContent";

const DrawerHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("grid gap-1.5 p-4 text-center sm:text-left", className)} {...props} />
);
DrawerHeader.displayName = "DrawerHeader";

const DrawerFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("mt-auto flex flex-col gap-2 p-4", className)} {...props} />
);
DrawerFooter.displayName = "DrawerFooter";

const DrawerTitle = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold leading-none tracking-tight", className)}
    {...props}
  />
));
DrawerTitle.displayName = DrawerPrimitive.Title.displayName;

const DrawerDescription = React.forwardRef<
  React.ElementRef<typeof DrawerPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DrawerPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
DrawerDescription.displayName = DrawerPrimitive.Description.displayName;

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
};

--- FILE END: src\components\ui\drawer.tsx ---


--- FILE START: src\components\ui\dropdown-menu.tsx ---
import * as React from "react";
import * as DropdownMenuPrimitive from "@radix-ui/react-dropdown-menu";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const DropdownMenu = DropdownMenuPrimitive.Root;

const DropdownMenuTrigger = DropdownMenuPrimitive.Trigger;

const DropdownMenuGroup = DropdownMenuPrimitive.Group;

const DropdownMenuPortal = DropdownMenuPrimitive.Portal;

const DropdownMenuSub = DropdownMenuPrimitive.Sub;

const DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup;

const DropdownMenuSubTrigger = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <DropdownMenuPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent focus:bg-accent",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </DropdownMenuPrimitive.SubTrigger>
));
DropdownMenuSubTrigger.displayName = DropdownMenuPrimitive.SubTrigger.displayName;

const DropdownMenuSubContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
DropdownMenuSubContent.displayName = DropdownMenuPrimitive.SubContent.displayName;

const DropdownMenuContent = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <DropdownMenuPrimitive.Portal>
    <DropdownMenuPrimitive.Content
      ref={ref}
      sideOffset={sideOffset}
      className={cn(
        "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </DropdownMenuPrimitive.Portal>
));
DropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName;

const DropdownMenuItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
DropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName;

const DropdownMenuCheckboxItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <DropdownMenuPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.CheckboxItem>
));
DropdownMenuCheckboxItem.displayName = DropdownMenuPrimitive.CheckboxItem.displayName;

const DropdownMenuRadioItem = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <DropdownMenuPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <DropdownMenuPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </DropdownMenuPrimitive.ItemIndicator>
    </span>
    {children}
  </DropdownMenuPrimitive.RadioItem>
));
DropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName;

const DropdownMenuLabel = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <DropdownMenuPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className)}
    {...props}
  />
));
DropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName;

const DropdownMenuSeparator = React.forwardRef<
  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <DropdownMenuPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
DropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName;

const DropdownMenuShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest opacity-60", className)} {...props} />;
};
DropdownMenuShortcut.displayName = "DropdownMenuShortcut";

export {
  DropdownMenu,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuGroup,
  DropdownMenuPortal,
  DropdownMenuSub,
  DropdownMenuSubContent,
  DropdownMenuSubTrigger,
  DropdownMenuRadioGroup,
};

--- FILE END: src\components\ui\dropdown-menu.tsx ---


--- FILE START: src\components\ui\form.tsx ---
import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label";
import { Slot } from "@radix-ui/react-slot";
import { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from "react-hook-form";

import { cn } from "@/lib/utils";
import { Label } from "@/components/ui/label";

const Form = FormProvider;

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName;
};

const FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  );
};

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext);
  const itemContext = React.useContext(FormItemContext);
  const { getFieldState, formState } = useFormContext();

  const fieldState = getFieldState(fieldContext.name, formState);

  if (!fieldContext) {
    throw new Error("useFormField should be used within <FormField>");
  }

  const { id } = itemContext;

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  };
};

type FormItemContextValue = {
  id: string;
};

const FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);

const FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => {
    const id = React.useId();

    return (
      <FormItemContext.Provider value={{ id }}>
        <div ref={ref} className={cn("space-y-2", className)} {...props} />
      </FormItemContext.Provider>
    );
  },
);
FormItem.displayName = "FormItem";

const FormLabel = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>
>(({ className, ...props }, ref) => {
  const { error, formItemId } = useFormField();

  return <Label ref={ref} className={cn(error && "text-destructive", className)} htmlFor={formItemId} {...props} />;
});
FormLabel.displayName = "FormLabel";

const FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(
  ({ ...props }, ref) => {
    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();

    return (
      <Slot
        ref={ref}
        id={formItemId}
        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}
        aria-invalid={!!error}
        {...props}
      />
    );
  },
);
FormControl.displayName = "FormControl";

const FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, ...props }, ref) => {
    const { formDescriptionId } = useFormField();

    return <p ref={ref} id={formDescriptionId} className={cn("text-sm text-muted-foreground", className)} {...props} />;
  },
);
FormDescription.displayName = "FormDescription";

const FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(
  ({ className, children, ...props }, ref) => {
    const { error, formMessageId } = useFormField();
    const body = error ? String(error?.message) : children;

    if (!body) {
      return null;
    }

    return (
      <p ref={ref} id={formMessageId} className={cn("text-sm font-medium text-destructive", className)} {...props}>
        {body}
      </p>
    );
  },
);
FormMessage.displayName = "FormMessage";

export { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };

--- FILE END: src\components\ui\form.tsx ---


--- FILE START: src\components\ui\hover-card.tsx ---
import * as React from "react";
import * as HoverCardPrimitive from "@radix-ui/react-hover-card";

import { cn } from "@/lib/utils";

const HoverCard = HoverCardPrimitive.Root;

const HoverCardTrigger = HoverCardPrimitive.Trigger;

const HoverCardContent = React.forwardRef<
  React.ElementRef<typeof HoverCardPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <HoverCardPrimitive.Content
    ref={ref}
    align={align}
    sideOffset={sideOffset}
    className={cn(
      "z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
HoverCardContent.displayName = HoverCardPrimitive.Content.displayName;

export { HoverCard, HoverCardTrigger, HoverCardContent };

--- FILE END: src\components\ui\hover-card.tsx ---


--- FILE START: src\components\ui\input-otp.tsx ---
import * as React from "react";
import { OTPInput, OTPInputContext } from "input-otp";
import { Dot } from "lucide-react";

import { cn } from "@/lib/utils";

const InputOTP = React.forwardRef<React.ElementRef<typeof OTPInput>, React.ComponentPropsWithoutRef<typeof OTPInput>>(
  ({ className, containerClassName, ...props }, ref) => (
    <OTPInput
      ref={ref}
      containerClassName={cn("flex items-center gap-2 has-[:disabled]:opacity-50", containerClassName)}
      className={cn("disabled:cursor-not-allowed", className)}
      {...props}
    />
  ),
);
InputOTP.displayName = "InputOTP";

const InputOTPGroup = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
  ({ className, ...props }, ref) => <div ref={ref} className={cn("flex items-center", className)} {...props} />,
);
InputOTPGroup.displayName = "InputOTPGroup";

const InputOTPSlot = React.forwardRef<
  React.ElementRef<"div">,
  React.ComponentPropsWithoutRef<"div"> & { index: number }
>(({ index, className, ...props }, ref) => {
  const inputOTPContext = React.useContext(OTPInputContext);
  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index];

  return (
    <div
      ref={ref}
      className={cn(
        "relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",
        isActive && "z-10 ring-2 ring-ring ring-offset-background",
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink h-4 w-px bg-foreground duration-1000" />
        </div>
      )}
    </div>
  );
});
InputOTPSlot.displayName = "InputOTPSlot";

const InputOTPSeparator = React.forwardRef<React.ElementRef<"div">, React.ComponentPropsWithoutRef<"div">>(
  ({ ...props }, ref) => (
    <div ref={ref} role="separator" {...props}>
      <Dot />
    </div>
  ),
);
InputOTPSeparator.displayName = "InputOTPSeparator";

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator };

--- FILE END: src\components\ui\input-otp.tsx ---


--- FILE START: src\components\ui\input.tsx ---
import * as React from "react";

import { cn } from "@/lib/utils";

const Input = React.forwardRef<HTMLInputElement, React.ComponentProps<"input">>(
  ({ className, type, ...props }, ref) => {
    return (
      <input
        type={type}
        className={cn(
          "flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className,
        )}
        ref={ref}
        {...props}
      />
    );
  },
);
Input.displayName = "Input";

export { Input };

--- FILE END: src\components\ui\input.tsx ---


--- FILE START: src\components\ui\label.tsx ---
import * as React from "react";
import * as LabelPrimitive from "@radix-ui/react-label";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const labelVariants = cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70");

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />
));
Label.displayName = LabelPrimitive.Root.displayName;

export { Label };

--- FILE END: src\components\ui\label.tsx ---


--- FILE START: src\components\ui\menubar.tsx ---
import * as React from "react";
import * as MenubarPrimitive from "@radix-ui/react-menubar";
import { Check, ChevronRight, Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const MenubarMenu = MenubarPrimitive.Menu;

const MenubarGroup = MenubarPrimitive.Group;

const MenubarPortal = MenubarPrimitive.Portal;

const MenubarSub = MenubarPrimitive.Sub;

const MenubarRadioGroup = MenubarPrimitive.RadioGroup;

const Menubar = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Root
    ref={ref}
    className={cn("flex h-10 items-center space-x-1 rounded-md border bg-background p-1", className)}
    {...props}
  />
));
Menubar.displayName = MenubarPrimitive.Root.displayName;

const MenubarTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  />
));
MenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName;

const MenubarSubTrigger = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {
    inset?: boolean;
  }
>(({ className, inset, children, ...props }, ref) => (
  <MenubarPrimitive.SubTrigger
    ref={ref}
    className={cn(
      "flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[state=open]:bg-accent data-[state=open]:text-accent-foreground focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  >
    {children}
    <ChevronRight className="ml-auto h-4 w-4" />
  </MenubarPrimitive.SubTrigger>
));
MenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName;

const MenubarSubContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.SubContent>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.SubContent
    ref={ref}
    className={cn(
      "z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
MenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName;

const MenubarContent = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>
>(({ className, align = "start", alignOffset = -4, sideOffset = 8, ...props }, ref) => (
  <MenubarPrimitive.Portal>
    <MenubarPrimitive.Content
      ref={ref}
      align={align}
      alignOffset={alignOffset}
      sideOffset={sideOffset}
      className={cn(
        "z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </MenubarPrimitive.Portal>
));
MenubarContent.displayName = MenubarPrimitive.Content.displayName;

const MenubarItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      inset && "pl-8",
      className,
    )}
    {...props}
  />
));
MenubarItem.displayName = MenubarPrimitive.Item.displayName;

const MenubarCheckboxItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>
>(({ className, children, checked, ...props }, ref) => (
  <MenubarPrimitive.CheckboxItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    checked={checked}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.CheckboxItem>
));
MenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName;

const MenubarRadioItem = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.RadioItem>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>
>(({ className, children, ...props }, ref) => (
  <MenubarPrimitive.RadioItem
    ref={ref}
    className={cn(
      "relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <MenubarPrimitive.ItemIndicator>
        <Circle className="h-2 w-2 fill-current" />
      </MenubarPrimitive.ItemIndicator>
    </span>
    {children}
  </MenubarPrimitive.RadioItem>
));
MenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName;

const MenubarLabel = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {
    inset?: boolean;
  }
>(({ className, inset, ...props }, ref) => (
  <MenubarPrimitive.Label
    ref={ref}
    className={cn("px-2 py-1.5 text-sm font-semibold", inset && "pl-8", className)}
    {...props}
  />
));
MenubarLabel.displayName = MenubarPrimitive.Label.displayName;

const MenubarSeparator = React.forwardRef<
  React.ElementRef<typeof MenubarPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <MenubarPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
MenubarSeparator.displayName = MenubarPrimitive.Separator.displayName;

const MenubarShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {
  return <span className={cn("ml-auto text-xs tracking-widest text-muted-foreground", className)} {...props} />;
};
MenubarShortcut.displayname = "MenubarShortcut";

export {
  Menubar,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarItem,
  MenubarSeparator,
  MenubarLabel,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarPortal,
  MenubarSubContent,
  MenubarSubTrigger,
  MenubarGroup,
  MenubarSub,
  MenubarShortcut,
};

--- FILE END: src\components\ui\menubar.tsx ---


--- FILE START: src\components\ui\navigation-menu.tsx ---
import * as React from "react";
import * as NavigationMenuPrimitive from "@radix-ui/react-navigation-menu";
import { cva } from "class-variance-authority";
import { ChevronDown } from "lucide-react";

import { cn } from "@/lib/utils";

const NavigationMenu = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Root
    ref={ref}
    className={cn("relative z-10 flex max-w-max flex-1 items-center justify-center", className)}
    {...props}
  >
    {children}
    <NavigationMenuViewport />
  </NavigationMenuPrimitive.Root>
));
NavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;

const NavigationMenuList = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.List
    ref={ref}
    className={cn("group flex flex-1 list-none items-center justify-center space-x-1", className)}
    {...props}
  />
));
NavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;

const NavigationMenuItem = NavigationMenuPrimitive.Item;

const navigationMenuTriggerStyle = cva(
  "group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50",
);

const NavigationMenuTrigger = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <NavigationMenuPrimitive.Trigger
    ref={ref}
    className={cn(navigationMenuTriggerStyle(), "group", className)}
    {...props}
  >
    {children}{" "}
    <ChevronDown
      className="relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180"
      aria-hidden="true"
    />
  </NavigationMenuPrimitive.Trigger>
));
NavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;

const NavigationMenuContent = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Content
    ref={ref}
    className={cn(
      "left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto",
      className,
    )}
    {...props}
  />
));
NavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;

const NavigationMenuLink = NavigationMenuPrimitive.Link;

const NavigationMenuViewport = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>
>(({ className, ...props }, ref) => (
  <div className={cn("absolute left-0 top-full flex justify-center")}>
    <NavigationMenuPrimitive.Viewport
      className={cn(
        "origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",
        className,
      )}
      ref={ref}
      {...props}
    />
  </div>
));
NavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;

const NavigationMenuIndicator = React.forwardRef<
  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,
  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>
>(({ className, ...props }, ref) => (
  <NavigationMenuPrimitive.Indicator
    ref={ref}
    className={cn(
      "top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",
      className,
    )}
    {...props}
  >
    <div className="relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md" />
  </NavigationMenuPrimitive.Indicator>
));
NavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;

export {
  navigationMenuTriggerStyle,
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
};

--- FILE END: src\components\ui\navigation-menu.tsx ---


--- FILE START: src\components\ui\pagination-controls.tsx ---
import { ChevronLeft, ChevronRight, MoreHorizontal } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { cn } from '@/lib/utils';

interface PaginationControlsProps {
  currentPage: number;
  totalPages: number;
  onPageChange: (page: number) => void;
  isLoading?: boolean;
  className?: string;
}

export const PaginationControls = ({
  currentPage,
  totalPages,
  onPageChange,
  isLoading = false,
  className
}: PaginationControlsProps) => {
  if (totalPages <= 1) return null;

  const getPageNumbers = () => {
    const pages: (number | 'ellipsis')[] = [];
    const showEllipsisStart = currentPage > 3;
    const showEllipsisEnd = currentPage < totalPages - 2;

    if (totalPages <= 7) {
      // Show all pages if 7 or fewer
      for (let i = 1; i <= totalPages; i++) {
        pages.push(i);
      }
    } else {
      // Always show first page
      pages.push(1);

      if (showEllipsisStart) {
        pages.push('ellipsis');
      }

      // Show pages around current
      const start = Math.max(2, currentPage - 1);
      const end = Math.min(totalPages - 1, currentPage + 1);

      for (let i = start; i <= end; i++) {
        if (!pages.includes(i)) {
          pages.push(i);
        }
      }

      if (showEllipsisEnd) {
        pages.push('ellipsis');
      }

      // Always show last page
      if (!pages.includes(totalPages)) {
        pages.push(totalPages);
      }
    }

    return pages;
  };

  return (
    <nav 
      className={cn("flex items-center justify-center gap-1", className)}
      aria-label="Pagination"
    >
      <Button
        variant="outline"
        size="icon"
        onClick={() => onPageChange(currentPage - 1)}
        disabled={currentPage === 1 || isLoading}
        className="h-9 w-9"
      >
        <ChevronLeft className="h-4 w-4" />
        <span className="sr-only">Previous page</span>
      </Button>

      <div className="flex items-center gap-1">
        {getPageNumbers().map((page, index) => (
          page === 'ellipsis' ? (
            <span key={`ellipsis-${index}`} className="px-2 text-muted-foreground">
              <MoreHorizontal className="h-4 w-4" />
            </span>
          ) : (
            <Button
              key={page}
              variant={currentPage === page ? 'default' : 'outline'}
              size="icon"
              onClick={() => onPageChange(page)}
              disabled={isLoading}
              className={cn(
                "h-9 w-9",
                currentPage === page && "pointer-events-none"
              )}
            >
              {page}
            </Button>
          )
        ))}
      </div>

      <Button
        variant="outline"
        size="icon"
        onClick={() => onPageChange(currentPage + 1)}
        disabled={currentPage === totalPages || isLoading}
        className="h-9 w-9"
      >
        <ChevronRight className="h-4 w-4" />
        <span className="sr-only">Next page</span>
      </Button>
    </nav>
  );
};

interface LoadMoreButtonProps {
  onClick: () => void;
  isLoading: boolean;
  hasMore: boolean;
  className?: string;
}

export const LoadMoreButton = ({
  onClick,
  isLoading,
  hasMore,
  className
}: LoadMoreButtonProps) => {
  if (!hasMore) return null;

  return (
    <div className={cn("flex justify-center", className)}>
      <Button
        variant="outline"
        onClick={onClick}
        disabled={isLoading}
        className="min-w-32"
      >
        {isLoading ? (
          <span className="flex items-center gap-2">
            <span className="h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent" />
            Loading...
          </span>
        ) : (
          'Load More'
        )}
      </Button>
    </div>
  );
};

--- FILE END: src\components\ui\pagination-controls.tsx ---


--- FILE START: src\components\ui\pagination.tsx ---
import * as React from "react";
import { ChevronLeft, ChevronRight, MoreHorizontal } from "lucide-react";

import { cn } from "@/lib/utils";
import { ButtonProps, buttonVariants } from "@/components/ui/button";

const Pagination = ({ className, ...props }: React.ComponentProps<"nav">) => (
  <nav
    role="navigation"
    aria-label="pagination"
    className={cn("mx-auto flex w-full justify-center", className)}
    {...props}
  />
);
Pagination.displayName = "Pagination";

const PaginationContent = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(
  ({ className, ...props }, ref) => (
    <ul ref={ref} className={cn("flex flex-row items-center gap-1", className)} {...props} />
  ),
);
PaginationContent.displayName = "PaginationContent";

const PaginationItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ className, ...props }, ref) => (
  <li ref={ref} className={cn("", className)} {...props} />
));
PaginationItem.displayName = "PaginationItem";

type PaginationLinkProps = {
  isActive?: boolean;
} & Pick<ButtonProps, "size"> &
  React.ComponentProps<"a">;

const PaginationLink = ({ className, isActive, size = "icon", ...props }: PaginationLinkProps) => (
  <a
    aria-current={isActive ? "page" : undefined}
    className={cn(
      buttonVariants({
        variant: isActive ? "outline" : "ghost",
        size,
      }),
      className,
    )}
    {...props}
  />
);
PaginationLink.displayName = "PaginationLink";

const PaginationPrevious = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink aria-label="Go to previous page" size="default" className={cn("gap-1 pl-2.5", className)} {...props}>
    <ChevronLeft className="h-4 w-4" />
    <span>Previous</span>
  </PaginationLink>
);
PaginationPrevious.displayName = "PaginationPrevious";

const PaginationNext = ({ className, ...props }: React.ComponentProps<typeof PaginationLink>) => (
  <PaginationLink aria-label="Go to next page" size="default" className={cn("gap-1 pr-2.5", className)} {...props}>
    <span>Next</span>
    <ChevronRight className="h-4 w-4" />
  </PaginationLink>
);
PaginationNext.displayName = "PaginationNext";

const PaginationEllipsis = ({ className, ...props }: React.ComponentProps<"span">) => (
  <span aria-hidden className={cn("flex h-9 w-9 items-center justify-center", className)} {...props}>
    <MoreHorizontal className="h-4 w-4" />
    <span className="sr-only">More pages</span>
  </span>
);
PaginationEllipsis.displayName = "PaginationEllipsis";

export {
  Pagination,
  PaginationContent,
  PaginationEllipsis,
  PaginationItem,
  PaginationLink,
  PaginationNext,
  PaginationPrevious,
};

--- FILE END: src\components\ui\pagination.tsx ---


--- FILE START: src\components\ui\popover.tsx ---
import * as React from "react";
import * as PopoverPrimitive from "@radix-ui/react-popover";

import { cn } from "@/lib/utils";

const Popover = PopoverPrimitive.Root;

const PopoverTrigger = PopoverPrimitive.Trigger;

const PopoverContent = React.forwardRef<
  React.ElementRef<typeof PopoverPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>
>(({ className, align = "center", sideOffset = 4, ...props }, ref) => (
  <PopoverPrimitive.Portal>
    <PopoverPrimitive.Content
      ref={ref}
      align={align}
      sideOffset={sideOffset}
      className={cn(
        "z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        className,
      )}
      {...props}
    />
  </PopoverPrimitive.Portal>
));
PopoverContent.displayName = PopoverPrimitive.Content.displayName;

export { Popover, PopoverTrigger, PopoverContent };

--- FILE END: src\components\ui\popover.tsx ---


--- FILE START: src\components\ui\progress.tsx ---
import * as React from "react";
import * as ProgressPrimitive from "@radix-ui/react-progress";

import { cn } from "@/lib/utils";

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn("relative h-4 w-full overflow-hidden rounded-full bg-secondary", className)}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
));
Progress.displayName = ProgressPrimitive.Root.displayName;

export { Progress };

--- FILE END: src\components\ui\progress.tsx ---


--- FILE START: src\components\ui\radio-group.tsx ---
import * as React from "react";
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group";
import { Circle } from "lucide-react";

import { cn } from "@/lib/utils";

const RadioGroup = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>
>(({ className, ...props }, ref) => {
  return <RadioGroupPrimitive.Root className={cn("grid gap-2", className)} {...props} ref={ref} />;
});
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName;

const RadioGroupItem = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Item
      ref={ref}
      className={cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator className="flex items-center justify-center">
        <Circle className="h-2.5 w-2.5 fill-current text-current" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  );
});
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName;

export { RadioGroup, RadioGroupItem };

--- FILE END: src\components\ui\radio-group.tsx ---


--- FILE START: src\components\ui\resizable.tsx ---
import { GripVertical } from "lucide-react";
import * as ResizablePrimitive from "react-resizable-panels";

import { cn } from "@/lib/utils";

const ResizablePanelGroup = ({ className, ...props }: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (
  <ResizablePrimitive.PanelGroup
    className={cn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col", className)}
    {...props}
  />
);

const ResizablePanel = ResizablePrimitive.Panel;

const ResizableHandle = ({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean;
}) => (
  <ResizablePrimitive.PanelResizeHandle
    className={cn(
      "relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 [&[data-panel-group-direction=vertical]>div]:rotate-90",
      className,
    )}
    {...props}
  >
    {withHandle && (
      <div className="z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border">
        <GripVertical className="h-2.5 w-2.5" />
      </div>
    )}
  </ResizablePrimitive.PanelResizeHandle>
);

export { ResizablePanelGroup, ResizablePanel, ResizableHandle };

--- FILE END: src\components\ui\resizable.tsx ---


--- FILE START: src\components\ui\scroll-area.tsx ---
import * as React from "react";
import * as ScrollAreaPrimitive from "@radix-ui/react-scroll-area";

import { cn } from "@/lib/utils";

const ScrollArea = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>
>(({ className, children, ...props }, ref) => (
  <ScrollAreaPrimitive.Root ref={ref} className={cn("relative overflow-hidden", className)} {...props}>
    <ScrollAreaPrimitive.Viewport className="h-full w-full rounded-[inherit]">{children}</ScrollAreaPrimitive.Viewport>
    <ScrollBar />
    <ScrollAreaPrimitive.Corner />
  </ScrollAreaPrimitive.Root>
));
ScrollArea.displayName = ScrollAreaPrimitive.Root.displayName;

const ScrollBar = React.forwardRef<
  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,
  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>
>(({ className, orientation = "vertical", ...props }, ref) => (
  <ScrollAreaPrimitive.ScrollAreaScrollbar
    ref={ref}
    orientation={orientation}
    className={cn(
      "flex touch-none select-none transition-colors",
      orientation === "vertical" && "h-full w-2.5 border-l border-l-transparent p-[1px]",
      orientation === "horizontal" && "h-2.5 flex-col border-t border-t-transparent p-[1px]",
      className,
    )}
    {...props}
  >
    <ScrollAreaPrimitive.ScrollAreaThumb className="relative flex-1 rounded-full bg-border" />
  </ScrollAreaPrimitive.ScrollAreaScrollbar>
));
ScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName;

export { ScrollArea, ScrollBar };

--- FILE END: src\components\ui\scroll-area.tsx ---


--- FILE START: src\components\ui\select.tsx ---
import * as React from "react";
import * as SelectPrimitive from "@radix-ui/react-select";
import { Check, ChevronDown, ChevronUp } from "lucide-react";

import { cn } from "@/lib/utils";

const Select = SelectPrimitive.Root;

const SelectGroup = SelectPrimitive.Group;

const SelectValue = SelectPrimitive.Value;

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className,
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
));
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName;

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
));
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName;

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
));
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName;

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className,
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]",
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
));
SelectContent.displayName = SelectPrimitive.Content.displayName;

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label ref={ref} className={cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className)} {...props} />
));
SelectLabel.displayName = SelectPrimitive.Label.displayName;

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>

    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
));
SelectItem.displayName = SelectPrimitive.Item.displayName;

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
));
SelectSeparator.displayName = SelectPrimitive.Separator.displayName;

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
};

--- FILE END: src\components\ui\select.tsx ---


--- FILE START: src\components\ui\separator.tsx ---
import * as React from "react";
import * as SeparatorPrimitive from "@radix-ui/react-separator";

import { cn } from "@/lib/utils";

const Separator = React.forwardRef<
  React.ElementRef<typeof SeparatorPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>
>(({ className, orientation = "horizontal", decorative = true, ...props }, ref) => (
  <SeparatorPrimitive.Root
    ref={ref}
    decorative={decorative}
    orientation={orientation}
    className={cn("shrink-0 bg-border", orientation === "horizontal" ? "h-[1px] w-full" : "h-full w-[1px]", className)}
    {...props}
  />
));
Separator.displayName = SeparatorPrimitive.Root.displayName;

export { Separator };

--- FILE END: src\components\ui\separator.tsx ---


--- FILE START: src\components\ui\sheet.tsx ---
import * as SheetPrimitive from "@radix-ui/react-dialog";
import { cva, type VariantProps } from "class-variance-authority";
import { X } from "lucide-react";
import * as React from "react";

import { cn } from "@/lib/utils";

const Sheet = SheetPrimitive.Root;

const SheetTrigger = SheetPrimitive.Trigger;

const SheetClose = SheetPrimitive.Close;

const SheetPortal = SheetPrimitive.Portal;

const SheetOverlay = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Overlay
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
    ref={ref}
  />
));
SheetOverlay.displayName = SheetPrimitive.Overlay.displayName;

const sheetVariants = cva(
  "fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",
  {
    variants: {
      side: {
        top: "inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",
        bottom:
          "inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",
        left: "inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",
        right:
          "inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm",
      },
    },
    defaultVariants: {
      side: "right",
    },
  },
);

interface SheetContentProps
  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,
    VariantProps<typeof sheetVariants> {}

const SheetContent = React.forwardRef<React.ElementRef<typeof SheetPrimitive.Content>, SheetContentProps>(
  ({ side = "right", className, children, ...props }, ref) => (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content ref={ref} className={cn(sheetVariants({ side }), className)} {...props}>
        {children}
        <SheetPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-secondary hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none">
          <X className="h-4 w-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  ),
);
SheetContent.displayName = SheetPrimitive.Content.displayName;

const SheetHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-2 text-center sm:text-left", className)} {...props} />
);
SheetHeader.displayName = "SheetHeader";

const SheetFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
);
SheetFooter.displayName = "SheetFooter";

const SheetTitle = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Title ref={ref} className={cn("text-lg font-semibold text-foreground", className)} {...props} />
));
SheetTitle.displayName = SheetPrimitive.Title.displayName;

const SheetDescription = React.forwardRef<
  React.ElementRef<typeof SheetPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>
>(({ className, ...props }, ref) => (
  <SheetPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
));
SheetDescription.displayName = SheetPrimitive.Description.displayName;

export {
  Sheet,
  SheetClose,
  SheetContent,
  SheetDescription,
  SheetFooter,
  SheetHeader,
  SheetOverlay,
  SheetPortal,
  SheetTitle,
  SheetTrigger,
};

--- FILE END: src\components\ui\sheet.tsx ---


--- FILE START: src\components\ui\sidebar.tsx ---
import * as React from "react";
import { Slot } from "@radix-ui/react-slot";
import { VariantProps, cva } from "class-variance-authority";
import { PanelLeft } from "lucide-react";

import { useIsMobile } from "@/hooks/use-mobile";
import { cn } from "@/lib/utils";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Separator } from "@/components/ui/separator";
import { Sheet, SheetContent } from "@/components/ui/sheet";
import { Skeleton } from "@/components/ui/skeleton";
import { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from "@/components/ui/tooltip";

const SIDEBAR_COOKIE_NAME = "sidebar:state";
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;
const SIDEBAR_WIDTH = "16rem";
const SIDEBAR_WIDTH_MOBILE = "18rem";
const SIDEBAR_WIDTH_ICON = "3rem";
const SIDEBAR_KEYBOARD_SHORTCUT = "b";

type SidebarContext = {
  state: "expanded" | "collapsed";
  open: boolean;
  setOpen: (open: boolean) => void;
  openMobile: boolean;
  setOpenMobile: (open: boolean) => void;
  isMobile: boolean;
  toggleSidebar: () => void;
};

const SidebarContext = React.createContext<SidebarContext | null>(null);

function useSidebar() {
  const context = React.useContext(SidebarContext);
  if (!context) {
    throw new Error("useSidebar must be used within a SidebarProvider.");
  }

  return context;
}

const SidebarProvider = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    defaultOpen?: boolean;
    open?: boolean;
    onOpenChange?: (open: boolean) => void;
  }
>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {
  const isMobile = useIsMobile();
  const [openMobile, setOpenMobile] = React.useState(false);

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen);
  const open = openProp ?? _open;
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === "function" ? value(open) : value;
      if (setOpenProp) {
        setOpenProp(openState);
      } else {
        _setOpen(openState);
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;
    },
    [setOpenProp, open],
  );

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);
  }, [isMobile, setOpen, setOpenMobile]);

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {
        event.preventDefault();
        toggleSidebar();
      }
    };

    window.addEventListener("keydown", handleKeyDown);
    return () => window.removeEventListener("keydown", handleKeyDown);
  }, [toggleSidebar]);

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? "expanded" : "collapsed";

  const contextValue = React.useMemo<SidebarContext>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  );

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH,
              "--sidebar-width-icon": SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar", className)}
          ref={ref}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  );
});
SidebarProvider.displayName = "SidebarProvider";

const Sidebar = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    side?: "left" | "right";
    variant?: "sidebar" | "floating" | "inset";
    collapsible?: "offcanvas" | "icon" | "none";
  }
>(({ side = "left", variant = "sidebar", collapsible = "offcanvas", className, children, ...props }, ref) => {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();

  if (collapsible === "none") {
    return (
      <div
        className={cn("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground", className)}
        ref={ref}
        {...props}
      >
        {children}
      </div>
    );
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-mobile="true"
          className="w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden"
          style={
            {
              "--sidebar-width": SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    );
  }

  return (
    <div
      ref={ref}
      className="group peer hidden text-sidebar-foreground md:block"
      data-state={state}
      data-collapsible={state === "collapsed" ? collapsible : ""}
      data-variant={variant}
      data-side={side}
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        className={cn(
          "relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear",
          "group-data-[collapsible=offcanvas]:w-0",
          "group-data-[side=right]:rotate-180",
          variant === "floating" || variant === "inset"
            ? "group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]"
            : "group-data-[collapsible=icon]:w-[--sidebar-width-icon]",
        )}
      />
      <div
        className={cn(
          "fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",
          side === "left"
            ? "left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]"
            : "right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",
          // Adjust the padding for floating and inset variants.
          variant === "floating" || variant === "inset"
            ? "p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]"
            : "group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          className="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow"
        >
          {children}
        </div>
      </div>
    </div>
  );
});
Sidebar.displayName = "Sidebar";

const SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(
  ({ className, onClick, ...props }, ref) => {
    const { toggleSidebar } = useSidebar();

    return (
      <Button
        ref={ref}
        data-sidebar="trigger"
        variant="ghost"
        size="icon"
        className={cn("h-7 w-7", className)}
        onClick={(event) => {
          onClick?.(event);
          toggleSidebar();
        }}
        {...props}
      >
        <PanelLeft />
        <span className="sr-only">Toggle Sidebar</span>
      </Button>
    );
  },
);
SidebarTrigger.displayName = "SidebarTrigger";

const SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<"button">>(
  ({ className, ...props }, ref) => {
    const { toggleSidebar } = useSidebar();

    return (
      <button
        ref={ref}
        data-sidebar="rail"
        aria-label="Toggle Sidebar"
        tabIndex={-1}
        onClick={toggleSidebar}
        title="Toggle Sidebar"
        className={cn(
          "absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex",
          "[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize",
          "[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize",
          "group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar",
          "[[data-side=left][data-collapsible=offcanvas]_&]:-right-2",
          "[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarRail.displayName = "SidebarRail";

const SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<"main">>(({ className, ...props }, ref) => {
  return (
    <main
      ref={ref}
      className={cn(
        "relative flex min-h-svh flex-1 flex-col bg-background",
        "peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",
        className,
      )}
      {...props}
    />
  );
});
SidebarInset.displayName = "SidebarInset";

const SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(
  ({ className, ...props }, ref) => {
    return (
      <Input
        ref={ref}
        data-sidebar="input"
        className={cn(
          "h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarInput.displayName = "SidebarInput";

const SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return <div ref={ref} data-sidebar="header" className={cn("flex flex-col gap-2 p-2", className)} {...props} />;
});
SidebarHeader.displayName = "SidebarHeader";

const SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return <div ref={ref} data-sidebar="footer" className={cn("flex flex-col gap-2 p-2", className)} {...props} />;
});
SidebarFooter.displayName = "SidebarFooter";

const SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(
  ({ className, ...props }, ref) => {
    return (
      <Separator
        ref={ref}
        data-sidebar="separator"
        className={cn("mx-2 w-auto bg-sidebar-border", className)}
        {...props}
      />
    );
  },
);
SidebarSeparator.displayName = "SidebarSeparator";

const SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="content"
      className={cn(
        "flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",
        className,
      )}
      {...props}
    />
  );
});
SidebarContent.displayName = "SidebarContent";

const SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(({ className, ...props }, ref) => {
  return (
    <div
      ref={ref}
      data-sidebar="group"
      className={cn("relative flex w-full min-w-0 flex-col p-2", className)}
      {...props}
    />
  );
});
SidebarGroup.displayName = "SidebarGroup";

const SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<"div"> & { asChild?: boolean }>(
  ({ className, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "div";

    return (
      <Comp
        ref={ref}
        data-sidebar="group-label"
        className={cn(
          "flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
          "group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarGroupLabel.displayName = "SidebarGroupLabel";

const SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<"button"> & { asChild?: boolean }>(
  ({ className, asChild = false, ...props }, ref) => {
    const Comp = asChild ? Slot : "button";

    return (
      <Comp
        ref={ref}
        data-sidebar="group-action"
        className={cn(
          "absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
          // Increases the hit area of the button on mobile.
          "after:absolute after:-inset-2 after:md:hidden",
          "group-data-[collapsible=icon]:hidden",
          className,
        )}
        {...props}
      />
    );
  },
);
SidebarGroupAction.displayName = "SidebarGroupAction";

const SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => (
    <div ref={ref} data-sidebar="group-content" className={cn("w-full text-sm", className)} {...props} />
  ),
);
SidebarGroupContent.displayName = "SidebarGroupContent";

const SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(({ className, ...props }, ref) => (
  <ul ref={ref} data-sidebar="menu" className={cn("flex w-full min-w-0 flex-col gap-1", className)} {...props} />
));
SidebarMenu.displayName = "SidebarMenu";

const SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ className, ...props }, ref) => (
  <li ref={ref} data-sidebar="menu-item" className={cn("group/menu-item relative", className)} {...props} />
));
SidebarMenuItem.displayName = "SidebarMenuItem";

const sidebarMenuButtonVariants = cva(
  "peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",
  {
    variants: {
      variant: {
        default: "hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",
        outline:
          "bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]",
      },
      size: {
        default: "h-8 text-sm",
        sm: "h-7 text-xs",
        lg: "h-12 text-sm group-data-[collapsible=icon]:!p-0",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const SidebarMenuButton = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean;
    isActive?: boolean;
    tooltip?: string | React.ComponentProps<typeof TooltipContent>;
  } & VariantProps<typeof sidebarMenuButtonVariants>
>(({ asChild = false, isActive = false, variant = "default", size = "default", tooltip, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";
  const { isMobile, state } = useSidebar();

  const button = (
    <Comp
      ref={ref}
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  );

  if (!tooltip) {
    return button;
  }

  if (typeof tooltip === "string") {
    tooltip = {
      children: tooltip,
    };
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent side="right" align="center" hidden={state !== "collapsed" || isMobile} {...tooltip} />
    </Tooltip>
  );
});
SidebarMenuButton.displayName = "SidebarMenuButton";

const SidebarMenuAction = React.forwardRef<
  HTMLButtonElement,
  React.ComponentProps<"button"> & {
    asChild?: boolean;
    showOnHover?: boolean;
  }
>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {
  const Comp = asChild ? Slot : "button";

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-action"
      className={cn(
        "absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0",
        // Increases the hit area of the button on mobile.
        "after:absolute after:-inset-2 after:md:hidden",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        showOnHover &&
          "group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuAction.displayName = "SidebarMenuAction";

const SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<"div">>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-sidebar="menu-badge"
      className={cn(
        "pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground",
        "peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground",
        "peer-data-[size=sm]/menu-button:top-1",
        "peer-data-[size=default]/menu-button:top-1.5",
        "peer-data-[size=lg]/menu-button:top-2.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuBadge.displayName = "SidebarMenuBadge";

const SidebarMenuSkeleton = React.forwardRef<
  HTMLDivElement,
  React.ComponentProps<"div"> & {
    showIcon?: boolean;
  }
>(({ className, showIcon = false, ...props }, ref) => {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`;
  }, []);

  return (
    <div
      ref={ref}
      data-sidebar="menu-skeleton"
      className={cn("flex h-8 items-center gap-2 rounded-md px-2", className)}
      {...props}
    >
      {showIcon && <Skeleton className="size-4 rounded-md" data-sidebar="menu-skeleton-icon" />}
      <Skeleton
        className="h-4 max-w-[--skeleton-width] flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            "--skeleton-width": width,
          } as React.CSSProperties
        }
      />
    </div>
  );
});
SidebarMenuSkeleton.displayName = "SidebarMenuSkeleton";

const SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<"ul">>(
  ({ className, ...props }, ref) => (
    <ul
      ref={ref}
      data-sidebar="menu-sub"
      className={cn(
        "mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  ),
);
SidebarMenuSub.displayName = "SidebarMenuSub";

const SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<"li">>(({ ...props }, ref) => (
  <li ref={ref} {...props} />
));
SidebarMenuSubItem.displayName = "SidebarMenuSubItem";

const SidebarMenuSubButton = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentProps<"a"> & {
    asChild?: boolean;
    size?: "sm" | "md";
    isActive?: boolean;
  }
>(({ asChild = false, size = "md", isActive, className, ...props }, ref) => {
  const Comp = asChild ? Slot : "a";

  return (
    <Comp
      ref={ref}
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        "flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground",
        "data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",
        size === "sm" && "text-xs",
        size === "md" && "text-sm",
        "group-data-[collapsible=icon]:hidden",
        className,
      )}
      {...props}
    />
  );
});
SidebarMenuSubButton.displayName = "SidebarMenuSubButton";

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
};

--- FILE END: src\components\ui\sidebar.tsx ---


--- FILE START: src\components\ui\skeleton.tsx ---
import { cn } from "@/lib/utils";

function Skeleton({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {
  return <div className={cn("animate-pulse rounded-md bg-muted", className)} {...props} />;
}

export { Skeleton };

--- FILE END: src\components\ui\skeleton.tsx ---


--- FILE START: src\components\ui\skeletons.tsx ---
import { Skeleton } from '@/components/ui/skeleton';

export const ArticleCardSkeleton = () => {
  return (
    <div className="overflow-hidden rounded-xl bg-card border border-border">
      <Skeleton className="aspect-video w-full" />
      <div className="p-4 space-y-3">
        <Skeleton className="h-4 w-20" />
        <Skeleton className="h-6 w-full" />
        <Skeleton className="h-6 w-3/4" />
        <Skeleton className="h-4 w-full" />
        <Skeleton className="h-4 w-2/3" />
        <div className="flex items-center gap-3 pt-2">
          <Skeleton className="h-8 w-8 rounded-full" />
          <div className="space-y-1">
            <Skeleton className="h-3 w-24" />
            <Skeleton className="h-3 w-16" />
          </div>
        </div>
      </div>
    </div>
  );
};

export const ArticleCardHorizontalSkeleton = () => {
  return (
    <div className="flex gap-4 p-4 rounded-xl bg-card border border-border">
      <Skeleton className="h-24 w-32 rounded-lg shrink-0" />
      <div className="flex-1 space-y-2">
        <Skeleton className="h-4 w-16" />
        <Skeleton className="h-5 w-full" />
        <Skeleton className="h-5 w-3/4" />
        <Skeleton className="h-3 w-24" />
      </div>
    </div>
  );
};

export const HeroSkeleton = () => {
  return (
    <section className="py-6">
      <div className="container mx-auto px-4">
        <div className="grid gap-4 lg:grid-cols-3">
          {/* Main Featured */}
          <div className="lg:col-span-2">
            <div className="relative overflow-hidden rounded-xl bg-card border border-border">
              <Skeleton className="aspect-[16/9] w-full" />
              <div className="absolute bottom-0 left-0 right-0 p-6 space-y-3">
                <Skeleton className="h-5 w-24" />
                <Skeleton className="h-8 w-full" />
                <Skeleton className="h-8 w-3/4" />
                <Skeleton className="h-4 w-full" />
                <div className="flex items-center gap-3">
                  <Skeleton className="h-10 w-10 rounded-full" />
                  <Skeleton className="h-4 w-32" />
                </div>
              </div>
            </div>
          </div>
          
          {/* Side Articles */}
          <div className="space-y-4">
            {[1, 2, 3].map((i) => (
              <div key={i} className="flex gap-3 p-3 rounded-lg bg-card border border-border">
                <Skeleton className="h-20 w-24 rounded-lg shrink-0" />
                <div className="flex-1 space-y-2">
                  <Skeleton className="h-4 w-16" />
                  <Skeleton className="h-4 w-full" />
                  <Skeleton className="h-4 w-3/4" />
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>
  );
};

export const TrendingSidebarSkeleton = () => {
  return (
    <div className="rounded-xl bg-card border border-border p-6">
      <Skeleton className="h-6 w-32 mb-6" />
      <div className="space-y-4">
        {[1, 2, 3, 4, 5].map((i) => (
          <div key={i} className="flex gap-3">
            <Skeleton className="h-8 w-8 rounded-full shrink-0" />
            <div className="flex-1 space-y-2">
              <Skeleton className="h-4 w-full" />
              <Skeleton className="h-4 w-2/3" />
              <Skeleton className="h-3 w-20" />
            </div>
          </div>
        ))}
      </div>
    </div>
  );
};

export const CategorySectionSkeleton = () => {
  return (
    <section className="py-8">
      <div className="container mx-auto px-4">
        <Skeleton className="h-8 w-48 mb-6" />
        <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
          {[1, 2, 3, 4].map((i) => (
            <ArticleCardSkeleton key={i} />
          ))}
        </div>
      </div>
    </section>
  );
};

export const VideoSectionSkeleton = () => {
  return (
    <section className="py-8 bg-muted/30">
      <div className="container mx-auto px-4">
        <Skeleton className="h-8 w-40 mb-6" />
        <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
          {[1, 2, 3].map((i) => (
            <div key={i} className="rounded-xl overflow-hidden bg-card border border-border">
              <div className="relative">
                <Skeleton className="aspect-video w-full" />
                <div className="absolute inset-0 flex items-center justify-center">
                  <Skeleton className="h-14 w-14 rounded-full" />
                </div>
              </div>
              <div className="p-4 space-y-2">
                <Skeleton className="h-5 w-full" />
                <Skeleton className="h-5 w-3/4" />
                <Skeleton className="h-3 w-20" />
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
};

export const CommentSkeleton = () => {
  return (
    <div className="p-4 rounded-lg bg-muted/50 space-y-3">
      <div className="flex items-center gap-3">
        <Skeleton className="h-10 w-10 rounded-full" />
        <div className="space-y-1">
          <Skeleton className="h-4 w-24" />
          <Skeleton className="h-3 w-16" />
        </div>
      </div>
      <Skeleton className="h-4 w-full" />
      <Skeleton className="h-4 w-full" />
      <Skeleton className="h-4 w-2/3" />
    </div>
  );
};

export const ArticlePageSkeleton = () => {
  return (
    <div className="animate-pulse">
      {/* Hero Image */}
      <Skeleton className="h-64 md:h-96 lg:h-[500px] w-full" />
      
      <div className="container mx-auto px-4 -mt-20 relative z-10">
        <div className="max-w-4xl mx-auto">
          {/* Article Header */}
          <div className="bg-card rounded-xl p-6 md:p-8 shadow-lg space-y-4">
            <div className="flex gap-2">
              <Skeleton className="h-6 w-20" />
              <Skeleton className="h-6 w-16" />
            </div>
            <Skeleton className="h-10 w-full" />
            <Skeleton className="h-10 w-3/4" />
            <Skeleton className="h-6 w-full" />
            <Skeleton className="h-6 w-2/3" />
            
            <div className="flex items-center gap-4 pt-4 border-t border-border">
              <Skeleton className="h-10 w-10 rounded-full" />
              <div className="space-y-1">
                <Skeleton className="h-4 w-32" />
                <Skeleton className="h-3 w-20" />
              </div>
            </div>
          </div>
          
          {/* Article Content */}
          <div className="mt-8 space-y-4">
            {[1, 2, 3, 4, 5].map((i) => (
              <Skeleton key={i} className="h-5 w-full" />
            ))}
            <Skeleton className="h-5 w-3/4" />
            <div className="py-4" />
            {[1, 2, 3, 4].map((i) => (
              <Skeleton key={i} className="h-5 w-full" />
            ))}
          </div>
        </div>
      </div>
    </div>
  );
};

export const SearchResultsSkeleton = () => {
  return (
    <div className="space-y-4">
      {[1, 2, 3, 4, 5].map((i) => (
        <ArticleCardHorizontalSkeleton key={i} />
      ))}
    </div>
  );
};

export const BreakingTickerSkeleton = () => {
  return (
    <div className="bg-accent py-2">
      <div className="container mx-auto px-4">
        <div className="flex items-center gap-4">
          <Skeleton className="h-6 w-24 bg-accent-foreground/20" />
          <Skeleton className="h-4 w-64 bg-accent-foreground/20" />
        </div>
      </div>
    </div>
  );
};

--- FILE END: src\components\ui\skeletons.tsx ---


--- FILE START: src\components\ui\slider.tsx ---
import * as React from "react";
import * as SliderPrimitive from "@radix-ui/react-slider";

import { cn } from "@/lib/utils";

const Slider = React.forwardRef<
  React.ElementRef<typeof SliderPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>
>(({ className, ...props }, ref) => (
  <SliderPrimitive.Root
    ref={ref}
    className={cn("relative flex w-full touch-none select-none items-center", className)}
    {...props}
  >
    <SliderPrimitive.Track className="relative h-2 w-full grow overflow-hidden rounded-full bg-secondary">
      <SliderPrimitive.Range className="absolute h-full bg-primary" />
    </SliderPrimitive.Track>
    <SliderPrimitive.Thumb className="block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50" />
  </SliderPrimitive.Root>
));
Slider.displayName = SliderPrimitive.Root.displayName;

export { Slider };

--- FILE END: src\components\ui\slider.tsx ---


--- FILE START: src\components\ui\sonner.tsx ---
import { useTheme } from "next-themes";
import { Toaster as Sonner, toast } from "sonner";

type ToasterProps = React.ComponentProps<typeof Sonner>;

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = "system" } = useTheme();

  return (
    <Sonner
      theme={theme as ToasterProps["theme"]}
      className="toaster group"
      toastOptions={{
        classNames: {
          toast:
            "group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",
          description: "group-[.toast]:text-muted-foreground",
          actionButton: "group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",
          cancelButton: "group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",
        },
      }}
      {...props}
    />
  );
};

export { Toaster, toast };

--- FILE END: src\components\ui\sonner.tsx ---


--- FILE START: src\components\ui\sortable-item.tsx ---
import React from 'react';
import { useSortable } from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { GripVertical } from 'lucide-react';
import { cn } from '@/lib/utils';

interface SortableItemProps {
  id: string;
  children: React.ReactNode;
  className?: string;
}

export const SortableItem = ({ id, children, className }: SortableItemProps) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  return (
    <div
      ref={setNodeRef}
      style={style}
      className={cn(
        'relative touch-manipulation',
        isDragging && 'z-50 opacity-90 shadow-lg scale-[1.02]',
        className
      )}
    >
      <div className="flex items-center gap-2">
        <button
          type="button"
          className={cn(
            'flex-shrink-0 p-1.5 rounded-md cursor-grab active:cursor-grabbing',
            'hover:bg-muted touch-manipulation',
            'focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2',
            isDragging && 'cursor-grabbing'
          )}
          {...attributes}
          {...listeners}
        >
          <GripVertical className="h-4 w-4 text-muted-foreground" />
        </button>
        <div className="flex-1 min-w-0">{children}</div>
      </div>
    </div>
  );
};

interface SortableHandleProps {
  listeners?: Record<string, Function>;
  attributes?: Record<string, unknown>;
  isDragging?: boolean;
}

export const SortableHandle = ({ listeners, attributes, isDragging }: SortableHandleProps) => (
  <button
    type="button"
    className={cn(
      'flex-shrink-0 p-1.5 rounded-md cursor-grab active:cursor-grabbing',
      'hover:bg-muted touch-manipulation',
      'focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2',
      isDragging && 'cursor-grabbing'
    )}
    {...attributes}
    {...listeners}
  >
    <GripVertical className="h-4 w-4 text-muted-foreground" />
  </button>
);

--- FILE END: src\components\ui\sortable-item.tsx ---


--- FILE START: src\components\ui\switch.tsx ---
import * as React from "react";
import * as SwitchPrimitives from "@radix-ui/react-switch";

import { cn } from "@/lib/utils";

const Switch = React.forwardRef<
  React.ElementRef<typeof SwitchPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>
>(({ className, ...props }, ref) => (
  <SwitchPrimitives.Root
    className={cn(
      "peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",
      className,
    )}
    {...props}
    ref={ref}
  >
    <SwitchPrimitives.Thumb
      className={cn(
        "pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0",
      )}
    />
  </SwitchPrimitives.Root>
));
Switch.displayName = SwitchPrimitives.Root.displayName;

export { Switch };

--- FILE END: src\components\ui\switch.tsx ---


--- FILE START: src\components\ui\table.tsx ---
import * as React from "react";

import { cn } from "@/lib/utils";

const Table = React.forwardRef<HTMLTableElement, React.HTMLAttributes<HTMLTableElement>>(
  ({ className, ...props }, ref) => (
    <div className="relative w-full overflow-auto">
      <table ref={ref} className={cn("w-full caption-bottom text-sm", className)} {...props} />
    </div>
  ),
);
Table.displayName = "Table";

const TableHeader = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => <thead ref={ref} className={cn("[&_tr]:border-b", className)} {...props} />,
);
TableHeader.displayName = "TableHeader";

const TableBody = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => (
    <tbody ref={ref} className={cn("[&_tr:last-child]:border-0", className)} {...props} />
  ),
);
TableBody.displayName = "TableBody";

const TableFooter = React.forwardRef<HTMLTableSectionElement, React.HTMLAttributes<HTMLTableSectionElement>>(
  ({ className, ...props }, ref) => (
    <tfoot ref={ref} className={cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0", className)} {...props} />
  ),
);
TableFooter.displayName = "TableFooter";

const TableRow = React.forwardRef<HTMLTableRowElement, React.HTMLAttributes<HTMLTableRowElement>>(
  ({ className, ...props }, ref) => (
    <tr
      ref={ref}
      className={cn("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50", className)}
      {...props}
    />
  ),
);
TableRow.displayName = "TableRow";

const TableHead = React.forwardRef<HTMLTableCellElement, React.ThHTMLAttributes<HTMLTableCellElement>>(
  ({ className, ...props }, ref) => (
    <th
      ref={ref}
      className={cn(
        "h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",
        className,
      )}
      {...props}
    />
  ),
);
TableHead.displayName = "TableHead";

const TableCell = React.forwardRef<HTMLTableCellElement, React.TdHTMLAttributes<HTMLTableCellElement>>(
  ({ className, ...props }, ref) => (
    <td ref={ref} className={cn("p-4 align-middle [&:has([role=checkbox])]:pr-0", className)} {...props} />
  ),
);
TableCell.displayName = "TableCell";

const TableCaption = React.forwardRef<HTMLTableCaptionElement, React.HTMLAttributes<HTMLTableCaptionElement>>(
  ({ className, ...props }, ref) => (
    <caption ref={ref} className={cn("mt-4 text-sm text-muted-foreground", className)} {...props} />
  ),
);
TableCaption.displayName = "TableCaption";

export { Table, TableHeader, TableBody, TableFooter, TableHead, TableRow, TableCell, TableCaption };

--- FILE END: src\components\ui\table.tsx ---


--- FILE START: src\components\ui\tabs.tsx ---
import * as React from "react";
import * as TabsPrimitive from "@radix-ui/react-tabs";

import { cn } from "@/lib/utils";

const Tabs = TabsPrimitive.Root;

const TabsList = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.List>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.List
    ref={ref}
    className={cn(
      "inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",
      className,
    )}
    {...props}
  />
));
TabsList.displayName = TabsPrimitive.List.displayName;

const TabsTrigger = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Trigger
    ref={ref}
    className={cn(
      "inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",
      className,
    )}
    {...props}
  />
));
TabsTrigger.displayName = TabsPrimitive.Trigger.displayName;

const TabsContent = React.forwardRef<
  React.ElementRef<typeof TabsPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>
>(({ className, ...props }, ref) => (
  <TabsPrimitive.Content
    ref={ref}
    className={cn(
      "mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",
      className,
    )}
    {...props}
  />
));
TabsContent.displayName = TabsPrimitive.Content.displayName;

export { Tabs, TabsList, TabsTrigger, TabsContent };

--- FILE END: src\components\ui\tabs.tsx ---


--- FILE START: src\components\ui\textarea.tsx ---
import * as React from "react";

import { cn } from "@/lib/utils";

export interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}

const Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {
  return (
    <textarea
      className={cn(
        "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      ref={ref}
      {...props}
    />
  );
});
Textarea.displayName = "Textarea";

export { Textarea };

--- FILE END: src\components\ui\textarea.tsx ---


--- FILE START: src\components\ui\toast.tsx ---
import * as React from "react";
import * as ToastPrimitives from "@radix-ui/react-toast";
import { cva, type VariantProps } from "class-variance-authority";
import { X } from "lucide-react";

import { cn } from "@/lib/utils";

const ToastProvider = ToastPrimitives.Provider;

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      "fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",
      className,
    )}
    {...props}
  />
));
ToastViewport.displayName = ToastPrimitives.Viewport.displayName;

const toastVariants = cva(
  "group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",
  {
    variants: {
      variant: {
        default: "border bg-background text-foreground",
        destructive: "destructive group border-destructive bg-destructive text-destructive-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
);

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> & VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return <ToastPrimitives.Root ref={ref} className={cn(toastVariants({ variant }), className)} {...props} />;
});
Toast.displayName = ToastPrimitives.Root.displayName;

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      "inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",
      className,
    )}
    {...props}
  />
));
ToastAction.displayName = ToastPrimitives.Action.displayName;

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      "absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",
      className,
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
));
ToastClose.displayName = ToastPrimitives.Close.displayName;

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title ref={ref} className={cn("text-sm font-semibold", className)} {...props} />
));
ToastTitle.displayName = ToastPrimitives.Title.displayName;

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description ref={ref} className={cn("text-sm opacity-90", className)} {...props} />
));
ToastDescription.displayName = ToastPrimitives.Description.displayName;

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>;

type ToastActionElement = React.ReactElement<typeof ToastAction>;

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
};

--- FILE END: src\components\ui\toast.tsx ---


--- FILE START: src\components\ui\toaster.tsx ---
import { useToast } from "@/hooks/use-toast";
import { Toast, ToastClose, ToastDescription, ToastProvider, ToastTitle, ToastViewport } from "@/components/ui/toast";

export function Toaster() {
  const { toasts } = useToast();

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && <ToastDescription>{description}</ToastDescription>}
            </div>
            {action}
            <ToastClose />
          </Toast>
        );
      })}
      <ToastViewport />
    </ToastProvider>
  );
}

--- FILE END: src\components\ui\toaster.tsx ---


--- FILE START: src\components\ui\toggle-group.tsx ---
import * as React from "react";
import * as ToggleGroupPrimitive from "@radix-ui/react-toggle-group";
import { type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";
import { toggleVariants } from "@/components/ui/toggle";

const ToggleGroupContext = React.createContext<VariantProps<typeof toggleVariants>>({
  size: "default",
  variant: "default",
});

const ToggleGroup = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> & VariantProps<typeof toggleVariants>
>(({ className, variant, size, children, ...props }, ref) => (
  <ToggleGroupPrimitive.Root ref={ref} className={cn("flex items-center justify-center gap-1", className)} {...props}>
    <ToggleGroupContext.Provider value={{ variant, size }}>{children}</ToggleGroupContext.Provider>
  </ToggleGroupPrimitive.Root>
));

ToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName;

const ToggleGroupItem = React.forwardRef<
  React.ElementRef<typeof ToggleGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> & VariantProps<typeof toggleVariants>
>(({ className, children, variant, size, ...props }, ref) => {
  const context = React.useContext(ToggleGroupContext);

  return (
    <ToggleGroupPrimitive.Item
      ref={ref}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  );
});

ToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName;

export { ToggleGroup, ToggleGroupItem };

--- FILE END: src\components\ui\toggle-group.tsx ---


--- FILE START: src\components\ui\toggle.tsx ---
import * as React from "react";
import * as TogglePrimitive from "@radix-ui/react-toggle";
import { cva, type VariantProps } from "class-variance-authority";

import { cn } from "@/lib/utils";

const toggleVariants = cva(
  "inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",
  {
    variants: {
      variant: {
        default: "bg-transparent",
        outline: "border border-input bg-transparent hover:bg-accent hover:text-accent-foreground",
      },
      size: {
        default: "h-10 px-3",
        sm: "h-9 px-2.5",
        lg: "h-11 px-5",
      },
    },
    defaultVariants: {
      variant: "default",
      size: "default",
    },
  },
);

const Toggle = React.forwardRef<
  React.ElementRef<typeof TogglePrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>
>(({ className, variant, size, ...props }, ref) => (
  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />
));

Toggle.displayName = TogglePrimitive.Root.displayName;

export { Toggle, toggleVariants };

--- FILE END: src\components\ui\toggle.tsx ---


--- FILE START: src\components\ui\tooltip.tsx ---
import * as React from "react";
import * as TooltipPrimitive from "@radix-ui/react-tooltip";

import { cn } from "@/lib/utils";

const TooltipProvider = TooltipPrimitive.Provider;

const Tooltip = TooltipPrimitive.Root;

const TooltipTrigger = TooltipPrimitive.Trigger;

const TooltipContent = React.forwardRef<
  React.ElementRef<typeof TooltipPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>
>(({ className, sideOffset = 4, ...props }, ref) => (
  <TooltipPrimitive.Content
    ref={ref}
    sideOffset={sideOffset}
    className={cn(
      "z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
      className,
    )}
    {...props}
  />
));
TooltipContent.displayName = TooltipPrimitive.Content.displayName;

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider };

--- FILE END: src\components\ui\tooltip.tsx ---


--- FILE START: src\components\ui\use-toast.ts ---
import { useToast, toast } from "@/hooks/use-toast";

export { useToast, toast };

--- FILE END: src\components\ui\use-toast.ts ---


--- FILE START: src\context\ActivityLogContext.tsx ---
import React, { createContext, useContext, useState, useCallback } from 'react';
import { useAdminAuth } from './AdminAuthContext';

export type ActivityAction = 
  | 'create' | 'update' | 'delete' | 'publish' | 'unpublish'
  | 'approve' | 'reject' | 'flag' | 'upload' | 'login' | 'logout'
  | 'reorder' | 'toggle' | 'submit_review' | 'bulk_delete';

export type ActivityResource = 
  | 'article' | 'comment' | 'media' | 'user' | 'category'
  | 'featured' | 'section' | 'menu' | 'job' | 'setting'
  | 'contact_info' | 'about_info' | 'editorial' | 'internship_application'
  | 'session';

export interface ActivityLogEntry {
  id: string;
  timestamp: Date;
  userId: string;
  userName: string;
  userRole: string;
  action: ActivityAction;
  resource: ActivityResource;
  resourceId?: string;
  resourceName?: string;
  details?: string;
  metadata?: Record<string, any>;
}

interface ActivityLogContextType {
  logs: ActivityLogEntry[];
  logActivity: (
    action: ActivityAction,
    resource: ActivityResource,
    options?: {
      resourceId?: string;
      resourceName?: string;
      details?: string;
      metadata?: Record<string, any>;
    }
  ) => void;
  clearLogs: () => void;
  getLogsByResource: (resource: ActivityResource) => ActivityLogEntry[];
  getLogsByUser: (userId: string) => ActivityLogEntry[];
  getRecentLogs: (limit?: number) => ActivityLogEntry[];
}

const ActivityLogContext = createContext<ActivityLogContextType | undefined>(undefined);

// Store logs in memory (in production, this would be persisted to database)
let globalLogs: ActivityLogEntry[] = [];

// Load initial logs from localStorage for persistence across page refreshes
try {
  const stored = localStorage.getItem('adminActivityLogs');
  if (stored) {
    globalLogs = JSON.parse(stored).map((log: any) => ({
      ...log,
      timestamp: new Date(log.timestamp)
    }));
  }
} catch {
  globalLogs = [];
}

export const ActivityLogProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const { currentUser } = useAdminAuth();
  const [logs, setLogs] = useState<ActivityLogEntry[]>(globalLogs);

  const logActivity = useCallback((
    action: ActivityAction,
    resource: ActivityResource,
    options?: {
      resourceId?: string;
      resourceName?: string;
      details?: string;
      metadata?: Record<string, any>;
    }
  ) => {
    const entry: ActivityLogEntry = {
      id: `log-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,
      timestamp: new Date(),
      userId: currentUser?.id || 'unknown',
      userName: currentUser?.name || 'Unknown User',
      userRole: currentUser?.role || 'unknown',
      action,
      resource,
      resourceId: options?.resourceId,
      resourceName: options?.resourceName,
      details: options?.details,
      metadata: options?.metadata,
    };

    globalLogs = [entry, ...globalLogs].slice(0, 500); // Keep last 500 logs
    setLogs(globalLogs);

    // Persist to localStorage
    try {
      localStorage.setItem('adminActivityLogs', JSON.stringify(globalLogs));
    } catch {
      // Storage full, clear old logs
      globalLogs = globalLogs.slice(0, 100);
      localStorage.setItem('adminActivityLogs', JSON.stringify(globalLogs));
    }
  }, [currentUser]);

  const clearLogs = useCallback(() => {
    globalLogs = [];
    setLogs([]);
    localStorage.removeItem('adminActivityLogs');
  }, []);

  const getLogsByResource = useCallback((resource: ActivityResource) => {
    return logs.filter(log => log.resource === resource);
  }, [logs]);

  const getLogsByUser = useCallback((userId: string) => {
    return logs.filter(log => log.userId === userId);
  }, [logs]);

  const getRecentLogs = useCallback((limit = 50) => {
    return logs.slice(0, limit);
  }, [logs]);

  return (
    <ActivityLogContext.Provider
      value={{
        logs,
        logActivity,
        clearLogs,
        getLogsByResource,
        getLogsByUser,
        getRecentLogs,
      }}
    >
      {children}
    </ActivityLogContext.Provider>
  );
};

export const useActivityLog = (): ActivityLogContextType => {
  const context = useContext(ActivityLogContext);
  if (!context) {
    throw new Error('useActivityLog must be used within ActivityLogProvider');
  }
  return context;
};

// Helper to format action for display
export const formatAction = (action: ActivityAction): string => {
  const actionLabels: Record<ActivityAction, string> = {
    create: 'Created',
    update: 'Updated',
    delete: 'Deleted',
    publish: 'Published',
    unpublish: 'Unpublished',
    approve: 'Approved',
    reject: 'Rejected',
    flag: 'Flagged',
    upload: 'Uploaded',
    login: 'Logged in',
    logout: 'Logged out',
    reorder: 'Reordered',
    toggle: 'Toggled',
    submit_review: 'Submitted for review',
    bulk_delete: 'Bulk deleted',
  };
  return actionLabels[action] || action;
};

// Helper to format resource for display
export const formatResource = (resource: ActivityResource): string => {
  const resourceLabels: Record<ActivityResource, string> = {
    article: 'Article',
    comment: 'Comment',
    media: 'Media',
    user: 'User',
    category: 'Category',
    featured: 'Featured Item',
    section: 'Section',
    menu: 'Menu Item',
    job: 'Job Posting',
    setting: 'Setting',
    contact_info: 'Contact Info',
    about_info: 'About Info',
    editorial: 'Editorial',
    internship_application: 'Internship Application',
    session: 'Session',
  };
  return resourceLabels[resource] || resource;
};

// Get action color for badges
export const getActionColor = (action: ActivityAction): string => {
  const colors: Record<ActivityAction, string> = {
    create: 'bg-green-500/10 text-green-600 border-green-500/20',
    update: 'bg-blue-500/10 text-blue-600 border-blue-500/20',
    delete: 'bg-red-500/10 text-red-600 border-red-500/20',
    publish: 'bg-emerald-500/10 text-emerald-600 border-emerald-500/20',
    unpublish: 'bg-orange-500/10 text-orange-600 border-orange-500/20',
    approve: 'bg-green-500/10 text-green-600 border-green-500/20',
    reject: 'bg-red-500/10 text-red-600 border-red-500/20',
    flag: 'bg-yellow-500/10 text-yellow-600 border-yellow-500/20',
    upload: 'bg-purple-500/10 text-purple-600 border-purple-500/20',
    login: 'bg-cyan-500/10 text-cyan-600 border-cyan-500/20',
    logout: 'bg-gray-500/10 text-gray-600 border-gray-500/20',
    reorder: 'bg-indigo-500/10 text-indigo-600 border-indigo-500/20',
    toggle: 'bg-amber-500/10 text-amber-600 border-amber-500/20',
    submit_review: 'bg-teal-500/10 text-teal-600 border-teal-500/20',
    bulk_delete: 'bg-red-500/10 text-red-600 border-red-500/20',
  };
  return colors[action] || 'bg-gray-500/10 text-gray-600 border-gray-500/20';
};

--- FILE END: src\context\ActivityLogContext.tsx ---


--- FILE START: src\context\AdminAuthContext.tsx ---
import React, { createContext, useContext, useState, useEffect, useCallback } from 'react';
import { AdminRole, AdminUser, RolePermissions, ROLE_PERMISSIONS, hasPermission } from '@/types/admin';
import { userService, ExtendedAdminUser } from '@/lib/userService';

// Export ExtendedAdminUser as AdminUser for compatibility where needed, or just extend the type
export type { ExtendedAdminUser };

interface AdminAuthContextType {
  currentUser: ExtendedAdminUser | null;
  isAuthenticated: boolean;
  login: (email: string, password: string, rememberMe?: boolean) => boolean;
  logout: () => void;
  hasPermission: (permission: keyof RolePermissions) => boolean;
  canAccessPath: (path: string) => boolean;
  updateCurrentUser: (user: ExtendedAdminUser) => void;
}

const AdminAuthContext = createContext<AdminAuthContextType | undefined>(undefined);

// Path to permission mapping
const PATH_PERMISSIONS: Record<string, keyof RolePermissions | 'always'> = {
  '/admin': 'always',
  '/admin/featured': 'manageFeatured',
  '/admin/sections': 'manageSections',
  '/admin/menu': 'manageMenu',
  '/admin/editorial': 'manageEditorial',
  '/admin/articles': 'always',
  '/admin/comments': 'viewAllComments',
  '/admin/contact-info': 'manageContactInfo',
  '/admin/categories': 'manageCategories',
  '/admin/media': 'uploadMedia',
  '/admin/users': 'manageUsers',
  '/admin/jobs': 'manageJobs',
  '/admin/settings': 'manageSettings',
  '/admin/profile': 'always', // Allow profile access
};

export const AdminAuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [currentUser, setCurrentUser] = useState<ExtendedAdminUser | null>(null);

  // Load user from storage on mount
  useEffect(() => {
    // userService.init() is called in the module, so users should be ready
    const storedUser = localStorage.getItem('adminUser') || sessionStorage.getItem('adminUser');
    if (storedUser) {
      try {
        const parsed = JSON.parse(storedUser);
        parsed.createdAt = new Date(parsed.createdAt);
        // Refresh from "DB" to get latest updates if they changed in another session
        // But for local single-user this is fine. Ideally we fetch fresh from userService
        const freshUser = userService.authenticate(parsed.email, 'admin123'); // Hack: we don't have password here. 
        // Better: just use storedUser, but if we want to reflect updates from other tabs we'd need event listeners.
        // For simplicity, rely on storedUser but re-save on updates.
        setCurrentUser(parsed);
      } catch {
        localStorage.removeItem('adminUser');
        sessionStorage.removeItem('adminUser');
      }
    }
  }, []);

  const login = useCallback((email: string, password: string, rememberMe = false): boolean => {
    const user = userService.authenticate(email, password);

    if (user) {
      setCurrentUser(user);

      const storage = rememberMe ? localStorage : sessionStorage;
      storage.setItem('adminUser', JSON.stringify(user));
      storage.setItem('adminAuth', JSON.stringify({ isAuthenticated: true, timestamp: Date.now() }));

      return true;
    }

    return false;
  }, []);

  const logout = useCallback(() => {
    setCurrentUser(null);
    localStorage.removeItem('adminUser');
    sessionStorage.removeItem('adminUser');
    localStorage.removeItem('adminAuth');
    sessionStorage.removeItem('adminAuth');
  }, []);

  const checkPermission = useCallback((permission: keyof RolePermissions): boolean => {
    if (!currentUser) return false;
    return hasPermission(currentUser.role, permission);
  }, [currentUser]);

  const canAccessPath = useCallback((path: string): boolean => {
    if (!currentUser) return false;

    const permission = PATH_PERMISSIONS[path];
    if (!permission) return true;
    if (permission === 'always') return true;

    return hasPermission(currentUser.role, permission);
  }, [currentUser]);

  const updateCurrentUser = useCallback((user: ExtendedAdminUser) => {
    // Persist to DB
    userService.updateProfile(user.id, user);
    // Update State
    setCurrentUser(user);
    // Update Session
    const storage = localStorage.getItem('adminUser') ? localStorage : sessionStorage;
    storage.setItem('adminUser', JSON.stringify(user));
  }, []);

  return (
    <AdminAuthContext.Provider
      value={{
        currentUser,
        isAuthenticated: !!currentUser,
        login,
        logout,
        hasPermission: checkPermission,
        canAccessPath,
        updateCurrentUser,
      }}
    >
      {children}
    </AdminAuthContext.Provider>
  );
};

export const useAdminAuth = (): AdminAuthContextType => {
  const context = useContext(AdminAuthContext);
  if (!context) {
    throw new Error('useAdminAuth must be used within AdminAuthProvider');
  }
  return context;
};

// Export for backward compatibility with AdminLogin
export const isAdminAuthenticated = (): boolean => {
  const storedUser = localStorage.getItem('adminUser') || sessionStorage.getItem('adminUser');
  return !!storedUser;
};

export const adminLogout = (): void => {
  localStorage.removeItem('adminUser');
  sessionStorage.removeItem('adminUser');
  localStorage.removeItem('adminAuth');
  sessionStorage.removeItem('adminAuth');
};

--- FILE END: src\context\AdminAuthContext.tsx ---


--- FILE START: src\context\ThemeContext.tsx ---
import React, { createContext, useContext, useEffect, useState } from 'react';

type Theme = 'light' | 'dark';

interface ThemeContextType {
  theme: Theme;
  toggleTheme: () => void;
  setTheme: (theme: Theme) => void;
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined);

export const ThemeProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [theme, setThemeState] = useState<Theme>(() => {
    if (typeof window !== 'undefined') {
      const stored = localStorage.getItem('truthlens-theme') as Theme;
      if (stored) return stored;
      return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
    }
    return 'light';
  });

  useEffect(() => {
    const root = window.document.documentElement;
    root.classList.remove('light', 'dark');
    root.classList.add(theme);
    localStorage.setItem('truthlens-theme', theme);
  }, [theme]);

  const toggleTheme = () => {
    setThemeState(prev => prev === 'light' ? 'dark' : 'light');
  };

  const setTheme = (newTheme: Theme) => {
    setThemeState(newTheme);
  };

  return (
    <ThemeContext.Provider value={{ theme, toggleTheme, setTheme }}>
      {children}
    </ThemeContext.Provider>
  );
};

export const useTheme = () => {
  const context = useContext(ThemeContext);
  if (!context) {
    throw new Error('useTheme must be used within a ThemeProvider');
  }
  return context;
};

--- FILE END: src\context\ThemeContext.tsx ---


--- FILE START: src\data\adminMockData.ts ---
import { AdminUser, FeaturedSettings } from '@/types/news';

export const adminUsers: AdminUser[] = [
  {
    id: 'admin-1',
    name: 'David Williams',
    email: 'david@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop',
    role: 'admin',
    isActive: true,
    permissions: ['all'],
    createdAt: new Date('2024-01-01'),
    lastLogin: new Date('2026-01-14T08:00:00')
  },
  {
    id: 'admin-2',
    name: 'Sarah Mitchell',
    email: 'sarah@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop',
    role: 'editor',
    isActive: true,
    permissions: ['articles.manage', 'categories.manage', 'media.manage', 'breaking.manage'],
    createdAt: new Date('2024-03-15'),
    lastLogin: new Date('2026-01-14T07:30:00')
  },
  {
    id: 'admin-3',
    name: 'James Chen',
    email: 'james@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop',
    role: 'journalist',
    isActive: true,
    permissions: ['articles.create', 'articles.edit', 'media.upload'],
    createdAt: new Date('2024-06-20'),
    lastLogin: new Date('2026-01-13T16:00:00')
  },
  {
    id: 'admin-4',
    name: 'Amira Hassan',
    email: 'amira@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop',
    role: 'journalist',
    isActive: true,
    permissions: ['articles.create', 'articles.edit', 'media.upload'],
    createdAt: new Date('2024-07-10'),
    lastLogin: new Date('2026-01-14T06:00:00')
  },
  {
    id: 'admin-5',
    name: 'Michael Roberts',
    email: 'michael@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop',
    role: 'author',
    isActive: true,
    permissions: ['articles.create', 'articles.edit'],
    createdAt: new Date('2024-09-05'),
    lastLogin: new Date('2026-01-12T14:00:00')
  },
  {
    id: 'admin-6',
    name: 'Jessica Park',
    email: 'jessica@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop',
    role: 'author',
    isActive: false,
    permissions: ['articles.create'],
    createdAt: new Date('2024-10-01'),
    lastLogin: new Date('2025-12-20T10:00:00')
  }
];

export const featuredSettings: FeaturedSettings = {
  breakingNewsIds: ['1', '2', '5', '10', '13'],
  heroFeaturedIds: ['1', '3', '4', '7', '10', '13'],
  maxBreakingNews: 5,
  maxHeroArticles: 6,
  autoSwipeInterval: 5000,
  breakingAutoSwipe: true,
  heroAutoSwipe: true
};

export const rolePermissions: Record<string, string[]> = {
  admin: [
    'all',
    'users.manage',
    'users.create',
    'users.delete',
    'settings.manage',
    'breaking.manage',
    'hero.manage'
  ],
  editor: [
    'articles.manage',
    'articles.publish',
    'categories.manage',
    'media.manage',
    'breaking.manage',
    'hero.manage',
    'comments.moderate'
  ],
  journalist: [
    'articles.create',
    'articles.edit',
    'media.upload',
    'comments.view'
  ],
  author: [
    'articles.create',
    'articles.edit'
  ],
  reporter: [
    'articles.create',
    'articles.edit',
    'media.upload'
  ]
};

--- FILE END: src\data\adminMockData.ts ---


--- FILE START: src\data\internshipData.ts ---
// Shared internship data - will be managed by admin
// When connected to Cloud, this data will be stored in the database

export interface InternshipBenefit {
  id: string;
  iconName: string;
  title: string;
  description: string;
  order: number;
}

export interface InternshipDepartment {
  id: string;
  iconName: string;
  name: string;
  description: string;
  order: number;
}

export interface InternshipFAQ {
  id: string;
  question: string;
  answer: string;
  order: number;
}

export interface InternshipPageContent {
  heroTitle: string;
  heroSubtitle: string;
  heroDescription: string;
  whyJoinTitle: string;
  whyJoinDescription: string;
  departmentsTitle: string;
  formTitle: string;
  formDescription: string;
  faqTitle: string;
}

export interface InternshipApplication {
  id: string;
  fullName: string;
  email: string;
  phone: string;
  university: string;
  department: string;
  portfolio: string;
  coverLetter: string;
  cvFileName?: string;
  cvUrl?: string;
  status: 'pending' | 'reviewed' | 'shortlisted' | 'rejected';
  submittedAt: Date;
}

// Default benefits data
export const defaultBenefits: InternshipBenefit[] = [
  {
    id: '1',
    iconName: 'BookOpen',
    title: 'Hands-on Experience',
    description: 'Work on real stories that get published and make an impact in the world.',
    order: 1
  },
  {
    id: '2',
    iconName: 'Users',
    title: 'Mentorship Program',
    description: 'Learn directly from experienced journalists and editors in the field.',
    order: 2
  },
  {
    id: '3',
    iconName: 'Globe',
    title: 'Global Exposure',
    description: 'Cover international stories and understand global media dynamics.',
    order: 3
  },
  {
    id: '4',
    iconName: 'Award',
    title: 'Certificate & Reference',
    description: 'Receive a certificate of completion and strong professional references.',
    order: 4
  },
  {
    id: '5',
    iconName: 'TrendingUp',
    title: 'Career Growth',
    description: 'Top performers get opportunities for full-time positions.',
    order: 5
  },
  {
    id: '6',
    iconName: 'Heart',
    title: 'Meaningful Work',
    description: 'Be part of authentic journalism that uncovers untold stories.',
    order: 6
  }
];

// Default departments data
export const defaultDepartments: InternshipDepartment[] = [
  { id: '1', iconName: 'Edit3', name: 'Editorial', description: 'News writing, fact-checking, and content editing', order: 1 },
  { id: '2', iconName: 'Camera', name: 'Multimedia', description: 'Photography, videography, and visual storytelling', order: 2 },
  { id: '3', iconName: 'Mic', name: 'Podcasting', description: 'Audio production and podcast creation', order: 3 },
  { id: '4', iconName: 'Globe', name: 'Digital Media', description: 'Social media, SEO, and online engagement', order: 4 }
];

// Default FAQs
export const defaultFAQs: InternshipFAQ[] = [
  { id: '1', question: 'What is the duration of the internship?', answer: 'Our internships typically last 3-6 months, with flexibility based on your academic schedule.', order: 1 },
  { id: '2', question: 'Is this a paid internship?', answer: 'We offer stipends for our interns along with valuable experience and mentorship.', order: 2 },
  { id: '3', question: 'Can I intern remotely?', answer: 'Yes, we offer both remote and on-site internship options depending on your location and preferences.', order: 3 },
  { id: '4', question: 'What qualifications do I need?', answer: 'We welcome students and recent graduates with a passion for journalism. No prior professional experience required.', order: 4 }
];

// Default page content
export const defaultPageContent: InternshipPageContent = {
  heroTitle: 'Launch Your Journalism Career',
  heroSubtitle: 'Now Accepting Applications',
  heroDescription: 'Join TruthLens as an intern and gain real-world experience in authentic, fact-based journalism. Shape stories that matter.',
  whyJoinTitle: 'Why Intern at TruthLens?',
  whyJoinDescription: 'We believe in nurturing the next generation of journalists with meaningful experiences and genuine career opportunities.',
  departmentsTitle: 'Internship Departments',
  formTitle: 'Apply for Internship',
  formDescription: 'Fill out the form below to start your journey with TruthLens.',
  faqTitle: 'Frequently Asked Questions'
};

// Mock applications with file uploads
export const mockApplications: InternshipApplication[] = [
  {
    id: '1',
    fullName: 'Alex Johnson',
    email: 'alex.j@university.edu',
    phone: '+1 555-0123',
    university: 'Columbia University',
    department: 'editorial',
    portfolio: 'https://alexjohnson.com',
    coverLetter: 'I am passionate about investigative journalism and want to make a difference...',
    cvFileName: 'alex_johnson_cv.pdf',
    cvUrl: '#',
    status: 'pending',
    submittedAt: new Date('2026-01-12T10:00:00')
  },
  {
    id: '2',
    fullName: 'Maria Santos',
    email: 'maria.s@college.edu',
    phone: '+1 555-0456',
    university: 'NYU',
    department: 'multimedia',
    portfolio: 'https://mariasantos.portfolio.com',
    coverLetter: 'As a visual storyteller, I believe in the power of multimedia journalism...',
    cvFileName: 'maria_santos_resume.docx',
    cvUrl: '#',
    status: 'reviewed',
    submittedAt: new Date('2026-01-10T14:30:00')
  },
  {
    id: '3',
    fullName: 'David Kim',
    email: 'david.kim@school.edu',
    phone: '+1 555-0789',
    university: 'Boston University',
    department: 'digital',
    portfolio: '',
    coverLetter: 'I want to learn about digital media and social engagement strategies...',
    status: 'shortlisted',
    submittedAt: new Date('2026-01-08T09:15:00')
  }
];

// Icon mapping helper
export const iconMap: Record<string, string> = {
  BookOpen: 'BookOpen',
  Users: 'Users',
  Globe: 'Globe',
  Award: 'Award',
  TrendingUp: 'TrendingUp',
  Heart: 'Heart',
  Edit3: 'Edit3',
  Camera: 'Camera',
  Mic: 'Mic',
  Briefcase: 'Briefcase',
  GraduationCap: 'GraduationCap',
  Star: 'Star',
  Target: 'Target',
  Lightbulb: 'Lightbulb'
};

--- FILE END: src\data\internshipData.ts ---


--- FILE START: src\data\mockData.ts ---
import { Article, Author, Job, Category, MenuItem, SocialMediaLink, SiteSettings } from '@/types/news';

export const authors: Author[] = [
  {
    id: '1',
    name: 'Sarah Mitchell',
    email: 'sarah@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&h=150&fit=crop',
    bio: 'Senior investigative journalist with 15 years of experience.',
    role: 'editor'
  },
  {
    id: '2',
    name: 'James Chen',
    email: 'james@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop',
    bio: 'International affairs correspondent.',
    role: 'reporter'
  },
  {
    id: '3',
    name: 'Amira Hassan',
    email: 'amira@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop',
    bio: 'Environment and climate specialist.',
    role: 'reporter'
  },
  {
    id: '4',
    name: 'Michael Roberts',
    email: 'michael@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop',
    bio: 'Sports analyst and commentator.',
    role: 'reporter'
  },
  {
    id: '5',
    name: 'Jessica Park',
    email: 'jessica@truthlens.com',
    avatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop',
    bio: 'Entertainment and culture correspondent.',
    role: 'reporter'
  }
];

export const articles: Article[] = [
  {
    id: '1',
    title: 'Soft-shell crab farming / The new gold of Sundarbans coast',
    slug: 'soft-shell-crab-farming-the-new-gold-of-sundarbans',
    excerpt: 'Soft-shell crab farming is emerging as a lucrative business in the coastal regions, offering new hope for economic prosperity.',
    content: `For generations, coastal families living near the Sundarbans have depended on shrimp farming, fishing, timber cutting, and honey collection to survive. Work has always been dangerous. People risk attacks by tigers and pirates, face floods and storms, and must follow strict forest rules. Seasonal fishing bans often leave families with no income for months, making daily survival difficult.

But over the past decade, a new livelihood - soft-shell crab farming - has brought new hope to these communities. The intensive, export-oriented form of aquaculture has expanded rapidly along the south-western coast, offering a steadier income than traditional fishing or shrimp cultivation.

In Satkhira district, particularly in Shyamnagar upazila, the industry has grown into a major source of employment and foreign exchange. It has also created a new set of environmental and regulatory challenges that now threaten its long-term sustainability.

HOW SOFT-SHELL CRAB FARMING WORKS

Up until a decade ago, black tiger shrimp (bagda) - once known as â€œwhite goldâ€ - dominated coastal aquaculture. That boom has faded. Disease outbreaks, repeated natural disasters, falling international demand and volatile prices have eroded profitability. Many farmers have shifted to crabs, often farming them alongside shrimp in the same brackish-water ponds.

Crab farming requires less land, involves lower production risks and delivers quicker returns.

â€œExporting naturally collected crabs is transforming lives here. It is creating small entrepreneurs and generating employment for many,â€ said Rajib Joyaddar, owner of Rohan Agro Crab Fisheries in Shyamnagar.

Joyaddarâ€™s farm produces roughly 9,000 to 10,000 kilogrammes of crabs each month. The work is still vulnerable to storms and saline intrusion, but income is more predictable than before.

Women at a Shyamnagar soft-shell crab farm carefully tend individual crabs in floating cages, managing water and feeding to ensure healthy moulting, forming a vital part of the workforce. The photo was taken recently.

Soft-shell crab farming is highly specialised. Crabs are harvested during a brief period immediately after moulting, when their hard exoskeleton has not yet reformed. That window lasts only a few hours.

Farmers collect crab seed, mostly juveniles or sub-adults, from rivers, canals and mangrove creeks around the Sundarbans. Hatchery production remains negligible, forcing the industry to rely on wild stocks. Sub-adult crabs are preferred because they moult faster and survive better in captivity.

Each crab is kept separately in a small plastic box or cage suspended in shallow brackish water. Farmers carefully control salinity, water depth and cleanliness to reduce stress and prevent cannibalism. Crabs are fed small quantities of trash fish or snails every one or two days. Any delay in moulting, often caused by poor water quality, can result in death or loss of value.

When moulting begins, the clock starts. Crabs must be collected immediately, washed and placed in clean or chilled water before the shell hardens again. They are then graded, frozen or processed for export.

An alternative system, crab fattening, has also expanded. Hard-shell crabs bought from local markets are kept in cages for about three weeks, during which they can double in weight.

This method is cheaper, faster and less prone to disease, making it increasingly popular.`,
    category: 'national',
    author: authors[2],
    featuredImage: '/crab-farming.jpg',
    tags: ['agriculture', 'economy', 'sundarbans'],
    isBreaking: true,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T08:00:00'),
    createdAt: new Date('2026-01-17T06:00:00'),
    updatedAt: new Date('2026-01-17T08:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '2',
    title: 'The little monarch of Madhabkunda',
    slug: 'the-little-monarch-of-madhabkunda',
    excerpt: 'Discovering the unique biodiversity of Madhabkunda through the lens of nature enthusiasts.',
    content: `The water of Madhabkunda does not simply fallâ€”it sparkles.

It plunges from the heights in a silvery torrent, yet much of it hesitates below, lingering in shallow pools before resuming its restless journey downhill. As the water rushes onward, it gives birth to a chharaâ€”a perennial hill stream fed year-round by the waterfallâ€™s freshwater pulse. Massive boulders stand like ancient guardians, sheltering mosses, lichens, ferns, and stubborn little herbs. Wherever water spares a crack, a crevice, a damp ledgeâ€”or even a surprisingly dry nicheâ€”life claims its foothold.

These plants have not damaged the rocks; they have claimed them. Small colonies flourish in places that seem impossible to sustain life. Wherever plants exist, creepy-crawlies inevitably follow to feed on them, and the atmosphere around the waterfall was no exception.

Even the 61-metre plunge from the top of the waterfall fails to deter some resolute vegetation. Mosses and ferns cling calmly to the near-vertical rock face, growing along the very wall over which the hissing torrent descends. Water thunders, sprays, and roarsâ€”yet life persists quietly, insistently.

A sudden ruler of the falls

Amid this chaos of falling water, slippery stone, and stunted greenery, a sudden movement catches the eye.

A small bird darts across the rocksâ€”fearless, confident, almost defiant. It pauses, stands upright, and flicks its tail.

In that instant, it is clear: this bird has declared himself the top boss of the waterfall.

From the mossy base to the wet rock wall, from sheltered ledges to hidden cracks behind the falling sheet of water, he moves with absolute freedom. He feeds wherever he pleases, snapping up insects and worms flushed out by spray and turbulence. At times, he ventures behind the watery curtain itself, vanishing briefly into the shimmering veil, only to reappear moments later at a chosen vantage pointâ€”prey secured.

The bird is unmistakable.

A white-capped, reddish-black fellowâ€”sharp-eyed, alert, endlessly active. His gleaming white crown contrasts starkly with dark rock, resembling a tiny Turkish fez perched proudly atop a crimson robe. Each flick of his tail flashes vermilion red edged with black, vivid against grey stone and silver water. Apart from the white cap, the head, neck, back, wings, throat, and breast are jet black, while the rest of the body glows deep red.

This is no ordinary resident bird.`,
    category: 'national',
    author: authors[1],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/big_580_435/public/2026-01/bird.jpg?h=4cefbda2',
    tags: ['nature', 'wildlife', 'conservation'],
    isBreaking: true,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T09:30:00'),
    createdAt: new Date('2026-01-17T07:00:00'),
    updatedAt: new Date('2026-01-17T09:30:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '3',
    title: 'The lost soul of Jatra',
    slug: 'the-lost-soul-of-jatra',
    excerpt: 'Exploring the declining tradition of Jatra folk theatre and its cultural significance.',
    content: `Today, like many traditional art forms in Bangladesh, Jatra stands on the verge of extinction. What once echoed through open fields and village fairs is now fading into memory. Last December, the Bangladesh Shilpakala Academy organised a month-long traditional Jatra (folk theatre) performance festival to celebrate and support artists striving to preserve the form. Yet such festivals and celebrations are too few and far between to create a lasting impact or bring meaningful change to the lives of these artists.

A theatre of the people

The word Jatra means â€œjourneyâ€, and the name fits well. Troupes travel from one district to another, performing on temporary open-air stages throughout the winter months. In its early days, Jatra drew heavily from myth and religion. By the late nineteenth century, however, scripts began to evolve. Social issues, political resistance, and rebellion increasingly came to dominate the stage.

During the colonial era, British authorities viewed these political undertones as a threat. As the struggle for independence neared its peak, Jatraâ€™s social and political messages became a powerful voice for the oppressed. Another major transformation came with the introduction of women performers, a revolution in its own right.

Modhurima Guha Neogi, in her study â€œJatrapala, the Foremost but a Diminishing Art of Bengali Culture,â€ noted that womenâ€™s entry into Jatra was fraught with ridicule and prejudice. For a time, only sex workers dared to step onto the stage. Over the years, however, women from all social classes joined, reshaping the identity of the art form itself.`,
    category: 'entertainment',
    author: authors[4],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/big_580_435/public/2026-01/photo-collected.jpg?h=be16704d',
    tags: ['culture', 'arts', 'history'],
    isBreaking: true,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-16T18:00:00'),
    createdAt: new Date('2026-01-16T10:00:00'),
    updatedAt: new Date('2026-01-16T18:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '4',
    title: 'Why we fail to save our rivers',
    slug: 'why-we-fail-to-save-our-rivers',
    excerpt: 'An in-depth analysis of the systemic failures in river conservation efforts.',
    content: `Our country is a riverine land. Rivers are deeply intertwined with the very formation of this land. Yet, even today, the definition of a river has not been finalised in Bangladesh. Without a settled definition, it is impossible to determine the actual number of rivers. In 2023, the National River Conservation Commission proposed a definition of a river. However, it does not appear that all government agencies have accepted this definition. Had it been accepted, the same definition would have been followed in determining the number of rivers.

Does only what was marked as a river in the British-era CS (Cadastral Survey) maps qualify as a river? Are flows that local people have, for generations, called rivers not rivers at all? Unless it is clearly defined which flow can be called a river, it will never be possible to calculate their number. And without knowing the number of rivers, it is also impossible to say how much river area has fallen into the hands of illegal grabbers.

To our knowledge, during the British cadastral surveys there were no clear guidelines on which flow would be considered a river. Many wide and long flows were recorded as khals (canals), while comparatively narrow and short flows were recorded as rivers. It appears that surveyors simply recorded flows according to the names used locally: what people called a khal was recorded as a khal; what they called a dara was recorded as a dara; similarly khari, dohor, or chhara were recorded as such. As a result, many sections within rivers, canals, daras, chharas, dohors, and kharis were recorded as wetlands or waterbodies.

Officially prepared lists of rivers in Bangladesh have changed year after year. Many of us who have worked on river issues for a long time believe that Bangladesh has more than two thousand rivers. In 2005, the Bangladesh Water Development Board spoke of 230 rivers. In 2011, the same institution reported 405 rivers. In 2024, the National River Conservation Commission stated that there are 1,008 rivers. In 2025, the Ministry of Water Resources of the interim government published a list identifying 1,415 rivers. This list was prepared within a very short period of time by the interim government.`,
    category: 'national',
    author: authors[0],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/portrait_356_475/public/2026-01/river.jpg?h=ed27e282',
    tags: ['environment', 'pollution', 'rivers'],
    isBreaking: false,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-16T14:45:00'),
    createdAt: new Date('2026-01-16T12:00:00'),
    updatedAt: new Date('2026-01-16T14:45:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '5',
    title: 'Why hospital bills scare Dhaka patients more than disease',
    slug: 'why-hospital-bills-scare-dhaka-patients-more-than-',
    excerpt: 'Rising healthcare costs are becoming a major burden for residents of the capital.',
    content: `In a streak of unfortunate crises, a lot of my family members and friends had to be hospitalised with various health emergencies recently, in all kinds of upscale to medium-range hospital facilities in Dhaka. The experience of running around to deal with the urgency of their medical condition brought me to my current realisation. Before I share my thoughts on hospital care in Dhaka and our ability to access personalised and exclusive healthcare, I would like to state that I have no bias against boutique hospitals, government hospitals, or mid-range hospital facilities in Dhaka or its outskirts. I am not discussing their treatment strategies, nor am I commenting on the healthcare industry as a whole. I am simply acknowledging their effort for prioritising hygiene and aesthetics when building the hospital structures, for offering a wide range of general and niche medical services, for the hospital amenities, and importantly, for their relentless patience in attending to our inane complaints. I say this because on the far end of concierge facilities is a scary experience I once had in a post-operative ward, where the bed had splattered blood marks on the mattress, which was without a proper bed sheet. Believe it or not, cats were roaming freely in the post-operative room! It was my misfortune to land there in an unavoidable health emergency with someone I love, thus my review on how far the hospital care industry has flourished in Dhaka. Having experienced both the north pole and south pole of hospital facilities in Dhaka, I have set my mind on an affordable health facility, simply because the specialised doctors and experts in private hospitals all have a day job at the government institutions. This means we get diagnosed by the best in town, with only a token fee in the state-run hospital facilities. Recently, a friend travelled to Singapore for surgery for a rare and aggressive cancer, at a cost so enormous it exhausted her finances. Coming back to Dhaka, she went to a private hospital for some discomfort; the bill there almost took her to the grave -- again. â€œI was admitted to a hospital for observation. I found their customer care very amiable, the nursing staff efficient, the food decent, and the cost of my airy room all impressive,â€ says a friend, who is a consultant in a publishing house. â€œIf I am to think about how much the bill is spiking every hour with each test and diagnosis done, each expert opinion given, then the recovery becomes taxing. Whenever I am in a hospital, regardless of its ratings, I have a nagging feeling about the financial burden I have put my family under and on my savings. The service, if I compare, between the city's boutique hospitals and ordinary ones, I would say that the difference is solely financial, with or without the hospitalâ€™s cleanliness fanfare,â€ she adds. Then again, for many, it is not about money. I was struggling to put my old caretaker, who has dementia, in an old home facility. There is no hospice, rest home, or nursing home for the toiling mass of Dhaka, and hospital bills for them can lead to selling their poor familyâ€™s arable lands. I donâ€™t know how many of you have seen the affordable hospitalsâ€™ corridors teeming with patients and attendants. The bottom line is that the cost for a clean hospital, good care, and amiable service is directly proportional to our savings account. So, my simple conclusion is that state-run hospitals should be visited by more patients, allowing them to earn enough to care for both people and the hospitalâ€™s upkeep.`,
    category: 'national',
    author: authors[0],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/portrait_356_475/public/2026-01/ezgif.com-avif-to-png-converter%20%2884%29.png?h=c06fab7e',
    tags: ['health', 'economy', 'dhaka'],
    isBreaking: false,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T11:00:00'),
    createdAt: new Date('2026-01-17T09:00:00'),
    updatedAt: new Date('2026-01-17T11:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '6',
    title: 'Next Step / Why some good leaders stop getting better',
    slug: 'next-step-why-some-good-leaders-stop-getting-bette',
    excerpt: 'Leadership stagnation: Understanding why growth stalls for even the most promising leaders.',
    content: `â€˜Far enemyâ€™ and â€˜near enemyâ€™ are concepts that come from Buddhist psychology and can be very useful in self-development. The idea behind this is that virtues have enemies. A far enemy is the obvious opposite of a virtue. For example, the far enemy of compassion is cruelty, inflicting, or causing suffering. In contrast, a near enemy is something that impersonates the virtue in question but subtly undermines it and is a hidden obstacle to growth. Usually, these concepts are used for cultivating virtues such as kindness, connection, joy, etc., but can also be very useful in unpacking development feedback that we receive from our bosses. The far enemy of empathy is dismissiveness - bypassing emotions in favour of logic or simplicity. Its near enemy is sympathy without accountability. The far enemy of strategic thinking is short-term focus - driven by urgency rather than long-term vision. Its near enemy is over-analysis & over-thinking. Humilityâ€™s far enemy is arrogance - inflated ego and sense of self-worth. Its near enemy is performative openness. Micromanaging is the far enemy of empowerment. Its subtler near enemy is supporting without passing over authority. Interrupting is the far enemy of deep listening. Its near enemy is passive listening. The far enemy of accepting feedback is defensiveness. The more complex near enemy is intellectualising feedback. The development of many high-performing employees plateaus not because of the easy-to-detect far enemies, but because of near enemies masquerading as progress. When you receive development feedback, ask yourself if your plan is actually going to tackle the issue at the core, or if you are simply choosing an easier and more comfortable route that delivers short-term gains but barely scratches the surface.`,
    category: 'economy',
    author: authors[1],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/portrait_356_475/public/2026-01/good%20leaders.png?h=b39c5fef',
    tags: ['leadership', 'business', 'career'],
    isBreaking: false,
    isFeatured: false,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-15T10:00:00'),
    createdAt: new Date('2026-01-15T08:00:00'),
    updatedAt: new Date('2026-01-15T10:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '7',
    title: 'Toxic waste in our rivers: Stop this threat immediately',
    slug: 'toxic-waste-in-our-rivers-stop-this-threat-immedia',
    excerpt: 'Industrial dumping is turning our lifelines into hazardous zones.',
    content: `Globally, the boundary for biogeochemical flows of natural nutrient cycles, mainly nitrogen and phosphorus, has already passed a safe operating space for humanity. River pollution in Bangladesh is driven by various waste products, including sewage, industrial effluents, and chemicals. The rivers surrounding Dhaka, including the Buriganga, Turag, and Shitalakkhya, are among the most polluted. They receive vast amounts of untreated waste from thousands of factories. Heavy metals like chromium, lead, and arsenic are alarmingly high. Agricultural runoff also plays a significant role, entering the food chain and posing health risks. Coastal rivers are highly saline due to sea-level rise and reduced freshwater flow. To combat this, we need regular monitoring, digital dashboards for pollution data, and strict enforcement of sustainability reporting (ESG). Higher taxes on small plastic packaging and better waste collection systems are essential. Transboundary water diplomacy must include pollution management, especially with India and China. A systems approach and shifting towards a circular economy are critical to restoring our wetlands and rivers before a social-ecological catastrophe occurs.`,
    category: 'national',
    author: authors[2],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/portrait_356_475/public/2026-01/Sarwar_Hossain.jpg?h=7f41b5a5',
    tags: ['environment', 'pollution', 'urgent'],
    isBreaking: false,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T07:00:00'),
    createdAt: new Date('2026-01-17T05:00:00'),
    updatedAt: new Date('2026-01-17T07:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '8',
    title: 'Politics, the IPL and a World Cup flashpoint: Explaining the Indiaâ€“Bangladesh cricket rift',
    slug: 'politics-the-ipl-and-a-world-cup-flashpoint-explai',
    excerpt: 'Analyzing the tensions affecting the cricketing relationship between the two neighbors.',
    content: `The chain of events began with the dramatic removal of Bangladesh star pacer Mustafizur Rahman from IPL franchise Kolkata Knight Riders, triggering widespread debate and controversy. The fallout has since escalated, leading to Bangladesh's refusal to play the upcoming T20 World Cup on Indian soil and an unprecedented strain in Indiaâ€“Bangladesh cricketing relations. In this episode of Star Explains, we break down the entire saga -- from Mustafizur's IPL exit to the broader political and cricketing implications -- and explore how this unfolding crisis could reshape regional cricket dynamics.`,
    category: 'sports',
    author: authors[3],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/2025-11/star-multimedia-banner.jpeg',
    tags: ['cricket', 'diplomacy', 'sports'],
    isBreaking: false,
    isFeatured: false,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-16T20:00:00'),
    createdAt: new Date('2026-01-16T18:00:00'),
    updatedAt: new Date('2026-01-16T20:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '9',
    title: 'Watch / No more silence: Akram urges BCB to show courage',
    slug: 'watch-no-more-silence-akram-urges-bcb-to-show-cour',
    excerpt: 'Former captain speaks out on the current state of cricket administration.',
    content: `Former Bangladesh captain Akram Khan has slammed the exclusion of Mustafizur Rahman from KKR as an injustice that hurt both the player and Bangladeshi fans. Speaking to The Daily Star, the former BCB director warned that politics and unclear processes are widening the gap between Bangladesh and India, urging cricket authorities to act decisively. Silence, he argued, has cost Bangladesh before. Now, he insists, the BCB must protect national interests, speak firmly and present its demands with courage -- without fear or hesitation -- for the future of Bangladeshi cricket.`,
    category: 'sports',
    author: authors[3],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/big_4/public/images/2026/01/03/161231_159.jpg',
    videoUrl: 'https://www.youtube.com/embed/9bZkp7q19f0',
    tags: ['cricket', 'BCB', 'sports'],
    isBreaking: false,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T12:00:00'),
    createdAt: new Date('2026-01-17T10:00:00'),
    updatedAt: new Date('2026-01-17T12:00:00'),
    views: 0,
    hasVideo: true
  },
  {
    id: '10',
    title: 'In Focus / The untold history of why Khaleda Zia entered politics',
    slug: 'in-focus-the-untold-history-of-why-khaleda-zia-ent',
    excerpt: 'Revisiting the pivotal moments that shaped the political journey of the former Prime Minister.',
    content: `The military takeover by Army Chief Lt. Gen. Hussain Muhammad Ershad in 1982 failed to block the nationalist forces led by the BNP. Begum Khaleda Zia, an unlikely successor to Zia the statesman, rose to the occasion, joining the BNP and learning the art of leadership. The assassination of President Ziaur Rahman in 1981 had debilitated the party, and it was looking for a rallying point. While some senior members initially doubted her, she became a symbol of unity. In January 1982, she accepted party membership after significant persuasion from various factions. Though she initially withdrew from a chairmanship contest against Justice Sattar to maintain party unity, the internal contradictions and the need for a leader who carried Zia's legacy eventually made her the ultimate choice. Her entry into politics transformed her from a typical housewife into a charismatic national leader who could counterbalance other political forces. This excerpt from Mahfuz Ullah's book explores the circuitous path she took to steer the party through conspiracies and splits, ultimately winning the political battle for the BNP's future.`,
    category: 'politics',
    author: authors[0],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/big_580_435/public/images/2025/12/30/2_1.png?h=d75b87d0',
    tags: ['politics', 'history', 'bangladesh'],
    isBreaking: false,
    isFeatured: true,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-15T14:00:00'),
    createdAt: new Date('2026-01-15T12:00:00'),
    updatedAt: new Date('2026-01-15T14:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '11',
    title: 'In Pictures: Winter chills across the country',
    slug: 'in-pictures-winter-chills',
    excerpt: 'A photo essay capturing the impact of the cold wave gripping the northern districts.',
    content: `As the winter chill tightens its grip across the country, life has become a struggle for many, especially the homeless and those living in rural areas. Thick fog and biting winds have disrupted daily activities and transport. Intro: As a severe cold wave grips Bangladesh, the winter chills have become a daily struggle for many. These images across the country show how people are coping with the dropping temperatures. Captions: 1. Thick fog blankets the highways, making travel hazardous and slow. 2. A group of people huddle around a roadside bonfire to stay warm in the early morning. 3. Vulnerable communities receive warm clothes from volunteers as the temperature dips. 4. The sun struggles to break through the dense mist in rural Bangladesh.`,
    category: 'national',
    author: authors[0],
    featuredImage: 'https://www.thedailystar.net/sites/default/files/styles/medium_300_170/public/2026-01/cold_0.jpg?h=5164e377',
    tags: ['weather', 'winter', 'photography'],
    isBreaking: false,
    isFeatured: false,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-17T06:30:00'),
    createdAt: new Date('2026-01-17T05:00:00'),
    updatedAt: new Date('2026-01-17T06:30:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '12',
    title: 'Tech Giants Face New Regulations: What It Means for Digital Privacy',
    slug: 'tech-giants-new-regulations-privacy',
    excerpt: 'Comprehensive legislation aims to reshape how technology companies handle user data and privacy.',
    content: 'New regulatory frameworks are set to transform the digital landscape as governments worldwide crack down on data privacy violations.',
    category: 'technology',
    author: authors[1],
    featuredImage: 'https://images.unsplash.com/photo-1518770660439-4636190af475?w=1200&h=800&fit=crop',
    tags: ['technology', 'privacy', 'regulation'],
    isBreaking: false,
    isFeatured: false,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-13T15:00:00'),
    createdAt: new Date('2026-01-13T10:00:00'),
    updatedAt: new Date('2026-01-13T15:00:00'),
    views: 0,
    hasVideo: false
  },
  {
    id: '13',
    title: 'Award Season: Surprise Winners Shake Up Hollywood',
    slug: 'award-season-surprise-winners',
    excerpt: 'This year\'s awards ceremony delivered unexpected results that have critics and fans buzzing.',
    content: 'The entertainment industry is still reeling from an awards night full of surprises, with indie films and first-time nominees taking home the biggest honors.',
    category: 'entertainment',
    author: authors[4],
    featuredImage: 'https://images.unsplash.com/photo-1485846234645-a62644f84728?w=1200&h=800&fit=crop',
    videoUrl: 'https://www.youtube.com/embed/kJQP7kiw5Fk',
    tags: ['entertainment', 'awards', 'hollywood'],
    isBreaking: false,
    isFeatured: false,
    showOnHomepage: true,
    status: 'published',
    publishedAt: new Date('2026-01-14T09:00:00'),
    createdAt: new Date('2026-01-14T07:00:00'),
    updatedAt: new Date('2026-01-14T09:00:00'),
    views: 0,
    hasVideo: true
  }
];

export const jobs: Job[] = [
  {
    id: '1',
    title: 'Senior Investigative Reporter',
    department: 'Editorial',
    type: 'full-time',
    description: 'Join our award-winning investigative team to uncover stories that matter.',
    requirements: [
      '5+ years of investigative journalism experience',
      'Strong research and analytical skills',
      'Published portfolio of investigative pieces',
      'Excellent written and verbal communication'
    ],
    deadline: new Date('2026-02-28'),
    isOpen: true,
    createdAt: new Date('2026-01-10')
  },
  {
    id: '2',
    title: 'Digital Content Editor',
    department: 'Digital',
    type: 'full-time',
    description: 'Lead our digital content strategy and manage online publishing.',
    requirements: [
      '3+ years of digital editing experience',
      'SEO and analytics expertise',
      'CMS proficiency',
      'Team leadership skills'
    ],
    deadline: new Date('2026-02-15'),
    isOpen: true,
    createdAt: new Date('2026-01-08')
  },
  {
    id: '3',
    title: 'Editorial Intern',
    department: 'Editorial',
    type: 'internship',
    description: 'Learn from experienced journalists while contributing to our newsroom.',
    requirements: [
      'Currently enrolled in journalism or related field',
      'Strong writing skills',
      'Eagerness to learn',
      'Ability to meet deadlines'
    ],
    deadline: new Date('2026-03-01'),
    isOpen: true,
    createdAt: new Date('2026-01-12')
  },
  {
    id: '4',
    title: 'Sports Reporter',
    department: 'Sports',
    type: 'full-time',
    description: 'Cover major sporting events and provide insightful analysis.',
    requirements: [
      '2+ years sports journalism experience',
      'Deep knowledge of multiple sports',
      'Strong interviewing skills',
      'Ability to work under tight deadlines'
    ],
    deadline: new Date('2026-02-20'),
    isOpen: true,
    createdAt: new Date('2026-01-11')
  },
  {
    id: '5',
    title: 'Entertainment Correspondent',
    department: 'Entertainment',
    type: 'full-time',
    description: 'Report on entertainment news, celebrity interviews, and industry trends.',
    requirements: [
      '3+ years entertainment journalism experience',
      'Industry contacts preferred',
      'Social media savvy',
      'Strong storytelling abilities'
    ],
    deadline: new Date('2026-02-25'),
    isOpen: true,
    createdAt: new Date('2026-01-12')
  }
];

export const categories: { id: Category; name: string; description: string }[] = [
  { id: 'national', name: 'National', description: 'News from across the nation' },
  { id: 'international', name: 'International', description: 'Global news and events' },
  { id: 'economy', name: 'Economy', description: 'Business and financial news' },
  { id: 'entertainment', name: 'Entertainment', description: 'Movies, music, and celebrity news' },
  { id: 'sports', name: 'Sports', description: 'Sports news and highlights' },
  { id: 'politics', name: 'Politics', description: 'Political news and analysis' },
  { id: 'technology', name: 'Technology', description: 'Tech news and innovations' },
  { id: 'editorial', name: 'Editorial', description: 'Opinion and analysis' },
  { id: 'untold-stories', name: 'Untold Stories', description: 'Investigative journalism' }
];

export const headerMenuItems: MenuItem[] = [
  { id: '1', label: 'National', path: '/category/national', type: 'category', isVisible: true, order: 1, showInMainNav: true },
  { id: '2', label: 'International', path: '/category/international', type: 'category', isVisible: true, order: 2, showInMainNav: true },
  { id: '3', label: 'Economy', path: '/category/economy', type: 'category', isVisible: true, order: 3, showInMainNav: true },
  { id: '4', label: 'Entertainment', path: '/category/entertainment', type: 'category', isVisible: true, order: 4, showInMainNav: true },
  { id: '5', label: 'Sports', path: '/category/sports', type: 'category', isVisible: true, order: 5, showInMainNav: true },
  { id: '6', label: 'Politics', path: '/category/politics', type: 'category', isVisible: true, order: 6, showInMainNav: false },
  { id: '7', label: 'Technology', path: '/category/technology', type: 'category', isVisible: true, order: 7, showInMainNav: false },
  { id: '8', label: 'Untold Stories', path: '/category/untold-stories', type: 'category', isVisible: true, order: 8, highlight: true, showInMainNav: false },
  { id: '9', label: 'Internship', path: '/internship', type: 'page', isVisible: true, order: 9, highlight: true, icon: 'ðŸŽ“', showInMainNav: false },
  { id: '10', label: 'Our Team', path: '/team', type: 'page', isVisible: true, order: 10, showInMainNav: false, icon: 'ðŸ‘¥' },
];

export const socialMediaLinks: SocialMediaLink[] = [
  { id: '1', platform: 'facebook', url: 'https://facebook.com/truthlens', isVisible: true },
  { id: '2', platform: 'twitter', url: 'https://twitter.com/truthlens', isVisible: true },
  { id: '3', platform: 'instagram', url: 'https://instagram.com/truthlens', isVisible: true },
  { id: '4', platform: 'youtube', url: 'https://youtube.com/@truthlens', isVisible: true },
  { id: '5', platform: 'linkedin', url: 'https://linkedin.com/company/truthlens', isVisible: true },
  { id: '6', platform: 'tiktok', url: '', isVisible: false },
  { id: '7', platform: 'whatsapp', url: '', isVisible: false },
  { id: '8', platform: 'telegram', url: '', isVisible: false },
];

export const siteSettings: SiteSettings = {
  siteName: 'TruthLens',
  tagline: 'Authentic Stories. Unbiased Voices.',
  siteDescription: 'Your trusted source for fact-based journalism.',
  contactEmail: 'contact@truthlens.com',
  socialLinks: socialMediaLinks,
};

--- FILE END: src\data\mockData.ts ---


--- FILE START: src\data\siteContactData.ts ---
// Site contact information - managed through admin panel
// When Cloud is connected, this will be stored in the database

export interface ContactInfo {
  id: string;
  type: 'email' | 'phone' | 'address';
  label: string;
  value: string;
  isVisible: boolean;
  order: number;
  showInFooter: boolean;
  showOnContactPage: boolean;
}

export interface AboutInfo {
  id: string;
  section: 'mission' | 'vision' | 'value' | 'general';
  title: string;
  content: string;
  icon?: string;
  isVisible: boolean;
  order: number;
}

// Default contact information
export const contactInfoData: ContactInfo[] = [
  {
    id: '1',
    type: 'email',
    label: 'General Inquiries',
    value: 'contact@truthlens.com',
    isVisible: true,
    order: 1,
    showInFooter: true,
    showOnContactPage: true,
  },
  {
    id: '2',
    type: 'email',
    label: 'Press & Media',
    value: 'press@truthlens.com',
    isVisible: true,
    order: 2,
    showInFooter: false,
    showOnContactPage: true,
  },
  {
    id: '3',
    type: 'email',
    label: 'Careers',
    value: 'careers@truthlens.com',
    isVisible: true,
    order: 3,
    showInFooter: false,
    showOnContactPage: true,
  },
  {
    id: '4',
    type: 'phone',
    label: 'Main Office',
    value: '+1 (555) 123-4567',
    isVisible: true,
    order: 4,
    showInFooter: false,
    showOnContactPage: true,
  },
  {
    id: '5',
    type: 'phone',
    label: 'News Tips Hotline',
    value: '+1 (555) 987-6543',
    isVisible: true,
    order: 5,
    showInFooter: false,
    showOnContactPage: true,
  },
  {
    id: '6',
    type: 'address',
    label: 'Headquarters',
    value: '123 News Street\nMedia City, MC 12345\nUnited States',
    isVisible: true,
    order: 6,
    showInFooter: false,
    showOnContactPage: true,
  },
];

export const aboutInfoData: AboutInfo[] = [
  {
    id: '1',
    section: 'mission',
    title: 'Our Mission',
    content: 'To deliver authentic, fact-based journalism that empowers readers with accurate information. We are committed to uncovering the truth and presenting it without bias or agenda.',
    icon: 'Target',
    isVisible: true,
    order: 1,
  },
  {
    id: '2',
    section: 'vision',
    title: 'Our Vision',
    content: 'To become a globally trusted source of news where readers can rely on integrity, transparency, and thorough investigative journalism that makes a difference.',
    icon: 'Eye',
    isVisible: true,
    order: 2,
  },
  {
    id: '3',
    section: 'value',
    title: 'Integrity',
    content: 'We uphold the highest standards of journalistic integrity in every story we publish.',
    icon: 'Shield',
    isVisible: true,
    order: 3,
  },
  {
    id: '4',
    section: 'value',
    title: 'Inclusivity',
    content: 'We give voice to the unheard and tell stories that matter to all communities.',
    icon: 'Users',
    isVisible: true,
    order: 4,
  },
  {
    id: '5',
    section: 'value',
    title: 'Transparency',
    content: 'We are open about our sources, methods, and editorial decisions.',
    icon: 'Eye',
    isVisible: true,
    order: 5,
  },
];

// Helper functions to get filtered data
export const getFooterContacts = () => 
  contactInfoData.filter(c => c.isVisible && c.showInFooter).sort((a, b) => a.order - b.order);

export const getContactPageContacts = () => 
  contactInfoData.filter(c => c.isVisible && c.showOnContactPage).sort((a, b) => a.order - b.order);

export const getAboutInfoBySection = (section: AboutInfo['section']) =>
  aboutInfoData.filter(a => a.isVisible && a.section === section).sort((a, b) => a.order - b.order);

--- FILE END: src\data\siteContactData.ts ---


--- FILE START: src\data\teamData.ts ---
import { TeamMember } from '@/types/team';

export const initialTeamMembers: TeamMember[] = [
    {
        id: '1',
        name: 'Eleanor Sterling',
        role: 'Editor-in-Chief',
        image: 'https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=800&auto=format&fit=crop&q=60',
        bio: 'Eleanor brings over 20 years of journalism experience, having led newsrooms in London and New York. She believes in the power of truth to effect change.',
        email: 'eleanor@truthlens.com',
        twitter: '#',
        linkedin: '#',
        order: 1
    },
    {
        id: '2',
        name: 'Marcus Chen',
        role: 'Senior Political Correspondent',
        image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=800&auto=format&fit=crop&q=60',
        bio: 'Marcus covers national and international politics with a focus on policy analysis and diplomatic relations.',
        twitter: '#',
        order: 2
    },
    {
        id: '3',
        name: 'Sarah Jenkins',
        role: 'Tech & Future Editor',
        image: 'https://images.unsplash.com/photo-1580489944761-15a19d654956?w=800&auto=format&fit=crop&q=60',
        bio: 'A former software engineer turned journalist, Sarah breaks down complex technological advancements for the general public.',
        linkedin: '#',
        order: 3
    },
    {
        id: '4',
        name: 'David Okafor',
        role: 'Investigative Journalist',
        image: 'https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=800&auto=format&fit=crop&q=60',
        bio: 'Award-winning investigative reporter dedicated to uncovering corruption and bringing hidden stories to light.',
        order: 4
    }
];

--- FILE END: src\data\teamData.ts ---


--- FILE START: src\hooks\use-mobile.tsx ---
import * as React from "react";

const MOBILE_BREAKPOINT = 768;

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined);

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`);
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    };
    mql.addEventListener("change", onChange);
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT);
    return () => mql.removeEventListener("change", onChange);
  }, []);

  return !!isMobile;
}

--- FILE END: src\hooks\use-mobile.tsx ---


--- FILE START: src\hooks\use-toast.ts ---
import * as React from "react";

import type { ToastActionElement, ToastProps } from "@/components/ui/toast";

const TOAST_LIMIT = 1;
const TOAST_REMOVE_DELAY = 1000000;

type ToasterToast = ToastProps & {
  id: string;
  title?: React.ReactNode;
  description?: React.ReactNode;
  action?: ToastActionElement;
};

const actionTypes = {
  ADD_TOAST: "ADD_TOAST",
  UPDATE_TOAST: "UPDATE_TOAST",
  DISMISS_TOAST: "DISMISS_TOAST",
  REMOVE_TOAST: "REMOVE_TOAST",
} as const;

let count = 0;

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER;
  return count.toString();
}

type ActionType = typeof actionTypes;

type Action =
  | {
      type: ActionType["ADD_TOAST"];
      toast: ToasterToast;
    }
  | {
      type: ActionType["UPDATE_TOAST"];
      toast: Partial<ToasterToast>;
    }
  | {
      type: ActionType["DISMISS_TOAST"];
      toastId?: ToasterToast["id"];
    }
  | {
      type: ActionType["REMOVE_TOAST"];
      toastId?: ToasterToast["id"];
    };

interface State {
  toasts: ToasterToast[];
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return;
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId);
    dispatch({
      type: "REMOVE_TOAST",
      toastId: toastId,
    });
  }, TOAST_REMOVE_DELAY);

  toastTimeouts.set(toastId, timeout);
};

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case "ADD_TOAST":
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      };

    case "UPDATE_TOAST":
      return {
        ...state,
        toasts: state.toasts.map((t) => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),
      };

    case "DISMISS_TOAST": {
      const { toastId } = action;

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId);
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id);
        });
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      };
    }
    case "REMOVE_TOAST":
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        };
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      };
  }
};

const listeners: Array<(state: State) => void> = [];

let memoryState: State = { toasts: [] };

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action);
  listeners.forEach((listener) => {
    listener(memoryState);
  });
}

type Toast = Omit<ToasterToast, "id">;

function toast({ ...props }: Toast) {
  const id = genId();

  const update = (props: ToasterToast) =>
    dispatch({
      type: "UPDATE_TOAST",
      toast: { ...props, id },
    });
  const dismiss = () => dispatch({ type: "DISMISS_TOAST", toastId: id });

  dispatch({
    type: "ADD_TOAST",
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss();
      },
    },
  });

  return {
    id: id,
    dismiss,
    update,
  };
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState);

  React.useEffect(() => {
    listeners.push(setState);
    return () => {
      const index = listeners.indexOf(setState);
      if (index > -1) {
        listeners.splice(index, 1);
      }
    };
  }, [state]);

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: "DISMISS_TOAST", toastId }),
  };
}

export { useToast, toast };

--- FILE END: src\hooks\use-toast.ts ---


--- FILE START: src\hooks\usePagination.ts ---
import { useState, useEffect, useCallback, useRef } from 'react';

interface UsePaginationOptions<T> {
  items: T[];
  itemsPerPage: number;
  initialPage?: number;
}

interface UsePaginationReturn<T> {
  currentItems: T[];
  currentPage: number;
  totalPages: number;
  hasNextPage: boolean;
  hasPrevPage: boolean;
  goToPage: (page: number) => void;
  nextPage: () => void;
  prevPage: () => void;
  isLoading: boolean;
}

export function usePagination<T>({
  items,
  itemsPerPage,
  initialPage = 1
}: UsePaginationOptions<T>): UsePaginationReturn<T> {
  const [currentPage, setCurrentPage] = useState(initialPage);
  const [isLoading, setIsLoading] = useState(false);

  const totalPages = Math.ceil(items.length / itemsPerPage);
  
  const startIndex = (currentPage - 1) * itemsPerPage;
  const endIndex = startIndex + itemsPerPage;
  const currentItems = items.slice(startIndex, endIndex);

  const hasNextPage = currentPage < totalPages;
  const hasPrevPage = currentPage > 1;

  const goToPage = useCallback((page: number) => {
    setIsLoading(true);
    const validPage = Math.max(1, Math.min(page, totalPages));
    setCurrentPage(validPage);
    // Simulate loading for smooth UX
    setTimeout(() => setIsLoading(false), 300);
  }, [totalPages]);

  const nextPage = useCallback(() => {
    if (hasNextPage) {
      goToPage(currentPage + 1);
    }
  }, [currentPage, hasNextPage, goToPage]);

  const prevPage = useCallback(() => {
    if (hasPrevPage) {
      goToPage(currentPage - 1);
    }
  }, [currentPage, hasPrevPage, goToPage]);

  // Reset to page 1 when items change
  useEffect(() => {
    setCurrentPage(1);
  }, [items.length]);

  return {
    currentItems,
    currentPage,
    totalPages,
    hasNextPage,
    hasPrevPage,
    goToPage,
    nextPage,
    prevPage,
    isLoading
  };
}

interface UseInfiniteScrollOptions<T> {
  items: T[];
  itemsPerPage: number;
}

interface UseInfiniteScrollReturn<T> {
  visibleItems: T[];
  hasMore: boolean;
  loadMore: () => void;
  isLoading: boolean;
  reset: () => void;
  loadMoreRef: React.RefObject<HTMLDivElement>;
}

export function useInfiniteScroll<T>({
  items,
  itemsPerPage
}: UseInfiniteScrollOptions<T>): UseInfiniteScrollReturn<T> {
  const [visibleCount, setVisibleCount] = useState(itemsPerPage);
  const [isLoading, setIsLoading] = useState(false);
  const loadMoreRef = useRef<HTMLDivElement>(null);

  const visibleItems = items.slice(0, visibleCount);
  const hasMore = visibleCount < items.length;

  const loadMore = useCallback(() => {
    if (isLoading || !hasMore) return;
    
    setIsLoading(true);
    // Simulate network delay for smooth UX
    setTimeout(() => {
      setVisibleCount(prev => Math.min(prev + itemsPerPage, items.length));
      setIsLoading(false);
    }, 400);
  }, [isLoading, hasMore, itemsPerPage, items.length]);

  const reset = useCallback(() => {
    setVisibleCount(itemsPerPage);
  }, [itemsPerPage]);

  // Intersection Observer for auto-loading
  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        if (entries[0].isIntersecting && hasMore && !isLoading) {
          loadMore();
        }
      },
      { threshold: 0.1, rootMargin: '100px' }
    );

    if (loadMoreRef.current) {
      observer.observe(loadMoreRef.current);
    }

    return () => observer.disconnect();
  }, [hasMore, isLoading, loadMore]);

  // Reset when items change
  useEffect(() => {
    reset();
  }, [items.length, reset]);

  return {
    visibleItems,
    hasMore,
    loadMore,
    isLoading,
    reset,
    loadMoreRef
  };
}

--- FILE END: src\hooks\usePagination.ts ---


--- FILE START: src\hooks\useRateLimiter.ts ---
import { useState, useCallback, useEffect } from 'react';

interface RateLimiterConfig {
  maxAttempts: number;
  windowMs: number;
  lockoutMs: number;
}

interface RateLimiterState {
  attempts: number;
  firstAttemptTime: number | null;
  lockedUntil: number | null;
}

const STORAGE_KEY = 'truthlens_rate_limit';

const getStoredState = (): RateLimiterState => {
  try {
    const stored = localStorage.getItem(STORAGE_KEY);
    if (stored) {
      return JSON.parse(stored);
    }
  } catch {
    // Ignore parse errors
  }
  return { attempts: 0, firstAttemptTime: null, lockedUntil: null };
};

const saveState = (state: RateLimiterState) => {
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
};

export const useRateLimiter = (config: RateLimiterConfig = {
  maxAttempts: 5,
  windowMs: 15 * 60 * 1000, // 15 minutes
  lockoutMs: 30 * 60 * 1000, // 30 minutes lockout
}) => {
  const [state, setState] = useState<RateLimiterState>(getStoredState);
  const [remainingTime, setRemainingTime] = useState<number>(0);

  // Check and update lockout status
  useEffect(() => {
    const checkLockout = () => {
      const now = Date.now();
      
      if (state.lockedUntil && now < state.lockedUntil) {
        setRemainingTime(Math.ceil((state.lockedUntil - now) / 1000));
      } else if (state.lockedUntil && now >= state.lockedUntil) {
        // Lockout expired, reset state
        const newState = { attempts: 0, firstAttemptTime: null, lockedUntil: null };
        setState(newState);
        saveState(newState);
        setRemainingTime(0);
      } else if (state.firstAttemptTime && now - state.firstAttemptTime > config.windowMs) {
        // Window expired, reset attempts
        const newState = { attempts: 0, firstAttemptTime: null, lockedUntil: null };
        setState(newState);
        saveState(newState);
      }
    };

    checkLockout();
    const interval = setInterval(checkLockout, 1000);
    return () => clearInterval(interval);
  }, [state, config.windowMs]);

  const isLocked = state.lockedUntil !== null && Date.now() < state.lockedUntil;
  const attemptsRemaining = config.maxAttempts - state.attempts;

  const recordAttempt = useCallback((success: boolean) => {
    if (success) {
      // Reset on successful login
      const newState = { attempts: 0, firstAttemptTime: null, lockedUntil: null };
      setState(newState);
      saveState(newState);
      return;
    }

    const now = Date.now();
    let newState = { ...state };

    // Check if we need to reset the window
    if (state.firstAttemptTime && now - state.firstAttemptTime > config.windowMs) {
      newState = { attempts: 0, firstAttemptTime: null, lockedUntil: null };
    }

    // Record the failed attempt
    newState.attempts += 1;
    if (!newState.firstAttemptTime) {
      newState.firstAttemptTime = now;
    }

    // Check if we've exceeded max attempts
    if (newState.attempts >= config.maxAttempts) {
      newState.lockedUntil = now + config.lockoutMs;
    }

    setState(newState);
    saveState(newState);
  }, [state, config.maxAttempts, config.windowMs, config.lockoutMs]);

  const reset = useCallback(() => {
    const newState = { attempts: 0, firstAttemptTime: null, lockedUntil: null };
    setState(newState);
    saveState(newState);
    setRemainingTime(0);
  }, []);

  const formatRemainingTime = () => {
    const minutes = Math.floor(remainingTime / 60);
    const seconds = remainingTime % 60;
    return `${minutes}:${seconds.toString().padStart(2, '0')}`;
  };

  return {
    isLocked,
    attemptsRemaining,
    remainingTime,
    formatRemainingTime,
    recordAttempt,
    reset,
  };
};

--- FILE END: src\hooks\useRateLimiter.ts ---


--- FILE START: src\hooks\useTouchSortable.ts ---
import { useState, useCallback } from 'react';
import {
  DragEndEvent,
  DragStartEvent,
  MouseSensor,
  TouchSensor,
  useSensor,
  useSensors,
  KeyboardSensor,
} from '@dnd-kit/core';
import { arrayMove, sortableKeyboardCoordinates } from '@dnd-kit/sortable';

interface UseTouchSortableOptions<T> {
  items: T[];
  getItemId: (item: T) => string;
  onReorder: (items: T[]) => void;
}

export function useTouchSortable<T>({
  items,
  getItemId,
  onReorder,
}: UseTouchSortableOptions<T>) {
  const [activeId, setActiveId] = useState<string | null>(null);

  // Configure sensors for touch, mouse, and keyboard
  const sensors = useSensors(
    useSensor(MouseSensor, {
      activationConstraint: {
        distance: 8,
      },
    }),
    useSensor(TouchSensor, {
      activationConstraint: {
        delay: 150,
        tolerance: 5,
      },
    }),
    useSensor(KeyboardSensor, {
      coordinateGetter: sortableKeyboardCoordinates,
    })
  );

  const handleDragStart = useCallback((event: DragStartEvent) => {
    setActiveId(event.active.id as string);
  }, []);

  const handleDragEnd = useCallback(
    (event: DragEndEvent) => {
      const { active, over } = event;
      setActiveId(null);

      if (over && active.id !== over.id) {
        const oldIndex = items.findIndex((item) => getItemId(item) === active.id);
        const newIndex = items.findIndex((item) => getItemId(item) === over.id);
        const newItems = arrayMove(items, oldIndex, newIndex);
        onReorder(newItems);
      }
    },
    [items, getItemId, onReorder]
  );

  const handleDragCancel = useCallback(() => {
    setActiveId(null);
  }, []);

  return {
    sensors,
    activeId,
    handleDragStart,
    handleDragEnd,
    handleDragCancel,
  };
}

--- FILE END: src\hooks\useTouchSortable.ts ---


--- FILE START: src\index.css ---
@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Source+Sans+3:wght@300;400;500;600;700&display=swap');

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 220 20% 10%;

    --card: 0 0% 100%;
    --card-foreground: 220 20% 10%;

    --popover: 0 0% 100%;
    --popover-foreground: 220 20% 10%;

    --primary: 145 63% 32%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 94%;
    --secondary-foreground: 220 20% 10%;

    --muted: 220 10% 94%;
    --muted-foreground: 220 10% 45%;

    --accent: 0 72% 51%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 10% 88%;
    --input: 220 10% 88%;
    --ring: 145 63% 32%;

    --radius: 0.5rem;

    /* Custom TruthLens colors - Palestine inspired */
    --truth-green: 145 63% 32%;
    --truth-red: 0 72% 45%;
    --truth-black: 0 0% 8%;
    --truth-white: 0 0% 100%;

    /* Semantic colors */
    --breaking-news: 0 72% 51%;
    --category-national: 220 70% 50%;
    --category-international: 280 70% 50%;
    --category-economy: 35 90% 50%;
    --category-environment: 145 70% 40%;
    --category-technology: 200 80% 50%;
    --category-culture: 320 70% 50%;
    --category-editorial: 0 0% 30%;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 220 20% 6%;
    --foreground: 0 0% 95%;

    --card: 220 20% 9%;
    --card-foreground: 0 0% 95%;

    --popover: 220 20% 9%;
    --popover-foreground: 0 0% 95%;

    --primary: 145 63% 42%;
    --primary-foreground: 0 0% 100%;

    --secondary: 220 15% 15%;
    --secondary-foreground: 0 0% 95%;

    --muted: 220 15% 18%;
    --muted-foreground: 220 10% 60%;

    --accent: 0 72% 55%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 72% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 220 15% 20%;
    --input: 220 15% 20%;
    --ring: 145 63% 42%;

    --truth-green: 145 63% 42%;
    --truth-red: 0 72% 55%;
    --truth-black: 0 0% 95%;
    --truth-white: 220 20% 9%;

    --sidebar-background: 220 20% 8%;
    --sidebar-foreground: 0 0% 90%;
    --sidebar-primary: 145 63% 42%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 220 15% 15%;
    --sidebar-accent-foreground: 0 0% 95%;
    --sidebar-border: 220 15% 18%;
    --sidebar-ring: 145 63% 42%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground antialiased;
    font-family: 'Source Sans 3', sans-serif;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: 'Playfair Display', serif;
  }
}

@layer utilities {
  .font-display {
    font-family: 'Playfair Display', serif;
  }

  .font-body {
    font-family: 'Source Sans 3', sans-serif;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}

--- FILE END: src\index.css ---


--- FILE START: src\lib\apiService.ts ---
// API service for persistent storage (replaces localStorage when deployed)

const isProduction = import.meta.env.PROD;
const API_BASE = '/api';

// Helper to make API calls
const apiCall = async (key: string, method: 'GET' | 'POST' = 'GET', data?: any) => {
    try {
        const options: RequestInit = {
            method,
            headers: { 'Content-Type': 'application/json' },
        };
        if (data) options.body = JSON.stringify(data);

        const response = await fetch(`${API_BASE}/${key}`, options);
        if (!response.ok) throw new Error('API error');
        return response.json();
    } catch (error) {
        console.error('API call failed:', error);
        return null;
    }
};

// Storage wrapper - uses API in production, localStorage in development
export const storage = {
    async get(key: string): Promise<any> {
        if (isProduction) {
            return apiCall(key);
        }
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : null;
    },

    async set(key: string, value: any): Promise<void> {
        if (isProduction) {
            await apiCall(key, 'POST', value);
        } else {
            localStorage.setItem(key, JSON.stringify(value));
        }
    },

    // Synchronous versions for components that need immediate values
    getSync(key: string): any {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : null;
    },

    setSync(key: string, value: any): void {
        localStorage.setItem(key, JSON.stringify(value));
    }
};

// Initialize: Load data from server on app start (production only)
export const initializeStorage = async () => {
    if (!isProduction) return;

    try {
        const data = await fetch(API_BASE).then(r => r.json());
        // Cache in localStorage for faster access
        Object.entries(data).forEach(([key, value]) => {
            if (value) localStorage.setItem(key, JSON.stringify(value));
        });
    } catch (error) {
        console.error('Failed to initialize storage:', error);
    }
};

// Sync local changes to server (call this after any save)
export const syncToServer = async (key: string, value: any) => {
    if (isProduction) {
        await apiCall(key, 'POST', value);
    }
};

--- FILE END: src\lib\apiService.ts ---


--- FILE START: src\lib\articleService.ts ---
import { Article } from '@/types/news';
import { articles as initialArticles } from '@/data/mockData';

const STORAGE_KEY = 'truthlens_articles';

export const getArticles = (): Article[] => {
    try {
        const stored = localStorage.getItem(STORAGE_KEY);
        if (stored) {
            // Merge stored articles with initial structure if needed, 
            // but for now, we assume stored state is the truth.
            // We need to convert date strings back to Date objects
            const parsed = JSON.parse(stored);
            return parsed.map((a: any) => ({
                ...a,
                publishedAt: new Date(a.publishedAt),
                createdAt: new Date(a.createdAt),
                updatedAt: new Date(a.updatedAt)
            }));
        }
    } catch (error) {
        console.error('Error loading articles from storage:', error);
    }

    // If no storage or error, return initial mock data
    return initialArticles;
};

export const saveArticles = (articles: Article[]) => {
    try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(articles));
        // Dispatch a custom event so other components can listen for updates
        window.dispatchEvent(new Event('articlesUpdated'));
        // Sync to backend in production
        if (import.meta.env.PROD) {
            fetch('/api/articles', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(articles)
            }).catch(console.error);
        }
    } catch (error) {
        console.error('Error saving articles to storage:', error);
    }
};

export const getArticleBySlug = (slug: string): Article | undefined => {
    const articles = getArticles();
    return articles.find(a => a.slug === slug);
};

export const getArticleById = (id: string): Article | undefined => {
    const articles = getArticles();
    return articles.find(a => a.id === id);
};

export const incrementArticleViews = (id: string) => {
    const articles = getArticles();
    const updated = articles.map(a => {
        if (a.id === id) {
            return { ...a, views: (a.views || 0) + 1 };
        }
        return a;
    });
    saveArticles(updated);
};

--- FILE END: src\lib\articleService.ts ---


--- FILE START: src\lib\commentService.ts ---
import { Comment } from '@/components/news/CommentSection';
import { getArticles } from './articleService';

const COMMENTS_KEY_PREFIX = 'comments_';
const ALL_COMMENTS_KEY = 'truthlens_all_comments_index';

// Get all comment keys from localStorage
export const getAllCommentKeys = (): string[] => {
    const keys: string[] = [];
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith(COMMENTS_KEY_PREFIX)) {
            keys.push(key);
        }
    }
    return keys;
};

// Get all comments across all articles
export const getAllComments = (): Comment[] => {
    const articles = getArticles();
    const articleMap = new Map(articles.map(a => [a.id, { title: a.title, slug: a.slug }]));

    const allComments: Comment[] = [];
    const keys = getAllCommentKeys();

    keys.forEach(key => {
        try {
            const data = localStorage.getItem(key);
            if (data) {
                const comments: Comment[] = JSON.parse(data);
                // Add article metadata
                const articleId = key.replace(COMMENTS_KEY_PREFIX, '');
                const articleInfo = articleMap.get(articleId);

                comments.forEach(comment => {
                    // Flatten replies
                    allComments.push({
                        ...comment,
                        createdAt: new Date(comment.createdAt),
                        articleTitle: articleInfo?.title || 'Unknown Article',
                        articleSlug: articleInfo?.slug || '',
                    } as any);

                    // Add replies as separate entries
                    if (comment.replies) {
                        comment.replies.forEach(reply => {
                            allComments.push({
                                ...reply,
                                createdAt: new Date(reply.createdAt),
                                articleTitle: articleInfo?.title || 'Unknown Article',
                                articleSlug: articleInfo?.slug || '',
                                isReply: true,
                                parentId: comment.id,
                            } as any);
                        });
                    }
                });
            }
        } catch (e) {
            console.error('Error parsing comments for key:', key, e);
        }
    });

    // Sort by createdAt descending
    allComments.sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());

    return allComments;
};

// Update comment status
export const updateCommentStatus = (articleId: string, commentId: string, status: Comment['status']) => {
    const key = COMMENTS_KEY_PREFIX + articleId;
    const data = localStorage.getItem(key);
    if (data) {
        const comments: Comment[] = JSON.parse(data);
        const updateStatus = (comment: Comment): Comment => {
            if (comment.id === commentId) {
                return { ...comment, status };
            }
            if (comment.replies) {
                return { ...comment, replies: comment.replies.map(updateStatus) };
            }
            return comment;
        };
        const updated = comments.map(updateStatus);
        localStorage.setItem(key, JSON.stringify(updated));
        window.dispatchEvent(new Event('commentsUpdated'));
    }
};

// Delete comment
export const deleteComment = (articleId: string, commentId: string) => {
    const key = COMMENTS_KEY_PREFIX + articleId;
    const data = localStorage.getItem(key);
    if (data) {
        const comments: Comment[] = JSON.parse(data);

        // Check if it's a top-level comment or a reply
        const filtered = comments.filter(c => c.id !== commentId).map(c => {
            if (c.replies) {
                return { ...c, replies: c.replies.filter(r => r.id !== commentId) };
            }
            return c;
        });

        localStorage.setItem(key, JSON.stringify(filtered));
        window.dispatchEvent(new Event('commentsUpdated'));
    }
};

// Save comments for an article (used by CommentSection)
export const saveComments = (articleId: string, comments: Comment[]) => {
    const key = COMMENTS_KEY_PREFIX + articleId;
    localStorage.setItem(key, JSON.stringify(comments));
    window.dispatchEvent(new Event('commentsUpdated'));
};

// Get comments for an article
export const getComments = (articleId: string): Comment[] => {
    const key = COMMENTS_KEY_PREFIX + articleId;
    const data = localStorage.getItem(key);
    if (!data) return [];
    try {
        return JSON.parse(data).map((c: any) => ({
            ...c,
            createdAt: new Date(c.createdAt),
            replies: c.replies?.map((r: any) => ({ ...r, createdAt: new Date(r.createdAt) }))
        }));
    } catch {
        return [];
    }
};

--- FILE END: src\lib\commentService.ts ---


--- FILE START: src\lib\contactService.ts ---
import { ContactInfo, AboutInfo, contactInfoData, aboutInfoData } from '@/data/siteContactData';

const CONTACTS_KEY = 'truthlens_contacts';
const ABOUT_KEY = 'truthlens_about';

// Contact Info
export const getContacts = (): ContactInfo[] => {
    const data = localStorage.getItem(CONTACTS_KEY);
    if (!data) return contactInfoData;
    try {
        return JSON.parse(data);
    } catch (error) {
        console.error('Error parsing contacts', error);
        return contactInfoData;
    }
};

export const saveContacts = (contacts: ContactInfo[]) => {
    localStorage.setItem(CONTACTS_KEY, JSON.stringify(contacts));
    window.dispatchEvent(new Event('contactsUpdated'));
};

// About Info
export const getAboutInfo = (): AboutInfo[] => {
    const data = localStorage.getItem(ABOUT_KEY);
    if (!data) return aboutInfoData;
    try {
        return JSON.parse(data);
    } catch (error) {
        console.error('Error parsing about info', error);
        return aboutInfoData;
    }
};

export const saveAboutInfo = (about: AboutInfo[]) => {
    localStorage.setItem(ABOUT_KEY, JSON.stringify(about));
    window.dispatchEvent(new Event('aboutInfoUpdated'));
};

--- FILE END: src\lib\contactService.ts ---


--- FILE START: src\lib\internshipService.ts ---

export interface InternshipApplication {
    id: string;
    fullName: string;
    email: string;
    phone: string;
    university: string;
    department: string;
    portfolio: string;
    coverLetter: string;
    cvFileName: string; // Storing just the name for mocking
    submittedAt: Date;
    status: 'pending' | 'reviewed' | 'accepted' | 'rejected';
}

const STORAGE_KEY = 'truthlens_internship_applications';

export const getApplications = (): InternshipApplication[] => {
    const data = localStorage.getItem(STORAGE_KEY);
    if (!data) return [];
    try {
        const parsed = JSON.parse(data);
        return parsed.map((app: any) => ({
            ...app,
            submittedAt: new Date(app.submittedAt)
        }));
    } catch (error) {
        console.error('Error parsing internship applications', error);
        return [];
    }
};

export const saveApplication = (application: Omit<InternshipApplication, 'id' | 'submittedAt' | 'status'>): InternshipApplication => {
    const applications = getApplications();
    const newApplication: InternshipApplication = {
        ...application,
        id: Date.now().toString(),
        submittedAt: new Date(),
        status: 'pending'
    };

    localStorage.setItem(STORAGE_KEY, JSON.stringify([newApplication, ...applications]));

    // Trigger an event so other tabs/components can update
    window.dispatchEvent(new Event('internshipApplicationsUpdated'));

    return newApplication;
};

export const updateApplicationStatus = (id: string, status: InternshipApplication['status']) => {
    const applications = getApplications();
    const updated = applications.map(app =>
        app.id === id ? { ...app, status } : app
    );
    localStorage.setItem(STORAGE_KEY, JSON.stringify(updated));
    window.dispatchEvent(new Event('internshipApplicationsUpdated'));
};

export const deleteApplication = (id: string) => {
    const applications = getApplications();
    const filtered = applications.filter(app => app.id !== id);
    localStorage.setItem(STORAGE_KEY, JSON.stringify(filtered));
    window.dispatchEvent(new Event('internshipApplicationsUpdated'));
};

--- FILE END: src\lib\internshipService.ts ---


--- FILE START: src\lib\jobService.ts ---
import { Job } from '@/types/news';
import { jobs as initialJobs } from '@/data/mockData';

const JOBS_KEY = 'truthlens_jobs';

export const getJobs = (): Job[] => {
    const data = localStorage.getItem(JOBS_KEY);
    if (!data) return initialJobs;
    try {
        const parsed = JSON.parse(data);
        // Convert date strings back to Date objects
        return parsed.map((job: any) => ({
            ...job,
            deadline: new Date(job.deadline),
            createdAt: new Date(job.createdAt)
        }));
    } catch (error) {
        console.error('Error parsing jobs', error);
        return initialJobs;
    }
};

export const saveJobs = (jobs: Job[]) => {
    localStorage.setItem(JOBS_KEY, JSON.stringify(jobs));
    window.dispatchEvent(new Event('jobsUpdated'));
};

export const addJob = (job: Job) => {
    const jobs = getJobs();
    const updatedJobs = [job, ...jobs];
    saveJobs(updatedJobs);
    return updatedJobs;
};

export const updateJob = (id: string, updates: Partial<Job>) => {
    const jobs = getJobs();
    const updatedJobs = jobs.map(job =>
        job.id === id ? { ...job, ...updates } : job
    );
    saveJobs(updatedJobs);
    return updatedJobs;
};

export const deleteJob = (id: string) => {
    const jobs = getJobs();
    const updatedJobs = jobs.filter(job => job.id !== id);
    saveJobs(updatedJobs);
    return updatedJobs;
};

--- FILE END: src\lib\jobService.ts ---


--- FILE START: src\lib\settingsService.ts ---
import { MenuItem } from '@/types/news';

// Featured Settings Types
export interface FeaturedSettings {
    breakingNewsIds: string[];
    heroFeaturedIds: string[];
    heroSideArticleIds: string[]; // Articles on the right side of hero
    maxBreakingNews: number;
    maxHeroArticles: number;
    breakingAutoSwipe?: boolean;
    autoSwipeInterval?: number;
    heroAutoSwipe?: boolean;
}

// Section Config Types (matching AdminSections.tsx)
export interface SectionConfig {
    id: string;
    name: string;
    icon?: any; // We can't persist React nodes directly in JSON, we'll handle this mapping in the component
    enabled: boolean;
    order: number;
    maxArticles: number;
    selectedArticleIds: string[];
    showOnHomepage: boolean;
    category?: string;
}

// Storage Keys
const FEATURED_SETTINGS_KEY = 'truthlens_featured_settings';
const SECTIONS_SETTINGS_KEY = 'truthlens_sections_settings';
const MENU_SETTINGS_KEY = 'truthlens_menu_settings';

// Default Data (Fallbacks)
export const defaultFeaturedSettings: FeaturedSettings = {
    breakingNewsIds: ['1', '2', '5'],
    heroFeaturedIds: ['1', '3', '4', '7'],
    heroSideArticleIds: ['2', '5', '6', '8'], // Default side articles
    maxBreakingNews: 5,
    maxHeroArticles: 5,
    breakingAutoSwipe: true,
    autoSwipeInterval: 5000,
    heroAutoSwipe: true
};

// --- Featured Settings ---
export const getFeaturedSettings = (): FeaturedSettings => {
    const data = localStorage.getItem(FEATURED_SETTINGS_KEY);
    if (!data) return defaultFeaturedSettings;
    try {
        const parsed = JSON.parse(data);
        // Merge with default to ensure all keys exist if schema changes
        return { ...defaultFeaturedSettings, ...parsed };
    } catch (error) {
        console.error('Error parsing featured settings', error);
        return defaultFeaturedSettings;
    }
};

export const saveFeaturedSettings = (settings: FeaturedSettings) => {
    localStorage.setItem(FEATURED_SETTINGS_KEY, JSON.stringify(settings));
    window.dispatchEvent(new Event('featuredSettingsUpdated'));
    // Sync to backend in production
    if (import.meta.env.PROD) {
        fetch('/api/featuredSettings', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(settings)
        }).catch(console.error);
    }
};

// --- Sections Settings ---
// We only persist the "data" parts of sections. The icons and static definitions stay in code, 
// but we need to merge the persisted state (enabled, order, selectedArticleIds) with the code definitions.
export const saveSectionsSettings = (sections: SectionConfig[]) => {
    // Strip out the 'icon' property before saving as it causes circular reference/JSON issues
    const dataToSave = sections.map(({ icon, ...rest }) => rest);
    localStorage.setItem(SECTIONS_SETTINGS_KEY, JSON.stringify(dataToSave));
    window.dispatchEvent(new Event('sectionsSettingsUpdated'));
};

export const getSectionsSettings = (defaultSections: SectionConfig[]): SectionConfig[] => {
    const data = localStorage.getItem(SECTIONS_SETTINGS_KEY);
    if (!data) return defaultSections;
    try {
        const savedSections = JSON.parse(data) as Partial<SectionConfig>[];

        // Merge saved data with default structure (to keep icons and new sections)
        // We try to match by ID.
        // If a section is in defaults but not in saved, we keep default.
        // If a section is in saved but not defaults (e.g. removed legacy), we might ignore it or keep it if dynamic.
        // Assuming sections are mostly static in definition but dynamic in state:

        // Create a map of saved sections for quick lookup
        const savedMap = new Map(savedSections.map(s => [s.id, s]));

        // Map over defaults and apply saved overrides
        let merged = defaultSections.map(def => {
            const saved = savedMap.get(def.id);
            if (saved) {
                return { ...def, ...saved, icon: def.icon }; // Restore icon from default
            }
            return def;
        });

        // If we want to persist order, we need to respect the saved order.
        // We can sort 'merged' based on the saved order.
        // Or if the saved list has the full order, we can follow that.

        // Let's assume the saved list is the master for order if all IDs are present.
        // A simpler approach: use the saved array as the base, but re-attach icons from defaults.
        // But if we added a NEW section in code (in defaults), it wouldn't be in saved.
        // So mapping over defaults is safer for schema updates, but we need to respect saved 'order'.

        if (savedSections.length > 0) {
            // Sort merged based on saved order if available, or keep default order
            // It's effectively sorting by the 'order' property which we just merged in.
            merged.sort((a, b) => a.order - b.order);
        }

        return merged;
    } catch (error) {
        console.error('Error parsing sections settings', error);
        return defaultSections;
    }
};

// --- Menu Settings ---
export const getMenuSettings = (defaultMenu: MenuItem[]): MenuItem[] => {
    const data = localStorage.getItem(MENU_SETTINGS_KEY);
    if (!data) return defaultMenu;
    try {
        return JSON.parse(data);
    } catch (error) {
        console.error('Error parsing menu settings', error);
        return defaultMenu;
    }
};

export const saveMenuSettings = (menuItems: MenuItem[]) => {
    localStorage.setItem(MENU_SETTINGS_KEY, JSON.stringify(menuItems));
    // Dispatch event so Header can update if it listens (optional)
    window.dispatchEvent(new Event('menuSettingsUpdated'));
};

// --- Site Settings ---
const SITE_SETTINGS_KEY = 'truthlens_site_settings';
const SOCIAL_LINKS_KEY = 'truthlens_social_links';

export interface SiteSettingsConfig {
    siteName: string;
    tagline: string;
    siteDescription: string;
    contactEmail: string;
    enableComments: boolean;
    moderateComments: boolean;
    enableNewsletter: boolean;
    articlesPerPage: string;
    defaultCategory: string;
    timezone: string;
    dateFormat: string;
    maintenanceMode: boolean;
}

export const defaultSiteSettings: SiteSettingsConfig = {
    siteName: 'TruthLens',
    tagline: 'Authentic Stories. Unbiased Voices.',
    siteDescription: 'Your trusted source for fact-based journalism.',
    contactEmail: 'contact@truthlens.com',
    enableComments: true,
    moderateComments: true,
    enableNewsletter: true,
    articlesPerPage: '10',
    defaultCategory: 'national',
    timezone: 'UTC',
    dateFormat: 'MMM d, yyyy',
    maintenanceMode: false
};

export const getSiteSettings = (): SiteSettingsConfig => {
    const data = localStorage.getItem(SITE_SETTINGS_KEY);
    if (!data) return defaultSiteSettings;
    try {
        return { ...defaultSiteSettings, ...JSON.parse(data) };
    } catch {
        return defaultSiteSettings;
    }
};

export const saveSiteSettings = (settings: SiteSettingsConfig) => {
    localStorage.setItem(SITE_SETTINGS_KEY, JSON.stringify(settings));
    window.dispatchEvent(new Event('siteSettingsUpdated'));
};

// Social Links
export interface SocialLink {
    id: string;
    platform: string;
    url: string;
    isVisible: boolean;
}

export const getSocialLinks = (defaultLinks: SocialLink[]): SocialLink[] => {
    const data = localStorage.getItem(SOCIAL_LINKS_KEY);
    if (!data) return defaultLinks;
    try {
        return JSON.parse(data);
    } catch {
        return defaultLinks;
    }
};

export const saveSocialLinks = (links: SocialLink[]) => {
    localStorage.setItem(SOCIAL_LINKS_KEY, JSON.stringify(links));
    window.dispatchEvent(new Event('socialLinksUpdated'));
};

// --- Categories ---
const CATEGORIES_KEY = 'truthlens_categories';

export interface CategoryConfig {
    id: string;
    name: string;
    description: string;
}

export const getCategories = (defaultCategories: CategoryConfig[]): CategoryConfig[] => {
    const data = localStorage.getItem(CATEGORIES_KEY);
    if (!data) return defaultCategories;
    try {
        return JSON.parse(data);
    } catch {
        return defaultCategories;
    }
};

export const saveCategories = (categories: CategoryConfig[]) => {
    localStorage.setItem(CATEGORIES_KEY, JSON.stringify(categories));
    window.dispatchEvent(new Event('categoriesUpdated'));
};

// --- Contact Info ---
const CONTACT_INFO_KEY = 'truthlens_contact_info';

export interface ContactInfoConfig {
    email: string;
    phone: string;
    address: string;
    officeHours: string;
}

export const defaultContactInfo: ContactInfoConfig = {
    email: 'contact@truthlens.com',
    phone: '+1 (555) 123-4567',
    address: '123 News Street, Media City, MC 12345',
    officeHours: 'Mon-Fri 9:00 AM - 6:00 PM'
};

export const getContactInfo = (): ContactInfoConfig => {
    const data = localStorage.getItem(CONTACT_INFO_KEY);
    if (!data) return defaultContactInfo;
    try {
        return { ...defaultContactInfo, ...JSON.parse(data) };
    } catch {
        return defaultContactInfo;
    }
};

export const saveContactInfo = (info: ContactInfoConfig) => {
    localStorage.setItem(CONTACT_INFO_KEY, JSON.stringify(info));
    window.dispatchEvent(new Event('contactInfoUpdated'));
};

// --- Internships ---
const INTERNSHIPS_KEY = 'truthlens_internships';

export interface InternshipConfig {
    id: string;
    title: string;
    department: string;
    duration: string;
    description: string;
    requirements: string[];
    isActive: boolean;
}

export const getInternships = (defaultData: InternshipConfig[]): InternshipConfig[] => {
    const data = localStorage.getItem(INTERNSHIPS_KEY);
    if (!data) return defaultData;
    try {
        return JSON.parse(data);
    } catch {
        return defaultData;
    }
};

export const saveInternships = (internships: InternshipConfig[]) => {
    localStorage.setItem(INTERNSHIPS_KEY, JSON.stringify(internships));
    window.dispatchEvent(new Event('internshipsUpdated'));
};

// --- Jobs ---
const JOBS_KEY = 'truthlens_jobs';

export interface JobConfig {
    id: string;
    title: string;
    department: string;
    location: string;
    type: string;
    description: string;
    requirements: string[];
    isActive: boolean;
    postedAt: string;
}

export const getJobs = (defaultData: JobConfig[]): JobConfig[] => {
    const data = localStorage.getItem(JOBS_KEY);
    if (!data) return defaultData;
    try {
        return JSON.parse(data);
    } catch {
        return defaultData;
    }
};

export const saveJobs = (jobs: JobConfig[]) => {
    localStorage.setItem(JOBS_KEY, JSON.stringify(jobs));
    window.dispatchEvent(new Event('jobsUpdated'));
};



--- FILE END: src\lib\settingsService.ts ---


--- FILE START: src\lib\teamService.ts ---
import { TeamMember } from '@/types/team';
import { initialTeamMembers } from '@/data/teamData';

const STORAGE_KEY = 'truthlens_team_members';

export const getTeamMembers = (): TeamMember[] => {
    const data = localStorage.getItem(STORAGE_KEY);
    if (!data) return initialTeamMembers;
    try {
        return JSON.parse(data);
    } catch (error) {
        console.error('Error parsing team members', error);
        return initialTeamMembers;
    }
};

export const saveTeamMembers = (members: TeamMember[]) => {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(members));
    window.dispatchEvent(new Event('teamMembersUpdated'));
};

export const addTeamMember = (member: Omit<TeamMember, 'id'>) => {
    const members = getTeamMembers();
    const newMember = { ...member, id: Date.now().toString() };
    saveTeamMembers([...members, newMember]);
    return newMember;
};

export const updateTeamMember = (member: TeamMember) => {
    const members = getTeamMembers();
    const updated = members.map(m => m.id === member.id ? member : m);
    saveTeamMembers(updated);
};

export const deleteTeamMember = (id: string) => {
    const members = getTeamMembers();
    const filtered = members.filter(m => m.id !== id);
    saveTeamMembers(filtered);
};

--- FILE END: src\lib\teamService.ts ---


--- FILE START: src\lib\userService.ts ---
import { AdminUser } from '@/types/admin';

// Default mock users
const DEFAULT_USERS: Record<string, { password: string; user: Omit<AdminUser, 'id'> & { address?: string; phone?: string; bio?: string } }> = {
    'admin@truthlens.com': {
        password: 'admin123',
        user: {
            name: 'Admin User',
            email: 'admin@truthlens.com',
            role: 'admin',
            avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100',
            isActive: true,
            createdAt: new Date('2024-01-01'),
            address: '123 Admin St, Tech City',
            phone: '+1 234 567 8900',
            bio: 'System Administrator'
        },
    },
    'editor@truthlens.com': {
        password: 'editor123',
        user: {
            name: 'Sarah Editor',
            email: 'editor@truthlens.com',
            role: 'editor',
            avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100',
            isActive: true,
            createdAt: new Date('2024-02-01'),
            address: '456 Editing Ln, Publisher City',
            phone: '+1 987 654 3210',
            bio: 'Senior Editor'
        },
    },
    'author@truthlens.com': {
        password: 'author123',
        user: {
            name: 'John Author',
            email: 'author@truthlens.com',
            role: 'author',
            avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100',
            isActive: true,
            createdAt: new Date('2024-03-01'),
            address: '789 Writer Blvd, Novel Town',
            phone: '+1 555 123 4567',
            bio: 'Lead Author'
        },
    },
    'journalist@truthlens.com': {
        password: 'journalist123',
        user: {
            name: 'Emily Journalist',
            email: 'journalist@truthlens.com',
            role: 'journalist',
            avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100',
            isActive: true,
            createdAt: new Date('2024-03-15'),
            address: '321 Press Ave, Media City',
            phone: '+1 444 555 6666',
            bio: 'Investigative Journalist'
        },
    },
};

const STORAGE_KEY = 'truthlens_users_v1';

export interface ExtendedAdminUser extends AdminUser {
    address?: string;
    phone?: string;
    bio?: string;
}

export const userService = {
    // Initialize users if not present
    init: () => {
        if (!localStorage.getItem(STORAGE_KEY)) {
            const usersList: Record<string, any> = {};
            Object.entries(DEFAULT_USERS).forEach(([email, data]) => {
                usersList[email] = {
                    ...data,
                    user: {
                        ...data.user,
                        id: email.toLowerCase().replace(/[^a-z0-9]/g, ''),
                    }
                };
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(usersList));
        }
    },

    getUsers: (): Record<string, any> => {
        const data = localStorage.getItem(STORAGE_KEY);
        return data ? JSON.parse(data) : {};
    },

    saveUsers: (users: Record<string, any>) => {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(users));
    },

    authenticate: (email: string, password: string) => {
        const users = userService.getUsers();
        const userEntry = users[email.toLowerCase()];

        if (userEntry && userEntry.password === password && userEntry.user.isActive) {
            return userEntry.user as ExtendedAdminUser;
        }
        return null;
    },

    updateProfile: (userId: string, updates: Partial<ExtendedAdminUser>) => {
        const users = userService.getUsers();
        const email = Object.keys(users).find(k => users[k].user.id === userId);

        if (email) {
            users[email].user = { ...users[email].user, ...updates };
            userService.saveUsers(users);
            return users[email].user as ExtendedAdminUser;
        }
        return null;
    }
};

// Initialize immediately
userService.init();

--- FILE END: src\lib\userService.ts ---


--- FILE START: src\lib\utils.ts ---
import { clsx, type ClassValue } from "clsx";
import { twMerge } from "tailwind-merge";

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs));
}

--- FILE END: src\lib\utils.ts ---


--- FILE START: src\lib\videoUtils.ts ---

export const getYoutubeId = (url: string): string | null => {
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
    const match = url.match(regExp);
    return (match && match[2].length === 11) ? match[2] : null;
};

export const getYoutubeThumbnail = (url: string): string | null => {
    const id = getYoutubeId(url);
    if (!id) return null;
    return `https://img.youtube.com/vi/${id}/maxresdefault.jpg`;
};

// Fallback image if nothing works
export const FALLBACK_IMAGE = 'https://images.unsplash.com/photo-1585829365295-ab7cd400c167?w=800&auto=format&fit=crop';

--- FILE END: src\lib\videoUtils.ts ---


--- FILE START: src\main.tsx ---
import { createRoot } from "react-dom/client";
import App from "./App.tsx";
import "./index.css";

createRoot(document.getElementById("root")!).render(<App />);

--- FILE END: src\main.tsx ---


--- FILE START: src\pages\AboutPage.tsx ---
import { Layout } from '@/components/layout/Layout';
import { Target, Eye, Users, Shield } from 'lucide-react';
import { authors } from '@/data/mockData';

const AboutPage = () => {
  return (
    <Layout>
      {/* Hero */}
      <div className="bg-primary py-16">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-3xl font-bold text-primary-foreground md:text-4xl lg:text-5xl">
            About TruthLens
          </h1>
          <p className="mx-auto mt-4 max-w-2xl text-lg text-primary-foreground/80">
            Authentic Stories. Unbiased Voices.
          </p>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        {/* Mission & Vision */}
        <div className="grid gap-8 md:grid-cols-2">
          <div className="rounded-xl bg-card p-8 border border-border">
            <div className="flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 mb-4">
              <Target className="h-6 w-6 text-primary" />
            </div>
            <h2 className="font-display text-2xl font-bold text-foreground">Our Mission</h2>
            <p className="mt-4 text-muted-foreground">
              To deliver authentic, fact-based journalism that empowers readers with accurate information. 
              We are committed to uncovering the truth and presenting it without bias or agenda.
            </p>
          </div>

          <div className="rounded-xl bg-card p-8 border border-border">
            <div className="flex h-12 w-12 items-center justify-center rounded-full bg-primary/10 mb-4">
              <Eye className="h-6 w-6 text-primary" />
            </div>
            <h2 className="font-display text-2xl font-bold text-foreground">Our Vision</h2>
            <p className="mt-4 text-muted-foreground">
              To become a globally trusted source of news where readers can rely on integrity, 
              transparency, and thorough investigative journalism that makes a difference.
            </p>
          </div>
        </div>

        {/* Values */}
        <div className="mt-12">
          <h2 className="font-display text-2xl font-bold text-foreground text-center mb-8">
            Our Core Values
          </h2>
          <div className="grid gap-6 md:grid-cols-3">
            <div className="text-center p-6">
              <div className="flex h-16 w-16 items-center justify-center rounded-full bg-primary mx-auto mb-4">
                <Shield className="h-8 w-8 text-primary-foreground" />
              </div>
              <h3 className="font-display text-lg font-semibold text-foreground">Integrity</h3>
              <p className="mt-2 text-sm text-muted-foreground">
                We uphold the highest standards of journalistic integrity in every story we publish.
              </p>
            </div>
            <div className="text-center p-6">
              <div className="flex h-16 w-16 items-center justify-center rounded-full bg-primary mx-auto mb-4">
                <Users className="h-8 w-8 text-primary-foreground" />
              </div>
              <h3 className="font-display text-lg font-semibold text-foreground">Inclusivity</h3>
              <p className="mt-2 text-sm text-muted-foreground">
                We give voice to the unheard and tell stories that matter to all communities.
              </p>
            </div>
            <div className="text-center p-6">
              <div className="flex h-16 w-16 items-center justify-center rounded-full bg-primary mx-auto mb-4">
                <Eye className="h-8 w-8 text-primary-foreground" />
              </div>
              <h3 className="font-display text-lg font-semibold text-foreground">Transparency</h3>
              <p className="mt-2 text-sm text-muted-foreground">
                We are open about our sources, methods, and editorial decisions.
              </p>
            </div>
          </div>
        </div>

        {/* Team */}
        <div className="mt-16">
          <h2 className="font-display text-2xl font-bold text-foreground text-center mb-8">
            Our Team
          </h2>
          <div className="grid gap-6 md:grid-cols-3">
            {authors.map((author) => (
              <div key={author.id} className="text-center rounded-xl bg-card p-6 border border-border">
                <img
                  src={author.avatar}
                  alt={author.name}
                  className="h-24 w-24 rounded-full object-cover mx-auto mb-4"
                />
                <h3 className="font-display text-lg font-semibold text-foreground">{author.name}</h3>
                <p className="text-sm text-primary capitalize">{author.role}</p>
                <p className="mt-2 text-sm text-muted-foreground">{author.bio}</p>
              </div>
            ))}
          </div>
        </div>
      </div>
    </Layout>
  );
};

export default AboutPage;

--- FILE END: src\pages\AboutPage.tsx ---


--- FILE START: src\pages\admin\AdminActivityLog.tsx ---
import { useState } from 'react';
import { 
  Activity, 
  Search, 
  Filter, 
  Trash2, 
  User, 
  Clock, 
  FileText,
  Download,
  RefreshCw
} from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogTrigger,
} from '@/components/ui/alert-dialog';
import { 
  useActivityLog, 
  formatAction, 
  formatResource, 
  getActionColor,
  ActivityAction,
  ActivityResource 
} from '@/context/ActivityLogContext';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { formatDistanceToNow, format } from 'date-fns';
import { toast } from 'sonner';
import { Lock } from 'lucide-react';

const AdminActivityLog = () => {
  const { hasPermission } = useAdminAuth();
  const { logs, clearLogs, getRecentLogs } = useActivityLog();
  const [searchQuery, setSearchQuery] = useState('');
  const [actionFilter, setActionFilter] = useState<string>('all');
  const [resourceFilter, setResourceFilter] = useState<string>('all');
  const [userFilter, setUserFilter] = useState<string>('all');

  // Only admins can view full activity logs
  const canViewLogs = hasPermission('manageSettings');

  if (!canViewLogs) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to view activity logs. Only administrators can access this section.
        </p>
      </div>
    );
  }

  // Get unique users from logs
  const uniqueUsers = [...new Set(logs.map(log => log.userName))];

  // Filter logs
  const filteredLogs = logs.filter(log => {
    const matchesSearch = 
      log.userName.toLowerCase().includes(searchQuery.toLowerCase()) ||
      log.resourceName?.toLowerCase().includes(searchQuery.toLowerCase()) ||
      log.details?.toLowerCase().includes(searchQuery.toLowerCase()) ||
      formatAction(log.action).toLowerCase().includes(searchQuery.toLowerCase()) ||
      formatResource(log.resource).toLowerCase().includes(searchQuery.toLowerCase());
    
    const matchesAction = actionFilter === 'all' || log.action === actionFilter;
    const matchesResource = resourceFilter === 'all' || log.resource === resourceFilter;
    const matchesUser = userFilter === 'all' || log.userName === userFilter;
    
    return matchesSearch && matchesAction && matchesResource && matchesUser;
  });

  // Stats
  const stats = {
    total: logs.length,
    today: logs.filter(log => {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      return new Date(log.timestamp) >= today;
    }).length,
    creates: logs.filter(log => log.action === 'create').length,
    updates: logs.filter(log => log.action === 'update').length,
    deletes: logs.filter(log => log.action === 'delete').length,
  };

  const handleClearLogs = () => {
    clearLogs();
    toast.success('Activity logs cleared');
  };

  const handleExportLogs = () => {
    const csv = [
      ['Timestamp', 'User', 'Role', 'Action', 'Resource', 'Resource Name', 'Details'].join(','),
      ...filteredLogs.map(log => [
        format(log.timestamp, 'yyyy-MM-dd HH:mm:ss'),
        log.userName,
        log.userRole,
        formatAction(log.action),
        formatResource(log.resource),
        log.resourceName || '',
        log.details || ''
      ].map(field => `"${field}"`).join(','))
    ].join('\n');

    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `activity-log-${format(new Date(), 'yyyy-MM-dd')}.csv`;
    a.click();
    URL.revokeObjectURL(url);
    toast.success('Activity log exported');
  };

  return (
    <div className="space-y-6">
      <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground flex items-center gap-2">
            <Activity className="h-6 w-6 text-primary" />
            Activity Log
          </h1>
          <p className="text-sm text-muted-foreground mt-1">Track all admin actions and changes</p>
        </div>
        <div className="flex gap-2">
          <Button variant="outline" size="sm" onClick={handleExportLogs}>
            <Download className="h-4 w-4 mr-2" />
            Export CSV
          </Button>
          <AlertDialog>
            <AlertDialogTrigger asChild>
              <Button variant="destructive" size="sm">
                <Trash2 className="h-4 w-4 mr-2" />
                Clear All
              </Button>
            </AlertDialogTrigger>
            <AlertDialogContent>
              <AlertDialogHeader>
                <AlertDialogTitle>Clear all activity logs?</AlertDialogTitle>
                <AlertDialogDescription>
                  This will permanently delete all {logs.length} activity log entries. This action cannot be undone.
                </AlertDialogDescription>
              </AlertDialogHeader>
              <AlertDialogFooter>
                <AlertDialogCancel>Cancel</AlertDialogCancel>
                <AlertDialogAction onClick={handleClearLogs} className="bg-destructive text-destructive-foreground">
                  Clear All
                </AlertDialogAction>
              </AlertDialogFooter>
            </AlertDialogContent>
          </AlertDialog>
        </div>
      </div>

      {/* Stats Cards */}
      <div className="grid grid-cols-2 sm:grid-cols-5 gap-3">
        <Card>
          <CardContent className="pt-4">
            <div className="text-2xl font-bold text-foreground">{stats.total}</div>
            <div className="text-xs text-muted-foreground">Total Logs</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="pt-4">
            <div className="text-2xl font-bold text-primary">{stats.today}</div>
            <div className="text-xs text-muted-foreground">Today</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="pt-4">
            <div className="text-2xl font-bold text-green-600">{stats.creates}</div>
            <div className="text-xs text-muted-foreground">Creates</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="pt-4">
            <div className="text-2xl font-bold text-blue-600">{stats.updates}</div>
            <div className="text-xs text-muted-foreground">Updates</div>
          </CardContent>
        </Card>
        <Card>
          <CardContent className="pt-4">
            <div className="text-2xl font-bold text-red-600">{stats.deletes}</div>
            <div className="text-xs text-muted-foreground">Deletes</div>
          </CardContent>
        </Card>
      </div>

      {/* Filters */}
      <div className="flex flex-col sm:flex-row gap-3">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search logs..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-9"
          />
        </div>
        <Select value={actionFilter} onValueChange={setActionFilter}>
          <SelectTrigger className="w-full sm:w-36">
            <SelectValue placeholder="Action" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Actions</SelectItem>
            <SelectItem value="create">Create</SelectItem>
            <SelectItem value="update">Update</SelectItem>
            <SelectItem value="delete">Delete</SelectItem>
            <SelectItem value="publish">Publish</SelectItem>
            <SelectItem value="approve">Approve</SelectItem>
            <SelectItem value="reject">Reject</SelectItem>
            <SelectItem value="login">Login</SelectItem>
          </SelectContent>
        </Select>
        <Select value={resourceFilter} onValueChange={setResourceFilter}>
          <SelectTrigger className="w-full sm:w-36">
            <SelectValue placeholder="Resource" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Resources</SelectItem>
            <SelectItem value="article">Articles</SelectItem>
            <SelectItem value="comment">Comments</SelectItem>
            <SelectItem value="media">Media</SelectItem>
            <SelectItem value="user">Users</SelectItem>
            <SelectItem value="category">Categories</SelectItem>
            <SelectItem value="setting">Settings</SelectItem>
          </SelectContent>
        </Select>
        <Select value={userFilter} onValueChange={setUserFilter}>
          <SelectTrigger className="w-full sm:w-40">
            <SelectValue placeholder="User" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Users</SelectItem>
            {uniqueUsers.map(user => (
              <SelectItem key={user} value={user}>{user}</SelectItem>
            ))}
          </SelectContent>
        </Select>
      </div>

      {/* Activity Log List */}
      <Card>
        <CardHeader className="pb-3">
          <CardTitle className="text-base">Recent Activity</CardTitle>
          <CardDescription>
            Showing {filteredLogs.length} of {logs.length} log entries
          </CardDescription>
        </CardHeader>
        <CardContent>
          {filteredLogs.length === 0 ? (
            <div className="text-center py-12 text-muted-foreground">
              <Activity className="h-12 w-12 mx-auto mb-4 opacity-50" />
              <p>No activity logs found</p>
              {logs.length === 0 && (
                <p className="text-sm mt-1">Activity will appear here as admins make changes</p>
              )}
            </div>
          ) : (
            <div className="space-y-3 max-h-[600px] overflow-y-auto pr-2">
              {filteredLogs.map((log) => (
                <div
                  key={log.id}
                  className="flex flex-col sm:flex-row sm:items-center gap-3 p-4 rounded-lg bg-muted/50 border border-border hover:bg-muted transition-colors"
                >
                  <div className="flex items-center gap-3 flex-1 min-w-0">
                    <div className="h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0">
                      <User className="h-5 w-5 text-primary" />
                    </div>
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 flex-wrap">
                        <span className="font-medium text-foreground">{log.userName}</span>
                        <Badge variant="outline" className="text-[10px]">{log.userRole}</Badge>
                        <Badge className={`${getActionColor(log.action)} text-[10px]`}>
                          {formatAction(log.action)}
                        </Badge>
                        <Badge variant="secondary" className="text-[10px]">
                          {formatResource(log.resource)}
                        </Badge>
                      </div>
                      <div className="text-sm text-muted-foreground mt-1 truncate">
                        {log.resourceName && (
                          <span className="font-medium text-foreground">{log.resourceName}</span>
                        )}
                        {log.details && (
                          <span className="ml-1">{log.details}</span>
                        )}
                        {!log.resourceName && !log.details && (
                          <span>{formatAction(log.action)} {formatResource(log.resource).toLowerCase()}</span>
                        )}
                      </div>
                    </div>
                  </div>
                  <div className="flex items-center gap-2 text-xs text-muted-foreground self-end sm:self-center">
                    <Clock className="h-3 w-3" />
                    <span title={format(log.timestamp, 'PPpp')}>
                      {formatDistanceToNow(log.timestamp, { addSuffix: true })}
                    </span>
                  </div>
                </div>
              ))}
            </div>
          )}
        </CardContent>
      </Card>
    </div>
  );
};

export default AdminActivityLog;

--- FILE END: src\pages\admin\AdminActivityLog.tsx ---


--- FILE START: src\pages\admin\AdminArticles.tsx ---
import { useState, useEffect } from 'react';
import { categories, authors } from '@/data/mockData'; // Keep categories/authors static for now
import { getArticles, saveArticles } from '@/lib/articleService';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Plus, Edit, Trash2, Eye, Search, Image, Video, Save, CheckCircle, XCircle, Clock, Send, AlertCircle, Upload } from 'lucide-react';
import { Article, Category } from '@/types/news';
import { format } from 'date-fns';
import { toast } from 'sonner';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Switch } from '@/components/ui/switch';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog } from '@/context/ActivityLogContext';

type ArticleStatus = 'draft' | 'pending_review' | 'published' | 'rejected' | 'scheduled';

interface ExtendedArticle extends Omit<Article, 'status'> {
  status: ArticleStatus;
  submittedBy?: string;
  reviewedBy?: string;
  reviewNote?: string;
}

const AdminArticles = () => {
  const { currentUser, hasPermission } = useAdminAuth();
  const { logActivity } = useActivityLog();

  // Load articles from service
  const [articlesList, setArticlesList] = useState<ExtendedArticle[]>([]);

  useEffect(() => {
    const loadedArticles = getArticles();
    setArticlesList(loadedArticles.map(a => ({
      ...a,
      status: (a.status as ArticleStatus) || 'published', // ensure status exists
      submittedBy: a.author.id // fallback
    })));
  }, []);

  // Save changes whenever list updates
  const updateArticlesList = (newList: ExtendedArticle[]) => {
    setArticlesList(newList);
    // Convert ExtendedArticle back to Article for storage
    // We treat 'status' as string in the base type, so it fits
    saveArticles(newList as unknown as Article[]);
  };

  const [searchQuery, setSearchQuery] = useState('');
  const [filterCategory, setFilterCategory] = useState<string>('all');
  const [filterStatus, setFilterStatus] = useState<string>('all');
  const [activeTab, setActiveTab] = useState('all');
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [isReviewDialogOpen, setIsReviewDialogOpen] = useState(false);
  const [reviewingArticle, setReviewingArticle] = useState<ExtendedArticle | null>(null);
  const [reviewNote, setReviewNote] = useState('');
  const [editingArticle, setEditingArticle] = useState<ExtendedArticle | null>(null);
  const [formData, setFormData] = useState({
    title: '',
    excerpt: '',
    content: '',
    category: 'national' as Category,
    featuredImage: '',
    videoUrl: '',
    tags: '',
    isBreaking: false,
    isFeatured: false,
    status: 'draft' as ArticleStatus,
    authorId: '1'
  });

  // Permission checks
  const canPublishDirectly = hasPermission('publishArticles');
  const canReview = hasPermission('reviewArticles');
  const canSetBreaking = hasPermission('setBreakingNews');
  const canSetFeatured = hasPermission('setFeatured');
  const canEditAll = hasPermission('editAllArticles');
  const canDeleteAll = hasPermission('deleteAllArticles');

  // Filter articles based on user role
  const getVisibleArticles = () => {
    if (canEditAll) {
      return articlesList;
    }
    // Authors/Journalists can only see their own articles
    return articlesList.filter(a => a.submittedBy === currentUser?.id || a.author.id === currentUser?.id);
  };

  const visibleArticles = getVisibleArticles();

  const filteredArticles = visibleArticles.filter(article => {
    const matchesSearch = article.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      article.author.name.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesCategory = filterCategory === 'all' || article.category === filterCategory;
    const matchesStatus = filterStatus === 'all' || article.status === filterStatus;

    // Tab filtering
    if (activeTab === 'pending' && article.status !== 'pending_review') return false;
    if (activeTab === 'published' && article.status !== 'published') return false;
    if (activeTab === 'draft' && article.status !== 'draft') return false;

    return matchesSearch && matchesCategory && matchesStatus;
  });

  const pendingCount = visibleArticles.filter(a => a.status === 'pending_review').length;

  const openCreateDialog = () => {
    setEditingArticle(null);
    setFormData({
      title: '',
      excerpt: '',
      content: '',
      category: 'national',
      featuredImage: '',
      videoUrl: '',
      tags: '',
      isBreaking: false,
      isFeatured: false,
      status: 'draft',
      authorId: currentUser?.id || '1'
    });
    setIsDialogOpen(true);
  };

  const openEditDialog = (article: ExtendedArticle) => {
    // Permission Check:
    // 1. Admins/Editors (canEditAll) can edit ANY article (published or not, any author).
    // 2. Authors/Journalists can only edit their OWN articles.
    const isOwner = article.submittedBy === currentUser?.id || article.author.id === currentUser?.id;

    if (!canEditAll && !isOwner) {
      toast.error('You can only edit your own articles');
      return;
    }

    // Admins can edit published articles freely.
    // Authors might be restricted from editing published articles in the future, but for now we follow the "edit own" rule.

    setEditingArticle(article);
    setFormData({
      title: article.title,
      excerpt: article.excerpt,
      content: article.content,
      category: article.category,
      featuredImage: article.featuredImage,
      videoUrl: article.videoUrl || '',
      tags: article.tags.join(', '),
      isBreaking: article.isBreaking,
      isFeatured: article.isFeatured,
      status: article.status,
      authorId: article.author.id
    });
    setIsDialogOpen(true);
  };

  const openReviewDialog = (article: ExtendedArticle) => {
    setReviewingArticle(article);
    setReviewNote('');
    setIsReviewDialogOpen(true);
  };

  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>, field: 'featuredImage' | 'videoUrl') => {
    const file = e.target.files?.[0];
    if (!file) return;

    // 5MB limit mainly for localStorage safety
    if (file.size > 5 * 1024 * 1024) {
      toast.error('File size must be less than 5MB');
      return;
    }

    const reader = new FileReader();
    reader.onloadend = () => {
      setFormData(prev => ({ ...prev, [field]: reader.result as string }));
      toast.success('File uploaded successfully');
    };
    reader.readAsDataURL(file);
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const author = authors.find(a => a.id === formData.authorId) || authors[0];
    const tagsArray = formData.tags.split(',').map(t => t.trim()).filter(Boolean);

    let updatedList = [...articlesList];

    if (editingArticle) {
      // Update existing article
      updatedList = updatedList.map(a =>
        a.id === editingArticle.id
          ? {
            ...a,
            title: formData.title,
            slug: formData.title.toLowerCase().replace(/[^a-z0-9]+/g, '-'),
            excerpt: formData.excerpt,
            content: formData.content,
            category: formData.category,
            author,
            featuredImage: formData.featuredImage,
            videoUrl: formData.videoUrl || undefined,
            hasVideo: !!formData.videoUrl,
            tags: tagsArray,
            isBreaking: canSetBreaking ? formData.isBreaking : a.isBreaking,
            isFeatured: canSetFeatured ? formData.isFeatured : a.isFeatured,
            status: formData.status,
            updatedAt: new Date()
          }
          : a
      );

      logActivity('update', 'article', {
        resourceId: editingArticle.id,
        resourceName: formData.title,
        details: 'Updated article content'
      });
      toast.success('Article updated successfully!');
    } else {
      // Create new article
      const newArticle: ExtendedArticle = {
        id: Date.now().toString(),
        title: formData.title,
        slug: formData.title.toLowerCase().replace(/[^a-z0-9]+/g, '-'),
        excerpt: formData.excerpt,
        content: formData.content,
        category: formData.category,
        author,
        featuredImage: formData.featuredImage || 'https://images.unsplash.com/photo-1585829365295-ab7cd400c167?w=1200',
        videoUrl: formData.videoUrl || undefined,
        hasVideo: !!formData.videoUrl,
        tags: tagsArray,
        isBreaking: canSetBreaking ? formData.isBreaking : false,
        isFeatured: canSetFeatured ? formData.isFeatured : false,
        status: formData.status,
        publishedAt: formData.status === 'published' ? new Date() : new Date(),
        createdAt: new Date(),
        updatedAt: new Date(),
        views: 0,
        submittedBy: currentUser?.id
      };

      updatedList = [newArticle, ...updatedList];

      logActivity('create', 'article', {
        resourceId: newArticle.id,
        resourceName: formData.title,
        details: `Created new article in ${formData.category} category`
      });
      toast.success('Article created successfully!');
    }

    updateArticlesList(updatedList);
    setIsDialogOpen(false);
  };

  const handleSubmitForReview = (article: ExtendedArticle) => {
    const updatedList = articlesList.map(a =>
      a.id === article.id
        ? { ...a, status: 'pending_review' as ArticleStatus, updatedAt: new Date() }
        : a
    );
    updateArticlesList(updatedList);

    logActivity('submit_review', 'article', {
      resourceId: article.id,
      resourceName: article.title,
      details: 'Submitted article for editorial review'
    });
    toast.success('Article submitted for review!');
  };

  const handleApprove = () => {
    if (!reviewingArticle) return;

    const updatedList = articlesList.map(a =>
      a.id === reviewingArticle.id
        ? {
          ...a,
          status: 'published' as ArticleStatus,
          publishedAt: new Date(),
          reviewedBy: currentUser?.id,
          reviewNote: reviewNote || undefined,
          updatedAt: new Date()
        }
        : a
    );
    updateArticlesList(updatedList);

    logActivity('approve', 'article', {
      resourceId: reviewingArticle.id,
      resourceName: reviewingArticle.title,
      details: reviewNote ? `Approved with note: ${reviewNote}` : 'Approved and published'
    });
    setIsReviewDialogOpen(false);
    toast.success('Article approved and published!');
  };

  const handleReject = () => {
    if (!reviewingArticle || !reviewNote.trim()) {
      toast.error('Please provide a reason for rejection');
      return;
    }

    const updatedList = articlesList.map(a =>
      a.id === reviewingArticle.id
        ? {
          ...a,
          status: 'rejected' as ArticleStatus,
          reviewedBy: currentUser?.id,
          reviewNote: reviewNote,
          updatedAt: new Date()
        }
        : a
    );
    updateArticlesList(updatedList);

    logActivity('reject', 'article', {
      resourceId: reviewingArticle.id,
      resourceName: reviewingArticle.title,
      details: `Rejected: ${reviewNote}`
    });
    setIsReviewDialogOpen(false);
    toast.success('Article rejected');
  };

  const handleDelete = (id: string) => {
    const article = articlesList.find(a => a.id === id);
    if (!article) return;

    // Check permissions
    if (!canDeleteAll && article.submittedBy !== currentUser?.id && article.author.id !== currentUser?.id) {
      toast.error('You can only delete your own articles');
      return;
    }

    if (window.confirm('Are you sure you want to delete this article?')) {
      const updatedList = articlesList.filter(a => a.id !== id);
      updateArticlesList(updatedList);

      logActivity('delete', 'article', {
        resourceId: id,
        resourceName: article.title,
        details: 'Permanently deleted article'
      });
      toast.success('Article deleted successfully!');
    }
  };

  const getStatusBadge = (status: ArticleStatus) => {
    switch (status) {
      case 'published':
        return <Badge className="bg-green-500/20 text-green-600 border-green-500/30">Published</Badge>;
      case 'pending_review':
        return <Badge className="bg-orange-500/20 text-orange-600 border-orange-500/30">Pending Review</Badge>;
      case 'rejected':
        return <Badge className="bg-red-500/20 text-red-600 border-red-500/30">Rejected</Badge>;
      case 'scheduled':
        return <Badge className="bg-blue-500/20 text-blue-600 border-blue-500/30">Scheduled</Badge>;
      default:
        return <Badge className="bg-yellow-500/20 text-yellow-600 border-yellow-500/30">Draft</Badge>;
    }
  };

  // Determine available statuses based on permissions
  const getAvailableStatuses = () => {
    if (canPublishDirectly) {
      return [
        { value: 'draft', label: 'Draft' },
        { value: 'pending_review', label: 'Submit for Review' },
        { value: 'published', label: 'Publish Now' },
        { value: 'scheduled', label: 'Schedule' },
      ];
    }
    return [
      { value: 'draft', label: 'Draft' },
      { value: 'pending_review', label: 'Submit for Review' },
    ];
  };

  return (
    <div>
      <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground">Articles</h1>
          {!canEditAll && (
            <p className="text-sm text-muted-foreground">Showing your articles only</p>
          )}
        </div>
        <Button onClick={openCreateDialog}>
          <Plus className="mr-2 h-4 w-4" />
          New Article
        </Button>
      </div>

      {/* Role-specific alerts */}
      {!canPublishDirectly && (
        <Alert className="mb-6 border-blue-500/50 bg-blue-500/10">
          <AlertCircle className="h-4 w-4 text-blue-500" />
          <AlertDescription>
            Your articles will be submitted for review before publishing. An editor or admin will review and approve them.
          </AlertDescription>
        </Alert>
      )}

      {/* Tabs for different views */}
      <Tabs value={activeTab} onValueChange={setActiveTab} className="mb-6">
        <TabsList>
          <TabsTrigger value="all">All</TabsTrigger>
          {canReview && (
            <TabsTrigger value="pending" className="relative">
              Pending Review
              {pendingCount > 0 && (
                <span className="absolute -top-1 -right-1 h-5 w-5 bg-orange-500 text-white text-xs rounded-full flex items-center justify-center">
                  {pendingCount}
                </span>
              )}
            </TabsTrigger>
          )}
          <TabsTrigger value="published">Published</TabsTrigger>
          <TabsTrigger value="draft">Drafts</TabsTrigger>
        </TabsList>
      </Tabs>

      {/* Filters */}
      <div className="mb-6 flex flex-col sm:flex-row gap-4">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search articles..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-9"
          />
        </div>
        <Select value={filterCategory} onValueChange={setFilterCategory}>
          <SelectTrigger className="w-full sm:w-40">
            <SelectValue placeholder="Category" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Categories</SelectItem>
            {categories.map(cat => (
              <SelectItem key={cat.id} value={cat.id}>{cat.name}</SelectItem>
            ))}
          </SelectContent>
        </Select>
        <Select value={filterStatus} onValueChange={setFilterStatus}>
          <SelectTrigger className="w-full sm:w-40">
            <SelectValue placeholder="Status" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="published">Published</SelectItem>
            <SelectItem value="pending_review">Pending Review</SelectItem>
            <SelectItem value="draft">Draft</SelectItem>
            <SelectItem value="rejected">Rejected</SelectItem>
            <SelectItem value="scheduled">Scheduled</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Articles Table */}
      {/* Desktop Table View */}
      <div className="hidden md:block rounded-xl bg-card border border-border overflow-hidden">
        <div className="overflow-x-auto">
          <table className="w-full">
            <thead className="bg-muted">
              <tr>
                <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Article</th>
                <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase hidden md:table-cell">Category</th>
                <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase hidden lg:table-cell">Author</th>
                <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Status</th>
                <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase hidden sm:table-cell">Views</th>
                <th className="px-4 py-3 text-right text-xs font-medium text-muted-foreground uppercase">Actions</th>
              </tr>
            </thead>
            <tbody className="divide-y divide-border">
              {filteredArticles.map((article) => (
                <tr key={article.id} className="hover:bg-muted/50">
                  <td className="px-4 py-3">
                    <div className="flex items-center gap-3">
                      <img
                        src={article.featuredImage}
                        alt=""
                        className="h-10 w-14 rounded object-cover hidden sm:block"
                      />
                      <div>
                        <span className="text-sm font-medium text-foreground line-clamp-1">{article.title}</span>
                        <span className="text-xs text-muted-foreground block">
                          {format(article.publishedAt, 'MMM d, yyyy')}
                        </span>
                      </div>
                    </div>
                  </td>
                  <td className="px-4 py-3 hidden md:table-cell">
                    <Badge variant="outline" className="capitalize">{article.category.replace('-', ' ')}</Badge>
                  </td>
                  <td className="px-4 py-3 hidden lg:table-cell text-sm text-muted-foreground">
                    {article.author.name}
                  </td>
                  <td className="px-4 py-3">
                    <div className="flex flex-wrap gap-1">
                      {getStatusBadge(article.status)}
                      {article.isBreaking && (
                        <Badge className="bg-red-500/20 text-red-600 border-red-500/30">Breaking</Badge>
                      )}
                    </div>
                    {article.status === 'rejected' && article.reviewNote && (
                      <p className="text-xs text-red-500 mt-1 line-clamp-1" title={article.reviewNote}>
                        {article.reviewNote}
                      </p>
                    )}
                  </td>
                  <td className="px-4 py-3 text-sm text-muted-foreground hidden sm:table-cell">
                    {article.views.toLocaleString()}
                  </td>
                  <td className="px-4 py-3 text-right">
                    <div className="flex justify-end gap-1">
                      <Button variant="ghost" size="icon" asChild>
                        <a href={`/article/${article.slug}`} target="_blank">
                          <Eye className="h-4 w-4" />
                        </a>
                      </Button>

                      {/* Review button for pending articles */}
                      {canReview && article.status === 'pending_review' && (
                        <Button
                          variant="ghost"
                          size="icon"
                          className="text-orange-500"
                          onClick={() => openReviewDialog(article)}
                        >
                          <Clock className="h-4 w-4" />
                        </Button>
                      )}

                      {/* Submit for review button for drafts */}
                      {!canPublishDirectly && article.status === 'draft' && (
                        <Button
                          variant="ghost"
                          size="icon"
                          className="text-blue-500"
                          onClick={() => handleSubmitForReview(article)}
                          title="Submit for Review"
                        >
                          <Send className="h-4 w-4" />
                        </Button>
                      )}

                      <Button variant="ghost" size="icon" onClick={() => openEditDialog(article)}>
                        <Edit className="h-4 w-4" />
                      </Button>
                      <Button variant="ghost" size="icon" className="text-destructive" onClick={() => handleDelete(article.id)}>
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        {filteredArticles.length === 0 && (
          <div className="py-12 text-center">
            <p className="text-muted-foreground">No articles found</p>
          </div>
        )}
      </div>

      {/* Mobile Card View */}
      <div className="md:hidden space-y-4">
        {filteredArticles.map((article) => (
          <div key={article.id} className="bg-card rounded-xl border border-border p-4 space-y-3 shadow-sm">
            <div className="flex gap-3">
              <img
                src={article.featuredImage}
                alt=""
                className="h-16 w-24 rounded-lg object-cover flex-shrink-0 bg-muted"
              />
              <div className="min-w-0 flex-1">
                <div className="flex items-start justify-between gap-2">
                  <h4 className="font-medium text-foreground text-sm line-clamp-2 leading-tight">{article.title}</h4>
                </div>
                <div className="flex items-center gap-2 mt-2 text-xs text-muted-foreground">
                  <span className="truncate">By {article.author.name}</span>
                  <span>â€¢</span>
                  <span>{format(article.publishedAt, 'MMM d, yyyy')}</span>
                </div>
              </div>
            </div>

            <div className="flex items-center justify-between gap-2 pt-1">
              <Badge variant="outline" className="capitalize text-xs">{article.category.replace('-', ' ')}</Badge>
              <div className="flex gap-1">
                {getStatusBadge(article.status)}
                {article.isBreaking && (
                  <Badge className="bg-red-500/20 text-red-600 border-red-500/30 text-[10px] px-1.5">Breaking</Badge>
                )}
              </div>
            </div>

            {article.status === 'rejected' && article.reviewNote && (
              <div className="bg-red-500/10 text-red-600 text-xs p-2 rounded">
                <strong>Rejection Note:</strong> {article.reviewNote}
              </div>
            )}

            <div className="flex items-center justify-between gap-2 pt-3 border-t border-border mt-2">
              <div className="text-xs text-muted-foreground">
                {article.views.toLocaleString()} views
              </div>
              <div className="flex justify-end gap-1">
                <Button variant="ghost" size="icon" className="h-8 w-8" asChild>
                  <a href={`/article/${article.slug}`} target="_blank">
                    <Eye className="h-4 w-4" />
                  </a>
                </Button>

                {/* Review button for pending articles */}
                {canReview && article.status === 'pending_review' && (
                  <Button
                    variant="ghost"
                    size="icon"
                    className="h-8 w-8 text-orange-500"
                    onClick={() => openReviewDialog(article)}
                  >
                    <Clock className="h-4 w-4" />
                  </Button>
                )}

                {/* Submit for review button for drafts */}
                {!canPublishDirectly && article.status === 'draft' && (
                  <Button
                    variant="ghost"
                    size="icon"
                    className="h-8 w-8 text-blue-500"
                    onClick={() => handleSubmitForReview(article)}
                  >
                    <Send className="h-4 w-4" />
                  </Button>
                )}

                <Button variant="ghost" size="icon" className="h-8 w-8" onClick={() => openEditDialog(article)}>
                  <Edit className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="icon" className="h-8 w-8 text-destructive" onClick={() => handleDelete(article.id)}>
                  <Trash2 className="h-4 w-4" />
                </Button>
              </div>
            </div>
          </div>
        ))}

        {filteredArticles.length === 0 && (
          <div className="py-12 text-center bg-card rounded-xl border border-border">
            <p className="text-muted-foreground">No articles found</p>
          </div>
        )}
      </div>

      {/* Review Dialog */}
      <Dialog open={isReviewDialogOpen} onOpenChange={setIsReviewDialogOpen}>
        <DialogContent className="max-w-2xl">
          <DialogHeader>
            <DialogTitle>Review Article</DialogTitle>
            <DialogDescription>
              Review this article submission and approve or reject it.
            </DialogDescription>
          </DialogHeader>

          {reviewingArticle && (
            <div className="space-y-4">
              <div className="p-4 bg-muted rounded-lg">
                <h3 className="font-semibold mb-2">{reviewingArticle.title}</h3>
                <p className="text-sm text-muted-foreground mb-2">{reviewingArticle.excerpt}</p>
                <div className="flex items-center gap-2 text-xs text-muted-foreground">
                  <span>By {reviewingArticle.author.name}</span>
                  <span>â€¢</span>
                  <Badge variant="outline" className="capitalize">{reviewingArticle.category}</Badge>
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="reviewNote">Review Note (required for rejection)</Label>
                <Textarea
                  id="reviewNote"
                  value={reviewNote}
                  onChange={(e) => setReviewNote(e.target.value)}
                  placeholder="Add feedback for the author..."
                  rows={3}
                />
              </div>

              <div className="flex justify-end gap-3">
                <Button variant="outline" onClick={() => setIsReviewDialogOpen(false)}>
                  Cancel
                </Button>
                <Button variant="destructive" onClick={handleReject}>
                  <XCircle className="mr-2 h-4 w-4" />
                  Reject
                </Button>
                <Button onClick={handleApprove}>
                  <CheckCircle className="mr-2 h-4 w-4" />
                  Approve & Publish
                </Button>
              </div>
            </div>
          )}
        </DialogContent>
      </Dialog>

      {/* Create/Edit Dialog */}
      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
        <DialogContent className="max-w-3xl max-h-[90vh] overflow-y-auto">
          <DialogHeader>
            <DialogTitle>{editingArticle ? 'Edit Article' : 'Create New Article'}</DialogTitle>
            <DialogDescription>
              {editingArticle ? 'Update the article details below.' : 'Fill in the details to create a new article.'}
            </DialogDescription>
          </DialogHeader>

          <form onSubmit={handleSubmit} className="space-y-6">
            <div className="space-y-2">
              <Label htmlFor="title">Title *</Label>
              <Input
                id="title"
                value={formData.title}
                onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                placeholder="Article title"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="excerpt">Excerpt *</Label>
              <Textarea
                id="excerpt"
                value={formData.excerpt}
                onChange={(e) => setFormData({ ...formData, excerpt: e.target.value })}
                placeholder="Brief summary of the article"
                rows={2}
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="content">Content *</Label>
              <Textarea
                id="content"
                value={formData.content}
                onChange={(e) => setFormData({ ...formData, content: e.target.value })}
                placeholder="Full article content..."
                rows={8}
                required
              />
            </div>

            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="category">Category *</Label>
                <Select value={formData.category} onValueChange={(val) => setFormData({ ...formData, category: val as Category })}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {categories.map(cat => (
                      <SelectItem key={cat.id} value={cat.id}>{cat.name}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {canEditAll && (
                <div className="space-y-2">
                  <Label htmlFor="author">Author *</Label>
                  <Select value={formData.authorId} onValueChange={(val) => setFormData({ ...formData, authorId: val })}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      {authors.map(author => (
                        <SelectItem key={author.id} value={author.id}>{author.name}</SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                </div>
              )}
            </div>

            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label>Featured Image</Label>
                <Tabs defaultValue="url" className="w-full">
                  <TabsList className="grid w-full grid-cols-2">
                    <TabsTrigger value="url">Image URL</TabsTrigger>
                    <TabsTrigger value="upload">Upload</TabsTrigger>
                  </TabsList>
                  <TabsContent value="url" className="relative mt-2">
                    <Image className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                    <Input
                      value={formData.featuredImage}
                      onChange={(e) => setFormData({ ...formData, featuredImage: e.target.value })}
                      placeholder="https://..."
                      className="pl-9"
                    />
                  </TabsContent>
                  <TabsContent value="upload" className="mt-2">
                    <div className="flex items-center gap-2">
                      <Input
                        type="file"
                        accept="image/*"
                        onChange={(e) => handleFileUpload(e, 'featuredImage')}
                        className="cursor-pointer"
                      />
                    </div>
                  </TabsContent>
                </Tabs>
                {formData.featuredImage && (
                  <div className="mt-2 h-32 w-full overflow-hidden rounded-md border border-border bg-muted">
                    <img src={formData.featuredImage} alt="Preview" className="h-full w-full object-cover" />
                  </div>
                )}
              </div>

              <div className="space-y-2">
                <Label>Video (optional)</Label>
                <Tabs defaultValue="url" className="w-full">
                  <TabsList className="grid w-full grid-cols-2">
                    <TabsTrigger value="url">Video URL</TabsTrigger>
                    <TabsTrigger value="upload">Upload</TabsTrigger>
                  </TabsList>
                  <TabsContent value="url" className="relative mt-2">
                    <Video className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                    <Input
                      value={formData.videoUrl}
                      onChange={(e) => setFormData({ ...formData, videoUrl: e.target.value })}
                      placeholder="https://youtube.com/..."
                      className="pl-9"
                    />
                  </TabsContent>
                  <TabsContent value="upload" className="mt-2">
                    <div className="flex items-center gap-2">
                      <Input
                        type="file"
                        accept="video/*"
                        onChange={(e) => handleFileUpload(e, 'videoUrl')}
                        className="cursor-pointer"
                      />
                    </div>
                  </TabsContent>
                </Tabs>
                {formData.videoUrl && (
                  <div className="mt-2 p-2 bg-muted/50 rounded border border-border">
                    <p className="text-xs text-green-600 flex items-center gap-1">
                      <CheckCircle className="h-3 w-3" /> Video source set
                    </p>
                    <p className="text-[10px] text-muted-foreground truncate mt-1">
                      {formData.videoUrl.substring(0, 50)}...
                    </p>
                  </div>
                )}
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="tags">Tags (comma-separated)</Label>
              <Input
                id="tags"
                value={formData.tags}
                onChange={(e) => setFormData({ ...formData, tags: e.target.value })}
                placeholder="news, breaking, politics"
              />
            </div>

            <div className="grid gap-4 sm:grid-cols-3">
              <div className="space-y-2">
                <Label htmlFor="status">Status</Label>
                <Select value={formData.status} onValueChange={(val) => setFormData({ ...formData, status: val as ArticleStatus })}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    {getAvailableStatuses().map(status => (
                      <SelectItem key={status.value} value={status.value}>{status.label}</SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {canSetBreaking && (
                <div className="flex items-center gap-3 pt-6">
                  <Switch
                    id="isBreaking"
                    checked={formData.isBreaking}
                    onCheckedChange={(checked) => setFormData({ ...formData, isBreaking: checked })}
                  />
                  <Label htmlFor="isBreaking">Breaking News</Label>
                </div>
              )}

              {canSetFeatured && (
                <div className="flex items-center gap-3 pt-6">
                  <Switch
                    id="isFeatured"
                    checked={formData.isFeatured}
                    onCheckedChange={(checked) => setFormData({ ...formData, isFeatured: checked })}
                  />
                  <Label htmlFor="isFeatured">Featured</Label>
                </div>
              )}
            </div>

            {!canSetBreaking && !canSetFeatured && (
              <p className="text-xs text-muted-foreground">
                Note: Breaking News and Featured flags can only be set by editors and admins.
              </p>
            )}

            <div className="flex justify-end gap-3 pt-4">
              <Button type="button" variant="outline" onClick={() => setIsDialogOpen(false)}>
                Cancel
              </Button>
              <Button type="submit">
                <Save className="mr-2 h-4 w-4" />
                {editingArticle ? 'Update Article' : 'Save Article'}
              </Button>
            </div>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default AdminArticles;

--- FILE END: src\pages\admin\AdminArticles.tsx ---


--- FILE START: src\pages\admin\AdminCategories.tsx ---
import { useState } from 'react';
import { categories as initialCategories } from '@/data/mockData';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Plus, Edit, Trash2, Save, FolderOpen, Lock } from 'lucide-react';
import { toast } from 'sonner';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { Category } from '@/types/news';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { getCategories, saveCategories, CategoryConfig } from '@/lib/settingsService';

interface CategoryItem {
  id: Category;
  name: string;
  description: string;
}

const AdminCategories = () => {
  const { hasPermission } = useAdminAuth();
  const [categoriesList, setCategoriesList] = useState<CategoryItem[]>(getCategories(initialCategories) as CategoryItem[]);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingCategory, setEditingCategory] = useState<CategoryItem | null>(null);
  const [formData, setFormData] = useState({
    id: '',
    name: '',
    description: ''
  });

  const canManageCategories = hasPermission('manageCategories');

  // If user doesn't have permission, show restricted view
  if (!canManageCategories) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to manage categories. Only administrators can access this section.
        </p>
      </div>
    );
  }

  const openCreateDialog = () => {
    setEditingCategory(null);
    setFormData({ id: '', name: '', description: '' });
    setIsDialogOpen(true);
  };

  const openEditDialog = (category: CategoryItem) => {
    setEditingCategory(category);
    setFormData({
      id: category.id,
      name: category.name,
      description: category.description
    });
    setIsDialogOpen(true);
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();

    let updatedList: CategoryItem[];
    if (editingCategory) {
      updatedList = categoriesList.map(cat =>
        cat.id === editingCategory.id
          ? { ...cat, name: formData.name, description: formData.description }
          : cat
      );
      toast.success('Category updated successfully!');
    } else {
      const newCategory: CategoryItem = {
        id: formData.name.toLowerCase().replace(/\s+/g, '-') as Category,
        name: formData.name,
        description: formData.description
      };
      updatedList = [...categoriesList, newCategory];
      toast.success('Category created successfully!');
    }

    setCategoriesList(updatedList);
    saveCategories(updatedList as CategoryConfig[]);
    setIsDialogOpen(false);
  };

  const handleDelete = (id: string) => {
    if (window.confirm('Are you sure you want to delete this category?')) {
      const updatedList = categoriesList.filter(cat => cat.id !== id);
      setCategoriesList(updatedList);
      saveCategories(updatedList as CategoryConfig[]);
      toast.success('Category deleted successfully!');
    }
  };

  return (
    <div>
      <div className="flex items-center justify-between mb-6">
        <h1 className="font-display text-2xl font-bold text-foreground">Categories</h1>
        <Button onClick={openCreateDialog}>
          <Plus className="mr-2 h-4 w-4" />
          New Category
        </Button>
      </div>

      <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {categoriesList.map((category) => (
          <div key={category.id} className="rounded-xl bg-card p-6 border border-border hover:shadow-lg transition-shadow">
            <div className="flex items-start justify-between mb-3">
              <div className="h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center">
                <FolderOpen className="h-5 w-5 text-primary" />
              </div>
              <div className="flex gap-1">
                <Button variant="ghost" size="icon" className="h-8 w-8" onClick={() => openEditDialog(category)}>
                  <Edit className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="icon" className="h-8 w-8 text-destructive" onClick={() => handleDelete(category.id)}>
                  <Trash2 className="h-4 w-4" />
                </Button>
              </div>
            </div>
            <h3 className="font-display font-semibold text-foreground">{category.name}</h3>
            <p className="text-sm text-muted-foreground mt-1">{category.description}</p>
            <p className="text-xs text-muted-foreground mt-3">ID: {category.id}</p>
          </div>
        ))}
      </div>

      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
        <DialogContent>
          <DialogHeader>
            <DialogTitle>{editingCategory ? 'Edit Category' : 'Create New Category'}</DialogTitle>
            <DialogDescription>
              {editingCategory ? 'Update the category details.' : 'Create a new category for articles.'}
            </DialogDescription>
          </DialogHeader>

          <form onSubmit={handleSubmit} className="space-y-4">
            <div className="space-y-2">
              <Label htmlFor="name">Name *</Label>
              <Input
                id="name"
                value={formData.name}
                onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                placeholder="Category name"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="description">Description *</Label>
              <Textarea
                id="description"
                value={formData.description}
                onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                placeholder="Category description"
                rows={3}
                required
              />
            </div>

            <div className="flex justify-end gap-3 pt-4">
              <Button type="button" variant="outline" onClick={() => setIsDialogOpen(false)}>
                Cancel
              </Button>
              <Button type="submit">
                <Save className="mr-2 h-4 w-4" />
                {editingCategory ? 'Update' : 'Create'}
              </Button>
            </div>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default AdminCategories;

--- FILE END: src\pages\admin\AdminCategories.tsx ---


--- FILE START: src\pages\admin\AdminComments.tsx ---
import { useState, useEffect, useCallback } from 'react';
import {
  MessageSquare,
  Trash2,
  Search,
  Eye,
  Flag,
  CheckCircle,
  XCircle,
  User,
  Calendar,
  ThumbsUp,
  ExternalLink,
  Filter,
  Lock,
  RefreshCw
} from 'lucide-react';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog } from '@/context/ActivityLogContext';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
  AlertDialogTrigger,
} from '@/components/ui/alert-dialog';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { toast } from 'sonner';
import { formatDistanceToNow, format } from 'date-fns';
import { Link } from 'react-router-dom';
import { getAllComments, updateCommentStatus, deleteComment as deleteCommentService } from '@/lib/commentService';

interface Comment {
  id: string;
  author: string;
  email?: string;
  content: string;
  articleId: string;
  articleTitle: string;
  articleSlug: string;
  createdAt: Date;
  likes: number;
  status: 'approved' | 'pending' | 'flagged' | 'spam';
  parentId?: string;
  isReply: boolean;
}

const AdminComments = () => {
  const { hasPermission } = useAdminAuth();
  const { logActivity } = useActivityLog();
  const [comments, setComments] = useState<Comment[]>([]);
  const [searchQuery, setSearchQuery] = useState('');
  const [statusFilter, setStatusFilter] = useState<string>('all');
  const [selectedComment, setSelectedComment] = useState<Comment | null>(null);
  const [viewDialogOpen, setViewDialogOpen] = useState(false);

  const loadComments = useCallback(() => {
    const allComments = getAllComments() as Comment[];
    setComments(allComments);
  }, []);

  useEffect(() => {
    loadComments();
    window.addEventListener('commentsUpdated', loadComments);
    return () => window.removeEventListener('commentsUpdated', loadComments);
  }, [loadComments]);

  const canViewComments = hasPermission('viewAllComments');
  const canModerateComments = hasPermission('moderateComments');

  // If user doesn't have permission, show restricted view
  if (!canViewComments) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to view all comments. Only editors and administrators can access this section.
        </p>
      </div>
    );
  }

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'approved':
        return <Badge className="bg-green-500/10 text-green-600 border-green-500/20">Approved</Badge>;
      case 'pending':
        return <Badge className="bg-yellow-500/10 text-yellow-600 border-yellow-500/20">Pending</Badge>;
      case 'flagged':
        return <Badge className="bg-orange-500/10 text-orange-600 border-orange-500/20">Flagged</Badge>;
      case 'spam':
        return <Badge className="bg-red-500/10 text-red-600 border-red-500/20">Spam</Badge>;
      default:
        return <Badge variant="outline">{status}</Badge>;
    }
  };

  const filteredComments = comments.filter(comment => {
    const matchesSearch =
      comment.author.toLowerCase().includes(searchQuery.toLowerCase()) ||
      comment.content.toLowerCase().includes(searchQuery.toLowerCase()) ||
      comment.articleTitle.toLowerCase().includes(searchQuery.toLowerCase());

    const matchesStatus = statusFilter === 'all' || comment.status === statusFilter;

    return matchesSearch && matchesStatus;
  });

  const handleDelete = (commentId: string) => {
    const comment = comments.find(c => c.id === commentId);
    if (comment) {
      deleteCommentService(comment.articleId, commentId);
      loadComments();
      logActivity('delete', 'comment', {
        resourceId: commentId,
        resourceName: comment?.author,
        details: `Deleted comment on "${comment?.articleTitle}"`
      });
      toast.success('Comment deleted successfully');
    }
  };

  const handleBulkDelete = (status: string) => {
    const toDelete = comments.filter(c => c.status === status);
    toDelete.forEach(c => deleteCommentService(c.articleId, c.id));
    loadComments();
    logActivity('bulk_delete', 'comment', {
      details: `Bulk deleted ${toDelete.length} ${status} comments`
    });
    toast.success(`${toDelete.length} ${status} comments deleted`);
  };

  const handleApprove = (commentId: string) => {
    const comment = comments.find(c => c.id === commentId);
    if (comment) {
      updateCommentStatus(comment.articleId, commentId, 'approved');
      loadComments();
      logActivity('approve', 'comment', {
        resourceId: commentId,
        resourceName: comment?.author,
        details: `Approved comment on "${comment?.articleTitle}"`
      });
      toast.success('Comment approved');
    }
  };

  const handleFlag = (commentId: string) => {
    const comment = comments.find(c => c.id === commentId);
    if (comment) {
      updateCommentStatus(comment.articleId, commentId, 'flagged');
      loadComments();
      logActivity('flag', 'comment', {
        resourceId: commentId,
        resourceName: comment?.author,
        details: `Flagged comment for review`
      });
      toast.success('Comment flagged for review');
    }
  };

  const handleMarkSpam = (commentId: string) => {
    const comment = comments.find(c => c.id === commentId);
    if (comment) {
      updateCommentStatus(comment.articleId, commentId, 'spam');
      loadComments();
      logActivity('flag', 'comment', {
        resourceId: commentId,
        resourceName: comment?.author,
        details: `Marked comment as spam`
      });
      toast.success('Comment marked as spam');
    }
  };

  const viewComment = (comment: Comment) => {
    setSelectedComment(comment);
    setViewDialogOpen(true);
  };

  const stats = {
    total: comments.length,
    approved: comments.filter(c => c.status === 'approved').length,
    pending: comments.filter(c => c.status === 'pending').length,
    flagged: comments.filter(c => c.status === 'flagged').length,
    spam: comments.filter(c => c.status === 'spam').length,
  };

  return (
    <div className="space-y-6">
      <div className="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground">Comments Management</h1>
          <p className="text-sm text-muted-foreground mt-1">Manage and moderate reader comments</p>
        </div>
      </div>

      {/* Stats Cards */}
      <div className="grid grid-cols-2 sm:grid-cols-5 gap-3">
        <div className="bg-card rounded-lg border border-border p-4">
          <div className="text-2xl font-bold text-foreground">{stats.total}</div>
          <div className="text-xs text-muted-foreground">Total</div>
        </div>
        <div className="bg-card rounded-lg border border-border p-4">
          <div className="text-2xl font-bold text-green-600">{stats.approved}</div>
          <div className="text-xs text-muted-foreground">Approved</div>
        </div>
        <div className="bg-card rounded-lg border border-border p-4">
          <div className="text-2xl font-bold text-yellow-600">{stats.pending}</div>
          <div className="text-xs text-muted-foreground">Pending</div>
        </div>
        <div className="bg-card rounded-lg border border-border p-4">
          <div className="text-2xl font-bold text-orange-600">{stats.flagged}</div>
          <div className="text-xs text-muted-foreground">Flagged</div>
        </div>
        <div className="bg-card rounded-lg border border-border p-4">
          <div className="text-2xl font-bold text-red-600">{stats.spam}</div>
          <div className="text-xs text-muted-foreground">Spam</div>
        </div>
      </div>

      {/* Filters & Actions */}
      <div className="flex flex-col sm:flex-row gap-3">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search comments, authors, articles..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-9"
          />
        </div>
        <Select value={statusFilter} onValueChange={setStatusFilter}>
          <SelectTrigger className="w-full sm:w-40 bg-background">
            <Filter className="h-4 w-4 mr-2" />
            <SelectValue placeholder="Filter" />
          </SelectTrigger>
          <SelectContent className="bg-background border border-border z-50">
            <SelectItem value="all">All Status</SelectItem>
            <SelectItem value="approved">Approved</SelectItem>
            <SelectItem value="pending">Pending</SelectItem>
            <SelectItem value="flagged">Flagged</SelectItem>
            <SelectItem value="spam">Spam</SelectItem>
          </SelectContent>
        </Select>

        {/* Bulk Actions */}
        {stats.spam > 0 && (
          <AlertDialog>
            <AlertDialogTrigger asChild>
              <Button variant="destructive" size="sm" className="gap-2">
                <Trash2 className="h-4 w-4" />
                Delete All Spam ({stats.spam})
              </Button>
            </AlertDialogTrigger>
            <AlertDialogContent className="bg-background">
              <AlertDialogHeader>
                <AlertDialogTitle>Delete all spam comments?</AlertDialogTitle>
                <AlertDialogDescription>
                  This will permanently delete {stats.spam} spam comments. This action cannot be undone.
                </AlertDialogDescription>
              </AlertDialogHeader>
              <AlertDialogFooter>
                <AlertDialogCancel>Cancel</AlertDialogCancel>
                <AlertDialogAction onClick={() => handleBulkDelete('spam')} className="bg-destructive text-destructive-foreground">
                  Delete All
                </AlertDialogAction>
              </AlertDialogFooter>
            </AlertDialogContent>
          </AlertDialog>
        )}
      </div>

      {/* Comments Table */}
      {/* Desktop Table View */}
      <div className="hidden md:block bg-card rounded-xl border border-border overflow-hidden">
        <div className="overflow-x-auto">
          <Table>
            <TableHeader>
              <TableRow>
                <TableHead className="min-w-[150px]">Author</TableHead>
                <TableHead className="min-w-[250px]">Comment</TableHead>
                <TableHead className="min-w-[200px]">Article</TableHead>
                <TableHead>Status</TableHead>
                <TableHead>Date</TableHead>
                <TableHead className="text-right">Actions</TableHead>
              </TableRow>
            </TableHeader>
            <TableBody>
              {filteredComments.length === 0 ? (
                <TableRow>
                  <TableCell colSpan={6} className="text-center py-8 text-muted-foreground">
                    No comments found
                  </TableCell>
                </TableRow>
              ) : (
                filteredComments.map((comment) => (
                  <TableRow key={comment.id}>
                    <TableCell>
                      <div className="flex items-center gap-2">
                        <div className="h-8 w-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0">
                          <User className="h-4 w-4 text-muted-foreground" />
                        </div>
                        <div className="min-w-0">
                          <div className="font-medium text-foreground text-sm truncate">{comment.author}</div>
                          {comment.email && (
                            <div className="text-xs text-muted-foreground truncate">{comment.email}</div>
                          )}
                        </div>
                      </div>
                    </TableCell>
                    <TableCell>
                      <div className="flex items-start gap-2">
                        {comment.isReply && (
                          <Badge variant="outline" className="text-[10px] flex-shrink-0">Reply</Badge>
                        )}
                        <p className="text-sm text-foreground line-clamp-2">{comment.content}</p>
                      </div>
                      <div className="flex items-center gap-2 mt-1 text-xs text-muted-foreground">
                        <ThumbsUp className="h-3 w-3" />
                        {comment.likes} likes
                      </div>
                    </TableCell>
                    <TableCell>
                      <Link
                        to={`/article/${comment.articleSlug}`}
                        className="text-sm text-primary hover:underline line-clamp-2"
                        target="_blank"
                      >
                        {comment.articleTitle}
                      </Link>
                    </TableCell>
                    <TableCell>{getStatusBadge(comment.status)}</TableCell>
                    <TableCell>
                      <div className="text-sm text-foreground">
                        {format(comment.createdAt, 'MMM d, yyyy')}
                      </div>
                      <div className="text-xs text-muted-foreground">
                        {formatDistanceToNow(comment.createdAt, { addSuffix: true })}
                      </div>
                    </TableCell>
                    <TableCell className="text-right">
                      <div className="flex items-center justify-end gap-1">
                        <Button
                          variant="ghost"
                          size="icon"
                          className="h-8 w-8"
                          onClick={() => viewComment(comment)}
                        >
                          <Eye className="h-4 w-4" />
                        </Button>

                        {canModerateComments && comment.status !== 'approved' && (
                          <Button
                            variant="ghost"
                            size="icon"
                            className="h-8 w-8 text-green-600 hover:text-green-700 hover:bg-green-50"
                            onClick={() => handleApprove(comment.id)}
                          >
                            <CheckCircle className="h-4 w-4" />
                          </Button>
                        )}

                        {canModerateComments && comment.status !== 'flagged' && comment.status !== 'spam' && (
                          <Button
                            variant="ghost"
                            size="icon"
                            className="h-8 w-8 text-orange-600 hover:text-orange-700 hover:bg-orange-50"
                            onClick={() => handleFlag(comment.id)}
                          >
                            <Flag className="h-4 w-4" />
                          </Button>
                        )}

                        {canModerateComments && comment.status !== 'spam' && (
                          <Button
                            variant="ghost"
                            size="icon"
                            className="h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50"
                            onClick={() => handleMarkSpam(comment.id)}
                          >
                            <XCircle className="h-4 w-4" />
                          </Button>
                        )}

                        {canModerateComments && (
                          <AlertDialog>
                            <AlertDialogTrigger asChild>
                              <Button
                                variant="ghost"
                                size="icon"
                                className="h-8 w-8 text-destructive hover:text-destructive hover:bg-destructive/10"
                              >
                                <Trash2 className="h-4 w-4" />
                              </Button>
                            </AlertDialogTrigger>
                            <AlertDialogContent className="bg-background">
                              <AlertDialogHeader>
                                <AlertDialogTitle>Delete comment?</AlertDialogTitle>
                                <AlertDialogDescription>
                                  This will permanently delete this comment by {comment.author}. This action cannot be undone.
                                </AlertDialogDescription>
                              </AlertDialogHeader>
                              <AlertDialogFooter>
                                <AlertDialogCancel>Cancel</AlertDialogCancel>
                                <AlertDialogAction
                                  onClick={() => handleDelete(comment.id)}
                                  className="bg-destructive text-destructive-foreground"
                                >
                                  Delete
                                </AlertDialogAction>
                              </AlertDialogFooter>
                            </AlertDialogContent>
                          </AlertDialog>
                        )}
                      </div>
                    </TableCell>
                  </TableRow>
                ))
              )}
            </TableBody>
          </Table>
        </div>
      </div>

      {/* Mobile Card View */}
      <div className="md:hidden space-y-4">
        {filteredComments.length === 0 ? (
          <div className="bg-card rounded-xl border border-border p-8 text-center text-muted-foreground">
            No comments found
          </div>
        ) : (
          filteredComments.map((comment) => (
            <div key={comment.id} className="bg-card rounded-xl border border-border p-4 space-y-3 shadow-sm">
              <div className="flex items-start justify-between">
                <div className="flex items-center gap-2">
                  <div className="h-8 w-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0">
                    <User className="h-4 w-4 text-muted-foreground" />
                  </div>
                  <div>
                    <div className="font-medium text-sm text-foreground">{comment.author}</div>
                    <div className="text-xs text-muted-foreground">{formatDistanceToNow(comment.createdAt, { addSuffix: true })}</div>
                  </div>
                </div>
                {getStatusBadge(comment.status)}
              </div>

              <div className="space-y-2">
                {comment.isReply && <Badge variant="outline" className="text-[10px]">Reply</Badge>}
                <p className="text-sm text-foreground">{comment.content}</p>
              </div>

              <div className="bg-muted/30 p-2 rounded text-xs border border-border/50">
                <span className="text-muted-foreground">On: </span>
                <Link to={`/article/${comment.articleSlug}`} className="font-medium text-primary hover:underline">
                  {comment.articleTitle}
                </Link>
              </div>

              <div className="flex items-center justify-between pt-2 border-t border-border mt-2">
                <div className="flex items-center gap-1 text-xs text-muted-foreground">
                  <ThumbsUp className="h-3 w-3" /> {comment.likes}
                </div>

                <div className="flex items-center gap-1">
                  <Button variant="ghost" size="icon" className="h-8 w-8" onClick={() => viewComment(comment)}>
                    <Eye className="h-4 w-4" />
                  </Button>

                  {canModerateComments && comment.status !== 'approved' && (
                    <Button variant="ghost" size="icon" className="h-8 w-8 text-green-600" onClick={() => handleApprove(comment.id)}>
                      <CheckCircle className="h-4 w-4" />
                    </Button>
                  )}

                  {canModerateComments && comment.status !== 'flagged' && comment.status !== 'spam' && (
                    <Button variant="ghost" size="icon" className="h-8 w-8 text-orange-600" onClick={() => handleFlag(comment.id)}>
                      <Flag className="h-4 w-4" />
                    </Button>
                  )}

                  {canModerateComments && (
                    <AlertDialog>
                      <AlertDialogTrigger asChild>
                        <Button variant="ghost" size="icon" className="h-8 w-8 text-destructive">
                          <Trash2 className="h-4 w-4" />
                        </Button>
                      </AlertDialogTrigger>
                      <AlertDialogContent className="bg-background">
                        <AlertDialogHeader>
                          <AlertDialogTitle>Delete comment?</AlertDialogTitle>
                          <AlertDialogDescription>
                            This will permanently delete this comment by {comment.author}.
                          </AlertDialogDescription>
                        </AlertDialogHeader>
                        <AlertDialogFooter>
                          <AlertDialogCancel>Cancel</AlertDialogCancel>
                          <AlertDialogAction onClick={() => handleDelete(comment.id)} className="bg-destructive text-destructive-foreground">
                            Delete
                          </AlertDialogAction>
                        </AlertDialogFooter>
                      </AlertDialogContent>
                    </AlertDialog>
                  )}
                </div>
              </div>
            </div>
          ))
        )}
      </div>

      {/* View Comment Dialog */}
      <Dialog open={viewDialogOpen} onOpenChange={setViewDialogOpen}>
        <DialogContent className="bg-background max-w-2xl">
          <DialogHeader>
            <DialogTitle>Comment Details</DialogTitle>
            <DialogDescription>Full comment information and moderation options</DialogDescription>
          </DialogHeader>

          {selectedComment && (
            <div className="space-y-4">
              <div className="flex items-start gap-3 p-4 bg-muted/50 rounded-lg">
                <div className="h-12 w-12 rounded-full bg-muted flex items-center justify-center flex-shrink-0">
                  <User className="h-6 w-6 text-muted-foreground" />
                </div>
                <div className="flex-1 min-w-0">
                  <div className="flex items-center gap-2 flex-wrap">
                    <span className="font-semibold text-foreground">{selectedComment.author}</span>
                    {getStatusBadge(selectedComment.status)}
                    {selectedComment.isReply && <Badge variant="outline">Reply</Badge>}
                  </div>
                  {selectedComment.email && (
                    <p className="text-sm text-muted-foreground">{selectedComment.email}</p>
                  )}
                  <div className="flex items-center gap-3 mt-1 text-xs text-muted-foreground">
                    <span className="flex items-center gap-1">
                      <Calendar className="h-3 w-3" />
                      {format(selectedComment.createdAt, 'PPpp')}
                    </span>
                    <span className="flex items-center gap-1">
                      <ThumbsUp className="h-3 w-3" />
                      {selectedComment.likes} likes
                    </span>
                  </div>
                </div>
              </div>

              <div>
                <h4 className="text-sm font-medium text-muted-foreground mb-2">Comment</h4>
                <p className="text-foreground bg-card p-4 rounded-lg border border-border">
                  {selectedComment.content}
                </p>
              </div>

              <div>
                <h4 className="text-sm font-medium text-muted-foreground mb-2">Article</h4>
                <Link
                  to={`/article/${selectedComment.articleSlug}`}
                  target="_blank"
                  className="flex items-center gap-2 text-primary hover:underline"
                >
                  {selectedComment.articleTitle}
                  <ExternalLink className="h-4 w-4" />
                </Link>
              </div>

              <div className="flex flex-wrap gap-2 pt-4 border-t border-border">
                {selectedComment.status !== 'approved' && (
                  <Button
                    size="sm"
                    className="gap-2 bg-green-600 hover:bg-green-700"
                    onClick={() => {
                      handleApprove(selectedComment.id);
                      setSelectedComment({ ...selectedComment, status: 'approved' });
                    }}
                  >
                    <CheckCircle className="h-4 w-4" />
                    Approve
                  </Button>
                )}
                {selectedComment.status !== 'flagged' && (
                  <Button
                    size="sm"
                    variant="outline"
                    className="gap-2 text-orange-600 border-orange-600 hover:bg-orange-50"
                    onClick={() => {
                      handleFlag(selectedComment.id);
                      setSelectedComment({ ...selectedComment, status: 'flagged' });
                    }}
                  >
                    <Flag className="h-4 w-4" />
                    Flag
                  </Button>
                )}
                {selectedComment.status !== 'spam' && (
                  <Button
                    size="sm"
                    variant="outline"
                    className="gap-2 text-red-600 border-red-600 hover:bg-red-50"
                    onClick={() => {
                      handleMarkSpam(selectedComment.id);
                      setSelectedComment({ ...selectedComment, status: 'spam' });
                    }}
                  >
                    <XCircle className="h-4 w-4" />
                    Mark Spam
                  </Button>
                )}
                <AlertDialog>
                  <AlertDialogTrigger asChild>
                    <Button size="sm" variant="destructive" className="gap-2">
                      <Trash2 className="h-4 w-4" />
                      Delete
                    </Button>
                  </AlertDialogTrigger>
                  <AlertDialogContent className="bg-background">
                    <AlertDialogHeader>
                      <AlertDialogTitle>Delete comment?</AlertDialogTitle>
                      <AlertDialogDescription>
                        This action cannot be undone.
                      </AlertDialogDescription>
                    </AlertDialogHeader>
                    <AlertDialogFooter>
                      <AlertDialogCancel>Cancel</AlertDialogCancel>
                      <AlertDialogAction
                        onClick={() => {
                          handleDelete(selectedComment.id);
                          setViewDialogOpen(false);
                        }}
                        className="bg-destructive text-destructive-foreground"
                      >
                        Delete
                      </AlertDialogAction>
                    </AlertDialogFooter>
                  </AlertDialogContent>
                </AlertDialog>
              </div>
            </div>
          )}
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default AdminComments;
--- FILE END: src\pages\admin\AdminComments.tsx ---


--- FILE START: src\pages\admin\AdminContactInfo.tsx ---
import { useState } from 'react';
import { Save, Plus, Trash2, Mail, Phone, MapPin, Eye, EyeOff, Building, FileText, Lock } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Switch } from '@/components/ui/switch';
import { Badge } from '@/components/ui/badge';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { ContactInfo, AboutInfo } from '@/data/siteContactData';
import { getContacts, saveContacts, getAboutInfo, saveAboutInfo } from '@/lib/contactService';
import { toast } from 'sonner';
import { useAdminAuth } from '@/context/AdminAuthContext';

const AdminContactInfo = () => {
  const { hasPermission } = useAdminAuth();
  const [contacts, setContacts] = useState<ContactInfo[]>(getContacts());
  const [aboutInfo, setAboutInfo] = useState<AboutInfo[]>(getAboutInfo());
  const [isAddContactOpen, setIsAddContactOpen] = useState(false);
  const [isAddAboutOpen, setIsAddAboutOpen] = useState(false);
  const [editingContact, setEditingContact] = useState<ContactInfo | null>(null);
  const [editingAbout, setEditingAbout] = useState<AboutInfo | null>(null);

  const canManageContactInfo = hasPermission('manageContactInfo');

  // If user doesn't have permission, show restricted view
  if (!canManageContactInfo) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to manage contact information. Only administrators can access this section.
        </p>
      </div>
    );
  }

  const [newContact, setNewContact] = useState<Partial<ContactInfo>>({
    type: 'email',
    label: '',
    value: '',
    isVisible: true,
    showInFooter: false,
    showOnContactPage: true,
  });

  const [newAbout, setNewAbout] = useState<Partial<AboutInfo>>({
    section: 'general',
    title: '',
    content: '',
    icon: '',
    isVisible: true,
  });

  const getTypeIcon = (type: ContactInfo['type']) => {
    switch (type) {
      case 'email': return <Mail className="h-4 w-4" />;
      case 'phone': return <Phone className="h-4 w-4" />;
      case 'address': return <MapPin className="h-4 w-4" />;
    }
  };

  // Contact CRUD operations
  const addContact = () => {
    if (!newContact.label || !newContact.value) {
      toast.error('Please fill in all required fields');
      return;
    }

    const contact: ContactInfo = {
      id: Date.now().toString(),
      type: newContact.type as ContactInfo['type'],
      label: newContact.label,
      value: newContact.value,
      isVisible: newContact.isVisible ?? true,
      order: contacts.length + 1,
      showInFooter: newContact.showInFooter ?? false,
      showOnContactPage: newContact.showOnContactPage ?? true,
    };

    const updatedContacts = [...contacts, contact];
    setContacts(updatedContacts);
    saveContacts(updatedContacts);
    setNewContact({ type: 'email', label: '', value: '', isVisible: true, showInFooter: false, showOnContactPage: true });
    setIsAddContactOpen(false);
    toast.success('Contact added successfully');
  };

  const updateContact = (id: string, updates: Partial<ContactInfo>) => {
    const updatedContacts = contacts.map(c => c.id === id ? { ...c, ...updates } : c);
    setContacts(updatedContacts);
    saveContacts(updatedContacts);
  };

  const deleteContact = (id: string) => {
    const updatedContacts = contacts.filter(c => c.id !== id);
    setContacts(updatedContacts);
    saveContacts(updatedContacts);
    toast.success('Contact deleted');
  };

  // About CRUD operations
  const addAboutItem = () => {
    if (!newAbout.title || !newAbout.content) {
      toast.error('Please fill in all required fields');
      return;
    }

    const about: AboutInfo = {
      id: Date.now().toString(),
      section: newAbout.section as AboutInfo['section'],
      title: newAbout.title,
      content: newAbout.content,
      icon: newAbout.icon,
      isVisible: newAbout.isVisible ?? true,
      order: aboutInfo.length + 1,
    };

    const updatedAbout = [...aboutInfo, about];
    setAboutInfo(updatedAbout);
    saveAboutInfo(updatedAbout);
    setNewAbout({ section: 'general', title: '', content: '', icon: '', isVisible: true });
    setIsAddAboutOpen(false);
    toast.success('About item added successfully');
  };

  const updateAboutItem = (id: string, updates: Partial<AboutInfo>) => {
    const updatedAbout = aboutInfo.map(a => a.id === id ? { ...a, ...updates } : a);
    setAboutInfo(updatedAbout);
    saveAboutInfo(updatedAbout);
  };

  const deleteAboutItem = (id: string) => {
    const updatedAbout = aboutInfo.filter(a => a.id !== id);
    setAboutInfo(updatedAbout);
    saveAboutInfo(updatedAbout);
    toast.success('About item deleted');
  };

  const handleSave = () => {
    // Already saved on each operation, but this confirms for UX
    toast.success('Contact & About information saved successfully!');
  };

  return (
    <div>
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Contact & About Info</h1>
          <p className="text-muted-foreground text-sm mt-1">
            Manage contact information displayed across the site
          </p>
        </div>
        <Button onClick={handleSave} size="sm">
          <Save className="mr-2 h-4 w-4" /> Save All Changes
        </Button>
      </div>

      <Tabs defaultValue="contacts" className="w-full">
        <TabsList className="w-full grid grid-cols-2 mb-4">
          <TabsTrigger value="contacts">Contact Info ({contacts.length})</TabsTrigger>
          <TabsTrigger value="about">About Info ({aboutInfo.length})</TabsTrigger>
        </TabsList>

        {/* Contact Info Tab */}
        <TabsContent value="contacts">
          <Card>
            <CardHeader className="pb-3">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <Building className="h-5 w-5 text-primary" />
                  <CardTitle className="text-base sm:text-lg">Contact Information</CardTitle>
                </div>
                <Dialog open={isAddContactOpen} onOpenChange={setIsAddContactOpen}>
                  <DialogTrigger asChild>
                    <Button variant="outline" size="sm">
                      <Plus className="mr-1 h-4 w-4" /> Add Contact
                    </Button>
                  </DialogTrigger>
                  <DialogContent className="max-w-md">
                    <DialogHeader>
                      <DialogTitle>Add New Contact</DialogTitle>
                      <DialogDescription>
                        Add a new contact method for visitors to reach you
                      </DialogDescription>
                    </DialogHeader>
                    <div className="space-y-4 py-4">
                      <div>
                        <Label>Type *</Label>
                        <Select
                          value={newContact.type}
                          onValueChange={(v) => setNewContact({ ...newContact, type: v as ContactInfo['type'] })}
                        >
                          <SelectTrigger className="mt-1">
                            <SelectValue />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="email">Email</SelectItem>
                            <SelectItem value="phone">Phone</SelectItem>
                            <SelectItem value="address">Address</SelectItem>
                          </SelectContent>
                        </Select>
                      </div>
                      <div>
                        <Label>Label *</Label>
                        <Input
                          value={newContact.label}
                          onChange={(e) => setNewContact({ ...newContact, label: e.target.value })}
                          placeholder="e.g., General Inquiries, Press Contact"
                          className="mt-1"
                        />
                      </div>
                      <div>
                        <Label>Value *</Label>
                        {newContact.type === 'address' ? (
                          <Textarea
                            value={newContact.value}
                            onChange={(e) => setNewContact({ ...newContact, value: e.target.value })}
                            placeholder="123 News Street&#10;Media City, MC 12345"
                            className="mt-1"
                            rows={3}
                          />
                        ) : (
                          <Input
                            value={newContact.value}
                            onChange={(e) => setNewContact({ ...newContact, value: e.target.value })}
                            placeholder={newContact.type === 'email' ? 'email@example.com' : '+1 (555) 123-4567'}
                            className="mt-1"
                          />
                        )}
                      </div>
                      <div className="flex items-center justify-between">
                        <Label>Show in Footer</Label>
                        <Switch
                          checked={newContact.showInFooter}
                          onCheckedChange={(v) => setNewContact({ ...newContact, showInFooter: v })}
                        />
                      </div>
                      <div className="flex items-center justify-between">
                        <Label>Show on Contact Page</Label>
                        <Switch
                          checked={newContact.showOnContactPage}
                          onCheckedChange={(v) => setNewContact({ ...newContact, showOnContactPage: v })}
                        />
                      </div>
                    </div>
                    <DialogFooter>
                      <Button variant="outline" onClick={() => setIsAddContactOpen(false)}>Cancel</Button>
                      <Button onClick={addContact}>Add Contact</Button>
                    </DialogFooter>
                  </DialogContent>
                </Dialog>
              </div>
              <CardDescription className="text-xs sm:text-sm">
                Email addresses, phone numbers, and addresses shown on the site
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {contacts.sort((a, b) => a.order - b.order).map((contact) => (
                  <div
                    key={contact.id}
                    className={`flex flex-col sm:flex-row sm:items-center gap-3 p-4 rounded-lg border ${contact.isVisible ? 'border-border bg-card' : 'border-dashed border-muted bg-muted/30 opacity-60'
                      }`}
                  >
                    <div className="flex items-center gap-3 flex-1 min-w-0">
                      <div className="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 flex-shrink-0">
                        {getTypeIcon(contact.type)}
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 flex-wrap">
                          <span className="font-medium text-sm">{contact.label}</span>
                          <Badge variant="outline" className="text-[10px]">{contact.type}</Badge>
                          {contact.showInFooter && (
                            <Badge className="bg-green-500/20 text-green-600 text-[10px]">Footer</Badge>
                          )}
                          {contact.showOnContactPage && (
                            <Badge className="bg-blue-500/20 text-blue-600 text-[10px]">Contact Page</Badge>
                          )}
                        </div>
                        <p className="text-sm text-muted-foreground truncate mt-0.5">{contact.value}</p>
                      </div>
                    </div>

                    <div className="flex items-center gap-1 self-end sm:self-center">
                      <Button
                        variant="ghost"
                        size="icon"
                        onClick={() => updateContact(contact.id, { showInFooter: !contact.showInFooter })}
                        title={contact.showInFooter ? 'Remove from footer' : 'Add to footer'}
                        className="h-8 w-8"
                      >
                        <Building className={`h-4 w-4 ${contact.showInFooter ? 'text-green-500' : 'text-muted-foreground'}`} />
                      </Button>
                      <Button
                        variant="ghost"
                        size="icon"
                        onClick={() => updateContact(contact.id, { isVisible: !contact.isVisible })}
                        title={contact.isVisible ? 'Hide' : 'Show'}
                        className="h-8 w-8"
                      >
                        {contact.isVisible ? <Eye className="h-4 w-4" /> : <EyeOff className="h-4 w-4" />}
                      </Button>
                      <Button
                        variant="ghost"
                        size="icon"
                        onClick={() => deleteContact(contact.id)}
                        className="h-8 w-8 text-destructive hover:text-destructive"
                      >
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </div>
                  </div>
                ))}

                {contacts.length === 0 && (
                  <p className="text-center text-muted-foreground py-8">
                    No contact information added yet. Click "Add Contact" to get started.
                  </p>
                )}
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* About Info Tab */}
        <TabsContent value="about">
          <Card>
            <CardHeader className="pb-3">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  <FileText className="h-5 w-5 text-primary" />
                  <CardTitle className="text-base sm:text-lg">About Information</CardTitle>
                </div>
                <Dialog open={isAddAboutOpen} onOpenChange={setIsAddAboutOpen}>
                  <DialogTrigger asChild>
                    <Button variant="outline" size="sm">
                      <Plus className="mr-1 h-4 w-4" /> Add About Item
                    </Button>
                  </DialogTrigger>
                  <DialogContent className="max-w-md">
                    <DialogHeader>
                      <DialogTitle>Add About Item</DialogTitle>
                      <DialogDescription>
                        Add content to the About page
                      </DialogDescription>
                    </DialogHeader>
                    <div className="space-y-4 py-4">
                      <div>
                        <Label>Section *</Label>
                        <Select
                          value={newAbout.section}
                          onValueChange={(v) => setNewAbout({ ...newAbout, section: v as AboutInfo['section'] })}
                        >
                          <SelectTrigger className="mt-1">
                            <SelectValue />
                          </SelectTrigger>
                          <SelectContent>
                            <SelectItem value="mission">Mission</SelectItem>
                            <SelectItem value="vision">Vision</SelectItem>
                            <SelectItem value="value">Core Value</SelectItem>
                            <SelectItem value="general">General</SelectItem>
                          </SelectContent>
                        </Select>
                      </div>
                      <div>
                        <Label>Title *</Label>
                        <Input
                          value={newAbout.title}
                          onChange={(e) => setNewAbout({ ...newAbout, title: e.target.value })}
                          placeholder="e.g., Our Mission"
                          className="mt-1"
                        />
                      </div>
                      <div>
                        <Label>Content *</Label>
                        <Textarea
                          value={newAbout.content}
                          onChange={(e) => setNewAbout({ ...newAbout, content: e.target.value })}
                          placeholder="Describe this section..."
                          className="mt-1"
                          rows={4}
                        />
                      </div>
                      <div>
                        <Label>Icon (optional)</Label>
                        <Input
                          value={newAbout.icon}
                          onChange={(e) => setNewAbout({ ...newAbout, icon: e.target.value })}
                          placeholder="e.g., Target, Eye, Shield, Users"
                          className="mt-1"
                        />
                        <p className="text-xs text-muted-foreground mt-1">Use Lucide icon names</p>
                      </div>
                    </div>
                    <DialogFooter>
                      <Button variant="outline" onClick={() => setIsAddAboutOpen(false)}>Cancel</Button>
                      <Button onClick={addAboutItem}>Add Item</Button>
                    </DialogFooter>
                  </DialogContent>
                </Dialog>
              </div>
              <CardDescription className="text-xs sm:text-sm">
                Mission, vision, and core values displayed on the About page
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {aboutInfo.sort((a, b) => a.order - b.order).map((item) => (
                  <div
                    key={item.id}
                    className={`flex flex-col gap-3 p-4 rounded-lg border ${item.isVisible ? 'border-border bg-card' : 'border-dashed border-muted bg-muted/30 opacity-60'
                      }`}
                  >
                    <div className="flex items-start justify-between gap-3">
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 flex-wrap">
                          <span className="font-medium text-sm">{item.title}</span>
                          <Badge variant="outline" className="text-[10px] capitalize">{item.section}</Badge>
                          {item.icon && (
                            <Badge className="bg-primary/20 text-primary text-[10px]">{item.icon}</Badge>
                          )}
                        </div>
                        <p className="text-sm text-muted-foreground mt-1 line-clamp-2">{item.content}</p>
                      </div>

                      <div className="flex items-center gap-1">
                        <Button
                          variant="ghost"
                          size="icon"
                          onClick={() => updateAboutItem(item.id, { isVisible: !item.isVisible })}
                          title={item.isVisible ? 'Hide' : 'Show'}
                          className="h-8 w-8"
                        >
                          {item.isVisible ? <Eye className="h-4 w-4" /> : <EyeOff className="h-4 w-4" />}
                        </Button>
                        <Button
                          variant="ghost"
                          size="icon"
                          onClick={() => deleteAboutItem(item.id)}
                          className="h-8 w-8 text-destructive hover:text-destructive"
                        >
                          <Trash2 className="h-4 w-4" />
                        </Button>
                      </div>
                    </div>
                  </div>
                ))}

                {aboutInfo.length === 0 && (
                  <p className="text-center text-muted-foreground py-8">
                    No about information added yet. Click "Add About Item" to get started.
                  </p>
                )}
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>

      {/* Preview Section */}
      <Card className="mt-6">
        <CardHeader>
          <CardTitle className="text-base">Preview</CardTitle>
          <CardDescription>How your contact info will appear</CardDescription>
        </CardHeader>
        <CardContent>
          <div className="grid gap-4 sm:grid-cols-3">
            <div className="space-y-2">
              <h4 className="font-medium text-sm text-muted-foreground">Footer Contacts</h4>
              {contacts.filter(c => c.isVisible && c.showInFooter).length > 0 ? (
                contacts.filter(c => c.isVisible && c.showInFooter).map(c => (
                  <div key={c.id} className="flex items-center gap-2 text-sm">
                    {getTypeIcon(c.type)}
                    <span>{c.value}</span>
                  </div>
                ))
              ) : (
                <p className="text-xs text-muted-foreground">No footer contacts set</p>
              )}
            </div>
            <div className="space-y-2 sm:col-span-2">
              <h4 className="font-medium text-sm text-muted-foreground">Contact Page Emails</h4>
              <div className="flex flex-wrap gap-2">
                {contacts.filter(c => c.isVisible && c.showOnContactPage && c.type === 'email').map(c => (
                  <Badge key={c.id} variant="outline">{c.value}</Badge>
                ))}
              </div>
            </div>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

export default AdminContactInfo;

--- FILE END: src\pages\admin\AdminContactInfo.tsx ---


--- FILE START: src\pages\admin\AdminDashboard.tsx ---
import { useState, useEffect } from 'react';
import { FileText, Eye, Users, TrendingUp, Clock, CheckCircle, AlertCircle, Activity } from 'lucide-react';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog, formatAction, formatResource, getActionColor } from '@/context/ActivityLogContext';
import { ROLE_DISPLAY } from '@/types/admin';
import { Badge } from '@/components/ui/badge';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { formatDistanceToNow } from 'date-fns';

const AdminDashboard = () => {
  const { currentUser, hasPermission } = useAdminAuth();
  const { logs } = useActivityLog();

  const canViewFullDashboard = hasPermission('viewFullDashboard');
  const canReview = hasPermission('reviewArticles');
  const isAdmin = currentUser?.role === 'admin';

  // Load live data
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  useEffect(() => {
    setArticlesList(getArticles());
  }, []);

  // Mock pending articles count (or derived if we had status persistence for everyone)
  const pendingArticles = articlesList.filter(a => (a as any).status === 'pending_review').length; // Fallback or mock

  // Get recent activity (last 5 logs) - admins see all, others see their own
  const recentActivity = isAdmin
    ? logs.slice(0, 5)
    : logs.filter(log => log.userId === currentUser?.id).slice(0, 5);

  // Stats for full dashboard (admin/editor)
  const fullStats = [
    { label: 'Total Articles', value: articlesList.length, icon: FileText, color: 'bg-blue-500' },
    { label: 'Total Views', value: articlesList.reduce((a, b) => a + b.views, 0).toLocaleString(), icon: Eye, color: 'bg-green-500' },
    { label: 'Authors', value: '4', icon: Users, color: 'bg-purple-500' },
    { label: 'Breaking News', value: articlesList.filter(a => a.isBreaking).length, icon: TrendingUp, color: 'bg-red-500' },
  ];

  // Stats for authors/journalists (own stats only)
  const ownStats = [
    { label: 'Your Articles', value: '5', icon: FileText, color: 'bg-blue-500' },
    { label: 'Your Views', value: '12,450', icon: Eye, color: 'bg-green-500' },
    { label: 'Pending Review', value: '2', icon: Clock, color: 'bg-orange-500' },
    { label: 'Published', value: '3', icon: CheckCircle, color: 'bg-emerald-500' },
  ];

  const stats = canViewFullDashboard ? fullStats : ownStats;
  const roleInfo = currentUser ? ROLE_DISPLAY[currentUser.role] : null;

  return (
    <div>
      <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground">Dashboard</h1>
          {currentUser && roleInfo && (
            <div className="flex flex-wrap items-center gap-2 mt-1">
              <span className="text-sm text-muted-foreground">Welcome back,</span>
              <span className="text-sm font-medium">{currentUser.name}</span>
              <Badge className={`${roleInfo.color} text-white text-xs border-0`}>
                {roleInfo.label}
              </Badge>
            </div>
          )}
        </div>
      </div>

      {/* Pending Review Alert for Editors/Admins */}
      {canReview && pendingArticles > 0 && (
        <Card className="mb-6 border-orange-500/50 bg-orange-500/10">
          <CardContent className="flex items-center gap-4 py-4">
            <div className="h-10 w-10 rounded-lg bg-orange-500/20 flex items-center justify-center">
              <AlertCircle className="h-5 w-5 text-orange-500" />
            </div>
            <div className="flex-1">
              <p className="font-medium text-foreground">{pendingArticles} articles pending review</p>
              <p className="text-sm text-muted-foreground">New submissions are waiting for your approval</p>
            </div>
            <a href="/admin/articles" className="text-sm text-primary hover:underline">
              Review Now â†’
            </a>
          </CardContent>
        </Card>
      )}

      <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
        {stats.map((stat) => (
          <div key={stat.label} className="rounded-xl bg-card p-6 border border-border">
            <div className={`inline-flex h-10 w-10 items-center justify-center rounded-lg ${stat.color} mb-4`}>
              <stat.icon className="h-5 w-5 text-white" />
            </div>
            <p className="text-2xl font-bold text-foreground">{stat.value}</p>
            <p className="text-sm text-muted-foreground">{stat.label}</p>
          </div>
        ))}
      </div>

      <div className="mt-8 grid gap-6 lg:grid-cols-2">
        {/* Recent Articles */}
        <div className="rounded-xl bg-card p-6 border border-border">
          <h2 className="font-display text-lg font-semibold mb-4">
            {canViewFullDashboard ? 'Recent Articles' : 'Your Recent Articles'}
          </h2>
          <div className="space-y-3">
            {articlesList.slice(0, 5).map((article) => (
              <div key={article.id} className="flex items-start gap-3 p-3 rounded-lg bg-muted/50 border border-border">
                <div className="h-12 w-12 sm:h-10 sm:w-16 flex-shrink-0 overflow-hidden rounded-md bg-muted">
                  {article.featuredImage ? (
                    <img src={article.featuredImage} alt="" className="h-full w-full object-cover" />
                  ) : (
                    <FileText className="h-full w-full p-3 text-muted-foreground/30" />
                  )}
                </div>
                <div className="flex-1 min-w-0">
                  <p className="text-sm font-medium text-foreground line-clamp-2 leading-tight break-words mb-1">{article.title}</p>
                  <div className="flex items-center gap-2 text-xs text-muted-foreground">
                    <span className="flex items-center gap-1">
                      <Eye className="h-3 w-3" />
                      {article.views.toLocaleString()}
                    </span>
                    <span>â€¢</span>
                    <span>{formatDistanceToNow(article.publishedAt, { addSuffix: true })}</span>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>

        {/* Recent Activity Widget */}
        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="flex items-center gap-2 text-lg">
              <Activity className="h-5 w-5 text-primary" />
              {isAdmin ? 'Recent Activity' : 'Your Recent Activity'}
            </CardTitle>
          </CardHeader>
          <CardContent>
            {recentActivity.length === 0 ? (
              <p className="text-sm text-muted-foreground text-center py-4">No recent activity</p>
            ) : (
              <div className="space-y-3">
                {recentActivity.map((log) => {
                  const actionColorClass = getActionColor(log.action);
                  return (
                    <div key={log.id} className="flex items-start gap-3 py-2 border-b border-border last:border-0">
                      <Badge variant="outline" className={`${actionColorClass} text-xs mt-0.5`}>
                        {formatAction(log.action)}
                      </Badge>
                      <div className="flex-1 min-w-0">
                        <p className="text-sm text-foreground truncate">
                          <span className="font-medium">{log.userName}</span>
                          <span className="text-muted-foreground"> Â· </span>
                          <span>{formatResource(log.resource)}</span>
                        </p>
                        {log.resourceName && (
                          <p className="text-xs text-muted-foreground truncate">{log.resourceName}</p>
                        )}
                        <p className="text-xs text-muted-foreground mt-0.5">
                          {formatDistanceToNow(log.timestamp, { addSuffix: true })}
                        </p>
                      </div>
                    </div>
                  );
                })}
              </div>
            )}
            {isAdmin && logs.length > 5 && (
              <a
                href="/admin/activity-log"
                className="block text-center text-sm text-primary hover:underline mt-4"
              >
                View all activity â†’
              </a>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default AdminDashboard;
--- FILE END: src\pages\admin\AdminDashboard.tsx ---


--- FILE START: src\pages\admin\AdminEditorial.tsx ---
import { useState, useEffect } from 'react';
import { Save, Pen, MessageCircle, GraduationCap, Eye, Edit, Trash2, Plus, FileText, Download, Lock } from 'lucide-react';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { Switch } from '@/components/ui/switch';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Badge } from '@/components/ui/badge';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import {
  defaultBenefits,
  defaultDepartments,
  defaultFAQs,
  defaultPageContent,
  mockApplications,
  iconMap,
  type InternshipBenefit,
  type InternshipDepartment,
  type InternshipFAQ,
  type InternshipPageContent,
  type InternshipApplication
} from '@/data/internshipData';
import { toast } from 'sonner';
import { format } from 'date-fns';

// Mock data for editorial settings
const initialEditorialSettings = {
  showEditorialSection: true,
  maxEditorials: 4,
  editorialIds: ['8', '16'],
  showCommentsSection: true,
  maxComments: 4,
  moderateComments: true
};

// Mock internship settings
const initialInternshipSettings = {
  acceptingApplications: true,
  showBannerOnHomepage: true,
  requirePortfolio: false,
  autoReplyEnabled: true
};

const AdminEditorial = () => {
  const { hasPermission } = useAdminAuth();
  const [editorialSettings, setEditorialSettings] = useState(initialEditorialSettings);
  const [internshipSettings, setInternshipSettings] = useState(initialInternshipSettings);
  const [applications, setApplications] = useState<InternshipApplication[]>(mockApplications);
  const [selectedApplication, setSelectedApplication] = useState<InternshipApplication | null>(null);

  // Load articles for selection
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  useEffect(() => {
    const loadArticles = () => setArticlesList(getArticles());
    loadArticles();

    window.addEventListener('articlesUpdated', loadArticles);
    return () => window.removeEventListener('articlesUpdated', loadArticles);
  }, []);

  const canManageEditorial = hasPermission('manageEditorial');

  // If user doesn't have permission, show restricted view
  if (!canManageEditorial) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to manage editorial and internship settings. Only administrators can access this section.
        </p>
      </div>
    );
  }

  // Internship content management
  const [benefits, setBenefits] = useState<InternshipBenefit[]>(defaultBenefits);
  const [departments, setDepartments] = useState<InternshipDepartment[]>(defaultDepartments);
  const [faqs, setFaqs] = useState<InternshipFAQ[]>(defaultFAQs);
  const [pageContent, setPageContent] = useState<InternshipPageContent>(defaultPageContent);

  // Dialog states
  const [editingBenefit, setEditingBenefit] = useState<InternshipBenefit | null>(null);
  const [editingDepartment, setEditingDepartment] = useState<InternshipDepartment | null>(null);
  const [editingFaq, setEditingFaq] = useState<InternshipFAQ | null>(null);
  const [isBenefitDialogOpen, setIsBenefitDialogOpen] = useState(false);
  const [isDepartmentDialogOpen, setIsDepartmentDialogOpen] = useState(false);
  const [isFaqDialogOpen, setIsFaqDialogOpen] = useState(false);

  // Allow all non-rejected articles to be selected for editorial section
  const editorialArticles = articlesList.filter(a => (a.status as string) !== 'rejected');

  const getStatusBadge = (status: string) => {
    const colors = {
      pending: 'bg-yellow-500',
      reviewed: 'bg-blue-500',
      shortlisted: 'bg-green-500',
      rejected: 'bg-red-500'
    };
    return colors[status as keyof typeof colors] || 'bg-gray-500';
  };

  const handleSaveEditorialSettings = () => {
    toast.success('Editorial settings saved successfully');
  };

  const handleSaveInternshipSettings = () => {
    toast.success('Internship settings saved successfully');
  };

  const handleSavePageContent = () => {
    // When connected to Cloud, this will update the database
    toast.success('Page content saved successfully');
  };

  const updateApplicationStatus = (id: string, status: string) => {
    setApplications(applications.map(app =>
      app.id === id ? { ...app, status: status as InternshipApplication['status'] } : app
    ));
    toast.success(`Application status updated to ${status}`);
  };

  // Benefit CRUD
  const handleSaveBenefit = (benefit: InternshipBenefit) => {
    if (editingBenefit) {
      setBenefits(benefits.map(b => b.id === benefit.id ? benefit : b));
      toast.success('Benefit updated successfully');
    } else {
      const newBenefit = { ...benefit, id: Date.now().toString(), order: benefits.length + 1 };
      setBenefits([...benefits, newBenefit]);
      toast.success('Benefit added successfully');
    }
    setIsBenefitDialogOpen(false);
    setEditingBenefit(null);
  };

  const handleDeleteBenefit = (id: string) => {
    if (confirm('Are you sure you want to delete this benefit?')) {
      setBenefits(benefits.filter(b => b.id !== id));
      toast.success('Benefit deleted successfully');
    }
  };

  // Department CRUD
  const handleSaveDepartment = (department: InternshipDepartment) => {
    if (editingDepartment) {
      setDepartments(departments.map(d => d.id === department.id ? department : d));
      toast.success('Department updated successfully');
    } else {
      const newDepartment = { ...department, id: Date.now().toString(), order: departments.length + 1 };
      setDepartments([...departments, newDepartment]);
      toast.success('Department added successfully');
    }
    setIsDepartmentDialogOpen(false);
    setEditingDepartment(null);
  };

  const handleDeleteDepartment = (id: string) => {
    if (confirm('Are you sure you want to delete this department?')) {
      setDepartments(departments.filter(d => d.id !== id));
      toast.success('Department deleted successfully');
    }
  };

  // FAQ CRUD
  const handleSaveFaq = (faq: InternshipFAQ) => {
    if (editingFaq) {
      setFaqs(faqs.map(f => f.id === faq.id ? faq : f));
      toast.success('FAQ updated successfully');
    } else {
      const newFaq = { ...faq, id: Date.now().toString(), order: faqs.length + 1 };
      setFaqs([...faqs, newFaq]);
      toast.success('FAQ added successfully');
    }
    setIsFaqDialogOpen(false);
    setEditingFaq(null);
  };

  const handleDeleteFaq = (id: string) => {
    if (confirm('Are you sure you want to delete this FAQ?')) {
      setFaqs(faqs.filter(f => f.id !== id));
      toast.success('FAQ deleted successfully');
    }
  };

  return (
    <div>
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground">Editorial & Internship Management</h1>
          <p className="text-muted-foreground text-sm mt-1">
            Manage editorial content, comments, and internship applications
          </p>
        </div>
      </div>

      <Tabs defaultValue="editorial" className="space-y-6">
        <TabsList className="grid w-full grid-cols-4 lg:w-auto lg:inline-flex">
          <TabsTrigger value="editorial" className="gap-2">
            <Pen className="h-4 w-4" />
            <span className="hidden sm:inline">Editorial</span>
          </TabsTrigger>
          <TabsTrigger value="comments" className="gap-2">
            <MessageCircle className="h-4 w-4" />
            <span className="hidden sm:inline">Comments</span>
          </TabsTrigger>
          <TabsTrigger value="internship" className="gap-2">
            <GraduationCap className="h-4 w-4" />
            <span className="hidden sm:inline">Internship</span>
          </TabsTrigger>
          <TabsTrigger value="internship-content" className="gap-2">
            <Edit className="h-4 w-4" />
            <span className="hidden sm:inline">Page Content</span>
          </TabsTrigger>
        </TabsList>

        {/* Editorial Settings Tab */}
        <TabsContent value="editorial" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <Pen className="h-5 w-5" />
                Editorial Section Settings
              </CardTitle>
              <CardDescription>
                Configure how editorials appear on the homepage
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <Label>Show Editorial Section</Label>
                  <p className="text-sm text-muted-foreground">Display editorial section on homepage</p>
                </div>
                <Switch
                  checked={editorialSettings.showEditorialSection}
                  onCheckedChange={(checked) =>
                    setEditorialSettings({ ...editorialSettings, showEditorialSection: checked })
                  }
                />
              </div>

              <div>
                <Label>Maximum Editorials to Display</Label>
                <Input
                  type="number"
                  value={editorialSettings.maxEditorials}
                  onChange={(e) =>
                    setEditorialSettings({ ...editorialSettings, maxEditorials: parseInt(e.target.value) || 4 })
                  }
                  min={1}
                  max={10}
                  className="w-24 mt-2"
                />
              </div>

              <div>
                <Label className="mb-2 block">Featured Editorial Articles</Label>
                <div className="space-y-2">
                  {editorialArticles.map((article) => (
                    <div key={article.id} className="flex items-center gap-3 p-3 rounded-lg bg-muted">
                      <input
                        type="checkbox"
                        checked={editorialSettings.editorialIds.includes(article.id)}
                        onChange={(e) => {
                          if (e.target.checked) {
                            setEditorialSettings({
                              ...editorialSettings,
                              editorialIds: [...editorialSettings.editorialIds, article.id]
                            });
                          } else {
                            setEditorialSettings({
                              ...editorialSettings,
                              editorialIds: editorialSettings.editorialIds.filter(id => id !== article.id)
                            });
                          }
                        }}
                        className="h-4 w-4"
                      />
                      <div className="flex-1">
                        <p className="text-sm font-medium">{article.title}</p>
                        <p className="text-xs text-muted-foreground">By {article.author.name}</p>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <Button onClick={handleSaveEditorialSettings}>
                <Save className="mr-2 h-4 w-4" /> Save Editorial Settings
              </Button>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Comments Settings Tab */}
        <TabsContent value="comments" className="space-y-6">
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <MessageCircle className="h-5 w-5" />
                Comments Section Settings
              </CardTitle>
              <CardDescription>
                Configure how reader comments appear on the homepage
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between">
                <div>
                  <Label>Show Comments Section</Label>
                  <p className="text-sm text-muted-foreground">Display reader comments on homepage</p>
                </div>
                <Switch
                  checked={editorialSettings.showCommentsSection}
                  onCheckedChange={(checked) =>
                    setEditorialSettings({ ...editorialSettings, showCommentsSection: checked })
                  }
                />
              </div>

              <div className="flex items-center justify-between">
                <div>
                  <Label>Moderate Comments</Label>
                  <p className="text-sm text-muted-foreground">Require approval before publishing comments</p>
                </div>
                <Switch
                  checked={editorialSettings.moderateComments}
                  onCheckedChange={(checked) =>
                    setEditorialSettings({ ...editorialSettings, moderateComments: checked })
                  }
                />
              </div>

              <div>
                <Label>Maximum Comments to Display</Label>
                <Input
                  type="number"
                  value={editorialSettings.maxComments}
                  onChange={(e) =>
                    setEditorialSettings({ ...editorialSettings, maxComments: parseInt(e.target.value) || 4 })
                  }
                  min={1}
                  max={12}
                  className="w-24 mt-2"
                />
              </div>

              <Button onClick={handleSaveEditorialSettings}>
                <Save className="mr-2 h-4 w-4" /> Save Comments Settings
              </Button>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Internship Tab */}
        <TabsContent value="internship" className="space-y-6">
          {/* Settings Card */}
          <Card>
            <CardHeader>
              <CardTitle className="flex items-center gap-2">
                <GraduationCap className="h-5 w-5" />
                Internship Program Settings
              </CardTitle>
              <CardDescription>
                Configure internship program and application settings
              </CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="grid gap-4 sm:grid-cols-2">
                <div className="flex items-center justify-between p-4 rounded-lg bg-muted">
                  <div>
                    <Label>Accepting Applications</Label>
                    <p className="text-sm text-muted-foreground">Allow new internship applications</p>
                  </div>
                  <Switch
                    checked={internshipSettings.acceptingApplications}
                    onCheckedChange={(checked) =>
                      setInternshipSettings({ ...internshipSettings, acceptingApplications: checked })
                    }
                  />
                </div>

                <div className="flex items-center justify-between p-4 rounded-lg bg-muted">
                  <div>
                    <Label>Show Banner on Homepage</Label>
                    <p className="text-sm text-muted-foreground">Display internship CTA banner</p>
                  </div>
                  <Switch
                    checked={internshipSettings.showBannerOnHomepage}
                    onCheckedChange={(checked) =>
                      setInternshipSettings({ ...internshipSettings, showBannerOnHomepage: checked })
                    }
                  />
                </div>

                <div className="flex items-center justify-between p-4 rounded-lg bg-muted">
                  <div>
                    <Label>Require Portfolio</Label>
                    <p className="text-sm text-muted-foreground">Make portfolio URL mandatory</p>
                  </div>
                  <Switch
                    checked={internshipSettings.requirePortfolio}
                    onCheckedChange={(checked) =>
                      setInternshipSettings({ ...internshipSettings, requirePortfolio: checked })
                    }
                  />
                </div>

                <div className="flex items-center justify-between p-4 rounded-lg bg-muted">
                  <div>
                    <Label>Auto-Reply Enabled</Label>
                    <p className="text-sm text-muted-foreground">Send confirmation emails</p>
                  </div>
                  <Switch
                    checked={internshipSettings.autoReplyEnabled}
                    onCheckedChange={(checked) =>
                      setInternshipSettings({ ...internshipSettings, autoReplyEnabled: checked })
                    }
                  />
                </div>
              </div>

              <Button onClick={handleSaveInternshipSettings}>
                <Save className="mr-2 h-4 w-4" /> Save Internship Settings
              </Button>
            </CardContent>
          </Card>

          {/* Applications Card */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <div>
                  <CardTitle>Internship Applications</CardTitle>
                  <CardDescription>Review and manage internship applications</CardDescription>
                </div>
                <Badge variant="outline">{applications.length} Applications</Badge>
              </div>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {applications.map((app) => (
                  <div key={app.id} className="flex flex-col sm:flex-row sm:items-center gap-4 p-4 rounded-lg bg-muted">
                    <div className="flex-1 min-w-0">
                      <div className="flex items-center gap-2 flex-wrap">
                        <h4 className="font-semibold text-foreground">{app.fullName}</h4>
                        <Badge className={`${getStatusBadge(app.status)} text-white border-0 text-xs`}>
                          {app.status}
                        </Badge>
                        {app.cvFileName && (
                          <Badge variant="outline" className="text-xs">
                            <FileText className="h-3 w-3 mr-1" />
                            CV Attached
                          </Badge>
                        )}
                      </div>
                      <p className="text-sm text-muted-foreground">{app.email}</p>
                      <div className="flex items-center gap-4 mt-1 text-xs text-muted-foreground">
                        <span>{app.university}</span>
                        <span className="capitalize">{app.department}</span>
                        <span>{format(app.submittedAt, 'MMM d, yyyy')}</span>
                      </div>
                    </div>
                    <div className="flex gap-2">
                      <Dialog>
                        <DialogTrigger asChild>
                          <Button variant="outline" size="sm" onClick={() => setSelectedApplication(app)}>
                            <Eye className="h-4 w-4 mr-1" /> View
                          </Button>
                        </DialogTrigger>
                        <DialogContent className="max-w-lg">
                          <DialogHeader>
                            <DialogTitle>Application Details</DialogTitle>
                          </DialogHeader>
                          {selectedApplication && (
                            <div className="space-y-4 mt-4">
                              <div className="grid gap-4 sm:grid-cols-2">
                                <div>
                                  <Label className="text-xs text-muted-foreground">Full Name</Label>
                                  <p className="font-medium">{selectedApplication.fullName}</p>
                                </div>
                                <div>
                                  <Label className="text-xs text-muted-foreground">Email</Label>
                                  <p className="font-medium">{selectedApplication.email}</p>
                                </div>
                                <div>
                                  <Label className="text-xs text-muted-foreground">Phone</Label>
                                  <p className="font-medium">{selectedApplication.phone}</p>
                                </div>
                                <div>
                                  <Label className="text-xs text-muted-foreground">University</Label>
                                  <p className="font-medium">{selectedApplication.university}</p>
                                </div>
                                <div>
                                  <Label className="text-xs text-muted-foreground">Department</Label>
                                  <p className="font-medium capitalize">{selectedApplication.department}</p>
                                </div>
                                <div>
                                  <Label className="text-xs text-muted-foreground">Portfolio</Label>
                                  <p className="font-medium">{selectedApplication.portfolio || 'Not provided'}</p>
                                </div>
                              </div>

                              {selectedApplication.cvFileName && (
                                <div>
                                  <Label className="text-xs text-muted-foreground">CV/Resume</Label>
                                  <div className="flex items-center gap-2 mt-1 p-3 rounded-lg bg-muted">
                                    <FileText className="h-5 w-5 text-primary" />
                                    <span className="flex-1 text-sm font-medium">{selectedApplication.cvFileName}</span>
                                    <Button size="sm" variant="outline">
                                      <Download className="h-4 w-4 mr-1" /> Download
                                    </Button>
                                  </div>
                                </div>
                              )}

                              <div>
                                <Label className="text-xs text-muted-foreground">Cover Letter</Label>
                                <p className="mt-1 text-sm p-3 bg-muted rounded-lg">{selectedApplication.coverLetter}</p>
                              </div>
                              <div className="flex gap-2">
                                <Button
                                  size="sm"
                                  className="bg-green-500 hover:bg-green-600"
                                  onClick={() => updateApplicationStatus(selectedApplication.id, 'shortlisted')}
                                >
                                  Shortlist
                                </Button>
                                <Button
                                  size="sm"
                                  variant="outline"
                                  onClick={() => updateApplicationStatus(selectedApplication.id, 'reviewed')}
                                >
                                  Mark Reviewed
                                </Button>
                                <Button
                                  size="sm"
                                  variant="destructive"
                                  onClick={() => updateApplicationStatus(selectedApplication.id, 'rejected')}
                                >
                                  Reject
                                </Button>
                              </div>
                            </div>
                          )}
                        </DialogContent>
                      </Dialog>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* Internship Page Content Tab */}
        <TabsContent value="internship-content" className="space-y-6">
          {/* Page Content Card */}
          <Card>
            <CardHeader>
              <CardTitle>Page Content & Texts</CardTitle>
              <CardDescription>Edit the main text content of the internship page</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              <div className="grid gap-4 sm:grid-cols-2">
                <div className="space-y-2">
                  <Label>Hero Title</Label>
                  <Input
                    value={pageContent.heroTitle}
                    onChange={(e) => setPageContent({ ...pageContent, heroTitle: e.target.value })}
                  />
                </div>
                <div className="space-y-2">
                  <Label>Hero Subtitle (Badge)</Label>
                  <Input
                    value={pageContent.heroSubtitle}
                    onChange={(e) => setPageContent({ ...pageContent, heroSubtitle: e.target.value })}
                  />
                </div>
              </div>
              <div className="space-y-2">
                <Label>Hero Description</Label>
                <Textarea
                  value={pageContent.heroDescription}
                  onChange={(e) => setPageContent({ ...pageContent, heroDescription: e.target.value })}
                  rows={2}
                />
              </div>
              <div className="grid gap-4 sm:grid-cols-2">
                <div className="space-y-2">
                  <Label>Why Join Title</Label>
                  <Input
                    value={pageContent.whyJoinTitle}
                    onChange={(e) => setPageContent({ ...pageContent, whyJoinTitle: e.target.value })}
                  />
                </div>
                <div className="space-y-2">
                  <Label>Departments Title</Label>
                  <Input
                    value={pageContent.departmentsTitle}
                    onChange={(e) => setPageContent({ ...pageContent, departmentsTitle: e.target.value })}
                  />
                </div>
              </div>
              <div className="space-y-2">
                <Label>Why Join Description</Label>
                <Textarea
                  value={pageContent.whyJoinDescription}
                  onChange={(e) => setPageContent({ ...pageContent, whyJoinDescription: e.target.value })}
                  rows={2}
                />
              </div>
              <div className="grid gap-4 sm:grid-cols-2">
                <div className="space-y-2">
                  <Label>Form Title</Label>
                  <Input
                    value={pageContent.formTitle}
                    onChange={(e) => setPageContent({ ...pageContent, formTitle: e.target.value })}
                  />
                </div>
                <div className="space-y-2">
                  <Label>FAQ Title</Label>
                  <Input
                    value={pageContent.faqTitle}
                    onChange={(e) => setPageContent({ ...pageContent, faqTitle: e.target.value })}
                  />
                </div>
              </div>
              <div className="space-y-2">
                <Label>Form Description</Label>
                <Textarea
                  value={pageContent.formDescription}
                  onChange={(e) => setPageContent({ ...pageContent, formDescription: e.target.value })}
                  rows={2}
                />
              </div>
              <Button onClick={handleSavePageContent}>
                <Save className="mr-2 h-4 w-4" /> Save Page Content
              </Button>
            </CardContent>
          </Card>

          {/* Benefits Card */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <div>
                  <CardTitle>Benefits</CardTitle>
                  <CardDescription>Manage internship benefits displayed on the page</CardDescription>
                </div>
                <Dialog open={isBenefitDialogOpen} onOpenChange={setIsBenefitDialogOpen}>
                  <DialogTrigger asChild>
                    <Button size="sm" onClick={() => setEditingBenefit(null)}>
                      <Plus className="h-4 w-4 mr-1" /> Add Benefit
                    </Button>
                  </DialogTrigger>
                  <DialogContent>
                    <DialogHeader>
                      <DialogTitle>{editingBenefit ? 'Edit Benefit' : 'Add Benefit'}</DialogTitle>
                    </DialogHeader>
                    <BenefitForm
                      benefit={editingBenefit}
                      onSave={handleSaveBenefit}
                      onCancel={() => setIsBenefitDialogOpen(false)}
                    />
                  </DialogContent>
                </Dialog>
              </div>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {benefits.sort((a, b) => a.order - b.order).map((benefit) => (
                  <div key={benefit.id} className="flex items-center gap-4 p-4 rounded-lg bg-muted">
                    <Badge variant="outline" className="text-xs">{benefit.iconName}</Badge>
                    <div className="flex-1 min-w-0">
                      <h4 className="font-semibold text-sm">{benefit.title}</h4>
                      <p className="text-xs text-muted-foreground truncate">{benefit.description}</p>
                    </div>
                    <div className="flex gap-2">
                      <Button
                        size="icon"
                        variant="ghost"
                        onClick={() => {
                          setEditingBenefit(benefit);
                          setIsBenefitDialogOpen(true);
                        }}
                      >
                        <Edit className="h-4 w-4" />
                      </Button>
                      <Button
                        size="icon"
                        variant="ghost"
                        className="text-destructive"
                        onClick={() => handleDeleteBenefit(benefit.id)}
                      >
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* Departments Card */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <div>
                  <CardTitle>Departments</CardTitle>
                  <CardDescription>Manage internship departments</CardDescription>
                </div>
                <Dialog open={isDepartmentDialogOpen} onOpenChange={setIsDepartmentDialogOpen}>
                  <DialogTrigger asChild>
                    <Button size="sm" onClick={() => setEditingDepartment(null)}>
                      <Plus className="h-4 w-4 mr-1" /> Add Department
                    </Button>
                  </DialogTrigger>
                  <DialogContent>
                    <DialogHeader>
                      <DialogTitle>{editingDepartment ? 'Edit Department' : 'Add Department'}</DialogTitle>
                    </DialogHeader>
                    <DepartmentForm
                      department={editingDepartment}
                      onSave={handleSaveDepartment}
                      onCancel={() => setIsDepartmentDialogOpen(false)}
                    />
                  </DialogContent>
                </Dialog>
              </div>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {departments.sort((a, b) => a.order - b.order).map((dept) => (
                  <div key={dept.id} className="flex items-center gap-4 p-4 rounded-lg bg-muted">
                    <Badge variant="outline" className="text-xs">{dept.iconName}</Badge>
                    <div className="flex-1 min-w-0">
                      <h4 className="font-semibold text-sm">{dept.name}</h4>
                      <p className="text-xs text-muted-foreground truncate">{dept.description}</p>
                    </div>
                    <div className="flex gap-2">
                      <Button
                        size="icon"
                        variant="ghost"
                        onClick={() => {
                          setEditingDepartment(dept);
                          setIsDepartmentDialogOpen(true);
                        }}
                      >
                        <Edit className="h-4 w-4" />
                      </Button>
                      <Button
                        size="icon"
                        variant="ghost"
                        className="text-destructive"
                        onClick={() => handleDeleteDepartment(dept.id)}
                      >
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>

          {/* FAQs Card */}
          <Card>
            <CardHeader>
              <div className="flex items-center justify-between">
                <div>
                  <CardTitle>FAQs</CardTitle>
                  <CardDescription>Manage frequently asked questions</CardDescription>
                </div>
                <Dialog open={isFaqDialogOpen} onOpenChange={setIsFaqDialogOpen}>
                  <DialogTrigger asChild>
                    <Button size="sm" onClick={() => setEditingFaq(null)}>
                      <Plus className="h-4 w-4 mr-1" /> Add FAQ
                    </Button>
                  </DialogTrigger>
                  <DialogContent>
                    <DialogHeader>
                      <DialogTitle>{editingFaq ? 'Edit FAQ' : 'Add FAQ'}</DialogTitle>
                    </DialogHeader>
                    <FAQForm
                      faq={editingFaq}
                      onSave={handleSaveFaq}
                      onCancel={() => setIsFaqDialogOpen(false)}
                    />
                  </DialogContent>
                </Dialog>
              </div>
            </CardHeader>
            <CardContent>
              <div className="space-y-3">
                {faqs.sort((a, b) => a.order - b.order).map((faq) => (
                  <div key={faq.id} className="flex items-center gap-4 p-4 rounded-lg bg-muted">
                    <div className="flex-1 min-w-0">
                      <h4 className="font-semibold text-sm">{faq.question}</h4>
                      <p className="text-xs text-muted-foreground truncate">{faq.answer}</p>
                    </div>
                    <div className="flex gap-2">
                      <Button
                        size="icon"
                        variant="ghost"
                        onClick={() => {
                          setEditingFaq(faq);
                          setIsFaqDialogOpen(true);
                        }}
                      >
                        <Edit className="h-4 w-4" />
                      </Button>
                      <Button
                        size="icon"
                        variant="ghost"
                        className="text-destructive"
                        onClick={() => handleDeleteFaq(faq.id)}
                      >
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

// Benefit Form Component
const BenefitForm = ({
  benefit,
  onSave,
  onCancel
}: {
  benefit: InternshipBenefit | null;
  onSave: (benefit: InternshipBenefit) => void;
  onCancel: () => void;
}) => {
  const [formData, setFormData] = useState<Partial<InternshipBenefit>>(
    benefit || { title: '', description: '', iconName: 'BookOpen', order: 1 }
  );

  return (
    <div className="space-y-4 mt-4">
      <div className="space-y-2">
        <Label>Title</Label>
        <Input
          value={formData.title || ''}
          onChange={(e) => setFormData({ ...formData, title: e.target.value })}
          placeholder="Benefit title"
        />
      </div>
      <div className="space-y-2">
        <Label>Description</Label>
        <Textarea
          value={formData.description || ''}
          onChange={(e) => setFormData({ ...formData, description: e.target.value })}
          placeholder="Benefit description"
          rows={3}
        />
      </div>
      <div className="space-y-2">
        <Label>Icon</Label>
        <Select
          value={formData.iconName}
          onValueChange={(value) => setFormData({ ...formData, iconName: value })}
        >
          <SelectTrigger>
            <SelectValue placeholder="Select an icon" />
          </SelectTrigger>
          <SelectContent>
            {Object.keys(iconMap).map((icon) => (
              <SelectItem key={icon} value={icon}>{icon}</SelectItem>
            ))}
          </SelectContent>
        </Select>
      </div>
      <div className="space-y-2">
        <Label>Order</Label>
        <Input
          type="number"
          value={formData.order || 1}
          onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) || 1 })}
          min={1}
        />
      </div>
      <div className="flex gap-2 justify-end">
        <Button variant="outline" onClick={onCancel}>Cancel</Button>
        <Button onClick={() => onSave(formData as InternshipBenefit)}>Save</Button>
      </div>
    </div>
  );
};

// Department Form Component
const DepartmentForm = ({
  department,
  onSave,
  onCancel
}: {
  department: InternshipDepartment | null;
  onSave: (department: InternshipDepartment) => void;
  onCancel: () => void;
}) => {
  const [formData, setFormData] = useState<Partial<InternshipDepartment>>(
    department || { name: '', description: '', iconName: 'Briefcase', order: 1 }
  );

  return (
    <div className="space-y-4 mt-4">
      <div className="space-y-2">
        <Label>Name</Label>
        <Input
          value={formData.name || ''}
          onChange={(e) => setFormData({ ...formData, name: e.target.value })}
          placeholder="Department name"
        />
      </div>
      <div className="space-y-2">
        <Label>Description</Label>
        <Textarea
          value={formData.description || ''}
          onChange={(e) => setFormData({ ...formData, description: e.target.value })}
          placeholder="Department description"
          rows={3}
        />
      </div>
      <div className="space-y-2">
        <Label>Icon</Label>
        <Select
          value={formData.iconName}
          onValueChange={(value) => setFormData({ ...formData, iconName: value })}
        >
          <SelectTrigger>
            <SelectValue placeholder="Select an icon" />
          </SelectTrigger>
          <SelectContent>
            {Object.keys(iconMap).map((icon) => (
              <SelectItem key={icon} value={icon}>{icon}</SelectItem>
            ))}
          </SelectContent>
        </Select>
      </div>
      <div className="space-y-2">
        <Label>Order</Label>
        <Input
          type="number"
          value={formData.order || 1}
          onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) || 1 })}
          min={1}
        />
      </div>
      <div className="flex gap-2 justify-end">
        <Button variant="outline" onClick={onCancel}>Cancel</Button>
        <Button onClick={() => onSave(formData as InternshipDepartment)}>Save</Button>
      </div>
    </div>
  );
};

// FAQ Form Component
const FAQForm = ({
  faq,
  onSave,
  onCancel
}: {
  faq: InternshipFAQ | null;
  onSave: (faq: InternshipFAQ) => void;
  onCancel: () => void;
}) => {
  const [formData, setFormData] = useState<Partial<InternshipFAQ>>(
    faq || { question: '', answer: '', order: 1 }
  );

  return (
    <div className="space-y-4 mt-4">
      <div className="space-y-2">
        <Label>Question</Label>
        <Input
          value={formData.question || ''}
          onChange={(e) => setFormData({ ...formData, question: e.target.value })}
          placeholder="FAQ question"
        />
      </div>
      <div className="space-y-2">
        <Label>Answer</Label>
        <Textarea
          value={formData.answer || ''}
          onChange={(e) => setFormData({ ...formData, answer: e.target.value })}
          placeholder="FAQ answer"
          rows={4}
        />
      </div>
      <div className="space-y-2">
        <Label>Order</Label>
        <Input
          type="number"
          value={formData.order || 1}
          onChange={(e) => setFormData({ ...formData, order: parseInt(e.target.value) || 1 })}
          min={1}
        />
      </div>
      <div className="flex gap-2 justify-end">
        <Button variant="outline" onClick={onCancel}>Cancel</Button>
        <Button onClick={() => onSave(formData as InternshipFAQ)}>Save</Button>
      </div>
    </div>
  );
};

export default AdminEditorial;

--- FILE END: src\pages\admin\AdminEditorial.tsx ---


--- FILE START: src\pages\admin\AdminFeatured.tsx ---
import { useState, useEffect } from 'react';
import { Save, Newspaper, Layout, Settings2, X, Play, Pause } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { Switch } from '@/components/ui/switch';
import { Slider } from '@/components/ui/slider';
import { Badge } from '@/components/ui/badge';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { FeaturedSettings, getFeaturedSettings, saveFeaturedSettings } from '@/lib/settingsService';
import { toast } from 'sonner';
import {
  DndContext,
  closestCenter,
  DragOverlay,
} from '@dnd-kit/core';
import {
  SortableContext,
  verticalListSortingStrategy,
  useSortable,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { useTouchSortable } from '@/hooks/useTouchSortable';
import { GripVertical } from 'lucide-react';
import { cn } from '@/lib/utils';

interface DraggableArticleProps {
  id: string;
  index: number;
  article: {
    title: string;
    category: string;
    featuredImage?: string;
    hasVideo?: boolean;
  };
  showImage?: boolean;
  onRemove: () => void;
  getCategoryColor: (category: string) => string;
}

const DraggableArticle = ({ id, index, article, showImage, onRemove, getCategoryColor }: DraggableArticleProps) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  return (
    <div
      ref={setNodeRef}
      style={style}
      className={cn(
        'group relative flex items-start sm:items-center gap-3 p-3 bg-card border border-border rounded-xl shadow-sm transition-all hover:shadow-md touch-manipulation',
        isDragging ? 'z-50 opacity-90 shadow-xl scale-[1.02] bg-accent/50 border-primary/50' : 'hover:border-primary/20'
      )}
    >
      <div className="absolute left-0 top-0 bottom-0 w-1 bg-primary/0 group-hover:bg-primary/20 transition-colors rounded-l-xl" />

      <button
        type="button"
        className={cn(
          'flex-shrink-0 p-2 -ml-1 rounded-lg cursor-grab active:cursor-grabbing touch-manipulation',
          'hover:bg-muted text-muted-foreground hover:text-foreground transition-colors',
          'focus:outline-none focus:ring-2 focus:ring-primary/20',
          isDragging && 'cursor-grabbing text-primary'
        )}
        {...attributes}
        {...listeners}
      >
        <GripVertical className="h-5 w-5" />
      </button>

      <span className="text-3xl font-black italic text-muted-foreground/20 group-hover:text-primary/20 transition-colors select-none">
        #{index + 1}
      </span>

      {showImage && article.featuredImage && (
        <div className="h-10 w-14 sm:h-12 sm:w-20 flex-shrink-0 overflow-hidden rounded-md bg-muted shadow-sm">
          <img
            src={article.featuredImage}
            alt=""
            className="h-full w-full object-cover"
          />
        </div>
      )}

      <div className="flex-1 min-w-0 py-0.5">
        <p className="text-sm font-semibold text-foreground line-clamp-2 pr-6 leading-tight break-words">{article.title}</p>
        <div className="flex items-center gap-2 mt-1.5">
          <Badge className={`${getCategoryColor(article.category)} text-white text-[10px] border-0 h-5 px-1.5 shadow-none`}>
            {article.category}
          </Badge>
          {article.hasVideo && (
            <Badge variant="outline" className="text-[10px] h-5 px-1.5 bg-background/50">Video</Badge>
          )}
        </div>
      </div>

      <Button
        variant="ghost"
        size="icon"
        className="h-8 w-8 text-muted-foreground hover:text-destructive hover:bg-destructive/10 absolute right-2 top-2 sm:relative sm:top-auto sm:right-auto transition-colors"
        onClick={onRemove}
      >
        <X className="h-4 w-4" />
      </Button>
    </div>
  );
};

const DragOverlayItem = ({ article, showImage, getCategoryColor }: {
  article: { title: string; category: string; featuredImage?: string; hasVideo?: boolean };
  showImage?: boolean;
  getCategoryColor: (category: string) => string;
}) => (
  <div className="relative flex items-center gap-3 p-3 bg-card border-2 border-primary rounded-lg shadow-xl opacity-95 max-w-[calc(100vw-2rem)] overflow-hidden">
    <GripVertical className="h-4 w-4 text-primary" />
    <span className="text-xs font-bold text-muted-foreground w-4 flex-shrink-0 text-center">â€¢</span>

    {showImage && article.featuredImage && (
      <img
        src={article.featuredImage}
        alt=""
        className="w-10 h-10 object-cover rounded flex-shrink-0 bg-muted"
      />
    )}

    <div className="flex-1 min-w-0">
      <p className="text-sm font-medium line-clamp-2 pr-6 leading-tight break-words">{article.title}</p>
      <div className="flex items-center gap-2 mt-1">
        <Badge className={`${getCategoryColor(article.category)} text-white text-[10px] border-0 h-5 px-1.5`}>
          {article.category}
        </Badge>
        {article.hasVideo && (
          <Badge variant="outline" className="text-[9px] h-5 px-1.5">Video</Badge>
        )}
      </div>
    </div>
  </div>
);

const AdminFeatured = () => {
  const [articlesList, setArticlesList] = useState<Article[]>([]);
  const [settings, setSettings] = useState<FeaturedSettings>(getFeaturedSettings());
  const [breakingNewsIds, setBreakingNewsIds] = useState<string[]>(settings.breakingNewsIds);
  const [heroFeaturedIds, setHeroFeaturedIds] = useState<string[]>(settings.heroFeaturedIds);
  const [heroSideArticleIds, setHeroSideArticleIds] = useState<string[]>(settings.heroSideArticleIds || []);

  useEffect(() => {
    const loadArticles = () => setArticlesList(getArticles());
    loadArticles();

    window.addEventListener('articlesUpdated', loadArticles);
    return () => window.removeEventListener('articlesUpdated', loadArticles);
  }, []);

  // Allow all articles (drafts, scheduled, published) to be featured, except rejected ones
  const availableArticles = articlesList.filter(a => (a.status as string) !== 'rejected');

  const getArticleById = (id: string) => availableArticles.find(a => a.id === id);

  const addToBreakingNews = (id: string) => {
    if (!breakingNewsIds.includes(id) && breakingNewsIds.length < settings.maxBreakingNews) {
      setBreakingNewsIds(prev => [...prev, id]);
    }
  };

  const removeFromBreakingNews = (id: string) => {
    setBreakingNewsIds(prev => prev.filter(i => i !== id));
  };

  const addToHeroFeatured = (id: string) => {
    if (!heroFeaturedIds.includes(id) && heroFeaturedIds.length < settings.maxHeroArticles) {
      setHeroFeaturedIds(prev => [...prev, id]);
    }
  };

  const removeFromHeroFeatured = (id: string) => {
    setHeroFeaturedIds(prev => prev.filter(i => i !== id));
  };

  const addToSideArticles = (id: string) => {
    if (!heroSideArticleIds.includes(id) && heroSideArticleIds.length < 4) {
      setHeroSideArticleIds(prev => [...prev, id]);
    }
  };

  const removeFromSideArticles = (id: string) => {
    setHeroSideArticleIds(prev => prev.filter(i => i !== id));
  };

  const handleSave = () => {
    const newSettings: FeaturedSettings = {
      ...settings,
      breakingNewsIds,
      heroFeaturedIds,
      heroSideArticleIds
    };
    saveFeaturedSettings(newSettings);
    setSettings(newSettings);
    toast.success('Featured settings saved successfully');
  };

  const getCategoryColor = (category: string) => {
    const colors: Record<string, string> = {
      national: 'bg-blue-500',
      international: 'bg-purple-500',
      economy: 'bg-amber-500',
      environment: 'bg-emerald-500',
      technology: 'bg-cyan-500',
      sports: 'bg-green-500',
      entertainment: 'bg-fuchsia-500',
    };
    return colors[category] || 'bg-primary';
  };

  // Breaking News drag-and-drop
  const breakingSortable = useTouchSortable({
    items: breakingNewsIds,
    getItemId: (id) => id,
    onReorder: (newIds) => {
      setBreakingNewsIds(newIds);
      toast.success('Breaking news order updated');
    },
  });

  // Hero drag-and-drop
  const heroSortable = useTouchSortable({
    items: heroFeaturedIds,
    getItemId: (id) => id,
    onReorder: (newIds) => {
      setHeroFeaturedIds(newIds);
      toast.success('Hero articles order updated');
    },
  });

  const getActiveArticle = (activeId: string | null) => {
    if (!activeId) return null;
    return getArticleById(activeId);
  };

  return (
    <div className="px-1 sm:px-0">
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Featured Content</h1>
          <p className="text-muted-foreground text-xs sm:text-sm mt-1">
            Control breaking news ticker and hero section
          </p>
        </div>
        <Button onClick={handleSave} size="sm" className="w-full sm:w-auto">
          <Save className="mr-2 h-4 w-4" /> Save Changes
        </Button>
      </div>

      <div className="grid gap-6 lg:grid-cols-2">
        {/* Breaking News Section */}
        <Card>
          <CardHeader className="pb-3 px-3 sm:px-6">
            <div className="flex items-center justify-between gap-2">
              <div className="flex items-center gap-2 min-w-0">
                <Newspaper className="h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0" />
                <CardTitle className="text-sm sm:text-base truncate">Breaking News</CardTitle>
              </div>
              <Badge variant="outline" className="text-xs flex-shrink-0">{breakingNewsIds.length}/{settings.maxBreakingNews}</Badge>
            </div>
            <CardDescription className="text-xs sm:text-sm">
              Drag to reorder â€¢ Touch and hold on mobile
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4 px-3 sm:px-6">
            {/* Settings */}
            <div className="space-y-4 p-4 bg-muted rounded-lg">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  {settings.breakingAutoSwipe ? <Play className="h-4 w-4" /> : <Pause className="h-4 w-4" />}
                  <Label>Auto-swipe</Label>
                </div>
                <Switch
                  checked={settings.breakingAutoSwipe}
                  onCheckedChange={(checked) => setSettings({ ...settings, breakingAutoSwipe: checked })}
                />
              </div>
              <div>
                <Label className="text-xs text-muted-foreground">
                  Swipe Interval: {settings.autoSwipeInterval / 1000}s
                </Label>
                <Slider
                  value={[settings.autoSwipeInterval]}
                  onValueChange={([v]) => setSettings({ ...settings, autoSwipeInterval: v })}
                  min={3000}
                  max={10000}
                  step={1000}
                  className="mt-2"
                />
              </div>
              <div>
                <Label className="text-xs text-muted-foreground">
                  Max Headlines: {settings.maxBreakingNews}
                </Label>
                <Slider
                  value={[settings.maxBreakingNews]}
                  onValueChange={([v]) => setSettings({ ...settings, maxBreakingNews: v })}
                  min={3}
                  max={10}
                  step={1}
                  className="mt-2"
                />
              </div>
            </div>

            {/* Selected Articles with Drag-and-Drop */}
            <div>
              <Label className="text-xs sm:text-sm font-medium">Selected Breaking News Articles</Label>
              <DndContext
                sensors={breakingSortable.sensors}
                collisionDetection={closestCenter}
                onDragStart={breakingSortable.handleDragStart}
                onDragEnd={breakingSortable.handleDragEnd}
                onDragCancel={breakingSortable.handleDragCancel}
              >
                <SortableContext items={breakingNewsIds} strategy={verticalListSortingStrategy}>
                  <div className="space-y-2 mt-2">
                    {breakingNewsIds.map((id, index) => {
                      const article = getArticleById(id);
                      if (!article) return null;
                      return (
                        <DraggableArticle
                          key={id}
                          id={id}
                          index={index}
                          article={article}
                          onRemove={() => removeFromBreakingNews(id)}
                          getCategoryColor={getCategoryColor}
                        />
                      );
                    })}
                  </div>
                </SortableContext>
                <DragOverlay>
                  {breakingSortable.activeId && getActiveArticle(breakingSortable.activeId) && (
                    <DragOverlayItem
                      article={getActiveArticle(breakingSortable.activeId)!}
                      getCategoryColor={getCategoryColor}
                    />
                  )}
                </DragOverlay>
              </DndContext>
            </div>

            {/* Add Article */}
            {breakingNewsIds.length < settings.maxBreakingNews && (
              <div>
                <Label className="text-sm text-muted-foreground">Add Article</Label>
                <Select onValueChange={addToBreakingNews}>
                  <SelectTrigger className="mt-1">
                    <SelectValue placeholder="Select an article to add..." />
                  </SelectTrigger>
                  <SelectContent>
                    {availableArticles
                      .filter(a => !breakingNewsIds.includes(a.id))
                      .map((article) => (
                        <SelectItem key={article.id} value={article.id}>
                          <span className="truncate">
                            {article.title}
                            {article.status !== 'published' && <span className="text-xs text-muted-foreground ml-2">({article.status})</span>}
                          </span>
                        </SelectItem>
                      ))}
                  </SelectContent>
                </Select>
              </div>
            )}
          </CardContent>
        </Card>

        {/* Hero Section */}
        <Card>
          <CardHeader className="pb-3 px-3 sm:px-6">
            <div className="flex items-center justify-between gap-2">
              <div className="flex items-center gap-2 min-w-0">
                <Layout className="h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0" />
                <CardTitle className="text-sm sm:text-base truncate">Hero Section</CardTitle>
              </div>
              <Badge variant="outline" className="text-xs flex-shrink-0">{heroFeaturedIds.length}/{settings.maxHeroArticles}</Badge>
            </div>
            <CardDescription className="text-xs sm:text-sm">
              Drag to reorder â€¢ Touch and hold on mobile
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4 px-3 sm:px-6">
            {/* Settings */}
            <div className="space-y-4 p-4 bg-muted rounded-lg">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-2">
                  {settings.heroAutoSwipe ? <Play className="h-4 w-4" /> : <Pause className="h-4 w-4" />}
                  <Label>Auto-swipe</Label>
                </div>
                <Switch
                  checked={settings.heroAutoSwipe}
                  onCheckedChange={(checked) => setSettings({ ...settings, heroAutoSwipe: checked })}
                />
              </div>
              <div>
                <Label className="text-xs text-muted-foreground">
                  Max Articles: {settings.maxHeroArticles}
                </Label>
                <Slider
                  value={[settings.maxHeroArticles]}
                  onValueChange={([v]) => setSettings({ ...settings, maxHeroArticles: v })}
                  min={3}
                  max={10}
                  step={1}
                  className="mt-2"
                />
              </div>
            </div>

            {/* Selected Articles with Drag-and-Drop */}
            <div>
              <Label className="text-xs sm:text-sm font-medium">Featured Hero Articles</Label>
              <DndContext
                sensors={heroSortable.sensors}
                collisionDetection={closestCenter}
                onDragStart={heroSortable.handleDragStart}
                onDragEnd={heroSortable.handleDragEnd}
                onDragCancel={heroSortable.handleDragCancel}
              >
                <SortableContext items={heroFeaturedIds} strategy={verticalListSortingStrategy}>
                  <div className="space-y-2 mt-2">
                    {heroFeaturedIds.map((id, index) => {
                      const article = getArticleById(id);
                      if (!article) return null;
                      return (
                        <DraggableArticle
                          key={id}
                          id={id}
                          index={index}
                          article={article}
                          showImage
                          onRemove={() => removeFromHeroFeatured(id)}
                          getCategoryColor={getCategoryColor}
                        />
                      );
                    })}
                  </div>
                </SortableContext>
                <DragOverlay>
                  {heroSortable.activeId && getActiveArticle(heroSortable.activeId) && (
                    <DragOverlayItem
                      article={getActiveArticle(heroSortable.activeId)!}
                      showImage
                      getCategoryColor={getCategoryColor}
                    />
                  )}
                </DragOverlay>
              </DndContext>
            </div>

            {/* Add Article */}
            {heroFeaturedIds.length < settings.maxHeroArticles && (
              <div>
                <Label className="text-sm text-muted-foreground">Add Article</Label>
                <Select onValueChange={addToHeroFeatured}>
                  <SelectTrigger className="mt-1">
                    <SelectValue placeholder="Select an article to add..." />
                  </SelectTrigger>
                  <SelectContent>
                    {availableArticles
                      .filter(a => !heroFeaturedIds.includes(a.id))
                      .map((article) => (
                        <SelectItem key={article.id} value={article.id}>
                          <span className="truncate">
                            {article.title}
                            {article.status !== 'published' && <span className="text-xs text-muted-foreground ml-2">({article.status})</span>}
                          </span>
                        </SelectItem>
                      ))}
                  </SelectContent>
                </Select>
              </div>
            )}
          </CardContent>
        </Card>
      </div>

      {/* Preview Info */}
      <Card className="mt-6">
        <CardHeader className="pb-3 px-3 sm:px-6">
          <div className="flex items-center justify-between gap-2">
            <div className="flex items-center gap-2 min-w-0">
              <Layout className="h-4 w-4 sm:h-5 sm:w-5 text-primary flex-shrink-0" />
              <CardTitle className="text-sm sm:text-base truncate">Hero Side Articles</CardTitle>
            </div>
            <Badge variant="outline" className="text-xs flex-shrink-0">{heroSideArticleIds.length}/4</Badge>
          </div>
          <CardDescription className="text-xs sm:text-sm">
            Articles displayed on the right side of the hero section
          </CardDescription>
        </CardHeader>
        <CardContent className="px-3 sm:px-6 space-y-4">
          {/* Selected Side Articles */}
          <div className="space-y-2">
            {heroSideArticleIds.map((id, index) => {
              const article = getArticleById(id);
              if (!article) return null;
              return (
                <div key={id} className="flex items-center gap-3 p-3 bg-card border border-border rounded-lg">
                  <span className="text-lg font-bold text-muted-foreground">#{index + 1}</span>
                  <div className="flex-1 min-w-0">
                    <p className="text-sm font-medium truncate">{article.title}</p>
                    <Badge className={`${getCategoryColor(article.category)} text-white text-[10px] border-0 mt-1`}>
                      {article.category}
                    </Badge>
                  </div>
                  <Button variant="ghost" size="icon" onClick={() => removeFromSideArticles(id)} className="text-destructive">
                    <X className="h-4 w-4" />
                  </Button>
                </div>
              );
            })}
          </div>

          {/* Add Side Article */}
          {heroSideArticleIds.length < 4 && (
            <div>
              <Label className="text-sm text-muted-foreground">Add Side Article</Label>
              <Select onValueChange={addToSideArticles}>
                <SelectTrigger className="mt-1">
                  <SelectValue placeholder="Select an article to add..." />
                </SelectTrigger>
                <SelectContent>
                  {availableArticles
                    .filter(a => !heroSideArticleIds.includes(a.id) && !heroFeaturedIds.includes(a.id))
                    .map((article) => (
                      <SelectItem key={article.id} value={article.id}>
                        <span className="truncate">
                          {article.title}
                          {article.status !== 'published' && <span className="text-xs text-muted-foreground ml-2">({article.status})</span>}
                        </span>
                      </SelectItem>
                    ))}
                </SelectContent>
              </Select>
            </div>
          )}
        </CardContent>
      </Card>

      {/* Quick Tips */}
      <Card className="mt-6">
        <CardHeader>
          <div className="flex items-center gap-2">
            <Settings2 className="h-5 w-5 text-primary" />
            <CardTitle>Quick Tips</CardTitle>
          </div>
        </CardHeader>
        <CardContent>

          <ul className="space-y-2 text-sm text-muted-foreground">
            <li>â€¢ <strong>Drag articles</strong> to reorder their display priority</li>
            <li>â€¢ <strong>On mobile:</strong> Touch and hold, then drag to reorder</li>
            <li>â€¢ Breaking news appears in the red ticker at the top of the page</li>
            <li>â€¢ Hero articles are featured in the main carousel with large images</li>
            <li>â€¢ <strong>Side articles</strong> appear on the right side of the hero section</li>
            <li>â€¢ Changes will be reflected immediately after saving</li>
          </ul>
        </CardContent>
      </Card>
    </div>
  );
};

export default AdminFeatured;

--- FILE END: src\pages\admin\AdminFeatured.tsx ---


--- FILE START: src\pages\admin\AdminInternships.tsx ---
import { useState, useEffect } from 'react';
import { getApplications, updateApplicationStatus, deleteApplication, InternshipApplication } from '@/lib/internshipService';
import { Badge } from '@/components/ui/badge';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
import { formatDistanceToNow, format } from 'date-fns';
import { Users, FileText, Mail, Phone, ExternalLink, Calendar, Trash2, CheckCircle, XCircle, Clock } from 'lucide-react';
import {
    Dialog,
    DialogContent,
    DialogHeader,
    DialogTitle,
    DialogDescription,
} from '@/components/ui/dialog';
import { toast } from 'sonner';

const AdminInternships = () => {
    const [applications, setApplications] = useState<InternshipApplication[]>([]);
    const [selectedApp, setSelectedApp] = useState<InternshipApplication | null>(null);

    useEffect(() => {
        const loadData = () => {
            setApplications(getApplications());
        };
        loadData();
        window.addEventListener('internshipApplicationsUpdated', loadData);
        return () => window.removeEventListener('internshipApplicationsUpdated', loadData);
    }, []);

    const handleStatusUpdate = (id: string, status: InternshipApplication['status']) => {
        updateApplicationStatus(id, status);
        if (selectedApp) setSelectedApp({ ...selectedApp, status });
        toast.success(`Application status marked as ${status}`);
    };

    const handleDelete = (id: string) => {
        if (confirm('Are you sure you want to delete this application?')) {
            deleteApplication(id);
            setSelectedApp(null);
            toast.success('Application deleted');
        }
    };

    const getStatusColor = (status: string) => {
        switch (status) {
            case 'accepted': return 'bg-green-500';
            case 'rejected': return 'bg-red-500';
            case 'reviewed': return 'bg-blue-500';
            default: return 'bg-yellow-500';
        }
    };

    return (
        <div className="space-y-6">
            <div className="flex items-center justify-between">
                <div>
                    <h1 className="text-2xl font-bold font-display">Internship Applications</h1>
                    <p className="text-muted-foreground">Manage incoming internship requests</p>
                </div>
                <Badge variant="secondary" className="text-sm">
                    {applications.length} Total
                </Badge>
            </div>

            <div className="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                {applications.length === 0 ? (
                    <div className="col-span-full text-center py-12 text-muted-foreground">
                        <Users className="h-12 w-12 mx-auto mb-4 opacity-20" />
                        <p>No applications received yet.</p>
                    </div>
                ) : (
                    applications.map((app) => (
                        <Card
                            key={app.id}
                            className="cursor-pointer hover:shadow-lg transition-shadow border-border"
                            onClick={() => setSelectedApp(app)}
                        >
                            <CardHeader className="pb-2">
                                <div className="flex justify-between items-start">
                                    <Badge className={`${getStatusColor(app.status)} text-white border-0 capitalize`}>
                                        {app.status}
                                    </Badge>
                                    <span className="text-xs text-muted-foreground">
                                        {formatDistanceToNow(app.submittedAt, { addSuffix: true })}
                                    </span>
                                </div>
                                <CardTitle className="text-lg mt-2">{app.fullName}</CardTitle>
                                <CardDescription>{app.department} Department</CardDescription>
                            </CardHeader>
                            <CardContent className="space-y-2 text-sm">
                                <div className="flex items-center gap-2 text-muted-foreground">
                                    <Mail className="h-4 w-4" />
                                    <span className="truncate">{app.email}</span>
                                </div>
                                <div className="flex items-center gap-2 text-muted-foreground">
                                    <Users className="h-4 w-4" />
                                    <span className="truncate">{app.university}</span>
                                </div>
                            </CardContent>
                        </Card>
                    ))
                )}
            </div>

            {/* Detail Dialog */}
            <Dialog open={!!selectedApp} onOpenChange={(open) => !open && setSelectedApp(null)}>
                <DialogContent className="max-w-2xl max-h-[90vh] overflow-y-auto">
                    {selectedApp && (
                        <>
                            <DialogHeader>
                                <div className="flex items-center gap-3">
                                    <div className="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-xl">
                                        {selectedApp.fullName.charAt(0)}
                                    </div>
                                    <div>
                                        <DialogTitle className="text-xl">{selectedApp.fullName}</DialogTitle>
                                        <DialogDescription>{selectedApp.university}</DialogDescription>
                                    </div>
                                </div>
                            </DialogHeader>

                            <div className="grid gap-6 py-4">
                                <div className="grid grid-cols-2 gap-4">
                                    <div className="space-y-1">
                                        <label className="text-xs font-medium text-muted-foreground uppercase">Contact Info</label>
                                        <div className="flex items-center gap-2"><Mail className="h-4 w-4 text-primary" /> {selectedApp.email}</div>
                                        <div className="flex items-center gap-2"><Phone className="h-4 w-4 text-primary" /> {selectedApp.phone}</div>
                                    </div>
                                    <div className="space-y-1">
                                        <label className="text-xs font-medium text-muted-foreground uppercase">Application Info</label>
                                        <div className="flex items-center gap-2"><Badge variant="outline">{selectedApp.department}</Badge></div>
                                        <div className="flex items-center gap-2 text-sm text-muted-foreground">
                                            <Calendar className="h-4 w-4" /> Submitted {format(selectedApp.submittedAt, 'PP')}
                                        </div>
                                    </div>
                                </div>

                                <div className="space-y-2">
                                    <label className="text-xs font-medium text-muted-foreground uppercase">Cover Letter</label>
                                    <div className="bg-muted/30 p-4 rounded-lg text-sm leading-relaxed whitespace-pre-wrap">
                                        {selectedApp.coverLetter}
                                    </div>
                                </div>

                                <div className="flex flex-col sm:flex-row gap-4">
                                    {selectedApp.portfolio && (
                                        <div className="flex-1 space-y-1">
                                            <label className="text-xs font-medium text-muted-foreground uppercase">Portfolio</label>
                                            <a href={selectedApp.portfolio} target="_blank" rel="noreferrer" className="flex items-center gap-2 text-primary hover:underline">
                                                <ExternalLink className="h-4 w-4" /> Open Portfolio
                                            </a>
                                        </div>
                                    )}
                                    <div className="flex-1 space-y-1">
                                        <label className="text-xs font-medium text-muted-foreground uppercase">Resume / CV</label>
                                        <div className="flex items-center gap-2 text-sm font-medium">
                                            <FileText className="h-4 w-4" /> {selectedApp.cvFileName}
                                        </div>
                                    </div>
                                </div>

                                <div className="border-t pt-4 flex flex-col sm:flex-row justify-between gap-4 items-center">
                                    <div className="flex gap-2">
                                        <Button size="sm" variant="outline" onClick={() => handleStatusUpdate(selectedApp.id, 'reviewed')} disabled={selectedApp.status === 'reviewed'}>
                                            <Clock className="w-4 h-4 mr-2" /> Mark Reviewed
                                        </Button>
                                        <Button size="sm" variant="outline" className="text-green-600 hover:text-green-700 hover:bg-green-50" onClick={() => handleStatusUpdate(selectedApp.id, 'accepted')} disabled={selectedApp.status === 'accepted'}>
                                            <CheckCircle className="w-4 h-4 mr-2" /> Accept
                                        </Button>
                                        <Button size="sm" variant="outline" className="text-red-600 hover:text-red-700 hover:bg-red-50" onClick={() => handleStatusUpdate(selectedApp.id, 'rejected')} disabled={selectedApp.status === 'rejected'}>
                                            <XCircle className="w-4 h-4 mr-2" /> Reject
                                        </Button>
                                    </div>
                                    <Button size="sm" variant="destructive" onClick={() => handleDelete(selectedApp.id)}>
                                        <Trash2 className="w-4 h-4 mr-2" /> Delete
                                    </Button>
                                </div>
                            </div>
                        </>
                    )}
                </DialogContent>
            </Dialog>
        </div>
    );
};

export default AdminInternships;

--- FILE END: src\pages\admin\AdminInternships.tsx ---


--- FILE START: src\pages\admin\AdminJobs.tsx ---
import { useState, useEffect } from 'react';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Plus, Edit, Trash2, Save, Briefcase, Calendar, Users, Eye, EyeOff, GripVertical } from 'lucide-react';
import { Job } from '@/types/news';
import { format } from 'date-fns';
import { toast } from 'sonner';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Switch } from '@/components/ui/switch';
import {
  DndContext,
  closestCenter,
  DragOverlay,
} from '@dnd-kit/core';
import {
  SortableContext,
  verticalListSortingStrategy,
  useSortable,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { useTouchSortable } from '@/hooks/useTouchSortable';
import { cn } from '@/lib/utils';
import { getJobs, saveJobs } from '@/lib/jobService';

// Draggable Job Card Component
const DraggableJobCard = ({ job, onToggleStatus, onEdit, onDelete }: {
  job: Job;
  onToggleStatus: () => void;
  onEdit: () => void;
  onDelete: () => void;
}) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id: job.id });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  return (
    <div
      ref={setNodeRef}
      style={style}
      className={cn(
        'rounded-xl bg-card p-4 sm:p-6 border border-border hover:shadow-lg transition-shadow touch-manipulation',
        isDragging && 'z-50 opacity-90 shadow-xl scale-[1.02]'
      )}
    >
      <div className="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div className="flex items-start gap-3 flex-1">
          <button
            type="button"
            className={cn(
              'flex-shrink-0 p-2 rounded-md cursor-grab active:cursor-grabbing touch-manipulation mt-1',
              'hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary',
              isDragging && 'cursor-grabbing'
            )}
            {...attributes}
            {...listeners}
          >
            <GripVertical className="h-4 w-4 text-muted-foreground" />
          </button>
          <div className="flex-1 min-w-0">
            <div className="flex flex-wrap items-center gap-2 mb-2">
              <h3 className="font-display text-lg font-semibold text-foreground">{job.title}</h3>
              <Badge variant={job.isOpen ? 'default' : 'secondary'}>
                {job.isOpen ? 'Open' : 'Closed'}
              </Badge>
              <Badge variant="outline" className="capitalize">{job.type}</Badge>
            </div>
            <p className="text-sm text-muted-foreground mb-2">{job.description}</p>
            <div className="flex flex-wrap items-center gap-4 text-xs text-muted-foreground">
              <span>Department: {job.department}</span>
              <span>Deadline: {format(job.deadline, 'MMM d, yyyy')}</span>
              <span>Requirements: {job.requirements.length}</span>
            </div>
          </div>
        </div>
        <div className="flex items-center gap-2 ml-auto md:ml-0">
          <Button
            variant="ghost"
            size="icon"
            onClick={onToggleStatus}
            title={job.isOpen ? 'Close job' : 'Open job'}
          >
            {job.isOpen ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
          </Button>
          <Button variant="ghost" size="icon" onClick={onEdit}>
            <Edit className="h-4 w-4" />
          </Button>
          <Button variant="ghost" size="icon" className="text-destructive" onClick={onDelete}>
            <Trash2 className="h-4 w-4" />
          </Button>
        </div>
      </div>
    </div>
  );
};

// Drag Overlay for Jobs
const JobDragOverlay = ({ job }: { job: Job }) => (
  <div className="rounded-xl bg-card p-4 sm:p-6 border-2 border-primary shadow-2xl opacity-95">
    <div className="flex items-center gap-3">
      <GripVertical className="h-4 w-4 text-primary flex-shrink-0" />
      <div className="flex-1 min-w-0">
        <div className="flex flex-wrap items-center gap-2">
          <h3 className="font-display text-lg font-semibold text-foreground">{job.title}</h3>
          <Badge variant={job.isOpen ? 'default' : 'secondary'}>
            {job.isOpen ? 'Open' : 'Closed'}
          </Badge>
        </div>
        <p className="text-sm text-muted-foreground mt-1">{job.department}</p>
      </div>
    </div>
  </div>
);

const AdminJobs = () => {
  const [jobsList, setJobsList] = useState<Job[]>([]);
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingJob, setEditingJob] = useState<Job | null>(null);
  const [formData, setFormData] = useState({
    title: '',
    department: '',
    type: 'full-time' as Job['type'],
    description: '',
    requirements: '',
    deadline: '',
    isOpen: true
  });

  // Load jobs on mount
  useEffect(() => {
    setJobsList(getJobs());
  }, []);

  const openCreateDialog = () => {
    setEditingJob(null);
    setFormData({
      title: '',
      department: '',
      type: 'full-time',
      description: '',
      requirements: '',
      deadline: '',
      isOpen: true
    });
    setIsDialogOpen(true);
  };

  const openEditDialog = (job: Job) => {
    setEditingJob(job);
    setFormData({
      title: job.title,
      department: job.department,
      type: job.type,
      description: job.description,
      requirements: job.requirements.join('\n'),
      deadline: format(job.deadline, 'yyyy-MM-dd'),
      isOpen: job.isOpen
    });
    setIsDialogOpen(true);
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    const requirements = formData.requirements.split('\n').filter(r => r.trim());

    let updatedList: Job[];
    if (editingJob) {
      updatedList = jobsList.map(job =>
        job.id === editingJob.id
          ? {
            ...job,
            title: formData.title,
            department: formData.department,
            type: formData.type,
            description: formData.description,
            requirements,
            deadline: new Date(formData.deadline),
            isOpen: formData.isOpen
          }
          : job
      );
      toast.success('Job updated successfully!');
    } else {
      const newJob: Job = {
        id: Date.now().toString(),
        title: formData.title,
        department: formData.department,
        type: formData.type,
        description: formData.description,
        requirements,
        deadline: new Date(formData.deadline),
        isOpen: formData.isOpen,
        createdAt: new Date()
      };
      updatedList = [newJob, ...jobsList];
      toast.success('Job created successfully!');
    }

    setJobsList(updatedList);
    saveJobs(updatedList);
    setIsDialogOpen(false);
  };

  const handleDelete = (id: string) => {
    if (window.confirm('Are you sure you want to delete this job?')) {
      const updatedList = jobsList.filter(job => job.id !== id);
      setJobsList(updatedList);
      saveJobs(updatedList);
      toast.success('Job deleted successfully!');
    }
  };

  const toggleJobStatus = (id: string) => {
    const updatedList = jobsList.map(job =>
      job.id === id ? { ...job, isOpen: !job.isOpen } : job
    );
    setJobsList(updatedList);
    saveJobs(updatedList);
    toast.success('Job status updated!');
  };

  // Drag-and-drop for jobs reordering
  const jobsSortable = useTouchSortable({
    items: jobsList,
    getItemId: (job) => job.id,
    onReorder: (newJobs) => {
      setJobsList(newJobs);
      saveJobs(newJobs);
      toast.success('Job order updated');
    },
  });

  const getActiveJob = () => {
    if (!jobsSortable.activeId) return null;
    return jobsList.find(j => j.id === jobsSortable.activeId);
  };

  return (
    <div className="px-1 sm:px-0">
      <div className="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Job Listings</h1>
          <p className="text-muted-foreground text-xs sm:text-sm mt-1">
            Drag jobs to reorder â€¢ Touch and hold on mobile
          </p>
        </div>
        <Button onClick={openCreateDialog} size="sm" className="w-full sm:w-auto">
          <Plus className="mr-2 h-4 w-4" />
          New Job
        </Button>
      </div>

      {/* Stats */}
      <div className="grid gap-4 sm:grid-cols-3 mb-6">
        <div className="rounded-xl bg-card p-4 border border-border">
          <div className="flex items-center gap-3">
            <div className="h-10 w-10 rounded-lg bg-green-500/10 flex items-center justify-center">
              <Briefcase className="h-5 w-5 text-green-500" />
            </div>
            <div>
              <p className="text-2xl font-bold text-foreground">{jobsList.filter(j => j.isOpen).length}</p>
              <p className="text-sm text-muted-foreground">Open Positions</p>
            </div>
          </div>
        </div>
        <div className="rounded-xl bg-card p-4 border border-border">
          <div className="flex items-center gap-3">
            <div className="h-10 w-10 rounded-lg bg-blue-500/10 flex items-center justify-center">
              <Users className="h-5 w-5 text-blue-500" />
            </div>
            <div>
              <p className="text-2xl font-bold text-foreground">{jobsList.filter(j => j.type === 'internship').length}</p>
              <p className="text-sm text-muted-foreground">Internships</p>
            </div>
          </div>
        </div>
        <div className="rounded-xl bg-card p-4 border border-border">
          <div className="flex items-center gap-3">
            <div className="h-10 w-10 rounded-lg bg-purple-500/10 flex items-center justify-center">
              <Calendar className="h-5 w-5 text-purple-500" />
            </div>
            <div>
              <p className="text-2xl font-bold text-foreground">{jobsList.length}</p>
              <p className="text-sm text-muted-foreground">Total Jobs</p>
            </div>
          </div>
        </div>
      </div>

      {/* Jobs List with Drag-and-Drop */}
      <DndContext
        sensors={jobsSortable.sensors}
        collisionDetection={closestCenter}
        onDragStart={jobsSortable.handleDragStart}
        onDragEnd={jobsSortable.handleDragEnd}
        onDragCancel={jobsSortable.handleDragCancel}
      >
        <SortableContext items={jobsList.map(j => j.id)} strategy={verticalListSortingStrategy}>
          <div className="space-y-4">
            {jobsList.map((job) => (
              <DraggableJobCard
                key={job.id}
                job={job}
                onToggleStatus={() => toggleJobStatus(job.id)}
                onEdit={() => openEditDialog(job)}
                onDelete={() => handleDelete(job.id)}
              />
            ))}
          </div>
        </SortableContext>
        <DragOverlay>
          {getActiveJob() && <JobDragOverlay job={getActiveJob()!} />}
        </DragOverlay>
      </DndContext>

      {jobsList.length === 0 && (
        <div className="rounded-xl bg-muted p-12 text-center">
          <Briefcase className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
          <p className="text-muted-foreground">No jobs posted yet</p>
        </div>
      )}

      <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
        <DialogContent className="max-w-2xl max-h-[90vh] overflow-hidden flex flex-col mx-4 sm:mx-auto">
          <DialogHeader className="flex-shrink-0 pr-8">
            <DialogTitle className="text-lg sm:text-xl">{editingJob ? 'Edit Job' : 'Create New Job'}</DialogTitle>
            <DialogDescription className="text-xs sm:text-sm">
              {editingJob ? 'Update job listing details.' : 'Create a new job listing.'}
            </DialogDescription>
          </DialogHeader>

          <form onSubmit={handleSubmit} className="flex-1 overflow-y-auto space-y-4 pr-2 -mr-2">
            <div className="grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="title" className="text-sm">Job Title *</Label>
                <Input
                  id="title"
                  value={formData.title}
                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                  placeholder="e.g., Senior Reporter"
                  className="text-sm"
                  required
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="department" className="text-sm">Department *</Label>
                <Input
                  id="department"
                  value={formData.department}
                  onChange={(e) => setFormData({ ...formData, department: e.target.value })}
                  placeholder="e.g., Editorial"
                  className="text-sm"
                  required
                />
              </div>
            </div>

            <div className="grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="type" className="text-sm">Job Type *</Label>
                <Select value={formData.type} onValueChange={(val) => setFormData({ ...formData, type: val as Job['type'] })}>
                  <SelectTrigger className="text-sm">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="full-time">Full-time</SelectItem>
                    <SelectItem value="part-time">Part-time</SelectItem>
                    <SelectItem value="internship">Internship</SelectItem>
                    <SelectItem value="freelance">Freelance</SelectItem>
                    <SelectItem value="volunteer">Volunteer</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              <div className="space-y-2">
                <Label htmlFor="deadline" className="text-sm">Application Deadline *</Label>
                <Input
                  id="deadline"
                  type="date"
                  value={formData.deadline}
                  onChange={(e) => setFormData({ ...formData, deadline: e.target.value })}
                  className="text-sm"
                  required
                />
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="description" className="text-sm">Description *</Label>
              <Textarea
                id="description"
                value={formData.description}
                onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                placeholder="Brief description of the role"
                rows={2}
                className="text-sm resize-none"
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="requirements" className="text-sm">Requirements (one per line) *</Label>
              <Textarea
                id="requirements"
                value={formData.requirements}
                onChange={(e) => setFormData({ ...formData, requirements: e.target.value })}
                placeholder="3+ years of experience&#10;Excellent writing skills&#10;Team player"
                rows={3}
                className="text-sm resize-none"
                required
              />
            </div>

            <div className="flex items-center gap-3">
              <Switch
                id="isOpen"
                checked={formData.isOpen}
                onCheckedChange={(checked) => setFormData({ ...formData, isOpen: checked })}
              />
              <Label htmlFor="isOpen" className="text-sm">Job is open for applications</Label>
            </div>

            <div className="flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 pb-2 sticky bottom-0 bg-background">
              <Button type="button" variant="outline" onClick={() => setIsDialogOpen(false)} className="w-full sm:w-auto">
                Cancel
              </Button>
              <Button type="submit" className="w-full sm:w-auto">
                <Save className="mr-2 h-4 w-4" />
                {editingJob ? 'Update Job' : 'Create Job'}
              </Button>
            </div>
          </form>
        </DialogContent>
      </Dialog>
    </div>
  );
};

export default AdminJobs;

--- FILE END: src\pages\admin\AdminJobs.tsx ---


--- FILE START: src\pages\admin\AdminLayout.tsx ---
import { useState, useEffect } from 'react';
import { Link, Outlet, useLocation, useNavigate } from 'react-router-dom';
import {
  LayoutDashboard, FileText, FolderOpen, Image, Users, Briefcase, Settings,
  Menu, X, LogOut, Star, Pen, LayoutGrid, Navigation, MessageSquare, Building,
  Shield, ChevronDown, Activity, GraduationCap
} from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { ThemeToggle } from '@/components/ThemeToggle';
import { useAdminAuth, isAdminAuthenticated } from '@/context/AdminAuthContext';
import { ROLE_DISPLAY, RolePermissions } from '@/types/admin';
import logo from '@/assets/truthlens-logo.png';
import { toast } from 'sonner';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';

interface NavItem {
  icon: React.ElementType;
  label: string;
  path: string;
  requiredPermission?: keyof RolePermissions;
}

const allNavItems: NavItem[] = [
  { icon: LayoutDashboard, label: 'Dashboard', path: '/admin' },
  { icon: Star, label: 'Featured', path: '/admin/featured', requiredPermission: 'manageFeatured' },
  { icon: LayoutGrid, label: 'Sections', path: '/admin/sections', requiredPermission: 'manageSections' },
  { icon: Navigation, label: 'Header Menu', path: '/admin/menu', requiredPermission: 'manageMenu' },
  { icon: Pen, label: 'Editorial', path: '/admin/editorial', requiredPermission: 'manageEditorial' },
  { icon: FileText, label: 'Articles', path: '/admin/articles' },
  { icon: MessageSquare, label: 'Comments', path: '/admin/comments', requiredPermission: 'viewAllComments' },
  { icon: Building, label: 'Contact Info', path: '/admin/contact-info', requiredPermission: 'manageContactInfo' },
  { icon: FolderOpen, label: 'Categories', path: '/admin/categories', requiredPermission: 'manageCategories' },
  { icon: Image, label: 'Media', path: '/admin/media', requiredPermission: 'uploadMedia' },
  { icon: Users, label: 'Users', path: '/admin/users', requiredPermission: 'manageUsers' },
  { icon: Users, label: 'Team', path: '/admin/team', requiredPermission: 'manageUsers' },
  { icon: Briefcase, label: 'Jobs', path: '/admin/jobs', requiredPermission: 'manageJobs' },
  { icon: GraduationCap, label: 'Internships', path: '/admin/internships', requiredPermission: 'manageJobs' },
  { icon: Activity, label: 'Activity Log', path: '/admin/activity', requiredPermission: 'manageSettings' },
  { icon: Settings, label: 'Settings', path: '/admin/settings', requiredPermission: 'manageSettings' },
];

const AdminLayout = () => {
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const location = useLocation();
  const navigate = useNavigate();
  const { currentUser, logout, hasPermission, canAccessPath } = useAdminAuth();

  // Filter nav items based on user permissions
  const navItems = allNavItems.filter(item => {
    if (!item.requiredPermission) return true;
    return hasPermission(item.requiredPermission);
  });

  // Check authentication on mount and route changes
  useEffect(() => {
    if (!isAdminAuthenticated()) {
      navigate('/admin/login', { state: { from: location.pathname }, replace: true });
      return;
    }

    // Check if user can access current path
    if (currentUser && !canAccessPath(location.pathname)) {
      toast.error('You do not have permission to access this page');
      navigate('/admin', { replace: true });
    }
  }, [location.pathname, navigate, currentUser, canAccessPath]);

  // Close sidebar when route changes on mobile
  const handleNavClick = () => {
    if (window.innerWidth < 1024) {
      setSidebarOpen(false);
    }
  };

  const handleLogout = () => {
    logout();
    toast.success('Logged out successfully');
    navigate('/admin/login', { replace: true });
  };

  // Don't render layout if not authenticated
  if (!isAdminAuthenticated() || !currentUser) {
    return null;
  }

  const roleInfo = ROLE_DISPLAY[currentUser.role];

  return (
    <div className="flex min-h-screen bg-background">
      {/* Mobile Overlay */}
      {sidebarOpen && (
        <div
          className="fixed inset-0 z-40 bg-black/50 lg:hidden"
          onClick={() => setSidebarOpen(false)}
        />
      )}

      {/* Sidebar */}
      <aside className={`fixed inset-y-0 left-0 z-50 w-64 transform bg-card border-r border-border transition-transform duration-300 ease-in-out lg:translate-x-0 ${sidebarOpen ? 'translate-x-0' : '-translate-x-full'}`}>
        <div className="flex h-16 items-center justify-between px-4 border-b border-border">
          <Link to="/" className="flex items-center gap-2">
            <img src={logo} alt="TruthLens" className="h-8" />
            <span className="font-display font-bold text-foreground">Admin</span>
          </Link>
          <Button variant="ghost" size="icon" className="lg:hidden" onClick={() => setSidebarOpen(false)}>
            <X className="h-5 w-5" />
          </Button>
        </div>

        {/* User Info Section */}
        <div className="p-4 border-b border-border">
          <div className="flex items-center gap-3">
            <Avatar className="h-10 w-10">
              <AvatarImage src={currentUser.avatar} alt={currentUser.name} />
              <AvatarFallback>{currentUser.name.charAt(0)}</AvatarFallback>
            </Avatar>
            <div className="flex-1 min-w-0">
              <p className="text-sm font-medium text-foreground truncate">{currentUser.name}</p>
              <Badge className={`${roleInfo.color} text-white text-[10px] border-0`}>
                <Shield className="h-2.5 w-2.5 mr-1" />
                {roleInfo.label}
              </Badge>
            </div>
          </div>
        </div>

        <nav className="p-4 space-y-1 overflow-y-auto max-h-[calc(100vh-12rem)]">
          {navItems.map((item) => (
            <Link
              key={item.path}
              to={item.path}
              onClick={handleNavClick}
              className={`flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-colors ${location.pathname === item.path ? 'bg-primary text-primary-foreground' : 'text-muted-foreground hover:bg-muted hover:text-foreground'}`}
            >
              <item.icon className="h-5 w-5 flex-shrink-0" />
              <span className="truncate">{item.label}</span>
            </Link>
          ))}
        </nav>

        <div className="absolute bottom-4 left-4 right-4">
          <Button variant="outline" className="w-full" onClick={handleLogout}>
            <LogOut className="mr-2 h-4 w-4" />Logout
          </Button>
        </div>
      </aside>

      {/* Main */}
      <div className="flex-1 lg:pl-64 min-w-0">
        <header className="sticky top-0 z-30 flex h-16 items-center gap-4 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 px-4">
          <Button variant="ghost" size="icon" className="lg:hidden flex-shrink-0" onClick={() => setSidebarOpen(true)}>
            <Menu className="h-5 w-5" />
          </Button>
          <h1 className="font-display font-semibold text-foreground truncate lg:hidden">
            {navItems.find(item => item.path === location.pathname)?.label || 'Admin'}
          </h1>
          <div className="flex-1" />

          {/* Desktop User Menu */}
          <div className="hidden lg:flex items-center gap-3">
            <DropdownMenu>
              <DropdownMenuTrigger asChild>
                <Button variant="ghost" className="flex items-center gap-2">
                  <Avatar className="h-7 w-7">
                    <AvatarImage src={currentUser.avatar} alt={currentUser.name} />
                    <AvatarFallback>{currentUser.name.charAt(0)}</AvatarFallback>
                  </Avatar>
                  <span className="text-sm font-medium">{currentUser.name}</span>
                  <ChevronDown className="h-4 w-4" />
                </Button>
              </DropdownMenuTrigger>
              <DropdownMenuContent align="end" className="w-56">
                <DropdownMenuLabel>
                  <div className="flex flex-col gap-1">
                    <span>{currentUser.name}</span>
                    <Badge className={`${roleInfo.color} text-white text-[10px] border-0 w-fit`}>
                      {roleInfo.label}
                    </Badge>
                  </div>
                </DropdownMenuLabel>
                <DropdownMenuSeparator />
                <DropdownMenuItem asChild>
                  <Link to="/" className="cursor-pointer">
                    View Site
                  </Link>
                </DropdownMenuItem>
                <DropdownMenuItem asChild>
                  <Link to="/admin/profile" className="cursor-pointer">
                    Profile
                  </Link>
                </DropdownMenuItem>
                <DropdownMenuSeparator />
                <DropdownMenuItem onClick={handleLogout} className="text-destructive cursor-pointer">
                  <LogOut className="mr-2 h-4 w-4" />
                  Logout
                </DropdownMenuItem>
              </DropdownMenuContent>
            </DropdownMenu>
          </div>

          <ThemeToggle />
        </header>
        <main className="p-4 md:p-6 overflow-x-hidden"><Outlet /></main>
      </div>
    </div>
  );
};

export default AdminLayout;

--- FILE END: src\pages\admin\AdminLayout.tsx ---


--- FILE START: src\pages\admin\AdminLogin.tsx ---
import { useState, useEffect } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { Shield, Mail, Lock, Eye, EyeOff, AlertCircle, ArrowLeft, CheckCircle, Clock, Info } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Alert, AlertDescription } from '@/components/ui/alert';
import { Checkbox } from '@/components/ui/checkbox';
import { toast } from 'sonner';
import { z } from 'zod';
import { useRateLimiter } from '@/hooks/useRateLimiter';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog } from '@/context/ActivityLogContext';
import { ROLE_DISPLAY } from '@/types/admin';
import truthLensLogo from '@/assets/truthlens-logo.png';

// Validation schemas
const loginSchema = z.object({
  email: z.string().email('Please enter a valid email address'),
  password: z.string().min(6, 'Password must be at least 6 characters')
});

const resetSchema = z.object({
  email: z.string().email('Please enter a valid email address')
});

// For backward compatibility
export const isAdminAuthenticated = (): boolean => {
  const storedUser = localStorage.getItem('adminUser') || sessionStorage.getItem('adminUser');
  return !!storedUser;
};

export const adminLogout = (): void => {
  localStorage.removeItem('adminUser');
  sessionStorage.removeItem('adminUser');
  localStorage.removeItem('adminAuth');
  sessionStorage.removeItem('adminAuth');
};

type ViewMode = 'login' | 'reset' | 'reset-sent';

const AdminLogin = () => {
  const navigate = useNavigate();
  const location = useLocation();
  const { login, isAuthenticated } = useAdminAuth();
  const { logActivity } = useActivityLog();
  
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
  const [rememberMe, setRememberMe] = useState(false);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState('');
  const [validationErrors, setValidationErrors] = useState<{ email?: string; password?: string }>({});
  const [viewMode, setViewMode] = useState<ViewMode>('login');
  
  // Rate limiting - 5 attempts in 15 minutes, then 30 min lockout
  const rateLimiter = useRateLimiter({
    maxAttempts: 5,
    windowMs: 15 * 60 * 1000,
    lockoutMs: 30 * 60 * 1000,
  });

  // Redirect if already authenticated
  useEffect(() => {
    if (isAuthenticated) {
      navigate('/admin', { replace: true });
    }
  }, [navigate, isAuthenticated]);

  const validateForm = () => {
    try {
      if (viewMode === 'reset') {
        resetSchema.parse({ email });
      } else {
        loginSchema.parse({ email, password });
      }
      setValidationErrors({});
      return true;
    } catch (err) {
      if (err instanceof z.ZodError) {
        const errors: { email?: string; password?: string } = {};
        err.errors.forEach((e) => {
          if (e.path[0] === 'email') errors.email = e.message;
          if (e.path[0] === 'password') errors.password = e.message;
        });
        setValidationErrors(errors);
      }
      return false;
    }
  };

  const handleLogin = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    // Check rate limiting
    if (rateLimiter.isLocked) {
      setError(`Too many failed attempts. Please try again in ${rateLimiter.formatRemainingTime()}.`);
      return;
    }

    if (!validateForm()) return;

    setIsLoading(true);

    // Simulate network delay
    await new Promise(resolve => setTimeout(resolve, 1000));

    // Attempt login
    const success = login(email, password, rememberMe);
    
    if (success) {
      rateLimiter.recordAttempt(true);
      // Log activity after successful login
      setTimeout(() => {
        logActivity('login', 'session', {
          details: `Logged in from ${navigator.userAgent.includes('Mobile') ? 'mobile' : 'desktop'} device`
        });
      }, 100);
      toast.success('Welcome back!');
      
      // Redirect to intended page or admin dashboard
      const from = (location.state as { from?: string })?.from || '/admin';
      navigate(from, { replace: true });
    } else {
      rateLimiter.recordAttempt(false);
      
      if (rateLimiter.attemptsRemaining <= 1) {
        setError(`Invalid credentials. ${rateLimiter.attemptsRemaining} attempt${rateLimiter.attemptsRemaining === 1 ? '' : 's'} remaining before lockout.`);
      } else {
        setError('Invalid email or password. Please try again.');
      }
    }

    setIsLoading(false);
  };

  const handlePasswordReset = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    if (!validateForm()) return;

    setIsLoading(true);

    // Simulate network delay
    await new Promise(resolve => setTimeout(resolve, 1500));

    // For security, always show success message
    setViewMode('reset-sent');
    toast.success('If an account exists, a reset link has been sent.');

    setIsLoading(false);
  };

  const switchToReset = () => {
    setViewMode('reset');
    setError('');
    setValidationErrors({});
  };

  const switchToLogin = () => {
    setViewMode('login');
    setError('');
    setValidationErrors({});
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-muted/30 to-background p-4">
      <motion.div
        initial={{ opacity: 0, y: 20 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5 }}
        className="w-full max-w-md"
      >
        <Card className="border-border shadow-xl">
          <CardHeader className="text-center space-y-4">
            <div className="flex justify-center">
              <div className="h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center">
                <Shield className="h-8 w-8 text-primary" />
              </div>
            </div>
            <div>
              <img 
                src={truthLensLogo} 
                alt="TruthLens" 
                className="h-8 mx-auto mb-2"
              />
              <CardTitle className="text-2xl font-display">
                {viewMode === 'login' && 'Admin Portal'}
                {viewMode === 'reset' && 'Reset Password'}
                {viewMode === 'reset-sent' && 'Check Your Email'}
              </CardTitle>
              <CardDescription>
                {viewMode === 'login' && 'Sign in to access the admin dashboard'}
                {viewMode === 'reset' && 'Enter your email to receive a reset link'}
                {viewMode === 'reset-sent' && 'We\'ve sent you password reset instructions'}
              </CardDescription>
            </div>
          </CardHeader>
          
          <CardContent>
            <AnimatePresence mode="wait">
              {/* Login Form */}
              {viewMode === 'login' && (
                <motion.form
                  key="login"
                  initial={{ opacity: 0, x: -20 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: 20 }}
                  transition={{ duration: 0.2 }}
                  onSubmit={handleLogin}
                  className="space-y-4"
                >
                  {/* Demo Credentials Info */}
                  <Alert className="border-blue-500/50 bg-blue-500/10">
                    <Info className="h-4 w-4 text-blue-500" />
                    <AlertDescription className="text-xs">
                      <p className="font-semibold mb-1">Demo Accounts:</p>
                      <div className="space-y-0.5 text-muted-foreground">
                        <p><span className="font-mono">admin@truthlens.com</span> / admin123</p>
                        <p><span className="font-mono">editor@truthlens.com</span> / editor123</p>
                        <p><span className="font-mono">author@truthlens.com</span> / author123</p>
                        <p><span className="font-mono">journalist@truthlens.com</span> / journalist123</p>
                      </div>
                    </AlertDescription>
                  </Alert>

                  {rateLimiter.isLocked && (
                    <Alert variant="destructive" className="border-orange-500/50 bg-orange-500/10">
                      <Clock className="h-4 w-4 text-orange-500" />
                      <AlertDescription className="text-orange-600">
                        Account temporarily locked due to too many failed attempts.
                        <br />
                        <span className="font-mono font-bold">{rateLimiter.formatRemainingTime()}</span> remaining
                      </AlertDescription>
                    </Alert>
                  )}

                  {error && !rateLimiter.isLocked && (
                    <Alert variant="destructive">
                      <AlertCircle className="h-4 w-4" />
                      <AlertDescription>{error}</AlertDescription>
                    </Alert>
                  )}

                  <div className="space-y-2">
                    <Label htmlFor="email">Email</Label>
                    <div className="relative">
                      <Mail className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                      <Input
                        id="email"
                        type="email"
                        value={email}
                        onChange={(e) => {
                          setEmail(e.target.value);
                          setValidationErrors(prev => ({ ...prev, email: undefined }));
                        }}
                        placeholder="admin@truthlens.com"
                        className={`pl-10 ${validationErrors.email ? 'border-destructive' : ''}`}
                        autoComplete="email"
                        disabled={isLoading}
                      />
                    </div>
                    {validationErrors.email && (
                      <p className="text-xs text-destructive">{validationErrors.email}</p>
                    )}
                  </div>

                  <div className="space-y-2">
                    <div className="flex items-center justify-between">
                      <Label htmlFor="password">Password</Label>
                      <button
                        type="button"
                        onClick={switchToReset}
                        className="text-xs text-primary hover:underline"
                      >
                        Forgot password?
                      </button>
                    </div>
                    <div className="relative">
                      <Lock className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                      <Input
                        id="password"
                        type={showPassword ? 'text' : 'password'}
                        value={password}
                        onChange={(e) => {
                          setPassword(e.target.value);
                          setValidationErrors(prev => ({ ...prev, password: undefined }));
                        }}
                        placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                        className={`pl-10 pr-10 ${validationErrors.password ? 'border-destructive' : ''}`}
                        autoComplete="current-password"
                        disabled={isLoading}
                      />
                      <button
                        type="button"
                        onClick={() => setShowPassword(!showPassword)}
                        className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
                        tabIndex={-1}
                      >
                        {showPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
                      </button>
                    </div>
                    {validationErrors.password && (
                      <p className="text-xs text-destructive">{validationErrors.password}</p>
                    )}
                  </div>

                  <div className="flex items-center space-x-2">
                    <Checkbox
                      id="remember"
                      checked={rememberMe}
                      onCheckedChange={(checked) => setRememberMe(checked === true)}
                      disabled={isLoading}
                    />
                    <Label 
                      htmlFor="remember" 
                      className="text-sm font-normal cursor-pointer"
                    >
                      Remember me for 7 days
                    </Label>
                  </div>

                  <Button 
                    type="submit" 
                    className="w-full" 
                    size="lg"
                    disabled={isLoading || rateLimiter.isLocked}
                  >
                    {isLoading ? (
                      <span className="flex items-center gap-2">
                        <span className="h-4 w-4 animate-spin rounded-full border-2 border-primary-foreground border-t-transparent" />
                        Signing in...
                      </span>
                    ) : rateLimiter.isLocked ? (
                      <span className="flex items-center gap-2">
                        <Clock className="h-4 w-4" />
                        Locked ({rateLimiter.formatRemainingTime()})
                      </span>
                    ) : (
                      'Sign In'
                    )}
                  </Button>
                </motion.form>
              )}

              {/* Password Reset Form */}
              {viewMode === 'reset' && (
                <motion.form
                  key="reset"
                  initial={{ opacity: 0, x: 20 }}
                  animate={{ opacity: 1, x: 0 }}
                  exit={{ opacity: 0, x: -20 }}
                  transition={{ duration: 0.2 }}
                  onSubmit={handlePasswordReset}
                  className="space-y-4"
                >
                  {error && (
                    <Alert variant="destructive">
                      <AlertCircle className="h-4 w-4" />
                      <AlertDescription>{error}</AlertDescription>
                    </Alert>
                  )}

                  <div className="space-y-2">
                    <Label htmlFor="reset-email">Email</Label>
                    <div className="relative">
                      <Mail className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                      <Input
                        id="reset-email"
                        type="email"
                        value={email}
                        onChange={(e) => {
                          setEmail(e.target.value);
                          setValidationErrors(prev => ({ ...prev, email: undefined }));
                        }}
                        placeholder="admin@truthlens.com"
                        className={`pl-10 ${validationErrors.email ? 'border-destructive' : ''}`}
                        autoComplete="email"
                        disabled={isLoading}
                      />
                    </div>
                    {validationErrors.email && (
                      <p className="text-xs text-destructive">{validationErrors.email}</p>
                    )}
                  </div>

                  <Button 
                    type="submit" 
                    className="w-full" 
                    size="lg"
                    disabled={isLoading}
                  >
                    {isLoading ? (
                      <span className="flex items-center gap-2">
                        <span className="h-4 w-4 animate-spin rounded-full border-2 border-primary-foreground border-t-transparent" />
                        Sending...
                      </span>
                    ) : (
                      'Send Reset Link'
                    )}
                  </Button>

                  <Button
                    type="button"
                    variant="ghost"
                    className="w-full"
                    onClick={switchToLogin}
                  >
                    <ArrowLeft className="h-4 w-4 mr-2" />
                    Back to Login
                  </Button>
                </motion.form>
              )}

              {/* Reset Email Sent */}
              {viewMode === 'reset-sent' && (
                <motion.div
                  key="reset-sent"
                  initial={{ opacity: 0, scale: 0.95 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.95 }}
                  transition={{ duration: 0.2 }}
                  className="text-center space-y-6"
                >
                  <div className="flex justify-center">
                    <div className="h-16 w-16 rounded-full bg-green-500/10 flex items-center justify-center">
                      <CheckCircle className="h-8 w-8 text-green-500" />
                    </div>
                  </div>
                  
                  <div className="space-y-2">
                    <p className="text-sm text-muted-foreground">
                      If an account exists for <span className="font-medium text-foreground">{email}</span>, 
                      you will receive password reset instructions shortly.
                    </p>
                    <p className="text-xs text-muted-foreground">
                      Check your spam folder if you don't see the email.
                    </p>
                  </div>

                  <Button
                    variant="outline"
                    className="w-full"
                    onClick={switchToLogin}
                  >
                    <ArrowLeft className="h-4 w-4 mr-2" />
                    Back to Login
                  </Button>
                </motion.div>
              )}
            </AnimatePresence>
          </CardContent>
        </Card>

        {/* Footer */}
        <p className="text-center text-xs text-muted-foreground mt-6">
          Protected by TruthLens Security â€¢ 
          <a href="/privacy" className="hover:underline ml-1">Privacy Policy</a>
        </p>
      </motion.div>
    </div>
  );
};

export default AdminLogin;

--- FILE END: src\pages\admin\AdminLogin.tsx ---


--- FILE START: src\pages\admin\AdminMedia.tsx ---
import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Input } from '@/components/ui/input';
import { Search, Image, Video, Trash2, ExternalLink, Upload, Filter, Grid, List, ShieldAlert } from 'lucide-react';
import { toast } from 'sonner';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog } from '@/context/ActivityLogContext';

interface MediaItem {
  id: string;
  url: string;
  type: 'image' | 'video';
  name: string;
  uploadedAt: Date;
  size: string;
}

// Mock media items
const initialMedia: MediaItem[] = [
  { id: '1', url: 'https://images.unsplash.com/photo-1569163139599-0f4517e36f31?w=1200', type: 'image', name: 'climate-summit.jpg', uploadedAt: new Date('2026-01-14'), size: '2.4 MB' },
  { id: '2', url: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=1200', type: 'image', name: 'economy-chart.jpg', uploadedAt: new Date('2026-01-13'), size: '1.8 MB' },
  { id: '3', url: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1200', type: 'image', name: 'workers.jpg', uploadedAt: new Date('2026-01-12'), size: '3.2 MB' },
  { id: '4', url: 'https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=1200', type: 'image', name: 'tech-privacy.jpg', uploadedAt: new Date('2026-01-11'), size: '2.1 MB' },
  { id: '5', url: 'https://images.unsplash.com/photo-1529107386315-e1a2ed48a620?w=1200', type: 'image', name: 'summit.jpg', uploadedAt: new Date('2026-01-10'), size: '1.5 MB' },
  { id: '6', url: 'https://images.unsplash.com/photo-1518998053901-5348d3961a04?w=1200', type: 'image', name: 'culture-art.jpg', uploadedAt: new Date('2026-01-09'), size: '2.8 MB' },
];

const AdminMedia = () => {
  const { hasPermission, currentUser } = useAdminAuth();
  const { logActivity } = useActivityLog();
  const [mediaList, setMediaList] = useState<MediaItem[]>(initialMedia);
  const [searchQuery, setSearchQuery] = useState('');
  const [filterType, setFilterType] = useState<string>('all');
  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');
  const [selectedItems, setSelectedItems] = useState<string[]>([]);

  const canUpload = hasPermission('uploadMedia');
  const canViewAll = hasPermission('viewAllMedia');
  const canDeleteAll = hasPermission('deleteAllMedia');
  const canDeleteOwn = hasPermission('deleteOwnMedia');

  const filteredMedia = mediaList.filter(item => {
    const matchesSearch = item.name.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesType = filterType === 'all' || item.type === filterType;
    return matchesSearch && matchesType;
  });

  const handleDelete = (id: string) => {
    if (!canDeleteAll && !canDeleteOwn) {
      toast.error('You do not have permission to delete media');
      return;
    }
    const item = mediaList.find(m => m.id === id);
    if (window.confirm('Are you sure you want to delete this media?')) {
      setMediaList(prev => prev.filter(item => item.id !== id));
      logActivity('delete', 'media', {
        resourceId: id,
        resourceName: item?.name,
        details: 'Deleted media file'
      });
      toast.success('Media deleted successfully!');
    }
  };

  const handleBulkDelete = () => {
    if (!canDeleteAll) {
      toast.error('You do not have permission to bulk delete media');
      return;
    }
    if (selectedItems.length === 0) {
      toast.error('No items selected');
      return;
    }
    if (window.confirm(`Are you sure you want to delete ${selectedItems.length} items?`)) {
      const count = selectedItems.length;
      setMediaList(prev => prev.filter(item => !selectedItems.includes(item.id)));
      logActivity('bulk_delete', 'media', {
        details: `Bulk deleted ${count} media files`
      });
      setSelectedItems([]);
      toast.success('Media deleted successfully!');
    }
  };

  const toggleSelection = (id: string) => {
    setSelectedItems(prev =>
      prev.includes(id) ? prev.filter(i => i !== id) : [...prev, id]
    );
  };

  const copyUrl = (url: string) => {
    navigator.clipboard.writeText(url);
    toast.success('URL copied to clipboard!');
  };

  return (
    <div>
      <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
        <div>
          <h1 className="font-display text-2xl font-bold text-foreground">Media Library</h1>
          {!canViewAll && (
            <p className="text-sm text-muted-foreground mt-1">Showing your uploaded media only</p>
          )}
        </div>
        {canUpload && (
          <Button>
            <Upload className="mr-2 h-4 w-4" />
            Upload Media
          </Button>
        )}
      </div>

      {/* Filters */}
      <div className="mb-6 flex flex-col sm:flex-row gap-4">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search media..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-9"
          />
        </div>
        <Select value={filterType} onValueChange={setFilterType}>
          <SelectTrigger className="w-full sm:w-32">
            <SelectValue placeholder="Type" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Types</SelectItem>
            <SelectItem value="image">Images</SelectItem>
            <SelectItem value="video">Videos</SelectItem>
          </SelectContent>
        </Select>
        <div className="flex gap-1">
          <Button
            variant={viewMode === 'grid' ? 'default' : 'outline'}
            size="icon"
            onClick={() => setViewMode('grid')}
          >
            <Grid className="h-4 w-4" />
          </Button>
          <Button
            variant={viewMode === 'list' ? 'default' : 'outline'}
            size="icon"
            onClick={() => setViewMode('list')}
          >
            <List className="h-4 w-4" />
          </Button>
        </div>
      </div>

      {/* Bulk Actions */}
      {selectedItems.length > 0 && canDeleteAll && (
        <div className="mb-4 flex items-center gap-4 p-3 rounded-lg bg-muted">
          <span className="text-sm text-foreground">{selectedItems.length} items selected</span>
          <Button variant="destructive" size="sm" onClick={handleBulkDelete}>
            <Trash2 className="mr-2 h-4 w-4" />
            Delete Selected
          </Button>
          <Button variant="outline" size="sm" onClick={() => setSelectedItems([])}>
            Clear Selection
          </Button>
        </div>
      )}

      {/* Media Grid/List */}
      {viewMode === 'grid' ? (
        <div className="grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
          {filteredMedia.map((item) => (
            <div
              key={item.id}
              className={`group relative rounded-xl overflow-hidden bg-card border-2 transition-colors ${selectedItems.includes(item.id) ? 'border-primary' : 'border-border'
                }`}
            >
              <div className="aspect-video relative">
                <img
                  src={item.url}
                  alt={item.name}
                  className="h-full w-full object-cover"
                />
                <div className="absolute inset-0 bg-black/0 group-hover:bg-black/40 transition-colors">
                  {canDeleteAll && (
                    <div className="absolute top-2 left-2">
                      <input
                        type="checkbox"
                        checked={selectedItems.includes(item.id)}
                        onChange={() => toggleSelection(item.id)}
                        className="h-4 w-4 rounded"
                      />
                    </div>
                  )}
                  <div className="absolute bottom-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                    <Button size="icon" variant="secondary" className="h-8 w-8" onClick={() => copyUrl(item.url)}>
                      <ExternalLink className="h-4 w-4" />
                    </Button>
                    {(canDeleteAll || canDeleteOwn) && (
                      <Button size="icon" variant="destructive" className="h-8 w-8" onClick={() => handleDelete(item.id)}>
                        <Trash2 className="h-4 w-4" />
                      </Button>
                    )}
                  </div>
                </div>
                <Badge className="absolute top-2 right-2" variant="secondary">
                  {item.type === 'image' ? <Image className="h-3 w-3" /> : <Video className="h-3 w-3" />}
                </Badge>
              </div>
              <div className="p-3">
                <p className="text-sm font-medium text-foreground truncate">{item.name}</p>
                <p className="text-xs text-muted-foreground">{item.size}</p>
              </div>
            </div>
          ))}
        </div>
      ) : (
        <>
          <div className="hidden md:block rounded-xl bg-card border border-border overflow-hidden">
            <table className="w-full">
              <thead className="bg-muted">
                <tr>
                  {canDeleteAll && (
                    <th className="px-4 py-3 text-left w-12">
                      <input
                        type="checkbox"
                        checked={selectedItems.length === filteredMedia.length && filteredMedia.length > 0}
                        onChange={(e) => {
                          if (e.target.checked) {
                            setSelectedItems(filteredMedia.map(i => i.id));
                          } else {
                            setSelectedItems([]);
                          }
                        }}
                        className="h-4 w-4 rounded"
                      />
                    </th>
                  )}
                  <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Preview</th>
                  <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Name</th>
                  <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Type</th>
                  <th className="px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase">Size</th>
                  <th className="px-4 py-3 text-right text-xs font-medium text-muted-foreground uppercase">Actions</th>
                </tr>
              </thead>
              <tbody className="divide-y divide-border">
                {filteredMedia.map((item) => (
                  <tr key={item.id} className="hover:bg-muted/50">
                    {canDeleteAll && (
                      <td className="px-4 py-3">
                        <input
                          type="checkbox"
                          checked={selectedItems.includes(item.id)}
                          onChange={() => toggleSelection(item.id)}
                          className="h-4 w-4 rounded"
                        />
                      </td>
                    )}
                    <td className="px-4 py-3">
                      <img src={item.url} alt="" className="h-10 w-14 rounded object-cover" />
                    </td>
                    <td className="px-4 py-3 text-sm font-medium text-foreground">{item.name}</td>
                    <td className="px-4 py-3">
                      <Badge variant="outline" className="capitalize">{item.type}</Badge>
                    </td>
                    <td className="px-4 py-3 text-sm text-muted-foreground">{item.size}</td>
                    <td className="px-4 py-3 text-right">
                      <div className="flex justify-end gap-1">
                        <Button size="icon" variant="ghost" onClick={() => copyUrl(item.url)}>
                          <ExternalLink className="h-4 w-4" />
                        </Button>
                        {(canDeleteAll || canDeleteOwn) && (
                          <Button size="icon" variant="ghost" className="text-destructive" onClick={() => handleDelete(item.id)}>
                            <Trash2 className="h-4 w-4" />
                          </Button>
                        )}
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>

          {/* Mobile List View (Compact Row) */}
          <div className="md:hidden space-y-2">
            {canDeleteAll && filteredMedia.length > 0 && (
              <div className="flex items-center gap-2 p-2 bg-muted rounded-lg mb-2">
                <input
                  type="checkbox"
                  checked={selectedItems.length === filteredMedia.length && filteredMedia.length > 0}
                  onChange={(e) => {
                    if (e.target.checked) {
                      setSelectedItems(filteredMedia.map(i => i.id));
                    } else {
                      setSelectedItems([]);
                    }
                  }}
                  className="h-4 w-4 rounded"
                />
                <span className="text-xs font-medium">Select All</span>
              </div>
            )}

            {filteredMedia.map((item) => (
              <div key={item.id} className="bg-card p-3 rounded-lg border border-border flex items-center gap-3 shadow-sm">
                {canDeleteAll && (
                  <input
                    type="checkbox"
                    checked={selectedItems.includes(item.id)}
                    onChange={() => toggleSelection(item.id)}
                    className="h-4 w-4 rounded flex-shrink-0"
                  />
                )}
                <div className="h-12 w-16 bg-muted rounded overflow-hidden flex-shrink-0 relative">
                  <img src={item.url} alt="" className="h-full w-full object-cover" />
                  <div className="absolute inset-0 bg-black/10" />
                  {item.type === 'video' && <div className="absolute inset-0 flex items-center justify-center"><Video className="h-4 w-4 text-white drop-shadow" /></div>}
                </div>

                <div className="flex-1 min-w-0">
                  <div className="font-medium text-sm truncate">{item.name}</div>
                  <div className="flex items-center gap-2 text-xs text-muted-foreground mt-0.5">
                    <span>{item.size}</span>
                    <Badge variant="secondary" className="text-[10px] h-4 px-1">{item.type}</Badge>
                  </div>
                </div>

                <div className="flex gap-1 flex-shrink-0">
                  <Button size="icon" variant="ghost" className="h-8 w-8" onClick={() => copyUrl(item.url)}>
                    <ExternalLink className="h-4 w-4" />
                  </Button>
                  {(canDeleteAll || canDeleteOwn) && (
                    <Button size="icon" variant="ghost" className="h-8 w-8 text-destructive" onClick={() => handleDelete(item.id)}>
                      <Trash2 className="h-4 w-4" />
                    </Button>
                  )}
                </div>
              </div>
            ))}
          </div>
        </>
      )}

      {filteredMedia.length === 0 && (
        <div className="rounded-xl bg-muted p-12 text-center">
          <Image className="mx-auto h-12 w-12 text-muted-foreground mb-4" />
          <p className="text-muted-foreground">No media found</p>
        </div>
      )}
    </div>
  );
};

export default AdminMedia;

--- FILE END: src\pages\admin\AdminMedia.tsx ---


--- FILE START: src\pages\admin\AdminMenu.tsx ---
import { useState } from 'react';
import { Save, Menu, Plus, Trash2, Eye, EyeOff, ExternalLink, Folder, FileText, LayoutDashboard, MoreHorizontal } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { Input } from '@/components/ui/input';
import { Switch } from '@/components/ui/switch';
import { Badge } from '@/components/ui/badge';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { headerMenuItems as initialMenuItems, categories } from '@/data/mockData';
import { MenuItem } from '@/types/news';
import { toast } from 'sonner';
import { getMenuSettings, saveMenuSettings } from '@/lib/settingsService';

const AdminMenu = () => {
  const [menuItems, setMenuItems] = useState<MenuItem[]>(getMenuSettings(initialMenuItems));
  const [isAddDialogOpen, setIsAddDialogOpen] = useState(false);
  const [newItem, setNewItem] = useState<Partial<MenuItem>>({
    label: '',
    path: '',
    type: 'page',
    isVisible: true,
    highlight: false,
    icon: '',
    showInMainNav: true
  });

  const toggleVisibility = (id: string) => {
    setMenuItems(menuItems.map(item =>
      item.id === id ? { ...item, isVisible: !item.isVisible } : item
    ));
  };

  const toggleHighlight = (id: string) => {
    setMenuItems(menuItems.map(item =>
      item.id === id ? { ...item, highlight: !item.highlight } : item
    ));
  };

  const toggleMainNav = (id: string) => {
    setMenuItems(menuItems.map(item =>
      item.id === id ? { ...item, showInMainNav: !item.showInMainNav } : item
    ));
  };

  const updateItem = (id: string, field: keyof MenuItem, value: string | boolean) => {
    setMenuItems(menuItems.map(item =>
      item.id === id ? { ...item, [field]: value } : item
    ));
  };

  const deleteItem = (id: string) => {
    setMenuItems(menuItems.filter(item => item.id !== id));
    toast.success('Menu item deleted');
  };

  const addNewItem = () => {
    if (!newItem.label || !newItem.path) {
      toast.error('Please fill in all required fields');
      return;
    }

    const newMenuItem: MenuItem = {
      id: Date.now().toString(),
      label: newItem.label,
      path: newItem.path,
      type: newItem.type as 'category' | 'page' | 'external',
      isVisible: newItem.isVisible ?? true,
      order: menuItems.length + 1,
      highlight: newItem.highlight,
      icon: newItem.icon,
      showInMainNav: newItem.showInMainNav ?? true
    };

    setMenuItems([...menuItems, newMenuItem]);
    setNewItem({ label: '', path: '', type: 'page', isVisible: true, highlight: false, icon: '', showInMainNav: true });
    setIsAddDialogOpen(false);
    toast.success('Menu item added successfully');
  };

  const moveItem = (id: string, direction: 'up' | 'down') => {
    const index = menuItems.findIndex(item => item.id === id);
    if ((direction === 'up' && index === 0) || (direction === 'down' && index === menuItems.length - 1)) {
      return;
    }

    const newItems = [...menuItems];
    const swapIndex = direction === 'up' ? index - 1 : index + 1;
    [newItems[index], newItems[swapIndex]] = [newItems[swapIndex], newItems[index]];

    newItems.forEach((item, i) => {
      item.order = i + 1;
    });

    setMenuItems(newItems);
  };

  const handleSave = () => {
    saveMenuSettings(menuItems);
    toast.success('Menu settings saved successfully!');
  };

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'category': return <Folder className="h-4 w-4" />;
      case 'external': return <ExternalLink className="h-4 w-4" />;
      default: return <FileText className="h-4 w-4" />;
    }
  };

  const mainNavItems = menuItems.filter(item => item.showInMainNav && item.isVisible);
  const moreItems = menuItems.filter(item => !item.showInMainNav && item.isVisible);

  return (
    <div>
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Header Menu Management</h1>
          <p className="text-muted-foreground text-sm mt-1">
            Control which items appear in main nav vs "More" dropdown
          </p>
        </div>
        <div className="flex gap-2">
          <Dialog open={isAddDialogOpen} onOpenChange={setIsAddDialogOpen}>
            <DialogTrigger asChild>
              <Button variant="outline" size="sm" className="sm:size-default">
                <Plus className="mr-1 sm:mr-2 h-4 w-4" /> <span className="hidden sm:inline">Add Item</span><span className="sm:hidden">Add</span>
              </Button>
            </DialogTrigger>
            <DialogContent className="max-w-md mx-4 sm:mx-auto">
              <DialogHeader>
                <DialogTitle>Add New Menu Item</DialogTitle>
                <DialogDescription>
                  Create a new navigation link for the header menu
                </DialogDescription>
              </DialogHeader>
              <div className="space-y-4 py-4">
                <div>
                  <Label>Label *</Label>
                  <Input
                    value={newItem.label}
                    onChange={(e) => setNewItem({ ...newItem, label: e.target.value })}
                    placeholder="e.g., About Us"
                    className="mt-1"
                  />
                </div>
                <div>
                  <Label>Path/URL *</Label>
                  <Input
                    value={newItem.path}
                    onChange={(e) => setNewItem({ ...newItem, path: e.target.value })}
                    placeholder="e.g., /about or https://..."
                    className="mt-1"
                  />
                </div>
                <div>
                  <Label>Type</Label>
                  <Select
                    value={newItem.type}
                    onValueChange={(v) => setNewItem({ ...newItem, type: v as 'category' | 'page' | 'external' })}
                  >
                    <SelectTrigger className="mt-1">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="category">Category</SelectItem>
                      <SelectItem value="page">Internal Page</SelectItem>
                      <SelectItem value="external">External Link</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
                <div>
                  <Label>Icon (emoji, optional)</Label>
                  <Input
                    value={newItem.icon}
                    onChange={(e) => setNewItem({ ...newItem, icon: e.target.value })}
                    placeholder="e.g., ðŸŽ“ or ðŸ“°"
                    className="mt-1"
                  />
                </div>
                <div className="flex items-center justify-between">
                  <Label>Show in Main Nav</Label>
                  <Switch
                    checked={newItem.showInMainNav}
                    onCheckedChange={(v) => setNewItem({ ...newItem, showInMainNav: v })}
                  />
                </div>
                <div className="flex items-center justify-between">
                  <Label>Highlight (colored text)</Label>
                  <Switch
                    checked={newItem.highlight}
                    onCheckedChange={(v) => setNewItem({ ...newItem, highlight: v })}
                  />
                </div>
              </div>
              <DialogFooter className="flex-col sm:flex-row gap-2">
                <Button variant="outline" onClick={() => setIsAddDialogOpen(false)} className="w-full sm:w-auto">Cancel</Button>
                <Button onClick={addNewItem} className="w-full sm:w-auto">Add Item</Button>
              </DialogFooter>
            </DialogContent>
          </Dialog>
          <Button onClick={handleSave} size="sm" className="sm:size-default">
            <Save className="mr-1 sm:mr-2 h-4 w-4" /> <span className="hidden sm:inline">Save Changes</span><span className="sm:hidden">Save</span>
          </Button>
        </div>
      </div>

      <Tabs defaultValue="all" className="w-full">
        <TabsList className="w-full grid grid-cols-3 mb-4">
          <TabsTrigger value="all" className="text-xs sm:text-sm">All Items</TabsTrigger>
          <TabsTrigger value="main" className="text-xs sm:text-sm">Main Nav ({mainNavItems.length})</TabsTrigger>
          <TabsTrigger value="more" className="text-xs sm:text-sm">More ({moreItems.length})</TabsTrigger>
        </TabsList>

        <TabsContent value="all">
          <div className="grid gap-4 lg:grid-cols-3">
            {/* Menu Items List */}
            <div className="lg:col-span-2">
              <Card>
                <CardHeader className="pb-3">
                  <div className="flex items-center gap-2">
                    <Menu className="h-5 w-5 text-primary" />
                    <CardTitle className="text-base sm:text-lg">All Menu Items</CardTitle>
                  </div>
                  <CardDescription className="text-xs sm:text-sm">
                    Toggle "Main Nav" to control where items appear
                  </CardDescription>
                </CardHeader>
                <CardContent>
                  <div className="space-y-2">
                    {menuItems.sort((a, b) => a.order - b.order).map((item, index) => (
                      <div
                        key={item.id}
                        className={`flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-3 p-3 rounded-lg border ${item.isVisible ? 'border-border bg-card' : 'border-dashed border-muted bg-muted/30 opacity-60'}`}
                      >
                        <div className="flex items-center gap-2 sm:gap-3">
                          <div className="flex flex-col gap-0.5">
                            <Button
                              variant="ghost"
                              size="icon"
                              className="h-5 w-5"
                              onClick={() => moveItem(item.id, 'up')}
                              disabled={index === 0}
                            >
                              â–²
                            </Button>
                            <Button
                              variant="ghost"
                              size="icon"
                              className="h-5 w-5"
                              onClick={() => moveItem(item.id, 'down')}
                              disabled={index === menuItems.length - 1}
                            >
                              â–¼
                            </Button>
                          </div>

                          <span className="text-xs font-bold text-muted-foreground w-5">{index + 1}</span>

                          <div className="flex-1 min-w-0">
                            <div className="flex items-center gap-1.5 flex-wrap">
                              {item.icon && <span className="text-sm">{item.icon}</span>}
                              <span className="font-medium text-sm truncate">{item.label}</span>
                              <Badge variant={item.type === 'category' ? 'default' : item.type === 'external' ? 'secondary' : 'outline'} className="text-[9px] px-1.5">
                                {item.type}
                              </Badge>
                              {item.showInMainNav ? (
                                <Badge className="bg-green-500/20 text-green-600 border-green-500/30 text-[9px] px-1.5">
                                  <LayoutDashboard className="h-2.5 w-2.5 mr-0.5" />
                                  Main
                                </Badge>
                              ) : (
                                <Badge className="bg-orange-500/20 text-orange-600 border-orange-500/30 text-[9px] px-1.5">
                                  <MoreHorizontal className="h-2.5 w-2.5 mr-0.5" />
                                  More
                                </Badge>
                              )}
                              {item.highlight && (
                                <Badge className="bg-primary/20 text-primary text-[9px] px-1.5">â˜…</Badge>
                              )}
                            </div>
                            <span className="text-[10px] text-muted-foreground truncate block mt-0.5">{item.path}</span>
                          </div>
                        </div>

                        <div className="flex items-center gap-1 ml-auto">
                          <Button
                            variant={item.showInMainNav ? "default" : "outline"}
                            size="sm"
                            onClick={() => toggleMainNav(item.id)}
                            className="h-7 text-[10px] px-2"
                          >
                            {item.showInMainNav ? 'Main' : 'More'}
                          </Button>
                          <Button
                            variant="ghost"
                            size="icon"
                            onClick={() => toggleHighlight(item.id)}
                            title="Toggle highlight"
                            className="h-7 w-7"
                          >
                            <span className={item.highlight ? 'text-primary' : 'text-muted-foreground'}>â˜…</span>
                          </Button>
                          <Button
                            variant="ghost"
                            size="icon"
                            onClick={() => toggleVisibility(item.id)}
                            title={item.isVisible ? 'Hide' : 'Show'}
                            className="h-7 w-7"
                          >
                            {item.isVisible ? <Eye className="h-3.5 w-3.5" /> : <EyeOff className="h-3.5 w-3.5" />}
                          </Button>
                          <Button
                            variant="ghost"
                            size="icon"
                            onClick={() => deleteItem(item.id)}
                            className="h-7 w-7 text-destructive hover:text-destructive"
                          >
                            <Trash2 className="h-3.5 w-3.5" />
                          </Button>
                        </div>
                      </div>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </div>

            {/* Quick Add */}
            <div className="space-y-4">
              <Card>
                <CardHeader className="pb-3">
                  <CardTitle className="text-sm">Quick Add Categories</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 sm:grid-cols-1 gap-2">
                    {categories.filter(c => !menuItems.some(m => m.path === `/category/${c.id}`)).slice(0, 4).map((category) => (
                      <Button
                        key={category.id}
                        variant="outline"
                        size="sm"
                        className="w-full justify-start text-xs"
                        onClick={() => {
                          const newMenuItem: MenuItem = {
                            id: Date.now().toString(),
                            label: category.name,
                            path: `/category/${category.id}`,
                            type: 'category',
                            isVisible: true,
                            order: menuItems.length + 1,
                            showInMainNav: false
                          };
                          setMenuItems([...menuItems, newMenuItem]);
                          toast.success(`Added ${category.name}`);
                        }}
                      >
                        <Plus className="mr-1 h-3 w-3" />
                        {category.name}
                      </Button>
                    ))}
                    {categories.filter(c => !menuItems.some(m => m.path === `/category/${c.id}`)).length === 0 && (
                      <p className="text-xs text-muted-foreground text-center py-2 col-span-2 sm:col-span-1">
                        All categories added
                      </p>
                    )}
                  </div>
                </CardContent>
              </Card>

              <Card>
                <CardHeader className="pb-3">
                  <CardTitle className="text-sm">Quick Add Pages</CardTitle>
                </CardHeader>
                <CardContent>
                  <div className="grid grid-cols-2 sm:grid-cols-1 gap-2">
                    {[
                      { label: 'About Us', path: '/about' },
                      { label: 'Contact', path: '/contact' },
                      { label: 'Careers', path: '/careers' },
                    ].filter(p => !menuItems.some(m => m.path === p.path)).map((page) => (
                      <Button
                        key={page.path}
                        variant="outline"
                        size="sm"
                        className="w-full justify-start text-xs"
                        onClick={() => {
                          const newMenuItem: MenuItem = {
                            id: Date.now().toString(),
                            label: page.label,
                            path: page.path,
                            type: 'page',
                            isVisible: true,
                            order: menuItems.length + 1,
                            showInMainNav: false
                          };
                          setMenuItems([...menuItems, newMenuItem]);
                          toast.success(`Added ${page.label}`);
                        }}
                      >
                        <Plus className="mr-1 h-3 w-3" />
                        {page.label}
                      </Button>
                    ))}
                  </div>
                </CardContent>
              </Card>
            </div>
          </div>
        </TabsContent>

        <TabsContent value="main">
          <Card>
            <CardHeader className="pb-3">
              <div className="flex items-center gap-2">
                <LayoutDashboard className="h-5 w-5 text-green-600" />
                <CardTitle className="text-base">Main Navigation Items</CardTitle>
              </div>
              <CardDescription className="text-xs">
                These items appear directly in the header navigation bar
              </CardDescription>
            </CardHeader>
            <CardContent>
              {mainNavItems.length === 0 ? (
                <p className="text-sm text-muted-foreground text-center py-8">
                  No items in main nav. Toggle items from "All Items" tab.
                </p>
              ) : (
                <div className="space-y-2">
                  {mainNavItems.map((item) => (
                    <div key={item.id} className="flex items-center justify-between p-3 rounded-lg border border-green-500/30 bg-green-500/5">
                      <div className="flex items-center gap-2">
                        {item.icon && <span>{item.icon}</span>}
                        <span className="font-medium text-sm">{item.label}</span>
                        <Badge variant="outline" className="text-[9px]">{item.type}</Badge>
                      </div>
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={() => toggleMainNav(item.id)}
                        className="h-7 text-xs"
                      >
                        Move to More
                      </Button>
                    </div>
                  ))}
                </div>
              )}
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="more">
          <Card>
            <CardHeader className="pb-3">
              <div className="flex items-center gap-2">
                <MoreHorizontal className="h-5 w-5 text-orange-600" />
                <CardTitle className="text-base">"More" Dropdown Items</CardTitle>
              </div>
              <CardDescription className="text-xs">
                These items appear in the "More" dropdown menu
              </CardDescription>
            </CardHeader>
            <CardContent>
              {moreItems.length === 0 ? (
                <p className="text-sm text-muted-foreground text-center py-8">
                  No items in "More" dropdown. Toggle items from "All Items" tab.
                </p>
              ) : (
                <div className="space-y-2">
                  {moreItems.map((item) => (
                    <div key={item.id} className="flex items-center justify-between p-3 rounded-lg border border-orange-500/30 bg-orange-500/5">
                      <div className="flex items-center gap-2">
                        {item.icon && <span>{item.icon}</span>}
                        <span className="font-medium text-sm">{item.label}</span>
                        <Badge variant="outline" className="text-[9px]">{item.type}</Badge>
                        {item.highlight && <Badge className="bg-primary/20 text-primary text-[9px]">â˜…</Badge>}
                      </div>
                      <Button
                        variant="outline"
                        size="sm"
                        onClick={() => toggleMainNav(item.id)}
                        className="h-7 text-xs"
                      >
                        Move to Main
                      </Button>
                    </div>
                  ))}
                </div>
              )}
            </CardContent>
          </Card>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default AdminMenu;

--- FILE END: src\pages\admin\AdminMenu.tsx ---


--- FILE START: src\pages\admin\AdminProfile.tsx ---
import { useState, useRef } from 'react';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';
import { Badge } from '@/components/ui/badge';
import { Upload, Save, User as UserIcon } from 'lucide-react';
import { toast } from 'sonner';

const AdminProfile = () => {
    const { currentUser, updateCurrentUser } = useAdminAuth();
    const fileInputRef = useRef<HTMLInputElement>(null);

    // Local state for the form
    const [formData, setFormData] = useState({
        name: currentUser?.name || '',
        address: currentUser?.address || '',
        phone: currentUser?.phone || '',
        bio: currentUser?.bio || '',
        avatar: currentUser?.avatar || '',
    });

    const [isLoading, setIsLoading] = useState(false);

    if (!currentUser) return null;

    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
        const { name, value } = e.target;
        setFormData(prev => ({
            ...prev,
            [name]: value
        }));
    };

    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
        const file = e.target.files?.[0];
        if (file) {
            if (file.size > 2 * 1024 * 1024) { // 2MB Limit
                toast.error('Image size must be less than 2MB');
                return;
            }

            const reader = new FileReader();
            reader.onloadend = () => {
                setFormData(prev => ({
                    ...prev,
                    avatar: reader.result as string
                }));
            };
            reader.readAsDataURL(file);
        }
    };

    const handleSubmit = (e: React.FormEvent) => {
        e.preventDefault();
        setIsLoading(true);

        try {
            updateCurrentUser({
                ...currentUser,
                ...formData
            });
            toast.success('Profile updated successfully');
        } catch (error) {
            toast.error('Failed to update profile');
            console.error(error);
        } finally {
            setIsLoading(false);
        }
    };

    return (
        <div className="max-w-4xl mx-auto">
            <div className="flex items-center justify-between mb-6">
                <div>
                    <h1 className="font-display text-2xl font-bold text-foreground">My Profile</h1>
                    <p className="text-sm text-muted-foreground">Manage your personal information and account settings</p>
                </div>
            </div>

            <div className="grid gap-6 md:grid-cols-3">
                {/* Profile Card */}
                <Card className="md:col-span-1">
                    <CardHeader>
                        <CardTitle>Profile Picture</CardTitle>
                        <CardDescription>Click to upload a new avatar</CardDescription>
                    </CardHeader>
                    <CardContent className="flex flex-col items-center gap-6">
                        <div className="relative group cursor-pointer" onClick={() => fileInputRef.current?.click()}>
                            <Avatar className="h-32 w-32 border-4 border-background shadow-xl">
                                <AvatarImage src={formData.avatar} alt={formData.name} className="object-cover" />
                                <AvatarFallback className="text-4xl">{formData.name.charAt(0)}</AvatarFallback>
                            </Avatar>
                            <div className="absolute inset-0 bg-black/40 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                <Upload className="h-8 w-8 text-white" />
                            </div>
                        </div>
                        <input
                            type="file"
                            ref={fileInputRef}
                            className="hidden"
                            accept="image/*"
                            onChange={handleFileChange}
                        />

                        <div className="text-center space-y-1">
                            <h3 className="font-semibold text-lg">{currentUser.name}</h3>
                            <div className="flex flex-wrap justify-center gap-2">
                                <Badge variant="secondary" className="capitalize">{currentUser.role}</Badge>
                            </div>
                        </div>
                    </CardContent>
                </Card>

                {/* Details Form */}
                <Card className="md:col-span-2">
                    <CardHeader>
                        <CardTitle>Personal Information</CardTitle>
                        <CardDescription>Update your contact details and bio</CardDescription>
                    </CardHeader>
                    <CardContent>
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div className="grid gap-4 sm:grid-cols-2">
                                <div className="space-y-2">
                                    <Label htmlFor="name">Full Name</Label>
                                    <Input
                                        id="name"
                                        name="name"
                                        value={formData.name}
                                        onChange={handleChange}
                                        required
                                    />
                                </div>
                                <div className="space-y-2">
                                    <Label htmlFor="email">Email</Label>
                                    <Input
                                        id="email"
                                        value={currentUser.email}
                                        disabled
                                        className="bg-muted"
                                    />
                                </div>
                            </div>

                            <div className="space-y-2">
                                <Label htmlFor="address">Address</Label>
                                <Input
                                    id="address"
                                    name="address"
                                    value={formData.address}
                                    onChange={handleChange}
                                    placeholder="Street address, City, Country"
                                />
                            </div>

                            <div className="space-y-2">
                                <Label htmlFor="phone">Contact Number</Label>
                                <Input
                                    id="phone"
                                    name="phone"
                                    value={formData.phone}
                                    onChange={handleChange}
                                    placeholder="+1 (234) 567-8900"
                                />
                            </div>

                            <div className="space-y-2">
                                <Label htmlFor="bio">Bio</Label>
                                <Textarea
                                    id="bio"
                                    name="bio"
                                    value={formData.bio}
                                    onChange={handleChange}
                                    rows={4}
                                    placeholder="Tell us a little about yourself..."
                                />
                            </div>

                            <div className="flex justify-end pt-4">
                                <Button type="submit" disabled={isLoading}>
                                    {isLoading ? (
                                        <>
                                            <span className="animate-spin mr-2">â³</span> Saving...
                                        </>
                                    ) : (
                                        <>
                                            <Save className="mr-2 h-4 w-4" /> Save Changes
                                        </>
                                    )}
                                </Button>
                            </div>
                        </form>
                    </CardContent>
                </Card>
            </div>
        </div>
    );
};

export default AdminProfile;

--- FILE END: src\pages\admin\AdminProfile.tsx ---


--- FILE START: src\pages\admin\AdminSections.tsx ---
import { useState, useEffect } from 'react';
import { Save, LayoutGrid, Eye, EyeOff, GripVertical, X, Plus, Video, TrendingUp, Clock, BookOpen, Trophy, Film, Newspaper, MessageSquare, Pen, Briefcase } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Label } from '@/components/ui/label';
import { Switch } from '@/components/ui/switch';
import { Slider } from '@/components/ui/slider';
import { Badge } from '@/components/ui/badge';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { toast } from 'sonner';
import {
  DndContext,
  closestCenter,
  DragOverlay,
} from '@dnd-kit/core';
import {
  SortableContext,
  verticalListSortingStrategy,
  useSortable,
} from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { useTouchSortable } from '@/hooks/useTouchSortable';
import { cn } from '@/lib/utils';
import { getSectionsSettings, saveSectionsSettings, SectionConfig } from '@/lib/settingsService';

const defaultSections: SectionConfig[] = [
  { id: 'breaking-news', name: 'Breaking News Ticker', icon: <Newspaper className="h-4 w-4" />, enabled: true, order: 1, maxArticles: 5, selectedArticleIds: ['1', '2', '5'], showOnHomepage: true },
  { id: 'hero', name: 'Hero Section', icon: <LayoutGrid className="h-4 w-4" />, enabled: true, order: 2, maxArticles: 5, selectedArticleIds: ['1', '3', '4', '7'], showOnHomepage: true },
  { id: 'video-stories', name: 'Video Stories', icon: <Video className="h-4 w-4" />, enabled: true, order: 3, maxArticles: 4, selectedArticleIds: ['1', '3', '10', '13'], showOnHomepage: true },
  { id: 'latest-stories', name: 'Latest Stories', icon: <Clock className="h-4 w-4" />, enabled: true, order: 4, maxArticles: 6, selectedArticleIds: [], showOnHomepage: true },
  { id: 'trending', name: 'Trending Now', icon: <TrendingUp className="h-4 w-4" />, enabled: true, order: 5, maxArticles: 5, selectedArticleIds: ['1', '3', '7', '10', '13'], showOnHomepage: true },
  { id: 'comments', name: 'Reader Comments', icon: <MessageSquare className="h-4 w-4" />, enabled: true, order: 6, maxArticles: 3, selectedArticleIds: [], showOnHomepage: true },
  { id: 'internship-banner', name: 'Internship Banner', icon: <Briefcase className="h-4 w-4" />, enabled: true, order: 7, maxArticles: 0, selectedArticleIds: [], showOnHomepage: true },
  { id: 'untold-stories', name: 'Untold Stories', icon: <BookOpen className="h-4 w-4" />, enabled: true, order: 8, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true, category: 'untold-stories' },
  { id: 'sports', name: 'Sports', icon: <Trophy className="h-4 w-4" />, enabled: true, order: 9, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true, category: 'sports' },
  { id: 'entertainment', name: 'Entertainment', icon: <Film className="h-4 w-4" />, enabled: true, order: 10, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true, category: 'entertainment' },
  { id: 'editorial', name: 'Editorial & Opinion', icon: <Pen className="h-4 w-4" />, enabled: true, order: 11, maxArticles: 4, selectedArticleIds: [], showOnHomepage: true, category: 'editorial' },
];

// Draggable Section Card Component
const DraggableSectionCard = ({ section, onToggle, onToggleHomepage, onUpdateMaxArticles, onAddArticle, onRemoveArticle, availableArticles, getCategoryColor }: {
  section: SectionConfig;
  onToggle: () => void;
  onToggleHomepage: () => void;
  onUpdateMaxArticles: (max: number) => void;
  onAddArticle: (articleId: string) => void;
  onRemoveArticle: (articleId: string) => void;
  availableArticles: Article[];
  getCategoryColor: (category: string) => string;
}) => {
  const {
    attributes,
    listeners,
    setNodeRef,
    transform,
    transition,
    isDragging,
  } = useSortable({ id: section.id });

  const style = {
    transform: CSS.Transform.toString(transform),
    transition,
  };

  const sectionArticles = section.category
    ? availableArticles.filter(a => a.category === section.category)
    : availableArticles;

  return (
    <Card
      ref={setNodeRef}
      style={style}
      className={cn(
        'touch-manipulation',
        !section.enabled && 'opacity-60',
        isDragging && 'z-50 opacity-90 shadow-xl scale-[1.02]'
      )}
    >
      <CardHeader className="pb-3 px-3 sm:px-6">
        <div className="flex items-center justify-between gap-2">
          <div className="flex items-center gap-2 min-w-0">
            <button
              type="button"
              className={cn(
                'flex-shrink-0 p-1.5 rounded cursor-grab active:cursor-grabbing touch-manipulation',
                'hover:bg-muted focus:outline-none focus:ring-2 focus:ring-primary',
                isDragging && 'cursor-grabbing'
              )}
              {...attributes}
              {...listeners}
            >
              <GripVertical className="h-4 w-4 text-muted-foreground" />
            </button>
            <div className="p-1.5 sm:p-2 rounded-lg bg-primary/10 text-primary flex-shrink-0">
              {section.icon}
            </div>
            <div className="min-w-0">
              <CardTitle className="text-sm sm:text-base line-clamp-2 break-words leading-tight">{section.name}</CardTitle>
              {section.category && (
                <Badge className={`${getCategoryColor(section.category)} text-white text-[9px] sm:text-[10px] border-0 mt-1`}>
                  {section.category}
                </Badge>
              )}
            </div>
          </div>
          <div className="flex items-center gap-1 sm:gap-2 flex-shrink-0">
            <Button
              variant="ghost"
              size="icon"
              className="h-7 w-7 sm:h-8 sm:w-8"
              onClick={onToggleHomepage}
              title={section.showOnHomepage ? 'Hide from homepage' : 'Show on homepage'}
            >
              {section.showOnHomepage ? <Eye className="h-3.5 w-3.5 sm:h-4 sm:w-4" /> : <EyeOff className="h-3.5 w-3.5 sm:h-4 sm:w-4" />}
            </Button>
            <Switch
              checked={section.enabled}
              onCheckedChange={onToggle}
            />
          </div>
        </div>
      </CardHeader>
      <CardContent className="space-y-4 px-3 sm:px-6">
        {section.maxArticles > 0 && (
          <>
            <div>
              <Label className="text-xs text-muted-foreground">
                Max Articles: {section.maxArticles}
              </Label>
              <Slider
                value={[section.maxArticles]}
                onValueChange={([v]) => onUpdateMaxArticles(v)}
                min={1}
                max={10}
                step={1}
                className="mt-2"
                disabled={!section.enabled}
              />
            </div>

            <div>
              <Label className="text-xs font-medium">
                Selected Articles ({section.selectedArticleIds.length}/{section.maxArticles})
              </Label>
              <div className="space-y-1 mt-2 max-h-40 overflow-y-auto">
                {section.selectedArticleIds.map((id) => {
                  const article = availableArticles.find(a => a.id === id);
                  if (!article) return null;
                  return (
                    <div key={id} className="group flex items-center gap-3 p-2 bg-card border border-border/50 rounded-lg hover:border-primary/20 transition-all">
                      <div className="h-8 w-10 shrink-0 overflow-hidden rounded bg-muted">
                        {article.featuredImage && <img src={article.featuredImage} className="h-full w-full object-cover" alt="" />}
                      </div>
                      <span className="flex-1 line-clamp-2 text-xs font-medium break-words leading-tight">{article.title}</span>
                      <Button
                        variant="ghost"
                        size="icon"
                        className="h-6 w-6 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity"
                        onClick={() => onRemoveArticle(id)}
                      >
                        <X className="h-3 w-3" />
                      </Button>
                    </div>
                  );
                })}
              </div>
            </div>

            {section.selectedArticleIds.length < section.maxArticles && section.enabled && (
              <Select onValueChange={onAddArticle}>
                <SelectTrigger className="h-9">
                  <SelectValue placeholder="Add article..." />
                </SelectTrigger>
                <SelectContent>
                  {sectionArticles
                    .filter(a => !section.selectedArticleIds.includes(a.id))
                    .slice(0, 20)
                    .map((article) => (
                      <SelectItem key={article.id} value={article.id}>
                        <span className="truncate">
                          {article.title}
                          {article.status !== 'published' && <span className="text-xs text-muted-foreground ml-2">({article.status})</span>}
                        </span>
                      </SelectItem>
                    ))}
                </SelectContent>
              </Select>
            )}
          </>
        )}

        {section.maxArticles === 0 && (
          <p className="text-xs text-muted-foreground">This section displays static content</p>
        )}
      </CardContent>
    </Card>
  );
};

// Drag Overlay for Sections
const SectionDragOverlay = ({ section }: { section: SectionConfig }) => (
  <Card className="opacity-95 shadow-2xl border-2 border-primary max-w-[calc(100vw-2rem)] overflow-hidden">
    <CardHeader className="pb-3 px-3 sm:px-6">
      <div className="flex items-center justify-between gap-2">
        <div className="flex items-center gap-2 min-w-0">
          <GripVertical className="h-4 w-4 text-primary flex-shrink-0" />
          <div className="p-1.5 sm:p-2 rounded-lg bg-primary/10 text-primary flex-shrink-0">
            {section.icon}
          </div>
          <CardTitle className="text-sm sm:text-base line-clamp-2 break-words leading-tight">{section.name}</CardTitle>
        </div>
      </div>
    </CardHeader>
  </Card>
);

const AdminSections = () => {
  const [sections, setSections] = useState<SectionConfig[]>(getSectionsSettings(defaultSections));
  const [activeTab, setActiveTab] = useState('overview');
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  useEffect(() => {
    const loadArticles = () => setArticlesList(getArticles());
    loadArticles();

    window.addEventListener('articlesUpdated', loadArticles);
    return () => window.removeEventListener('articlesUpdated', loadArticles);
  }, []);

  // Allow all articles except rejected
  const availableArticles = articlesList.filter(a => (a.status as string) !== 'rejected');

  const getCategoryColor = (category: string) => {
    const colors: Record<string, string> = {
      national: 'bg-blue-500',
      international: 'bg-purple-500',
      economy: 'bg-amber-500',
      environment: 'bg-emerald-500',
      technology: 'bg-cyan-500',
      culture: 'bg-pink-500',
      editorial: 'bg-slate-500',
      society: 'bg-orange-500',
      'untold-stories': 'bg-red-600',
      sports: 'bg-green-500',
      entertainment: 'bg-fuchsia-500',
    };
    return colors[category] || 'bg-primary';
  };

  const toggleSection = (id: string) => {
    setSections(sections.map(s =>
      s.id === id ? { ...s, enabled: !s.enabled } : s
    ));
  };

  const toggleHomepage = (id: string) => {
    setSections(sections.map(s =>
      s.id === id ? { ...s, showOnHomepage: !s.showOnHomepage } : s
    ));
  };

  const updateMaxArticles = (id: string, max: number) => {
    setSections(sections.map(s =>
      s.id === id ? { ...s, maxArticles: max } : s
    ));
  };

  const addArticleToSection = (sectionId: string, articleId: string) => {
    setSections(sections.map(s => {
      if (s.id === sectionId && !s.selectedArticleIds.includes(articleId) && s.selectedArticleIds.length < s.maxArticles) {
        return { ...s, selectedArticleIds: [...s.selectedArticleIds, articleId] };
      }
      return s;
    }));
  };

  const removeArticleFromSection = (sectionId: string, articleId: string) => {
    setSections(sections.map(s => {
      if (s.id === sectionId) {
        return { ...s, selectedArticleIds: s.selectedArticleIds.filter(id => articleId !== id) };
      }
      return s;
    }));
  };

  const handleSave = () => {
    saveSectionsSettings(sections);
    toast.success('All section settings saved successfully!');
  };

  // Drag-and-drop for sections reordering
  const sectionsSortable = useTouchSortable({
    items: sections,
    getItemId: (section) => section.id,
    onReorder: (newSections) => {
      const reorderedSections = newSections.map((s, index) => ({
        ...s,
        order: index + 1
      }));
      setSections(reorderedSections);
      toast.success('Section order updated');
    },
  });

  const getActiveSection = () => {
    if (!sectionsSortable.activeId) return null;
    return sections.find(s => s.id === sectionsSortable.activeId);
  };

  return (
    <div className="px-1 sm:px-0 max-w-full overflow-hidden">
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <div>
          <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Homepage Sections</h1>
          <p className="text-muted-foreground text-xs sm:text-sm mt-1">
            Drag sections to reorder â€¢ Touch and hold on mobile
          </p>
        </div>
        <Button onClick={handleSave} size="sm" className="w-full sm:w-auto">
          <Save className="mr-2 h-4 w-4" /> Save All Changes
        </Button>
      </div>

      <Tabs value={activeTab} onValueChange={setActiveTab} className="w-full">
        <div className="w-full overflow-x-auto pb-2 scrollbar-hide">
          <TabsList className="inline-flex w-auto min-w-full sm:w-auto h-auto p-1">
            <TabsTrigger value="overview" className="text-xs sm:text-sm px-3 py-1.5 h-auto">Overview</TabsTrigger>
            <TabsTrigger value="video-stories" className="text-xs sm:text-sm px-3 py-1.5 h-auto">Video</TabsTrigger>
            <TabsTrigger value="trending" className="text-xs sm:text-sm px-3 py-1.5 h-auto">Trending</TabsTrigger>
            <TabsTrigger value="categories" className="text-xs sm:text-sm px-3 py-1.5 h-auto">Categories</TabsTrigger>
          </TabsList>
        </div>

        <TabsContent value="overview" className="mt-4">
          <DndContext
            sensors={sectionsSortable.sensors}
            collisionDetection={closestCenter}
            onDragStart={sectionsSortable.handleDragStart}
            onDragEnd={sectionsSortable.handleDragEnd}
            onDragCancel={sectionsSortable.handleDragCancel}
          >
            <SortableContext items={sections.map(s => s.id)} strategy={verticalListSortingStrategy}>
              <div className="grid gap-3 sm:gap-4 grid-cols-1 md:grid-cols-2 xl:grid-cols-3">
                {sections.map((section) => (
                  <DraggableSectionCard
                    key={section.id}
                    section={section}
                    onToggle={() => toggleSection(section.id)}
                    onToggleHomepage={() => toggleHomepage(section.id)}
                    onUpdateMaxArticles={(max) => updateMaxArticles(section.id, max)}
                    onAddArticle={(articleId) => addArticleToSection(section.id, articleId)}
                    onRemoveArticle={(articleId) => removeArticleFromSection(section.id, articleId)}
                    availableArticles={availableArticles}
                    getCategoryColor={getCategoryColor}
                  />
                ))}
              </div>
            </SortableContext>
            <DragOverlay>
              {getActiveSection() && (
                <SectionDragOverlay section={getActiveSection()!} />
              )}
            </DragOverlay>
          </DndContext>
        </TabsContent>

        <TabsContent value="video-stories" className="mt-4">
          <Card>
            <CardHeader className="p-4 sm:p-6">
              <div className="flex items-center gap-2">
                <Video className="h-5 w-5 text-primary" />
                <CardTitle>Video Stories Management</CardTitle>
              </div>
              <CardDescription>
                Select which video articles appear in the Video Stories section
              </CardDescription>
            </CardHeader>
            <CardContent className="p-4 sm:p-6 pt-0">
              <div className="space-y-4">
                <div className="grid gap-3 xs:grid-cols-1 sm:grid-cols-2">
                  {availableArticles.filter(a => a.hasVideo && a.videoUrl).map((article) => {
                    const isSelected = sections.find(s => s.id === 'video-stories')?.selectedArticleIds.includes(article.id);
                    return (
                      <div
                        key={article.id}
                        className={`group relative flex flex-col sm:flex-row items-start sm:items-center gap-3 p-3 rounded-lg border transition-all ${isSelected ? 'border-primary bg-primary/5' : 'border-border hover:border-primary/50'}`}
                      >
                        <div className="relative w-full sm:w-20 h-32 sm:h-14 flex-shrink-0">
                          <img src={article.featuredImage} alt="" className="w-full h-full object-cover rounded" />
                          <div className="absolute inset-0 bg-black/10 rounded" />
                          <div className="absolute top-1 right-1 bg-black/60 rounded px-1 text-[10px] text-white">Video</div>
                        </div>

                        <div className="flex-1 min-w-0 w-full mb-0 sm:mb-0">
                          <p className="text-sm font-medium line-clamp-2 leading-tight mb-1" title={article.title}>{article.title}</p>
                          <Badge className={`${getCategoryColor(article.category)} text-white text-[10px] border-0 h-5`}>
                            {article.category}
                          </Badge>
                        </div>

                        <div className="absolute top-3 right-3 sm:relative sm:top-auto sm:right-auto">
                          <Switch
                            checked={isSelected}
                            onCheckedChange={(checked) => {
                              if (checked) {
                                addArticleToSection('video-stories', article.id);
                              } else {
                                removeArticleFromSection('video-stories', article.id);
                              }
                            }}
                          />
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="trending" className="mt-4">
          <Card>
            <CardHeader className="p-4 sm:p-6">
              <div className="flex items-center gap-2">
                <TrendingUp className="h-5 w-5 text-primary" />
                <CardTitle>Trending Now Management</CardTitle>
              </div>
              <CardDescription>
                Control which articles appear in the Trending Now sidebar
              </CardDescription>
            </CardHeader>
            <CardContent className="p-4 sm:p-6 pt-0">
              <div className="grid gap-6 lg:grid-cols-2">
                <div>
                  <Label className="text-sm font-medium mb-3 block">Currently Trending</Label>
                  <div className="space-y-2">
                    {sections.find(s => s.id === 'trending')?.selectedArticleIds.map((id, index) => {
                      const article = availableArticles.find(a => a.id === id);
                      if (!article) return null;
                      return (
                        <div key={id} className="relative flex items-center gap-4 p-4 bg-card border border-border/60 rounded-xl hover:border-border hover:shadow-sm transition-all group overflow-hidden">
                          <span className="text-3xl font-black italic text-muted-foreground/20 group-hover:text-primary/20 transition-colors select-none">
                            #{index + 1}
                          </span>

                          <div className="flex-1 min-w-0 z-10">
                            <p className="text-base font-semibold text-foreground line-clamp-2 pr-2 leading-tight break-words group-hover:text-primary transition-colors">{article.title}</p>
                            <div className="flex items-center gap-3 mt-1.5">
                              <Badge variant="secondary" className="text-[10px] h-5 px-2 font-medium bg-muted group-hover:bg-primary/10 group-hover:text-primary transition-colors">{article.category}</Badge>
                              <span className="text-xs text-muted-foreground font-medium flex items-center gap-1.5">
                                <Eye className="h-3.5 w-3.5" />
                                {article.views.toLocaleString()}
                              </span>
                            </div>
                          </div>

                          <Button variant="ghost" size="icon" className="h-8 w-8 text-muted-foreground hover:text-destructive shrink-0 opacity-0 group-hover:opacity-100 transition-opacity" onClick={() => removeArticleFromSection('trending', id)}>
                            <X className="h-4 w-4" />
                          </Button>
                        </div>
                      );
                    })}
                  </div>
                  {(!sections.find(s => s.id === 'trending')?.selectedArticleIds.length) && (
                    <div className="text-sm text-muted-foreground italic p-2 border border-dashed rounded text-center">
                      No trending articles selected
                    </div>
                  )}
                </div>
                <div>
                  <Label className="text-sm font-medium mb-3 block">Add to Trending (Top Viewed)</Label>
                  <div className="space-y-2 max-h-80 overflow-y-auto pr-1">
                    {availableArticles
                      .filter(a => !sections.find(s => s.id === 'trending')?.selectedArticleIds.includes(a.id))
                      .sort((a, b) => b.views - a.views)
                      .slice(0, 10)
                      .map((article) => (
                        <div key={article.id} className="flex items-center gap-2 p-2 border border-border rounded-lg">
                          <div className="flex-1 min-w-0">
                            <p className="text-sm font-medium line-clamp-2 break-words leading-tight">{article.title}</p>
                            <p className="text-xs text-muted-foreground">{article.views.toLocaleString()} views</p>
                          </div>
                          <Button variant="outline" size="sm" className="h-8 w-8 p-0" onClick={() => addArticleToSection('trending', article.id)}>
                            <Plus className="h-4 w-4" />
                          </Button>
                        </div>
                      ))}
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        <TabsContent value="categories" className="mt-4">
          <div className="grid gap-3 sm:gap-4 md:grid-cols-2">
            {sections.filter(s => s.category).map((section) => (
              <DraggableSectionCard
                key={section.id}
                section={section}
                onToggle={() => toggleSection(section.id)}
                onToggleHomepage={() => toggleHomepage(section.id)}
                onUpdateMaxArticles={(max) => updateMaxArticles(section.id, max)}
                onAddArticle={(articleId) => addArticleToSection(section.id, articleId)}
                onRemoveArticle={(articleId) => removeArticleFromSection(section.id, articleId)}
                availableArticles={availableArticles}
                getCategoryColor={getCategoryColor}
              />
            ))}
          </div>
        </TabsContent>
      </Tabs>
    </div>
  );
};

export default AdminSections;

--- FILE END: src\pages\admin\AdminSections.tsx ---


--- FILE START: src\pages\admin\AdminSettings.tsx ---
import { useState } from 'react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Label } from '@/components/ui/label';
import { Textarea } from '@/components/ui/textarea';
import { Switch } from '@/components/ui/switch';
import { Save, Globe, Bell, Shield, Share2, Facebook, Twitter, Instagram, Youtube, Linkedin, MessageCircle, Send, ExternalLink, Lock } from 'lucide-react';
import { toast } from 'sonner';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { socialMediaLinks as initialSocialLinks } from '@/data/mockData';
import { SocialMediaLink } from '@/types/news';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { getSiteSettings, saveSiteSettings, getSocialLinks, saveSocialLinks, SiteSettingsConfig } from '@/lib/settingsService';

const AdminSettings = () => {
  const { hasPermission } = useAdminAuth();
  const [socialLinks, setSocialLinks] = useState<SocialMediaLink[]>(getSocialLinks(initialSocialLinks) as SocialMediaLink[]);
  const [settings, setSettings] = useState<SiteSettingsConfig>(getSiteSettings());

  const canManageSettings = hasPermission('manageSettings');

  // If user doesn't have permission, show restricted view
  if (!canManageSettings) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to manage site settings. Only administrators can access this section.
        </p>
      </div>
    );
  }

  const handleSave = () => {
    saveSiteSettings(settings);
    saveSocialLinks(socialLinks);
    toast.success('Settings saved successfully!');
  };

  const updateSetting = (key: keyof SiteSettingsConfig, value: any) => {
    setSettings(prev => ({ ...prev, [key]: value }));
  };

  const updateSocialLink = (id: string, field: keyof SocialMediaLink, value: string | boolean) => {
    setSocialLinks(prev => prev.map(link =>
      link.id === id ? { ...link, [field]: value } : link
    ));
  };

  const getSocialIcon = (platform: string) => {
    const iconProps = { className: "h-5 w-5" };
    switch (platform) {
      case 'facebook': return <Facebook {...iconProps} />;
      case 'twitter': return <Twitter {...iconProps} />;
      case 'instagram': return <Instagram {...iconProps} />;
      case 'youtube': return <Youtube {...iconProps} />;
      case 'linkedin': return <Linkedin {...iconProps} />;
      case 'tiktok': return <span className="text-lg">ðŸ“±</span>;
      case 'whatsapp': return <MessageCircle {...iconProps} />;
      case 'telegram': return <Send {...iconProps} />;
      default: return <Share2 {...iconProps} />;
    }
  };

  const getSocialColor = (platform: string) => {
    const colors: Record<string, string> = {
      facebook: 'bg-blue-600',
      twitter: 'bg-sky-500',
      instagram: 'bg-gradient-to-r from-purple-500 via-pink-500 to-orange-500',
      youtube: 'bg-red-600',
      linkedin: 'bg-blue-700',
      tiktok: 'bg-black',
      whatsapp: 'bg-green-500',
      telegram: 'bg-sky-600',
    };
    return colors[platform] || 'bg-gray-500';
  };

  const getPlatformName = (platform: string) => {
    const names: Record<string, string> = {
      facebook: 'Facebook',
      twitter: 'X (Twitter)',
      instagram: 'Instagram',
      youtube: 'YouTube',
      linkedin: 'LinkedIn',
      tiktok: 'TikTok',
      whatsapp: 'WhatsApp',
      telegram: 'Telegram',
    };
    return names[platform] || platform;
  };

  return (
    <div>
      <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6">
        <h1 className="font-display text-xl sm:text-2xl font-bold text-foreground">Settings</h1>
        <Button onClick={handleSave}>
          <Save className="mr-2 h-4 w-4" />
          Save Changes
        </Button>
      </div>

      <div className="space-y-6">
        {/* Social Media Links - Featured at top */}
        <Card className="border-primary/50">
          <CardHeader className="pb-3">
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <Share2 className="h-5 w-5 text-primary" />
                <CardTitle>Social Media Links</CardTitle>
              </div>
              <Badge variant="outline" className="text-xs">
                {socialLinks.filter(l => l.isVisible && l.url).length} active
              </Badge>
            </div>
            <CardDescription>
              Configure social media links that appear across the website (footer, article sharing, etc.)
            </CardDescription>
          </CardHeader>
          <CardContent>
            <div className="grid gap-3 sm:grid-cols-2">
              {socialLinks.map((link) => (
                <div
                  key={link.id}
                  className={`flex items-center gap-3 p-3 rounded-lg border transition-all ${link.isVisible && link.url
                    ? 'border-primary/30 bg-primary/5'
                    : 'border-border bg-muted/30 opacity-70'
                    }`}
                >
                  <div className={`h-10 w-10 rounded-lg flex items-center justify-center text-white ${getSocialColor(link.platform)}`}>
                    {getSocialIcon(link.platform)}
                  </div>
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-2 mb-1">
                      <span className="font-medium text-sm">{getPlatformName(link.platform)}</span>
                      {link.url && (
                        <a
                          href={link.url}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="text-muted-foreground hover:text-primary"
                        >
                          <ExternalLink className="h-3 w-3" />
                        </a>
                      )}
                    </div>
                    <Input
                      value={link.url}
                      onChange={(e) => updateSocialLink(link.id, 'url', e.target.value)}
                      placeholder={`https://${link.platform}.com/...`}
                      className="h-8 text-xs"
                    />
                  </div>
                  <Switch
                    checked={link.isVisible}
                    onCheckedChange={(checked) => updateSocialLink(link.id, 'isVisible', checked)}
                    disabled={!link.url}
                  />
                </div>
              ))}
            </div>
            <p className="text-xs text-muted-foreground mt-4">
              ðŸ’¡ Toggle the switch to show/hide each social icon. Icons with empty URLs are automatically hidden.
            </p>
          </CardContent>
        </Card>

        {/* General Settings */}
        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="flex items-center gap-2 text-base sm:text-lg">
              <Globe className="h-5 w-5" />
              General Settings
            </CardTitle>
            <CardDescription className="text-xs sm:text-sm">Basic site configuration</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="siteName" className="text-sm">Site Name</Label>
                <Input
                  id="siteName"
                  value={settings.siteName}
                  onChange={(e) => updateSetting('siteName', e.target.value)}
                />
              </div>
              <div className="space-y-2">
                <Label htmlFor="tagline" className="text-sm">Tagline</Label>
                <Input
                  id="tagline"
                  value={settings.tagline}
                  onChange={(e) => updateSetting('tagline', e.target.value)}
                />
              </div>
            </div>
            <div className="space-y-2">
              <Label htmlFor="siteDescription" className="text-sm">Site Description</Label>
              <Textarea
                id="siteDescription"
                value={settings.siteDescription}
                onChange={(e) => updateSetting('siteDescription', e.target.value)}
                rows={2}
              />
            </div>
            <div className="space-y-2">
              <Label htmlFor="contactEmail" className="text-sm">Contact Email</Label>
              <Input
                id="contactEmail"
                type="email"
                value={settings.contactEmail}
                onChange={(e) => updateSetting('contactEmail', e.target.value)}
              />
            </div>
          </CardContent>
        </Card>

        {/* Comments & Newsletter */}
        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="flex items-center gap-2 text-base sm:text-lg">
              <Bell className="h-5 w-5" />
              Engagement Settings
            </CardTitle>
            <CardDescription className="text-xs sm:text-sm">Comments and newsletter configuration</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="flex items-center justify-between gap-4">
              <div className="min-w-0">
                <p className="font-medium text-sm text-foreground">Enable Comments</p>
                <p className="text-xs text-muted-foreground">Allow users to comment on articles</p>
              </div>
              <Switch
                checked={settings.enableComments}
                onCheckedChange={(checked) => updateSetting('enableComments', checked)}
              />
            </div>
            <div className="flex items-center justify-between gap-4">
              <div className="min-w-0">
                <p className="font-medium text-sm text-foreground">Moderate Comments</p>
                <p className="text-xs text-muted-foreground">Require approval before publishing</p>
              </div>
              <Switch
                checked={settings.moderateComments}
                onCheckedChange={(checked) => updateSetting('moderateComments', checked)}
              />
            </div>
            <div className="flex items-center justify-between gap-4">
              <div className="min-w-0">
                <p className="font-medium text-sm text-foreground">Enable Newsletter</p>
                <p className="text-xs text-muted-foreground">Show newsletter signup forms</p>
              </div>
              <Switch
                checked={settings.enableNewsletter}
                onCheckedChange={(checked) => updateSetting('enableNewsletter', checked)}
              />
            </div>
          </CardContent>
        </Card>

        {/* Display Settings */}
        <Card>
          <CardHeader className="pb-3">
            <CardTitle className="flex items-center gap-2 text-base sm:text-lg">
              <Shield className="h-5 w-5" />
              Display Settings
            </CardTitle>
            <CardDescription className="text-xs sm:text-sm">Customize how content is displayed</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <div className="grid gap-4 sm:grid-cols-3">
              <div className="space-y-2">
                <Label htmlFor="articlesPerPage" className="text-sm">Articles Per Page</Label>
                <Select value={settings.articlesPerPage} onValueChange={(val) => updateSetting('articlesPerPage', val)}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="5">5</SelectItem>
                    <SelectItem value="10">10</SelectItem>
                    <SelectItem value="15">15</SelectItem>
                    <SelectItem value="20">20</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              <div className="space-y-2">
                <Label htmlFor="dateFormat" className="text-sm">Date Format</Label>
                <Select value={settings.dateFormat} onValueChange={(val) => updateSetting('dateFormat', val)}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="MMM d, yyyy">Jan 14, 2026</SelectItem>
                    <SelectItem value="dd/MM/yyyy">14/01/2026</SelectItem>
                    <SelectItem value="MM/dd/yyyy">01/14/2026</SelectItem>
                    <SelectItem value="yyyy-MM-dd">2026-01-14</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              <div className="space-y-2">
                <Label htmlFor="timezone" className="text-sm">Timezone</Label>
                <Select value={settings.timezone} onValueChange={(val) => updateSetting('timezone', val)}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="UTC">UTC</SelectItem>
                    <SelectItem value="EST">Eastern Time (EST)</SelectItem>
                    <SelectItem value="PST">Pacific Time (PST)</SelectItem>
                    <SelectItem value="GMT">GMT</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>

            <div className="pt-4 border-t border-border">
              <div className="flex items-center justify-between gap-4">
                <div className="min-w-0">
                  <p className="font-medium text-sm text-foreground">Maintenance Mode</p>
                  <p className="text-xs text-muted-foreground">Take the site offline for maintenance</p>
                </div>
                <Switch
                  checked={settings.maintenanceMode}
                  onCheckedChange={(checked) => updateSetting('maintenanceMode', checked)}
                />
              </div>
            </div>
          </CardContent>
        </Card>
      </div>
    </div>
  );
};

export default AdminSettings;

--- FILE END: src\pages\admin\AdminSettings.tsx ---


--- FILE START: src\pages\admin\AdminTeam.tsx ---
import { useState, useEffect } from 'react';
import { getTeamMembers, saveTeamMembers, addTeamMember, updateTeamMember, deleteTeamMember } from '@/lib/teamService';
import { TeamMember } from '@/types/team';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Plus, Edit, Trash2, GripVertical, Image as ImageIcon, Save, Users } from 'lucide-react';
import { toast } from 'sonner';
import { DndContext, closestCenter, DragOverlay } from '@dnd-kit/core';
import { SortableContext, verticalListSortingStrategy, useSortable } from '@dnd-kit/sortable';
import { CSS } from '@dnd-kit/utilities';
import { useTouchSortable } from '@/hooks/useTouchSortable';

const SortableTeamMember = ({ member, onEdit, onDelete }: { member: TeamMember; onEdit: (m: TeamMember) => void; onDelete: (id: string) => void }) => {
    const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({ id: member.id });

    const style = {
        transform: CSS.Transform.toString(transform),
        transition,
        zIndex: isDragging ? 50 : 'auto',
        opacity: isDragging ? 0.8 : 1,
    };

    return (
        <div ref={setNodeRef} style={style} className="flex items-center gap-4 p-4 bg-card border border-border rounded-lg mb-3 shadow-sm group">
            <div {...attributes} {...listeners} className="cursor-grab text-muted-foreground hover:text-foreground">
                <GripVertical className="h-5 w-5" />
            </div>
            <div className="h-12 w-12 rounded-full overflow-hidden shrink-0 bg-muted">
                <img src={member.image} alt={member.name} className="h-full w-full object-cover" />
            </div>
            <div className="flex-1 min-w-0">
                <h4 className="font-semibold truncate">{member.name}</h4>
                <p className="text-xs text-muted-foreground truncate">{member.role}</p>
            </div>
            <div className="flex gap-2">
                <Button variant="ghost" size="icon" onClick={() => onEdit(member)}>
                    <Edit className="h-4 w-4" />
                </Button>
                <Button variant="ghost" size="icon" className="text-destructive hover:text-destructive hover:bg-destructive/10" onClick={() => onDelete(member.id)}>
                    <Trash2 className="h-4 w-4" />
                </Button>
            </div>
        </div>
    );
};

const AdminTeam = () => {
    const [members, setMembers] = useState<TeamMember[]>([]);
    const [isDialogOpen, setIsDialogOpen] = useState(false);
    const [editingMember, setEditingMember] = useState<TeamMember | null>(null);
    const [formData, setFormData] = useState<Partial<TeamMember>>({
        name: '',
        role: '',
        image: '',
        bio: '',
        email: '',
        twitter: '',
        linkedin: ''
    });

    useEffect(() => {
        loadMembers();
        window.addEventListener('teamMembersUpdated', loadMembers);
        return () => window.removeEventListener('teamMembersUpdated', loadMembers);
    }, []);

    const loadMembers = () => {
        setMembers(getTeamMembers().sort((a, b) => a.order - b.order));
    };

    const sortable = useTouchSortable({
        items: members.map(m => m.id),
        getItemId: (id) => id,
        onReorder: (newIds) => {
            const reordered = newIds.map((id, index) => {
                const member = members.find(m => m.id === id);
                return member ? { ...member, order: index + 1 } : null;
            }).filter(Boolean) as TeamMember[];
            saveTeamMembers(reordered);
            toast.success('Team order updated');
        }
    });

    const handleOpenDialog = (member?: TeamMember) => {
        if (member) {
            setEditingMember(member);
            setFormData(member);
        } else {
            setEditingMember(null);
            setFormData({
                name: '',
                role: '',
                image: 'https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=800&auto=format&fit=crop&q=60',
                bio: '',
                email: '',
                twitter: '',
                linkedin: ''
            });
        }
        setIsDialogOpen(true);
    };

    const handleSave = (e: React.FormEvent) => {
        e.preventDefault();
        if (!formData.name || !formData.role) return;

        if (editingMember) {
            updateTeamMember({ ...editingMember, ...formData } as TeamMember);
            toast.success('Team member updated');
        } else {
            addTeamMember({
                ...formData as any,
                order: members.length + 1
            });
            toast.success('Team member added');
        }
        setIsDialogOpen(false);
    };

    const handleDelete = (id: string) => {
        if (confirm('Delete this team member?')) {
            deleteTeamMember(id);
            toast.success('Team member deleted');
        }
    };

    const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
        const file = e.target.files?.[0];
        if (file) {
            const reader = new FileReader();
            reader.onloadend = () => {
                setFormData({ ...formData, image: reader.result as string });
            };
            reader.readAsDataURL(file);
        }
    };

    return (
        <div className="space-y-6">
            <div className="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                <div>
                    <h1 className="font-display text-2xl font-bold">Team Management</h1>
                    <p className="text-muted-foreground">Manage employees and team members</p>
                </div>
                <Button onClick={() => handleOpenDialog()}>
                    <Plus className="mr-2 h-4 w-4" /> Add Member
                </Button>
            </div>

            <div className="grid lg:grid-cols-3 gap-6">
                <div className="lg:col-span-2 space-y-4">
                    <DndContext
                        sensors={sortable.sensors}
                        collisionDetection={closestCenter}
                        onDragStart={sortable.handleDragStart}
                        onDragEnd={sortable.handleDragEnd}
                        onDragCancel={sortable.handleDragCancel}
                    >
                        <SortableContext items={members.map(m => m.id)} strategy={verticalListSortingStrategy}>
                            {members.map(member => (
                                <SortableTeamMember
                                    key={member.id}
                                    member={member}
                                    onEdit={handleOpenDialog}
                                    onDelete={handleDelete}
                                />
                            ))}
                        </SortableContext>
                        <DragOverlay>
                            {sortable.activeId ? (
                                <div className="p-4 bg-card border border-primary/50 shadow-xl rounded-lg opacity-90">
                                    Drag Item
                                </div>
                            ) : null}
                        </DragOverlay>
                    </DndContext>
                </div>

                <div>
                    {/* Quick Tips or Stats could go here */}
                    <Card>
                        <CardHeader>
                            <CardTitle className="text-base flex items-center gap-2"><Users className="h-4 w-4" /> Team Stats</CardTitle>
                        </CardHeader>
                        <CardContent>
                            <div className="text-3xl font-bold">{members.length}</div>
                            <p className="text-sm text-muted-foreground">Active Members</p>
                        </CardContent>
                    </Card>
                </div>
            </div>

            <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>
                <DialogContent className="max-w-xl max-h-[90vh] overflow-y-auto">
                    <DialogHeader>
                        <DialogTitle>{editingMember ? 'Edit Member' : 'Add Team Member'}</DialogTitle>
                    </DialogHeader>
                    <form onSubmit={handleSave} className="space-y-4">
                        <div className="flex items-center gap-4">
                            <div className="h-20 w-20 rounded-full bg-muted overflow-hidden shrink-0 border relative group cursor-pointer">
                                {formData.image ? <img src={formData.image} className="w-full h-full object-cover" /> : <ImageIcon className="h-8 w-8 m-auto mt-6 text-muted-foreground" />}
                                <div className="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span className="text-white text-xs">Change</span>
                                </div>
                                <input type="file" className="absolute inset-0 opacity-0 cursor-pointer" accept="image/*" onChange={handleImageUpload} />
                            </div>
                            <div className="flex-1 space-y-2">
                                <Label>Full Name *</Label>
                                <Input value={formData.name} onChange={e => setFormData({ ...formData, name: e.target.value })} placeholder="e.g. John Doe" required />
                            </div>
                        </div>

                        <div className="space-y-2">
                            <Label>Role / Job Title *</Label>
                            <Input value={formData.role} onChange={e => setFormData({ ...formData, role: e.target.value })} placeholder="e.g. Senior Editor" required />
                        </div>

                        <div className="space-y-2">
                            <Label>Bio</Label>
                            <Textarea value={formData.bio} onChange={e => setFormData({ ...formData, bio: e.target.value })} placeholder="Short biography..." rows={3} />
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                            <div className="space-y-2">
                                <Label>Email</Label>
                                <Input value={formData.email} onChange={e => setFormData({ ...formData, email: e.target.value })} placeholder="email@company.com" />
                            </div>
                            <div className="space-y-2">
                                <Label>Twitter URL</Label>
                                <Input value={formData.twitter} onChange={e => setFormData({ ...formData, twitter: e.target.value })} placeholder="https://twitter.com/..." />
                            </div>
                            <div className="space-y-2 col-span-2">
                                <Label>LinkedIn URL</Label>
                                <Input value={formData.linkedin} onChange={e => setFormData({ ...formData, linkedin: e.target.value })} placeholder="https://linkedin.com/in/..." />
                            </div>
                        </div>

                        <Button type="submit" className="w-full">
                            <Save className="h-4 w-4 mr-2" /> Save Member
                        </Button>
                    </form>
                </DialogContent>
            </Dialog>
        </div>
    );
};

export default AdminTeam;

--- FILE END: src\pages\admin\AdminTeam.tsx ---


--- FILE START: src\pages\admin\AdminUsers.tsx ---
import { useState } from 'react';
import { Plus, Search, Edit, Trash2, Shield, ShieldCheck, ShieldAlert, UserCheck, UserX, Lock } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Badge } from '@/components/ui/badge';
import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';
import { Label } from '@/components/ui/label';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';
import { Switch } from '@/components/ui/switch';
import { adminUsers, rolePermissions } from '@/data/adminMockData';
import { AdminUser, UserRole } from '@/types/news';
import { format } from 'date-fns';
import { toast } from 'sonner';
import { useAdminAuth } from '@/context/AdminAuthContext';
import { useActivityLog } from '@/context/ActivityLogContext';

const AdminUsers = () => {
  const { hasPermission, currentUser } = useAdminAuth();
  const { logActivity } = useActivityLog();
  const [users, setUsers] = useState<AdminUser[]>(adminUsers);
  const [searchQuery, setSearchQuery] = useState('');
  const [roleFilter, setRoleFilter] = useState<string>('all');
  const [isDialogOpen, setIsDialogOpen] = useState(false);
  const [editingUser, setEditingUser] = useState<AdminUser | null>(null);
  const [formData, setFormData] = useState({
    name: '',
    email: '',
    role: 'author' as UserRole,
    isActive: true
  });

  const canManageUsers = hasPermission('manageUsers');

  // If user doesn't have permission, show restricted view
  if (!canManageUsers) {
    return (
      <div className="flex flex-col items-center justify-center py-16 text-center">
        <Lock className="h-16 w-16 text-muted-foreground mb-4" />
        <h1 className="font-display text-2xl font-bold text-foreground mb-2">Access Restricted</h1>
        <p className="text-muted-foreground max-w-md">
          You don't have permission to manage users. Only administrators can access this section.
        </p>
      </div>
    );
  }

  const filteredUsers = users.filter(user => {
    const matchesSearch = user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
                          user.email.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesRole = roleFilter === 'all' || user.role === roleFilter;
    return matchesSearch && matchesRole;
  });

  const getRoleBadge = (role: UserRole) => {
    const colors = {
      admin: 'bg-red-500 text-white',
      editor: 'bg-purple-500 text-white',
      journalist: 'bg-blue-500 text-white',
      author: 'bg-green-500 text-white',
      reporter: 'bg-amber-500 text-white'
    };
    return colors[role] || 'bg-gray-500 text-white';
  };

  const getRoleIcon = (role: UserRole) => {
    switch (role) {
      case 'admin':
        return <ShieldAlert className="h-4 w-4" />;
      case 'editor':
        return <ShieldCheck className="h-4 w-4" />;
      default:
        return <Shield className="h-4 w-4" />;
    }
  };

  const handleSaveUser = () => {
    if (editingUser) {
      setUsers(users.map(u => 
        u.id === editingUser.id 
          ? { ...u, ...formData, permissions: rolePermissions[formData.role] || [] }
          : u
      ));
      logActivity('update', 'user', {
        resourceId: editingUser.id,
        resourceName: formData.name,
        details: `Updated user role to ${formData.role}`
      });
      toast.success('User updated successfully');
    } else {
      const newUser: AdminUser = {
        id: `admin-${Date.now()}`,
        name: formData.name,
        email: formData.email,
        avatar: `https://ui-avatars.com/api/?name=${encodeURIComponent(formData.name)}&background=random`,
        role: formData.role,
        isActive: formData.isActive,
        permissions: rolePermissions[formData.role] || [],
        createdAt: new Date()
      };
      setUsers([...users, newUser]);
      logActivity('create', 'user', {
        resourceId: newUser.id,
        resourceName: formData.name,
        details: `Created new ${formData.role} user`
      });
      toast.success('User created successfully');
    }
    setIsDialogOpen(false);
    resetForm();
  };

  const handleEditUser = (user: AdminUser) => {
    setEditingUser(user);
    setFormData({
      name: user.name,
      email: user.email,
      role: user.role,
      isActive: user.isActive
    });
    setIsDialogOpen(true);
  };

  const handleDeleteUser = (id: string) => {
    const user = users.find(u => u.id === id);
    setUsers(users.filter(u => u.id !== id));
    logActivity('delete', 'user', {
      resourceId: id,
      resourceName: user?.name,
      details: 'Removed user from system'
    });
    toast.success('User removed successfully');
  };

  const toggleUserStatus = (id: string) => {
    const user = users.find(u => u.id === id);
    const newStatus = !user?.isActive;
    setUsers(users.map(u => 
      u.id === id ? { ...u, isActive: newStatus } : u
    ));
    logActivity('toggle', 'user', {
      resourceId: id,
      resourceName: user?.name,
      details: newStatus ? 'Activated user account' : 'Deactivated user account'
    });
  };

  const resetForm = () => {
    setEditingUser(null);
    setFormData({ name: '', email: '', role: 'author', isActive: true });
  };

  return (
    <div>
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6">
        <h1 className="font-display text-2xl font-bold text-foreground">User Management</h1>
        <Dialog open={isDialogOpen} onOpenChange={(open) => { setIsDialogOpen(open); if (!open) resetForm(); }}>
          <DialogTrigger asChild>
            <Button><Plus className="mr-2 h-4 w-4" /> Add User</Button>
          </DialogTrigger>
          <DialogContent className="max-w-md">
            <DialogHeader>
              <DialogTitle>{editingUser ? 'Edit User' : 'Add New User'}</DialogTitle>
            </DialogHeader>
            <div className="space-y-4 mt-4">
              <div>
                <Label>Full Name</Label>
                <Input
                  value={formData.name}
                  onChange={(e) => setFormData({ ...formData, name: e.target.value })}
                  placeholder="Enter full name"
                />
              </div>
              <div>
                <Label>Email</Label>
                <Input
                  type="email"
                  value={formData.email}
                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                  placeholder="Enter email"
                />
              </div>
              <div>
                <Label>Role</Label>
                <Select value={formData.role} onValueChange={(v) => setFormData({ ...formData, role: v as UserRole })}>
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="admin">Admin</SelectItem>
                    <SelectItem value="editor">Editor</SelectItem>
                    <SelectItem value="journalist">Journalist</SelectItem>
                    <SelectItem value="author">Author</SelectItem>
                    <SelectItem value="reporter">Reporter</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              <div className="flex items-center justify-between">
                <Label>Active Status</Label>
                <Switch
                  checked={formData.isActive}
                  onCheckedChange={(checked) => setFormData({ ...formData, isActive: checked })}
                />
              </div>
              <div className="bg-muted p-3 rounded-lg">
                <Label className="text-xs text-muted-foreground">Permissions for {formData.role}</Label>
                <div className="flex flex-wrap gap-1 mt-2">
                  {(rolePermissions[formData.role] || []).map((perm) => (
                    <Badge key={perm} variant="outline" className="text-xs">
                      {perm}
                    </Badge>
                  ))}
                </div>
              </div>
              <div className="flex gap-2">
                <Button variant="outline" className="flex-1" onClick={() => { setIsDialogOpen(false); resetForm(); }}>
                  Cancel
                </Button>
                <Button className="flex-1" onClick={handleSaveUser}>
                  {editingUser ? 'Update' : 'Create'} User
                </Button>
              </div>
            </div>
          </DialogContent>
        </Dialog>
      </div>

      {/* Filters */}
      <div className="flex flex-col gap-4 sm:flex-row mb-6">
        <div className="relative flex-1">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
          <Input
            placeholder="Search users..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="pl-9"
          />
        </div>
        <Select value={roleFilter} onValueChange={setRoleFilter}>
          <SelectTrigger className="w-full sm:w-40">
            <SelectValue placeholder="Filter by role" />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="all">All Roles</SelectItem>
            <SelectItem value="admin">Admin</SelectItem>
            <SelectItem value="editor">Editor</SelectItem>
            <SelectItem value="journalist">Journalist</SelectItem>
            <SelectItem value="author">Author</SelectItem>
            <SelectItem value="reporter">Reporter</SelectItem>
          </SelectContent>
        </Select>
      </div>

      {/* Users Grid */}
      <div className="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {filteredUsers.map((user) => (
          <div key={user.id} className="rounded-xl bg-card p-4 border border-border">
            <div className="flex items-start gap-3">
              <img
                src={user.avatar}
                alt={user.name}
                className="h-12 w-12 rounded-full object-cover"
              />
              <div className="flex-1 min-w-0">
                <div className="flex items-center gap-2">
                  <h3 className="font-semibold text-foreground truncate">{user.name}</h3>
                  {user.isActive ? (
                    <UserCheck className="h-4 w-4 text-green-500 flex-shrink-0" />
                  ) : (
                    <UserX className="h-4 w-4 text-red-500 flex-shrink-0" />
                  )}
                </div>
                <p className="text-sm text-muted-foreground truncate">{user.email}</p>
                <div className="flex items-center gap-2 mt-2">
                  <Badge className={`${getRoleBadge(user.role)} border-0 text-xs`}>
                    {getRoleIcon(user.role)}
                    <span className="ml-1 capitalize">{user.role}</span>
                  </Badge>
                </div>
              </div>
            </div>
            
            <div className="mt-4 pt-4 border-t border-border">
              <div className="flex items-center justify-between text-xs text-muted-foreground mb-3">
                <span>Joined: {format(user.createdAt, 'MMM d, yyyy')}</span>
                {user.lastLogin && (
                  <span>Last: {format(user.lastLogin, 'MMM d')}</span>
                )}
              </div>
              <div className="flex gap-2">
                <Button 
                  variant="outline" 
                  size="sm" 
                  className="flex-1"
                  onClick={() => handleEditUser(user)}
                >
                  <Edit className="h-3 w-3 mr-1" /> Edit
                </Button>
                <Button 
                  variant="outline" 
                  size="sm"
                  onClick={() => toggleUserStatus(user.id)}
                >
                  {user.isActive ? <UserX className="h-3 w-3" /> : <UserCheck className="h-3 w-3" />}
                </Button>
                <Button 
                  variant="destructive" 
                  size="sm"
                  onClick={() => handleDeleteUser(user.id)}
                  disabled={user.role === 'admin'}
                >
                  <Trash2 className="h-3 w-3" />
                </Button>
              </div>
            </div>
          </div>
        ))}
      </div>

      {filteredUsers.length === 0 && (
        <div className="text-center py-12 text-muted-foreground">
          No users found matching your criteria.
        </div>
      )}
    </div>
  );
};

export default AdminUsers;

--- FILE END: src\pages\admin\AdminUsers.tsx ---


--- FILE START: src\pages\ArticlePage.tsx ---
import { useEffect, useRef, useState } from 'react';
import { useParams, Link } from 'react-router-dom';
import { Layout } from '@/components/layout/Layout';
import { getArticleBySlug, getArticles, incrementArticleViews } from '@/lib/articleService';
import { Badge } from '@/components/ui/badge';
import { Clock, Eye, Share2, Facebook, Twitter, Linkedin, Mail, Link2, MessageCircle } from 'lucide-react';
import { Button } from '@/components/ui/button';
import { formatDistanceToNow, format } from 'date-fns';
import { ArticleCard } from '@/components/news/ArticleCard';
import { CommentSection } from '@/components/news/CommentSection';
import { getYoutubeId } from '@/lib/videoUtils';
import { FloatingVideoPlayer } from '@/components/news/FloatingVideoPlayer';

const ArticlePage = () => {
  const { slug } = useParams<{ slug: string }>();
  const article = slug ? getArticleBySlug(slug) : undefined;

  useEffect(() => {
    if (article?.id) {
      incrementArticleViews(article.id);
    }
  }, [article?.id]);

  // getArticles() returns the full list from storage/mock
  const allArticles = getArticles();
  const relatedArticles = allArticles
    .filter(a => a.category === article?.category && a.id !== article?.id)
    .slice(0, 3);

  if (!article) {
    return (
      <Layout>
        <div className="container mx-auto px-4 py-16 text-center">
          <h1 className="font-display text-3xl font-bold text-foreground">Article Not Found</h1>
          <Link to="/" className="mt-4 inline-block text-primary hover:underline">
            Return to Home
          </Link>
        </div>
      </Layout>
    );
  }

  const heroVideoRef = useRef<HTMLDivElement>(null);
  const [showFloatingPlayer, setShowFloatingPlayer] = useState(false);

  // Scroll observer to trigger floating player
  useEffect(() => {
    if (!article?.videoUrl) return;

    const observer = new IntersectionObserver(
      ([entry]) => {
        // Show floating player when hero video is OUT of view (entry.isIntersecting is false)
        // and we have scrolled PAST it (entry.boundingClientRect.top < 0)
        setShowFloatingPlayer(!entry.isIntersecting && entry.boundingClientRect.top < 0);
      },
      { threshold: 0.2 } // Trigger when 80% is out of view
    );

    if (heroVideoRef.current) {
      observer.observe(heroVideoRef.current);
    }

    return () => observer.disconnect();
  }, [article?.videoUrl]);

  // Relaxed logic for "is video article"
  const isVideoArticle = Boolean(article && (article.hasVideo || article.videoUrl) && article.videoUrl);
  const articleContainerClass = `container mx-auto px-4 ${isVideoArticle ? 'mt-6 md:mt-8' : '-mt-20'} relative z-10`;

  const youtubeId = isVideoArticle ? getYoutubeId(article.videoUrl!) : null;

  return (
    <Layout>
      {/* Hero Image or Video */}
      <div
        ref={heroVideoRef}
        className="relative h-64 md:h-96 lg:h-[500px] bg-black overflow-hidden"
      >
        {isVideoArticle && youtubeId ? (
          <iframe
            src={`https://www.youtube.com/embed/${youtubeId}?autoplay=1&mute=0`}
            title={article.title}
            className="absolute inset-0 h-full w-full"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowFullScreen
          />
        ) : (
          <>
            <img
              src={article.featuredImage}
              alt={article.title}
              className="h-full w-full object-cover"
            />
            <div className="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent" />
          </>
        )}
      </div>

      {isVideoArticle && article.videoUrl && (
        <FloatingVideoPlayer
          videoUrl={article.videoUrl}
          title={article.title}
          isVisible={showFloatingPlayer}
        />
      )}

      <article className={articleContainerClass}>
        <div className="max-w-4xl mx-auto">
          {/* Article Header */}
          <div className="bg-card rounded-xl p-6 md:p-8 shadow-lg">
            <div className="flex items-center gap-3 mb-4">
              <Badge className="bg-primary text-primary-foreground">
                {article.category.replace('-', ' ')}
              </Badge>
              {article.isBreaking && (
                <Badge className="bg-accent text-accent-foreground">Breaking</Badge>
              )}
            </div>

            <h1 className="font-display text-2xl font-bold text-foreground md:text-3xl lg:text-4xl">
              {article.title}
            </h1>

            <p className="mt-4 text-lg text-muted-foreground">
              {article.excerpt}
            </p>

            <div className="mt-6 flex flex-wrap items-center gap-4 border-t border-border pt-4">
              <div className="flex items-center gap-3">
                <img
                  src={article.author.avatar}
                  alt={article.author.name}
                  className="h-10 w-10 rounded-full object-cover"
                />
                <div>
                  <p className="font-medium text-foreground">{article.author.name}</p>
                  <p className="text-xs text-muted-foreground capitalize">{article.author.role}</p>
                </div>
              </div>

              <div className="flex items-center gap-4 text-sm text-muted-foreground ml-auto">
                <span className="flex items-center gap-1">
                  <Clock className="h-4 w-4" />
                  {format(article.publishedAt, 'MMM d, yyyy')}
                </span>
                <span className="flex items-center gap-1">
                  <Eye className="h-4 w-4" />
                  {article.views.toLocaleString()}
                </span>
              </div>
            </div>
          </div>

          {/* Article Content */}
          <div className="mt-8 prose prose-lg max-w-none dark:prose-invert">
            {article.content.split('\n\n').map((paragraph, index) => (
              <p key={index} className="mb-4 text-justify leading-relaxed">
                {paragraph}
              </p>
            ))}
          </div>

          {/* Tags */}
          <div className="mt-8 flex flex-wrap gap-2">
            {article.tags.map((tag) => (
              <Badge key={tag} variant="outline">
                #{tag}
              </Badge>
            ))}
          </div>

          {/* Social Share Buttons */}
          <div className="mt-8 border-t border-border pt-6">
            <h3 className="text-sm font-semibold text-foreground mb-4">Share this article</h3>
            <div className="flex flex-wrap items-center gap-2">
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-[#1877F2] hover:text-white hover:border-[#1877F2] transition-colors"
                onClick={() => window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}&quote=${encodeURIComponent(article.title)}`, '_blank', 'width=600,height=400')}
              >
                <Facebook className="h-4 w-4" />
                <span className="hidden sm:inline">Facebook</span>
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-[#1DA1F2] hover:text-white hover:border-[#1DA1F2] transition-colors"
                onClick={() => window.open(`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(article.title)}`, '_blank', 'width=600,height=400')}
              >
                <Twitter className="h-4 w-4" />
                <span className="hidden sm:inline">Twitter</span>
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-[#0A66C2] hover:text-white hover:border-[#0A66C2] transition-colors"
                onClick={() => window.open(`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(window.location.href)}&title=${encodeURIComponent(article.title)}&summary=${encodeURIComponent(article.excerpt)}`, '_blank', 'width=600,height=400')}
              >
                <Linkedin className="h-4 w-4" />
                <span className="hidden sm:inline">LinkedIn</span>
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-[#25D366] hover:text-white hover:border-[#25D366] transition-colors"
                onClick={() => window.open(`https://wa.me/?text=${encodeURIComponent(article.title + ' ' + window.location.href)}`, '_blank')}
              >
                <MessageCircle className="h-4 w-4" />
                <span className="hidden sm:inline">WhatsApp</span>
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-muted transition-colors"
                onClick={() => window.open(`mailto:?subject=${encodeURIComponent(article.title)}&body=${encodeURIComponent('Check out this article: ' + window.location.href)}`, '_self')}
              >
                <Mail className="h-4 w-4" />
                <span className="hidden sm:inline">Email</span>
              </Button>
              <Button
                variant="outline"
                size="sm"
                className="gap-2 hover:bg-primary hover:text-primary-foreground transition-colors"
                onClick={() => {
                  navigator.clipboard.writeText(window.location.href);
                  alert('Link copied to clipboard!');
                }}
              >
                <Link2 className="h-4 w-4" />
                <span className="hidden sm:inline">Copy Link</span>
              </Button>
            </div>
          </div>

          {/* Comments Section */}
          <CommentSection articleId={article.id} />
        </div>
      </article>

      {/* Related Articles */}
      {relatedArticles.length > 0 && (
        <section className="container mx-auto px-4 py-12">
          <h2 className="mb-6 font-display text-xl font-bold text-foreground md:text-2xl border-b-2 border-primary pb-2">
            Related Articles
          </h2>
          <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {relatedArticles.map((article) => (
              <ArticleCard key={article.id} article={article} />
            ))}
          </div>
        </section>
      )}
    </Layout>
  );
};

export default ArticlePage;

--- FILE END: src\pages\ArticlePage.tsx ---


--- FILE START: src\pages\CareersPage.tsx ---
import { Layout } from '@/components/layout/Layout';
import { jobs } from '@/data/mockData';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Calendar, Briefcase, Building, ArrowRight } from 'lucide-react';
import { format } from 'date-fns';
import { Link } from 'react-router-dom';

const CareersPage = () => {
  const openJobs = jobs.filter(j => j.isOpen);

  return (
    <Layout>
      {/* Hero */}
      <div className="bg-primary py-16">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-3xl font-bold text-primary-foreground md:text-4xl">
            Join Our Team
          </h1>
          <p className="mx-auto mt-4 max-w-2xl text-primary-foreground/80">
            Be part of a team dedicated to authentic journalism and making a difference.
          </p>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        {/* Culture */}
        <div className="mb-12 text-center">
          <h2 className="font-display text-2xl font-bold text-foreground">Why TruthLens?</h2>
          <p className="mx-auto mt-4 max-w-3xl text-muted-foreground">
            At TruthLens, we believe in the power of journalism to create change. We offer a dynamic 
            work environment where creativity, integrity, and collaboration are valued. Join us in 
            our mission to deliver authentic stories that matter.
          </p>
        </div>

        {/* Job Listings */}
        <div className="mb-8">
          <h2 className="font-display text-2xl font-bold text-foreground mb-6 border-b-2 border-primary pb-2">
            Current Openings
          </h2>
          
          {openJobs.length > 0 ? (
            <div className="space-y-4">
              {openJobs.map((job) => (
                <div key={job.id} className="rounded-xl bg-card p-6 border border-border hover:shadow-lg transition-shadow">
                  <div className="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                    <div>
                      <div className="flex items-center gap-2 mb-2">
                        <h3 className="font-display text-xl font-semibold text-foreground">
                          {job.title}
                        </h3>
                        <Badge variant={job.type === 'internship' ? 'secondary' : 'default'}>
                          {job.type}
                        </Badge>
                      </div>
                      <p className="text-muted-foreground">{job.description}</p>
                      <div className="mt-3 flex flex-wrap items-center gap-4 text-sm text-muted-foreground">
                        <span className="flex items-center gap-1">
                          <Building className="h-4 w-4" />
                          {job.department}
                        </span>
                        <span className="flex items-center gap-1">
                          <Calendar className="h-4 w-4" />
                          Deadline: {format(job.deadline, 'MMM d, yyyy')}
                        </span>
                      </div>
                    </div>
                    <Link to={`/careers/${job.id}`}>
                      <Button className="whitespace-nowrap">
                        Apply Now
                        <ArrowRight className="ml-2 h-4 w-4" />
                      </Button>
                    </Link>
                  </div>
                </div>
              ))}
            </div>
          ) : (
            <div className="py-12 text-center rounded-xl bg-muted">
              <Briefcase className="mx-auto h-12 w-12 text-muted-foreground" />
              <p className="mt-4 text-muted-foreground">No open positions at the moment. Check back soon!</p>
            </div>
          )}
        </div>

        {/* Other Opportunities */}
        <div className="grid gap-6 md:grid-cols-2 mt-12">
          <div className="rounded-xl bg-card p-6 border border-border">
            <h3 className="font-display text-lg font-semibold text-foreground">Internship Program</h3>
            <p className="mt-2 text-sm text-muted-foreground">
              Our internship program offers hands-on experience in journalism, digital media, and editorial operations.
            </p>
          </div>
          <div className="rounded-xl bg-card p-6 border border-border">
            <h3 className="font-display text-lg font-semibold text-foreground">Freelance Contributors</h3>
            <p className="mt-2 text-sm text-muted-foreground">
              We're always looking for talented freelance writers and contributors. Submit your work samples.
            </p>
          </div>
        </div>
      </div>
    </Layout>
  );
};

export default CareersPage;

--- FILE END: src\pages\CareersPage.tsx ---


--- FILE START: src\pages\CategoryPage.tsx ---
import { useParams } from 'react-router-dom';
import { useState, useEffect } from 'react';
import { Layout } from '@/components/layout/Layout';
import { categories } from '@/data/mockData';
import { getArticles } from '@/lib/articleService';
import { Article, Category } from '@/types/news';
import { ArticleCard } from '@/components/news/ArticleCard';
import { ArticleCardSkeleton } from '@/components/ui/skeletons';
import { PaginationControls } from '@/components/ui/pagination-controls';
import { usePagination } from '@/hooks/usePagination';

const ITEMS_PER_PAGE = 9;

const CategoryPage = () => {
  const { categoryId } = useParams<{ categoryId: string }>();
  const [isInitialLoading, setIsInitialLoading] = useState(true);
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  const category = categories.find(c => c.id === categoryId);
  const categoryArticles = articlesList.filter(a => a.category === categoryId as Category);

  useEffect(() => {
    setArticlesList(getArticles());
  }, []);

  const {
    currentItems,
    currentPage,
    totalPages,
    goToPage,
    isLoading: isPaginationLoading
  } = usePagination({
    items: categoryArticles,
    itemsPerPage: ITEMS_PER_PAGE
  });

  // Simulate initial loading state
  useEffect(() => {
    setIsInitialLoading(true);
    const timer = setTimeout(() => setIsInitialLoading(false), 800);
    return () => clearTimeout(timer);
  }, [categoryId]);

  // Scroll to top when page changes
  useEffect(() => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, [currentPage]);

  if (!category) {
    return (
      <Layout>
        <div className="container mx-auto px-4 py-16 text-center">
          <h1 className="font-display text-3xl font-bold text-foreground">Category Not Found</h1>
        </div>
      </Layout>
    );
  }

  const isLoading = isInitialLoading || isPaginationLoading;

  return (
    <Layout>
      <div className="bg-primary py-6 md:py-8 mb-6">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-2xl font-bold text-primary-foreground md:text-3xl">
            {category.name}
          </h1>
          <p className="mt-1 text-sm text-primary-foreground/80">{category.description}</p>
          {categoryArticles.length > 0 && (
            <p className="mt-2 text-xs text-primary-foreground/60">
              {categoryArticles.length} articles â€¢ Page {currentPage} of {totalPages}
            </p>
          )}
        </div>
      </div>

      <div className="container mx-auto px-4 pb-12">
        {isLoading ? (
          <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {Array.from({ length: ITEMS_PER_PAGE }).map((_, i) => (
              <ArticleCardSkeleton key={i} />
            ))}
          </div>
        ) : currentItems.length > 0 ? (
          <>
            <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
              {currentItems.map((article) => (
                <ArticleCard key={article.id} article={article} />
              ))}
            </div>

            <PaginationControls
              currentPage={currentPage}
              totalPages={totalPages}
              onPageChange={goToPage}
              isLoading={isPaginationLoading}
              className="mt-8"
            />
          </>
        ) : (
          <div className="py-16 text-center">
            <p className="text-muted-foreground">No articles in this category yet.</p>
          </div>
        )}
      </div>
    </Layout>
  );
};

export default CategoryPage;

--- FILE END: src\pages\CategoryPage.tsx ---


--- FILE START: src\pages\ContactPage.tsx ---
import { Layout } from '@/components/layout/Layout';
import { Button } from '@/components/ui/button';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Mail, MapPin, Phone, Send } from 'lucide-react';
import { contactInfoData } from '@/data/siteContactData';

const ContactPage = () => {
  const contacts = contactInfoData.filter(c => c.isVisible && c.showOnContactPage).sort((a, b) => a.order - b.order);
  
  const emailContacts = contacts.filter(c => c.type === 'email');
  const phoneContacts = contacts.filter(c => c.type === 'phone');
  const addressContacts = contacts.filter(c => c.type === 'address');

  return (
    <Layout>
      {/* Hero */}
      <div className="bg-primary py-16">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-3xl font-bold text-primary-foreground md:text-4xl">
            Contact Us
          </h1>
          <p className="mt-4 text-primary-foreground/80">
            We'd love to hear from you. Get in touch with our team.
          </p>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        <div className="grid gap-8 lg:grid-cols-3">
          {/* Contact Info */}
          <div className="space-y-6">
            {/* Email Contacts */}
            {emailContacts.length > 0 && (
              <div className="rounded-xl bg-card p-6 border border-border">
                <div className="flex items-start gap-4">
                  <div className="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10">
                    <Mail className="h-5 w-5 text-primary" />
                  </div>
                  <div>
                    <h3 className="font-semibold text-foreground">Email</h3>
                    {emailContacts.map((contact) => (
                      <div key={contact.id} className="mt-1">
                        <p className="text-xs text-muted-foreground/70">{contact.label}</p>
                        <a 
                          href={`mailto:${contact.value}`}
                          className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                        >
                          {contact.value}
                        </a>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {/* Phone Contacts */}
            {phoneContacts.length > 0 && (
              <div className="rounded-xl bg-card p-6 border border-border">
                <div className="flex items-start gap-4">
                  <div className="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10">
                    <Phone className="h-5 w-5 text-primary" />
                  </div>
                  <div>
                    <h3 className="font-semibold text-foreground">Phone</h3>
                    {phoneContacts.map((contact) => (
                      <div key={contact.id} className="mt-1">
                        <p className="text-xs text-muted-foreground/70">{contact.label}</p>
                        <a 
                          href={`tel:${contact.value.replace(/\D/g, '')}`}
                          className="text-sm text-muted-foreground hover:text-foreground transition-colors"
                        >
                          {contact.value}
                        </a>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {/* Address Contacts */}
            {addressContacts.length > 0 && (
              <div className="rounded-xl bg-card p-6 border border-border">
                <div className="flex items-start gap-4">
                  <div className="flex h-10 w-10 items-center justify-center rounded-full bg-primary/10">
                    <MapPin className="h-5 w-5 text-primary" />
                  </div>
                  <div>
                    <h3 className="font-semibold text-foreground">Address</h3>
                    {addressContacts.map((contact) => (
                      <div key={contact.id} className="mt-1">
                        <p className="text-xs text-muted-foreground/70">{contact.label}</p>
                        <p className="text-sm text-muted-foreground whitespace-pre-line">
                          {contact.value}
                        </p>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}
          </div>

          {/* Contact Form */}
          <div className="lg:col-span-2">
            <div className="rounded-xl bg-card p-8 border border-border">
              <h2 className="font-display text-2xl font-bold text-foreground mb-6">
                Send us a Message
              </h2>
              <form className="space-y-6">
                <div className="grid gap-4 sm:grid-cols-2">
                  <div className="space-y-2">
                    <Label htmlFor="name">Full Name</Label>
                    <Input id="name" placeholder="John Doe" />
                  </div>
                  <div className="space-y-2">
                    <Label htmlFor="email">Email</Label>
                    <Input id="email" type="email" placeholder="john@example.com" />
                  </div>
                </div>
                <div className="space-y-2">
                  <Label htmlFor="subject">Subject</Label>
                  <Input id="subject" placeholder="How can we help?" />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="message">Message</Label>
                  <Textarea
                    id="message"
                    placeholder="Your message..."
                    rows={6}
                  />
                </div>
                <Button type="submit" className="w-full sm:w-auto">
                  <Send className="mr-2 h-4 w-4" />
                  Send Message
                </Button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </Layout>
  );
};

export default ContactPage;

--- FILE END: src\pages\ContactPage.tsx ---


--- FILE START: src\pages\Index.tsx ---
import { useState, useEffect } from 'react';
import { Layout } from '@/components/layout/Layout';
import { BreakingNewsTicker } from '@/components/news/BreakingNewsTicker';
import { HeroSection } from '@/components/news/HeroSection';
import { LatestNews } from '@/components/news/LatestNews';
import { CategorySection } from '@/components/news/CategorySection';
import { TrendingSidebar } from '@/components/news/TrendingSidebar';
import { EditorialSection } from '@/components/news/EditorialSection';
import { VideoSection } from '@/components/news/VideoSection';
import { NewsletterSignup } from '@/components/news/NewsletterSignup';
import { InternshipBanner } from '@/components/news/InternshipBanner';
import { HomepageComments } from '@/components/news/HomepageComments';
import { getArticles } from '@/lib/articleService';
import { ArticleCard } from '@/components/news/ArticleCard';
import { Article } from '@/types/news';

const Index = () => {
  const [currentArticles, setCurrentArticles] = useState<Article[]>([]);

  const fetchArticles = () => {
    setCurrentArticles(getArticles());
  };

  useEffect(() => {
    fetchArticles();

    // Listen for updates from other tabs/admin panel
    window.addEventListener('articlesUpdated', fetchArticles);
    return () => window.removeEventListener('articlesUpdated', fetchArticles);
  }, []);

  return (
    <Layout>
      <BreakingNewsTicker />
      <HeroSection />

      {/* Video Stories Section */}
      <VideoSection />

      <section className="py-8">
        <div className="container mx-auto px-4">
          <div className="grid gap-8 lg:grid-cols-3">
            {/* Main Content */}
            <div className="lg:col-span-2">
              <h2 className="mb-6 font-display text-xl font-bold text-foreground md:text-2xl border-b-2 border-primary pb-2">
                Latest Stories
              </h2>
              <div className="grid gap-4 sm:grid-cols-2">
                {currentArticles.slice(0, 6).map((article) => (
                  <ArticleCard key={article.id} article={article} />
                ))}
              </div>
            </div>

            {/* Sidebar */}
            <div className="space-y-6">
              <TrendingSidebar />
              <NewsletterSignup />
            </div>
          </div>
        </div>
      </section>

      {/* Reader Comments Section */}
      <HomepageComments />

      {/* Internship Banner */}
      <InternshipBanner />

      <CategorySection category="untold-stories" title="Untold Stories" />

      {/* Sports Section */}
      <CategorySection category="sports" title="Sports" />

      {/* Entertainment Section */}
      <CategorySection category="entertainment" title="Entertainment" />

      <LatestNews />
      <CategorySection category="technology" title="Technology" />
      <CategorySection category="economy" title="Economy & Business" />

      {/* Editorial Section */}
      <EditorialSection />
    </Layout>
  );
};

export default Index;

--- FILE END: src\pages\Index.tsx ---


--- FILE START: src\pages\InternshipPage.tsx ---
import { useState, useRef } from 'react';
import { Layout } from '@/components/layout/Layout';
import { Button } from '@/components/ui/button';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Label } from '@/components/ui/label';
import { Badge } from '@/components/ui/badge';
import {
  GraduationCap,
  Users,
  Award,
  Briefcase,
  Globe,
  Heart,
  CheckCircle,
  BookOpen,
  Mic,
  Camera,
  Edit3,
  TrendingUp,
  Upload,
  FileText,
  X,
  Star,
  Target,
  Lightbulb
} from 'lucide-react';
import { toast } from 'sonner';
import {
  defaultBenefits,
  defaultDepartments,
  defaultFAQs,
  defaultPageContent,
  type InternshipBenefit,
  type InternshipDepartment,
  type InternshipFAQ,
  type InternshipPageContent
} from '@/data/internshipData';
import { saveApplication } from '@/lib/internshipService';

// Icon component mapper
const IconComponent = ({ iconName, className }: { iconName: string; className?: string }) => {
  const icons: Record<string, React.ComponentType<{ className?: string }>> = {
    BookOpen,
    Users,
    Globe,
    Award,
    TrendingUp,
    Heart,
    Edit3,
    Camera,
    Mic,
    Briefcase,
    GraduationCap,
    Star,
    Target,
    Lightbulb
  };

  const Icon = icons[iconName] || BookOpen;
  return <Icon className={className} />;
};

// Accepted file types
const ACCEPTED_FILE_TYPES = '.pdf,.doc,.docx,.jpg,.jpeg,.png';
const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB

const InternshipPage = () => {
  // In production, these would come from the database via Cloud
  const [benefits] = useState<InternshipBenefit[]>(defaultBenefits);
  const [departments] = useState<InternshipDepartment[]>(defaultDepartments);
  const [faqs] = useState<InternshipFAQ[]>(defaultFAQs);
  const [pageContent] = useState<InternshipPageContent>(defaultPageContent);

  const [formData, setFormData] = useState({
    fullName: '',
    email: '',
    phone: '',
    university: '',
    department: '',
    portfolio: '',
    coverLetter: ''
  });
  const [cvFile, setCvFile] = useState<File | null>(null);
  const [isSubmitting, setIsSubmitting] = useState(false);
  const fileInputRef = useRef<HTMLInputElement>(null);

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({ ...prev, [name]: value }));
  };

  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    if (file) {
      // Validate file size
      if (file.size > MAX_FILE_SIZE) {
        toast.error('File size must be less than 10MB');
        return;
      }

      // Validate file type
      const validTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'image/jpeg', 'image/png'];
      if (!validTypes.includes(file.type)) {
        toast.error('Please upload a PDF, DOC, DOCX, JPG, or PNG file');
        return;
      }

      setCvFile(file);
      toast.success(`File "${file.name}" selected`);
    }
  };

  const removeFile = () => {
    setCvFile(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);

    // Simulate network delay
    await new Promise(resolve => setTimeout(resolve, 1000));

    try {
      saveApplication({
        fullName: formData.fullName,
        email: formData.email,
        phone: formData.phone,
        university: formData.university,
        department: formData.department,
        portfolio: formData.portfolio,
        coverLetter: formData.coverLetter,
        cvFileName: cvFile ? cvFile.name : 'unknown.pdf'
      });

      toast.success('Application submitted successfully! We will contact you soon.');

      // Reset form
      setFormData({
        fullName: '',
        email: '',
        phone: '',
        university: '',
        department: '',
        portfolio: '',
        coverLetter: ''
      });
      setCvFile(null);
      if (fileInputRef.current) {
        fileInputRef.current.value = '';
      }
    } catch (error) {
      toast.error('Failed to submit application. Please try again.');
      console.error(error);
    } finally {
      setIsSubmitting(false);
    }
  };

  return (
    <Layout>
      {/* Hero Section */}
      <div className="bg-gradient-to-br from-primary via-primary to-primary/80 py-16 md:py-24">
        <div className="container mx-auto px-4 text-center">
          <Badge className="mb-4 bg-accent text-accent-foreground">{pageContent.heroSubtitle}</Badge>
          <h1 className="font-display text-3xl font-bold text-primary-foreground md:text-5xl">
            {pageContent.heroTitle}
          </h1>
          <p className="mx-auto mt-4 max-w-2xl text-lg text-primary-foreground/80">
            {pageContent.heroDescription}
          </p>
          <div className="mt-8 flex flex-wrap justify-center gap-4">
            <div className="flex items-center gap-2 rounded-full bg-primary-foreground/10 px-4 py-2 text-primary-foreground">
              <GraduationCap className="h-5 w-5" />
              <span className="text-sm font-medium">3-6 Month Programs</span>
            </div>
            <div className="flex items-center gap-2 rounded-full bg-primary-foreground/10 px-4 py-2 text-primary-foreground">
              <Briefcase className="h-5 w-5" />
              <span className="text-sm font-medium">Remote & On-site Options</span>
            </div>
          </div>
        </div>
      </div>

      {/* Why Join Section */}
      <section className="py-16 bg-muted/30">
        <div className="container mx-auto px-4">
          <h2 className="text-center font-display text-2xl font-bold text-foreground md:text-3xl mb-4">
            {pageContent.whyJoinTitle}
          </h2>
          <p className="text-center text-muted-foreground mb-12 max-w-2xl mx-auto">
            {pageContent.whyJoinDescription}
          </p>

          <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
            {benefits.sort((a, b) => a.order - b.order).map((benefit) => (
              <Card key={benefit.id} className="bg-card border-border hover:shadow-lg transition-shadow">
                <CardHeader>
                  <div className="h-12 w-12 rounded-lg bg-primary/10 flex items-center justify-center mb-3">
                    <IconComponent iconName={benefit.iconName} className="h-6 w-6 text-primary" />
                  </div>
                  <CardTitle className="text-lg">{benefit.title}</CardTitle>
                </CardHeader>
                <CardContent>
                  <CardDescription>{benefit.description}</CardDescription>
                </CardContent>
              </Card>
            ))}
          </div>
        </div>
      </section>

      {/* Departments Section */}
      <section className="py-16">
        <div className="container mx-auto px-4">
          <h2 className="text-center font-display text-2xl font-bold text-foreground md:text-3xl mb-12">
            {pageContent.departmentsTitle}
          </h2>

          <div className="grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
            {departments.sort((a, b) => a.order - b.order).map((dept) => (
              <div key={dept.id} className="text-center p-6 rounded-xl bg-muted/50 hover:bg-muted transition-colors">
                <div className="h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center mx-auto mb-4">
                  <IconComponent iconName={dept.iconName} className="h-8 w-8 text-primary" />
                </div>
                <h3 className="font-display font-semibold text-foreground mb-2">{dept.name}</h3>
                <p className="text-sm text-muted-foreground">{dept.description}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Application Form */}
      <section className="py-16 bg-muted/30" id="apply">
        <div className="container mx-auto px-4">
          <div className="max-w-2xl mx-auto">
            <h2 className="text-center font-display text-2xl font-bold text-foreground md:text-3xl mb-4">
              {pageContent.formTitle}
            </h2>
            <p className="text-center text-muted-foreground mb-8">
              {pageContent.formDescription}
            </p>

            <Card className="bg-card border-border">
              <CardContent className="p-6 md:p-8">
                <form onSubmit={handleSubmit} className="space-y-6">
                  <div className="grid gap-4 sm:grid-cols-2">
                    <div className="space-y-2">
                      <Label htmlFor="fullName">Full Name *</Label>
                      <Input
                        id="fullName"
                        name="fullName"
                        value={formData.fullName}
                        onChange={handleInputChange}
                        placeholder="Enter your full name"
                        required
                      />
                    </div>
                    <div className="space-y-2">
                      <Label htmlFor="email">Email Address *</Label>
                      <Input
                        id="email"
                        name="email"
                        type="email"
                        value={formData.email}
                        onChange={handleInputChange}
                        placeholder="your@email.com"
                        required
                      />
                    </div>
                  </div>

                  <div className="grid gap-4 sm:grid-cols-2">
                    <div className="space-y-2">
                      <Label htmlFor="phone">Phone Number *</Label>
                      <Input
                        id="phone"
                        name="phone"
                        type="tel"
                        value={formData.phone}
                        onChange={handleInputChange}
                        placeholder="Your phone number"
                        required
                      />
                    </div>
                    <div className="space-y-2">
                      <Label htmlFor="university">University/Institution *</Label>
                      <Input
                        id="university"
                        name="university"
                        value={formData.university}
                        onChange={handleInputChange}
                        placeholder="Your university name"
                        required
                      />
                    </div>
                  </div>

                  <div className="space-y-2">
                    <Label htmlFor="department">Preferred Department *</Label>
                    <select
                      id="department"
                      name="department"
                      value={formData.department}
                      onChange={handleInputChange}
                      className="w-full rounded-md border border-input bg-background px-3 py-2 text-foreground focus:outline-none focus:ring-2 focus:ring-ring"
                      required
                    >
                      <option value="">Select a department</option>
                      {departments.map((dept) => (
                        <option key={dept.id} value={dept.name.toLowerCase()}>
                          {dept.name}
                        </option>
                      ))}
                    </select>
                  </div>

                  {/* CV/Resume Upload */}
                  <div className="space-y-2">
                    <Label htmlFor="cv">Upload CV/Resume *</Label>
                    <p className="text-xs text-muted-foreground mb-2">
                      Accepted formats: PDF, DOC, DOCX, JPG, PNG (Max 10MB)
                    </p>

                    {!cvFile ? (
                      <div
                        className="border-2 border-dashed border-border rounded-lg p-6 text-center cursor-pointer hover:border-primary/50 hover:bg-muted/50 transition-colors"
                        onClick={() => fileInputRef.current?.click()}
                      >
                        <Upload className="h-8 w-8 mx-auto text-muted-foreground mb-2" />
                        <p className="text-sm text-muted-foreground">
                          Click to upload or drag and drop
                        </p>
                        <input
                          ref={fileInputRef}
                          id="cv"
                          type="file"
                          accept={ACCEPTED_FILE_TYPES}
                          onChange={handleFileChange}
                          className="hidden"
                        />
                      </div>
                    ) : (
                      <div className="flex items-center justify-between p-4 rounded-lg bg-muted border border-border">
                        <div className="flex items-center gap-3">
                          <FileText className="h-8 w-8 text-primary" />
                          <div>
                            <p className="text-sm font-medium text-foreground">{cvFile.name}</p>
                            <p className="text-xs text-muted-foreground">
                              {(cvFile.size / 1024 / 1024).toFixed(2)} MB
                            </p>
                          </div>
                        </div>
                        <Button
                          type="button"
                          variant="ghost"
                          size="icon"
                          onClick={removeFile}
                          className="text-muted-foreground hover:text-destructive"
                        >
                          <X className="h-5 w-5" />
                        </Button>
                      </div>
                    )}
                  </div>

                  <div className="space-y-2">
                    <Label htmlFor="portfolio">Portfolio/LinkedIn URL (Optional)</Label>
                    <Input
                      id="portfolio"
                      name="portfolio"
                      type="url"
                      value={formData.portfolio}
                      onChange={handleInputChange}
                      placeholder="https://your-portfolio.com"
                    />
                  </div>

                  <div className="space-y-2">
                    <Label htmlFor="coverLetter">Why do you want to intern at TruthLens? *</Label>
                    <Textarea
                      id="coverLetter"
                      name="coverLetter"
                      value={formData.coverLetter}
                      onChange={handleInputChange}
                      placeholder="Tell us about yourself and why you're interested in journalism..."
                      rows={5}
                      required
                    />
                  </div>

                  <Button
                    type="submit"
                    className="w-full"
                    size="lg"
                    disabled={isSubmitting || !cvFile}
                  >
                    {isSubmitting ? 'Submitting...' : 'Submit Application'}
                    <CheckCircle className="ml-2 h-5 w-5" />
                  </Button>

                  {!cvFile && (
                    <p className="text-xs text-center text-muted-foreground">
                      Please upload your CV/Resume to submit the application
                    </p>
                  )}
                </form>
              </CardContent>
            </Card>
          </div>
        </div>
      </section>

      {/* FAQ Section */}
      <section className="py-16">
        <div className="container mx-auto px-4">
          <h2 className="text-center font-display text-2xl font-bold text-foreground md:text-3xl mb-12">
            {pageContent.faqTitle}
          </h2>

          <div className="max-w-3xl mx-auto space-y-4">
            {faqs.sort((a, b) => a.order - b.order).map((faq) => (
              <div key={faq.id} className="rounded-xl bg-card border border-border p-6">
                <h3 className="font-display font-semibold text-foreground mb-2">{faq.question}</h3>
                <p className="text-muted-foreground">{faq.answer}</p>
              </div>
            ))}
          </div>
        </div>
      </section>
    </Layout>
  );
};

export default InternshipPage;

--- FILE END: src\pages\InternshipPage.tsx ---


--- FILE START: src\pages\NotFound.tsx ---
import { useLocation } from "react-router-dom";
import { useEffect } from "react";

const NotFound = () => {
  const location = useLocation();

  useEffect(() => {
    console.error("404 Error: User attempted to access non-existent route:", location.pathname);
  }, [location.pathname]);

  return (
    <div className="flex min-h-screen items-center justify-center bg-muted">
      <div className="text-center">
        <h1 className="mb-4 text-4xl font-bold">404</h1>
        <p className="mb-4 text-xl text-muted-foreground">Oops! Page not found</p>
        <a href="/" className="text-primary underline hover:text-primary/90">
          Return to Home
        </a>
      </div>
    </div>
  );
};

export default NotFound;

--- FILE END: src\pages\NotFound.tsx ---


--- FILE START: src\pages\PrivacyPage.tsx ---
import { Layout } from '@/components/layout/Layout';

const PrivacyPage = () => {
  return (
    <Layout>
      <div className="bg-primary py-12">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-3xl font-bold text-primary-foreground">Privacy Policy</h1>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        <div className="mx-auto max-w-3xl prose dark:prose-invert">
          <p className="text-muted-foreground">Last updated: January 2026</p>
          
          <h2>Information We Collect</h2>
          <p>
            We collect information you provide directly to us, such as when you subscribe to our 
            newsletter, contact us, or apply for a position.
          </p>

          <h2>How We Use Your Information</h2>
          <p>
            We use the information we collect to provide, maintain, and improve our services, 
            send you newsletters and updates, and respond to your inquiries.
          </p>

          <h2>Information Sharing</h2>
          <p>
            We do not sell, trade, or otherwise transfer your personal information to outside 
            parties except as required by law.
          </p>

          <h2>Data Security</h2>
          <p>
            We implement appropriate security measures to protect your personal information 
            against unauthorized access, alteration, disclosure, or destruction.
          </p>

          <h2>Cookies</h2>
          <p>
            We use cookies to enhance your experience on our website. You can choose to disable 
            cookies through your browser settings.
          </p>

          <h2>Contact Us</h2>
          <p>
            If you have any questions about this Privacy Policy, please contact us at 
            privacy@truthlens.com.
          </p>
        </div>
      </div>
    </Layout>
  );
};

export default PrivacyPage;

--- FILE END: src\pages\PrivacyPage.tsx ---


--- FILE START: src\pages\SearchPage.tsx ---
import { useState, useMemo, useEffect } from 'react';
import { useSearchParams, Link } from 'react-router-dom';
import { Layout } from '@/components/layout/Layout';
import { getArticles } from '@/lib/articleService';
import { Article } from '@/types/news';
import { ArticleCard } from '@/components/news/ArticleCard';
import { ArticleCardSkeleton } from '@/components/ui/skeletons';
import { PaginationControls } from '@/components/ui/pagination-controls';
import { usePagination } from '@/hooks/usePagination';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select';
import { Search, X, Filter, Calendar, SortAsc, SortDesc } from 'lucide-react';
import { format, isAfter, isBefore, parseISO, startOfDay, endOfDay, subDays, subMonths, subYears } from 'date-fns';

const categories = [
  'all',
  'national',
  'international',
  'economy',
  'technology',
  'environment',
  'culture',
  'society',
  'sports',
  'entertainment',
  'untold-stories',
  'editorial',
];

const dateRanges = [
  { value: 'all', label: 'All Time' },
  { value: 'today', label: 'Today' },
  { value: 'week', label: 'Past Week' },
  { value: 'month', label: 'Past Month' },
  { value: 'year', label: 'Past Year' },
];

const sortOptions = [
  { value: 'newest', label: 'Newest First' },
  { value: 'oldest', label: 'Oldest First' },
  { value: 'popular', label: 'Most Popular' },
  { value: 'az', label: 'A-Z' },
  { value: 'za', label: 'Z-A' },
];

const SearchPage = () => {
  const [searchParams, setSearchParams] = useSearchParams();
  const initialQuery = searchParams.get('q') || '';

  const [query, setQuery] = useState(initialQuery);
  const [category, setCategory] = useState('all');
  const [dateRange, setDateRange] = useState('all');
  const [sortBy, setSortBy] = useState('newest');
  const [showFilters, setShowFilters] = useState(false);
  const [isLoading, setIsLoading] = useState(true);
  const [articlesList, setArticlesList] = useState<Article[]>([]);

  // Load articles
  useEffect(() => {
    setArticlesList(getArticles());
  }, []);

  // Simulate loading state on filter changes
  useEffect(() => {
    setIsLoading(true);
    const timer = setTimeout(() => setIsLoading(false), 600);
    return () => clearTimeout(timer);
  }, [category, dateRange, sortBy, articlesList]); // Re-run when articles load

  const filteredArticles = useMemo(() => {
    let results = [...articlesList];

    // Text search
    if (query.trim()) {
      const searchTerm = query.toLowerCase();
      results = results.filter(article =>
        article.title.toLowerCase().includes(searchTerm) ||
        article.excerpt.toLowerCase().includes(searchTerm) ||
        article.content.toLowerCase().includes(searchTerm) ||
        article.category.toLowerCase().includes(searchTerm) ||
        article.author.name.toLowerCase().includes(searchTerm) ||
        article.tags.some(tag => tag.toLowerCase().includes(searchTerm))
      );
    }

    // Category filter
    if (category !== 'all') {
      results = results.filter(article => article.category === category);
    }

    // Date range filter
    const now = new Date();
    if (dateRange === 'today') {
      const start = startOfDay(now);
      results = results.filter(article => isAfter(article.publishedAt, start));
    } else if (dateRange === 'week') {
      const start = subDays(now, 7);
      results = results.filter(article => isAfter(article.publishedAt, start));
    } else if (dateRange === 'month') {
      const start = subMonths(now, 1);
      results = results.filter(article => isAfter(article.publishedAt, start));
    } else if (dateRange === 'year') {
      const start = subYears(now, 1);
      results = results.filter(article => isAfter(article.publishedAt, start));
    }

    // Sorting
    switch (sortBy) {
      case 'newest':
        results.sort((a, b) => b.publishedAt.getTime() - a.publishedAt.getTime());
        break;
      case 'oldest':
        results.sort((a, b) => a.publishedAt.getTime() - b.publishedAt.getTime());
        break;
      case 'popular':
        results.sort((a, b) => b.views - a.views);
        break;
      case 'az':
        results.sort((a, b) => a.title.localeCompare(b.title));
        break;
      case 'za':
        results.sort((a, b) => b.title.localeCompare(a.title));
        break;
    }

    return results;
  }, [query, category, dateRange, sortBy]);

  const ITEMS_PER_PAGE = 9;

  const {
    currentItems,
    currentPage,
    totalPages,
    goToPage,
    isLoading: isPaginationLoading
  } = usePagination({
    items: filteredArticles,
    itemsPerPage: ITEMS_PER_PAGE
  });

  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault();
    setSearchParams(query ? { q: query } : {});
  };

  const clearFilters = () => {
    setQuery('');
    setCategory('all');
    setDateRange('all');
    setSortBy('newest');
    setSearchParams({});
  };

  const hasActiveFilters = query || category !== 'all' || dateRange !== 'all' || sortBy !== 'newest';
  const showLoading = isLoading || isPaginationLoading;

  return (
    <Layout>
      <div className="container mx-auto px-4 py-8">
        {/* Search Header */}
        <div className="mb-8">
          <h1 className="font-display text-2xl md:text-3xl font-bold text-foreground mb-4">
            Search Articles
          </h1>

          {/* Search Form */}
          <form onSubmit={handleSearch} className="flex gap-2">
            <div className="relative flex-1">
              <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground" />
              <Input
                type="search"
                value={query}
                onChange={(e) => setQuery(e.target.value)}
                placeholder="Search articles, topics, authors..."
                className="pl-10 h-12"
              />
            </div>
            <Button type="submit" size="lg" className="h-12">
              Search
            </Button>
            <Button
              type="button"
              variant="outline"
              size="lg"
              className="h-12 lg:hidden"
              onClick={() => setShowFilters(!showFilters)}
            >
              <Filter className="h-5 w-5" />
            </Button>
          </form>
        </div>

        <div className="flex flex-col lg:flex-row gap-6">
          {/* Filters Sidebar */}
          <aside className={`lg:w-64 flex-shrink-0 ${showFilters ? 'block' : 'hidden lg:block'}`}>
            <div className="bg-card rounded-xl border border-border p-4 space-y-6 sticky top-24">
              <div className="flex items-center justify-between">
                <h2 className="font-semibold text-foreground flex items-center gap-2">
                  <Filter className="h-4 w-4" />
                  Filters
                </h2>
                {hasActiveFilters && (
                  <Button variant="ghost" size="sm" onClick={clearFilters} className="text-xs">
                    Clear all
                  </Button>
                )}
              </div>

              {/* Category Filter */}
              <div className="space-y-2">
                <label className="text-sm font-medium text-foreground flex items-center gap-2">
                  Category
                </label>
                <Select value={category} onValueChange={setCategory}>
                  <SelectTrigger className="bg-background">
                    <SelectValue placeholder="Select category" />
                  </SelectTrigger>
                  <SelectContent className="bg-background border border-border z-50">
                    {categories.map((cat) => (
                      <SelectItem key={cat} value={cat}>
                        {cat === 'all' ? 'All Categories' : cat.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {/* Date Range Filter */}
              <div className="space-y-2">
                <label className="text-sm font-medium text-foreground flex items-center gap-2">
                  <Calendar className="h-4 w-4" />
                  Date Range
                </label>
                <Select value={dateRange} onValueChange={setDateRange}>
                  <SelectTrigger className="bg-background">
                    <SelectValue placeholder="Select date range" />
                  </SelectTrigger>
                  <SelectContent className="bg-background border border-border z-50">
                    {dateRanges.map((range) => (
                      <SelectItem key={range.value} value={range.value}>
                        {range.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {/* Sort Options */}
              <div className="space-y-2">
                <label className="text-sm font-medium text-foreground flex items-center gap-2">
                  <SortAsc className="h-4 w-4" />
                  Sort By
                </label>
                <Select value={sortBy} onValueChange={setSortBy}>
                  <SelectTrigger className="bg-background">
                    <SelectValue placeholder="Sort by" />
                  </SelectTrigger>
                  <SelectContent className="bg-background border border-border z-50">
                    {sortOptions.map((option) => (
                      <SelectItem key={option.value} value={option.value}>
                        {option.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>

              {/* Active Filters Display */}
              {hasActiveFilters && (
                <div className="pt-4 border-t border-border">
                  <p className="text-xs text-muted-foreground mb-2">Active filters:</p>
                  <div className="flex flex-wrap gap-1">
                    {query && (
                      <Badge variant="secondary" className="text-xs gap-1">
                        "{query}"
                        <X className="h-3 w-3 cursor-pointer" onClick={() => setQuery('')} />
                      </Badge>
                    )}
                    {category !== 'all' && (
                      <Badge variant="secondary" className="text-xs gap-1">
                        {category.replace('-', ' ')}
                        <X className="h-3 w-3 cursor-pointer" onClick={() => setCategory('all')} />
                      </Badge>
                    )}
                    {dateRange !== 'all' && (
                      <Badge variant="secondary" className="text-xs gap-1">
                        {dateRanges.find(d => d.value === dateRange)?.label}
                        <X className="h-3 w-3 cursor-pointer" onClick={() => setDateRange('all')} />
                      </Badge>
                    )}
                  </div>
                </div>
              )}
            </div>
          </aside>

          {/* Results */}
          <main className="flex-1">
            {/* Results Count */}
            <div className="flex items-center justify-between mb-4">
              <p className="text-sm text-muted-foreground">
                {filteredArticles.length} {filteredArticles.length === 1 ? 'result' : 'results'} found
                {query && <span> for "<span className="text-foreground font-medium">{query}</span>"</span>}
                {totalPages > 1 && <span className="ml-1">â€¢ Page {currentPage} of {totalPages}</span>}
              </p>

              {/* Mobile Sort */}
              <div className="lg:hidden">
                <Select value={sortBy} onValueChange={setSortBy}>
                  <SelectTrigger className="w-36 h-8 text-xs bg-background">
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent className="bg-background border border-border z-50">
                    {sortOptions.map((option) => (
                      <SelectItem key={option.value} value={option.value} className="text-xs">
                        {option.label}
                      </SelectItem>
                    ))}
                  </SelectContent>
                </Select>
              </div>
            </div>

            {/* Results Grid */}
            {showLoading ? (
              <div className="grid gap-6 sm:grid-cols-2 xl:grid-cols-3">
                {Array.from({ length: ITEMS_PER_PAGE }).map((_, i) => (
                  <ArticleCardSkeleton key={i} />
                ))}
              </div>
            ) : currentItems.length > 0 ? (
              <>
                <div className="grid gap-6 sm:grid-cols-2 xl:grid-cols-3">
                  {currentItems.map((article) => (
                    <ArticleCard key={article.id} article={article} />
                  ))}
                </div>

                <PaginationControls
                  currentPage={currentPage}
                  totalPages={totalPages}
                  onPageChange={goToPage}
                  isLoading={isPaginationLoading}
                  className="mt-8"
                />
              </>
            ) : (
              <div className="text-center py-16 bg-card rounded-xl border border-border">
                <Search className="h-12 w-12 text-muted-foreground mx-auto mb-4" />
                <h3 className="text-lg font-semibold text-foreground mb-2">No results found</h3>
                <p className="text-muted-foreground mb-4">
                  Try adjusting your search or filters to find what you're looking for.
                </p>
                <Button variant="outline" onClick={clearFilters}>
                  Clear all filters
                </Button>
              </div>
            )}
          </main>
        </div>
      </div>
    </Layout>
  );
};

export default SearchPage;
--- FILE END: src\pages\SearchPage.tsx ---


--- FILE START: src\pages\TeamPage.tsx ---
import { useState, useEffect } from 'react';
import { Layout } from '@/components/layout/Layout';
import { getTeamMembers } from '@/lib/teamService';
import { TeamMember } from '@/types/team';
import { Card, CardContent } from '@/components/ui/card';
import { Mail, Linkedin, Twitter } from 'lucide-react';

const TeamPage = () => {
    const [members, setMembers] = useState<TeamMember[]>([]);

    useEffect(() => {
        setMembers(getTeamMembers().sort((a, b) => a.order - b.order));
    }, []);

    return (
        <Layout>
            <div className="bg-muted/30 py-16 sm:py-24">
                <div className="container mx-auto px-4 text-center">
                    <h1 className="font-display text-4xl sm:text-5xl font-bold mb-4 text-foreground">Our Team</h1>
                    <p className="text-xl text-muted-foreground max-w-2xl mx-auto">
                        Meet the dedicated journalists, editors, and creators behind TruthLens who are committed to delivering unbiased, high-quality news.
                    </p>
                </div>
            </div>

            <div className="container mx-auto px-4 py-16">
                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                    {members.map((member) => (
                        <Card key={member.id} className="overflow-hidden border-border group hover:shadow-lg transition-all duration-300">
                            <div className="aspect-[4/3] overflow-hidden">
                                <img
                                    src={member.image}
                                    alt={member.name}
                                    className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                                />
                            </div>
                            <CardContent className="p-6 text-center">
                                <h3 className="font-display text-xl font-bold mb-1">{member.name}</h3>
                                <p className="text-primary font-medium text-sm mb-4 uppercase tracking-wider">{member.role}</p>
                                <p className="text-muted-foreground text-sm leading-relaxed mb-6">
                                    {member.bio}
                                </p>
                                <div className="flex justify-center gap-4">
                                    {member.email && (
                                        <a href={`mailto:${member.email}`} className="text-muted-foreground hover:text-primary transition-colors">
                                            <Mail className="h-4 w-4" />
                                            <span className="sr-only">Email</span>
                                        </a>
                                    )}
                                    {member.twitter && (
                                        <a href={member.twitter} target="_blank" rel="noopener noreferrer" className="text-muted-foreground hover:text-primary transition-colors">
                                            <Twitter className="h-4 w-4" />
                                            <span className="sr-only">Twitter</span>
                                        </a>
                                    )}
                                    {member.linkedin && (
                                        <a href={member.linkedin} target="_blank" rel="noopener noreferrer" className="text-muted-foreground hover:text-primary transition-colors">
                                            <Linkedin className="h-4 w-4" />
                                            <span className="sr-only">LinkedIn</span>
                                        </a>
                                    )}
                                </div>
                            </CardContent>
                        </Card>
                    ))}
                </div>
            </div>
        </Layout>
    );
};

export default TeamPage;

--- FILE END: src\pages\TeamPage.tsx ---


--- FILE START: src\pages\TermsPage.tsx ---
import { Layout } from '@/components/layout/Layout';

const TermsPage = () => {
  return (
    <Layout>
      <div className="bg-primary py-12">
        <div className="container mx-auto px-4 text-center">
          <h1 className="font-display text-3xl font-bold text-primary-foreground">Terms of Use</h1>
        </div>
      </div>

      <div className="container mx-auto px-4 py-12">
        <div className="mx-auto max-w-3xl prose dark:prose-invert">
          <p className="text-muted-foreground">Last updated: January 2026</p>
          
          <h2>Acceptance of Terms</h2>
          <p>
            By accessing and using the TruthLens website, you accept and agree to be bound by 
            these Terms of Use.
          </p>

          <h2>Use of Content</h2>
          <p>
            All content on this website is protected by copyright. You may not reproduce, 
            distribute, or create derivative works without our express permission.
          </p>

          <h2>User Conduct</h2>
          <p>
            You agree not to use the website for any unlawful purpose or in any way that could 
            damage, disable, or impair the website.
          </p>

          <h2>Comments and Submissions</h2>
          <p>
            You are responsible for any comments or content you submit. We reserve the right 
            to remove any content that violates these terms.
          </p>

          <h2>Disclaimer</h2>
          <p>
            The information provided on this website is for general informational purposes only. 
            We make no warranties about the completeness, reliability, or accuracy of this information.
          </p>

          <h2>Changes to Terms</h2>
          <p>
            We reserve the right to modify these terms at any time. Your continued use of the 
            website constitutes acceptance of any changes.
          </p>

          <h2>Contact Us</h2>
          <p>
            If you have any questions about these Terms of Use, please contact us at 
            legal@truthlens.com.
          </p>
        </div>
      </div>
    </Layout>
  );
};

export default TermsPage;

--- FILE END: src\pages\TermsPage.tsx ---


--- FILE START: src\test\example.test.ts ---
import { describe, it, expect } from "vitest";

describe("example", () => {
  it("should pass", () => {
    expect(true).toBe(true);
  });
});

--- FILE END: src\test\example.test.ts ---


--- FILE START: src\test\setup.ts ---
import "@testing-library/jest-dom";

Object.defineProperty(window, "matchMedia", {
  writable: true,
  value: (query: string) => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: () => {},
    removeListener: () => {},
    addEventListener: () => {},
    removeEventListener: () => {},
    dispatchEvent: () => {},
  }),
});

--- FILE END: src\test\setup.ts ---


--- FILE START: src\types\admin.ts ---
// Admin Role Types
export type AdminRole = 'admin' | 'editor' | 'author' | 'journalist';

export interface AdminUser {
  id: string;
  name: string;
  email: string;
  role: AdminRole;
  avatar?: string;
  isActive: boolean;
  createdAt: Date;
}

// Permission definitions for each role
export interface RolePermissions {
  // Dashboard
  viewFullDashboard: boolean;
  viewOwnStats: boolean;
  
  // Articles
  createArticles: boolean;
  editOwnArticles: boolean;
  editAllArticles: boolean;
  deleteOwnArticles: boolean;
  deleteAllArticles: boolean;
  publishArticles: boolean; // Can directly publish without review
  reviewArticles: boolean;  // Can approve/reject pending articles
  setBreakingNews: boolean;
  setFeatured: boolean;
  
  // Featured & Sections (homepage management)
  manageFeatured: boolean;
  manageSections: boolean;
  
  // Editorial
  manageEditorial: boolean;
  
  // Header Menu
  manageMenu: boolean;
  
  // Comments
  viewAllComments: boolean;
  moderateComments: boolean;
  
  // Contact Info & Site Settings
  manageContactInfo: boolean;
  manageSettings: boolean;
  
  // Categories
  manageCategories: boolean;
  
  // Media
  uploadMedia: boolean;
  viewAllMedia: boolean;
  deleteOwnMedia: boolean;
  deleteAllMedia: boolean;
  
  // Users
  manageUsers: boolean;
  
  // Jobs
  manageJobs: boolean;
}

// Define permissions for each role
export const ROLE_PERMISSIONS: Record<AdminRole, RolePermissions> = {
  admin: {
    viewFullDashboard: true,
    viewOwnStats: true,
    createArticles: true,
    editOwnArticles: true,
    editAllArticles: true,
    deleteOwnArticles: true,
    deleteAllArticles: true,
    publishArticles: true,
    reviewArticles: true,
    setBreakingNews: true,
    setFeatured: true,
    manageFeatured: true,
    manageSections: true,
    manageEditorial: true,
    manageMenu: true,
    viewAllComments: true,
    moderateComments: true,
    manageContactInfo: true,
    manageSettings: true,
    manageCategories: true,
    uploadMedia: true,
    viewAllMedia: true,
    deleteOwnMedia: true,
    deleteAllMedia: true,
    manageUsers: true,
    manageJobs: true,
  },
  editor: {
    viewFullDashboard: true,
    viewOwnStats: true,
    createArticles: true,
    editOwnArticles: true,
    editAllArticles: true,
    deleteOwnArticles: true,
    deleteAllArticles: false,
    publishArticles: true,
    reviewArticles: true,
    setBreakingNews: false,
    setFeatured: false,
    manageFeatured: false,
    manageSections: false,
    manageEditorial: false,
    manageMenu: false,
    viewAllComments: true,
    moderateComments: true,
    manageContactInfo: false,
    manageSettings: false,
    manageCategories: false,
    uploadMedia: true,
    viewAllMedia: true,
    deleteOwnMedia: true,
    deleteAllMedia: false,
    manageUsers: false,
    manageJobs: false,
  },
  author: {
    viewFullDashboard: false,
    viewOwnStats: true,
    createArticles: true,
    editOwnArticles: true,
    editAllArticles: false,
    deleteOwnArticles: true,
    deleteAllArticles: false,
    publishArticles: false, // Must submit for review
    reviewArticles: false,
    setBreakingNews: false,
    setFeatured: false,
    manageFeatured: false,
    manageSections: false,
    manageEditorial: false,
    manageMenu: false,
    viewAllComments: false,
    moderateComments: false,
    manageContactInfo: false,
    manageSettings: false,
    manageCategories: false,
    uploadMedia: true,
    viewAllMedia: false,
    deleteOwnMedia: true,
    deleteAllMedia: false,
    manageUsers: false,
    manageJobs: false,
  },
  journalist: {
    viewFullDashboard: false,
    viewOwnStats: true,
    createArticles: true,
    editOwnArticles: true,
    editAllArticles: false,
    deleteOwnArticles: true,
    deleteAllArticles: false,
    publishArticles: false, // Must submit for review
    reviewArticles: false,
    setBreakingNews: false,
    setFeatured: false,
    manageFeatured: false,
    manageSections: false,
    manageEditorial: false,
    manageMenu: false,
    viewAllComments: false,
    moderateComments: false,
    manageContactInfo: false,
    manageSettings: false,
    manageCategories: false,
    uploadMedia: true,
    viewAllMedia: false,
    deleteOwnMedia: true,
    deleteAllMedia: false,
    manageUsers: false,
    manageJobs: false,
  },
};

// Navigation item configuration with required permissions
export interface AdminNavItem {
  icon: string;
  label: string;
  path: string;
  requiredPermission?: keyof RolePermissions;
  showForRoles?: AdminRole[];
}

// Helper function to check if a role has a specific permission
export const hasPermission = (role: AdminRole, permission: keyof RolePermissions): boolean => {
  return ROLE_PERMISSIONS[role][permission];
};

// Role display names and colors
export const ROLE_DISPLAY: Record<AdminRole, { label: string; color: string }> = {
  admin: { label: 'Administrator', color: 'bg-red-500' },
  editor: { label: 'Editor', color: 'bg-blue-500' },
  author: { label: 'Author', color: 'bg-green-500' },
  journalist: { label: 'Journalist', color: 'bg-purple-500' },
};

--- FILE END: src\types\admin.ts ---


--- FILE START: src\types\news.ts ---
export type Category = 
  | 'national' 
  | 'international' 
  | 'economy' 
  | 'politics' 
  | 'sports' 
  | 'entertainment' 
  | 'technology' 
  | 'editorial' 
  | 'untold-stories';

export interface MenuItem {
  id: string;
  label: string;
  path: string;
  type: 'category' | 'page' | 'external';
  isVisible: boolean;
  order: number;
  highlight?: boolean;
  icon?: string;
  showInMainNav?: boolean; // If true, shows in main nav; if false, shows in "More" dropdown
}

export type UserRole = 'admin' | 'editor' | 'journalist' | 'author' | 'reporter';

export interface AdminUser {
  id: string;
  name: string;
  email: string;
  avatar: string;
  role: UserRole;
  isActive: boolean;
  permissions: string[];
  createdAt: Date;
  lastLogin?: Date;
}

export interface FeaturedSettings {
  breakingNewsIds: string[];
  heroFeaturedIds: string[];
  maxBreakingNews: number;
  maxHeroArticles: number;
  autoSwipeInterval: number;
  breakingAutoSwipe: boolean;
  heroAutoSwipe: boolean;
}

export interface Article {
  id: string;
  title: string;
  slug: string;
  excerpt: string;
  content: string;
  category: Category;
  author: Author;
  featuredImage: string;
  videoUrl?: string;
  hasVideo?: boolean;
  showOnHomepage?: boolean;
  tags: string[];
  isBreaking: boolean;
  isFeatured: boolean;
  status: 'draft' | 'published' | 'scheduled';
  publishedAt: Date;
  createdAt: Date;
  updatedAt: Date;
  views: number;
}

export interface Author {
  id: string;
  name: string;
  email: string;
  avatar: string;
  bio: string;
  role: UserRole;
}

export interface Job {
  id: string;
  title: string;
  department: string;
  type: 'full-time' | 'part-time' | 'internship' | 'freelance' | 'volunteer';
  description: string;
  requirements: string[];
  deadline: Date;
  isOpen: boolean;
  createdAt: Date;
}

export interface JobApplication {
  id: string;
  jobId: string;
  fullName: string;
  email: string;
  phone: string;
  coverLetter: string;
  cvUrl: string;
  photoUrl?: string;
  portfolioUrl?: string;
  status: 'pending' | 'reviewed' | 'shortlisted' | 'rejected';
  submittedAt: Date;
}

export interface NewsletterSubscriber {
  id: string;
  email: string;
  subscribedAt: Date;
  isActive: boolean;
}

export interface SocialMediaLink {
  id: string;
  platform: 'facebook' | 'twitter' | 'instagram' | 'youtube' | 'linkedin' | 'tiktok' | 'whatsapp' | 'telegram';
  url: string;
  isVisible: boolean;
}

export interface SiteSettings {
  siteName: string;
  tagline: string;
  siteDescription: string;
  contactEmail: string;
  socialLinks: SocialMediaLink[];
}

--- FILE END: src\types\news.ts ---


--- FILE START: src\types\team.ts ---
export interface TeamMember {
    id: string;
    name: string;
    role: string;
    image: string;
    bio: string;
    email?: string;
    twitter?: string;
    linkedin?: string;
    order: number;
}

--- FILE END: src\types\team.ts ---


--- FILE START: src\vite-env.d.ts ---
/// <reference types="vite/client" />

--- FILE END: src\vite-env.d.ts ---


--- FILE START: tailwind.config.ts ---
import type { Config } from "tailwindcss";

export default {
  darkMode: ["class"],
  content: ["./pages/**/*.{ts,tsx}", "./components/**/*.{ts,tsx}", "./app/**/*.{ts,tsx}", "./src/**/*.{ts,tsx}"],
  prefix: "",
  theme: {
    container: {
      center: true,
      padding: "2rem",
      screens: {
        "2xl": "1400px",
      },
    },
    extend: {
      colors: {
        border: "hsl(var(--border))",
        input: "hsl(var(--input))",
        ring: "hsl(var(--ring))",
        background: "hsl(var(--background))",
        foreground: "hsl(var(--foreground))",
        primary: {
          DEFAULT: "hsl(var(--primary))",
          foreground: "hsl(var(--primary-foreground))",
        },
        secondary: {
          DEFAULT: "hsl(var(--secondary))",
          foreground: "hsl(var(--secondary-foreground))",
        },
        destructive: {
          DEFAULT: "hsl(var(--destructive))",
          foreground: "hsl(var(--destructive-foreground))",
        },
        muted: {
          DEFAULT: "hsl(var(--muted))",
          foreground: "hsl(var(--muted-foreground))",
        },
        accent: {
          DEFAULT: "hsl(var(--accent))",
          foreground: "hsl(var(--accent-foreground))",
        },
        popover: {
          DEFAULT: "hsl(var(--popover))",
          foreground: "hsl(var(--popover-foreground))",
        },
        card: {
          DEFAULT: "hsl(var(--card))",
          foreground: "hsl(var(--card-foreground))",
        },
        sidebar: {
          DEFAULT: "hsl(var(--sidebar-background))",
          foreground: "hsl(var(--sidebar-foreground))",
          primary: "hsl(var(--sidebar-primary))",
          "primary-foreground": "hsl(var(--sidebar-primary-foreground))",
          accent: "hsl(var(--sidebar-accent))",
          "accent-foreground": "hsl(var(--sidebar-accent-foreground))",
          border: "hsl(var(--sidebar-border))",
          ring: "hsl(var(--sidebar-ring))",
        },
      },
      borderRadius: {
        lg: "var(--radius)",
        md: "calc(var(--radius) - 2px)",
        sm: "calc(var(--radius) - 4px)",
      },
      keyframes: {
        "accordion-down": {
          from: {
            height: "0",
          },
          to: {
            height: "var(--radix-accordion-content-height)",
          },
        },
        "accordion-up": {
          from: {
            height: "var(--radix-accordion-content-height)",
          },
          to: {
            height: "0",
          },
        },
      },
      animation: {
        "accordion-down": "accordion-down 0.2s ease-out",
        "accordion-up": "accordion-up 0.2s ease-out",
      },
    },
  },
  plugins: [require("tailwindcss-animate")],
} satisfies Config;

--- FILE END: tailwind.config.ts ---


--- FILE START: tsconfig.app.json ---
{
  "compilerOptions": {
    "types": ["vitest/globals"],
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": false,
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noImplicitAny": false,
    "noFallthroughCasesInSwitch": false,

    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"]
}

--- FILE END: tsconfig.app.json ---


--- FILE START: tsconfig.json ---
{
  "files": [],
  "references": [{ "path": "./tsconfig.app.json" }, { "path": "./tsconfig.node.json" }],
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    },
    "noImplicitAny": false,
    "noUnusedParameters": false,
    "skipLibCheck": true,
    "allowJs": true,
    "noUnusedLocals": false,
    "strictNullChecks": false
  }
}

--- FILE END: tsconfig.json ---


--- FILE START: tsconfig.node.json ---
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "isolatedModules": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": false,
    "noUnusedParameters": false,
    "noFallthroughCasesInSwitch": true
  },
  "include": ["vite.config.ts"]
}

--- FILE END: tsconfig.node.json ---


--- FILE START: vite.config.ts ---
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react-swc";
import path from "path";
import { componentTagger } from "lovable-tagger";

// https://vitejs.dev/config/
export default defineConfig(({ mode }) => ({
  server: {
    host: "::",
    port: 8080,
    hmr: {
      overlay: false,
    },
  },
  plugins: [react(), mode === "development" && componentTagger()].filter(Boolean),
  resolve: {
    alias: {
      "@": path.resolve(__dirname, "./src"),
    },
  },
}));

--- FILE END: vite.config.ts ---


--- FILE START: vitest.config.ts ---
import { defineConfig } from "vitest/config";
import react from "@vitejs/plugin-react-swc";
import path from "path";

export default defineConfig({
  plugins: [react()],
  test: {
    environment: "jsdom",
    globals: true,
    setupFiles: ["./src/test/setup.ts"],
    include: ["src/**/*.{test,spec}.{ts,tsx}"],
  },
  resolve: {
    alias: { "@": path.resolve(__dirname, "./src") },
  },
});

--- FILE END: vitest.config.ts ---
